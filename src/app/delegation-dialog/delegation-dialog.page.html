<ion-content *ngIf="ready">
  <form [formGroup]="formGroup">
    <ion-list lines="full">
      <ion-item lines="none">
        <ion-col class="ion-no-padding ion-no-margin">
          <h1 [innerHtml]="'delegation-request.header'|translate"></h1> 
          <p [innerHtml]="'delegation-request.intro'|translate"></p> 
        </ion-col>      
      </ion-item>
      <ion-item>
        <ion-label position="floating" color="primary" [innerHtml]="'delegation-request.nickname-label'|translate"></ion-label>
        <ion-input 
          formControlName="nickname" 
          [placeholder]="'delegation-request.nickname-placeholder'|translate"
          type="text">
        </ion-input>
      </ion-item>
      <div class="validation-errors">
        <ng-container *ngFor="let validation of validation_messages.nickname">
          <div class="error-message" 
              *ngIf="formGroup.get('nickname').hasError(validation.type) 
                      && (formGroup.get('nickname').dirty || formGroup.get('nickname').touched)"
              [innerHtml]="validation.message|translate">
          </div>
        </ng-container>
      </div>
      <ng-container *ngIf="can_share">
        <ion-item lines="none">
          <ion-col class="ion-no-padding ion-no-margin">
            <small><p [innerHtml]="'delegation-request.request-options-with-share'|translate"></p></small> 
          </ion-col>      
        </ion-item>
        <ion-item lines="none" class="ion-text-end" text-wrap>
          <ion-button color="primary" slot="end" [disabled]="!formGroup.valid"
              shape="round"
              (click)="share_button_clicked()">
            <span [innerHtml]="'inviteto.share'|translate"></span>&nbsp;
            <ion-icon name="share-social-outline"></ion-icon> <!--TODO: use correct share icon-->
          </ion-button>
        </ion-item>
      </ng-container>
      <ng-container *ngIf="!can_share">
        <ion-item lines="none">
          <ion-col class="ion-no-padding ion-no-margin">
            <small><p [innerHtml]="'delegation-request.request-options-without-share'|translate"></p></small> 
          </ion-col>      
        </ion-item>
      </ng-container>
      <ion-item 
          lines="none" class="ion-text-end" text-wrap>
        <ion-button color="primary" slot="end" [disabled]="!formGroup.valid"
              shape="round" (click)="email_button_clicked($event)">
          <a [href]="mailto_url" target="_top" style="color:inherit;text-decoration:inherit">
            <span [innerHtml]="'delegation-request.compose-email'|translate"></span>&nbsp;
            <ion-icon name="mail-open-outline"></ion-icon> <!--TODO: make icon show in correct size and alignment-->
          </a>
        </ion-button>
      </ion-item>
      <ion-item 
          lines="none" class="ion-text-end" text-wrap>
        <ion-button color="primary" slot="end" [disabled]="!formGroup.valid"
            shape="round"
            (click)="copy_button_clicked()">
          <span [innerHtml]="'delegation-request.copy-link'|translate"></span>&nbsp;
          <ion-icon name="copy-outline"></ion-icon> <!--TODO: use correct clipboard icon-->
        </ion-button>
      </ion-item>
    </ion-list>
  </form>
</ion-content>
