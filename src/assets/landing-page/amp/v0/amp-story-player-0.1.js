;
(self.AMP=self.AMP||[]).push({m:0,v:"2203281422000",n:"amp-story-player",ev:"0.1",l:!0,f:function(t,i){!function(){function i(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}function n(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return i(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var e=0;return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r;function e(){return r||(r=Promise.resolve(void 0))}var s=function(){var t=this;this.promise=new Promise((function(i,n){t.resolve=i,t.reject=n}))};function o(t,i){return(o=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,i){if(i&&("object"===h(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}var u=Array.isArray;function l(t,i){for(var n=0;n<t.length;n++)if(i(t[n],n,t))return n;return-1}var c=Object.prototype;function p(t){var i=Object.create(null);return t&&Object.assign(i,t),i}function m(t,i){return t}function v(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function d(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?d(Object(n),!0).forEach((function(i){v(t,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))}))}return t}c.hasOwnProperty,c.toString;var g="ase art bmp blp cd5 cit cpt cr2 cut dds dib djvu egt exif gif gpl grf icns ico iff jng jpeg jpg jfif jp2 jps lbm max miff mng msp nitf ota pbm pc1 pc2 pc3 pcf pcx pdn pgm PI1 PI2 PI3 pict pct pnm pns ppm psb psd pdd psp px pxm pxr qfx raw rle sct sgi rgb int bw tga tiff tif vtf xbm xcf xpm 3dv amf ai awg cgm cdr cmx dxf e2d egt eps fs gbr odg svg stl vrml x3d sxd v2d vnd wmf emf art xar png webp jxr hdp wdp cur ecw iff lbm liff nrrd pam pcx pgf sgi rgb rgba bw int inta sid ras sun tga".split(" "),b=function(t){return g.some((function(i){return!!t.endsWith(".".concat(i))}))},w="### #gf $on $tf 0b 8m 8u 12u 15u 64c 075 75 085 85 91 091 096 96 abf acfm acs afm afn afs all amfm apf asf aspf atm auf b30 bco bdf bepf bez bfn bmap bmf bx bzr cbtf cct cef cff cfn cga ch4 cha chm chr chx claf collection compositefont dfont dus dzk eft eot etx euf f00 f06 f08 f09 f3f f10 f11 f12 f13 f16 fd fdb ff ffil flf fli fn3 fnb fnn fnt fnta fo1 fo2 fog fon font fonts fot frf frs ftm fxr fyi gdr gf gft glf glif glyphs gsf gxf hbf ice intellifont lepf lft lwfn mcf mcf mfd mfm mft mgf mmm mrf mtf mvec nlq ntf odttf ofm okf otf pcf pcf pfa pfb pfm pft phf pk pkt prs pss qbf qfn r8? scr sfd sff sfi sfl sfn sfo sfp sfs sif snf spd spritefont sui suit svg sxs t1c t2 tb1 tb2 tdf tfm tmf tpf ttc tte ttf type ufm ufo usl usp us? vf vf1 vf3 vfb vfm vfont vlw vmf vnf w30 wfn wnf woff woff2 xfc xfn xfr xft zfi zsu _v".split(" "),x=function(t){return w.some((function(i){return!!t.endsWith(".".concat(i))}))},k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function j(t,i){if(i=i.split(":")[0],!(t=+t))return!1;switch(i){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}var S=Object.prototype.hasOwnProperty;function E(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}var A={stringify:function(t,i){i=i||"";var n,r=[];for(e in"string"!=typeof i&&(i="?"),t)if(S.call(t,e)){(n=t[e])||null!=n&&!isNaN(n)||(n="");var e=encodeURIComponent(e);n=encodeURIComponent(n),null!==e&&null!==n&&r.push(e+"="+n)}return r.length?i+r.join("&"):""},parse:function(t){for(var i,n=/([^=?&]+)=?([^&]*)/g,r={};i=n.exec(t);){var e=E(i[1]);i=E(i[2]),null===e||null===i||e in r||(r[e]=i)}return r}},O=/^[A-Za-z][A-Za-z0-9+-.]*:[\\/]+/,z=/^([a-z][a-z0-9.+-]*:)?([\\/]{1,})?([\S\s]*)/i,M=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/;function P(t){return(t||"").toString().replace(M,"")}var R=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],T={hash:1,query:1};function q(t){var i=("undefined"!=typeof window?window:void 0!==k?k:"undefined"!=typeof self?self:{}).location||{};t=t||i,i={};var n,r=h(t);if("blob:"===t.protocol)i=new F(unescape(t.pathname),{});else if("string"===r)for(n in i=new F(t,{}),T)delete i[n];else if("object"===r){for(n in t)n in T||(i[n]=t[n]);void 0===i.slashes&&(i.slashes=O.test(t.href))}return i}function I(t){return t=P(t),{protocol:(t=z.exec(t))[1]?t[1].toLowerCase():"",slashes:!!(t[2]&&2<=t[2].length),rest:t[2]&&1===t[2].length?"/"+t[3]:t[3]}}function F(t,i,n){if(t=P(t),!(this instanceof F))return new F(t,i,n);var r=R.slice(),e=h(i),s=0;"object"!==e&&"string"!==e&&(n=i,i=null),n&&"function"!=typeof n&&(n=A.parse),i=q(i);var o=I(t||"");for(e=!o.protocol&&!o.slashes,this.slashes=o.slashes||e&&i.slashes,this.protocol=o.protocol||i.protocol||"",t=o.rest,o.slashes||(r[3]=[/(.*)/,"pathname"]);s<r.length;s++)if("function"==typeof(o=r[s]))t=o(t);else{var a=o[0],f=o[1];a!=a?this[f]=t:"string"==typeof a?~(a=t.indexOf(a))&&("number"==typeof o[2]?(this[f]=t.slice(0,a),t=t.slice(a+o[2])):(this[f]=t.slice(a),t=t.slice(0,a))):(a=a.exec(t))&&(this[f]=a[1],t=t.slice(0,a.index)),this[f]=this[f]||e&&o[3]&&i[f]||"",o[4]&&(this[f]=this[f].toLowerCase())}if(n&&(this.query=n(this.query)),e&&i.slashes&&"/"!==this.pathname.charAt(0)&&(""!==this.pathname||""!==i.pathname)){if(t=this.pathname,i=i.pathname,""!==t){for(n=(i=(i||"/").split("/").slice(0,-1).concat(t.split("/")))[(t=i.length)-1],r=!1,s=0;t--;)"."===i[t]?i.splice(t,1):".."===i[t]?(i.splice(t,1),s++):s&&(0===t&&(r=!0),i.splice(t,1),s--);r&&i.unshift(""),"."!==n&&".."!==n||i.push(""),i=i.join("/")}this.pathname=i}"/"!==this.pathname.charAt(0)&&this.hostname&&(this.pathname="/"+this.pathname),j(this.port,this.protocol)||(this.host=this.hostname,this.port=""),this.username=this.password="",this.auth&&(o=this.auth.split(":"),this.username=o[0]||"",this.password=o[1]||""),this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null",this.href=this.toString()}F.prototype={set:function(t,i,n){switch(t){case"query":"string"==typeof i&&i.length&&(i=(n||A.parse)(i)),this[t]=i;break;case"port":this[t]=i,j(i,this.protocol)?i&&(this.host=this.hostname+":"+i):(this.host=this.hostname,this[t]="");break;case"hostname":this[t]=i,this.port&&(i+=":"+this.port),this.host=i;break;case"host":this[t]=i,/:\d+$/.test(i)?(i=i.split(":"),this.port=i.pop(),this.hostname=i.join(":")):(this.hostname=i,this.port="");break;case"protocol":this.protocol=i.toLowerCase(),this.slashes=!n;break;case"pathname":case"hash":i?(n="pathname"===t?"/":"#",this[t]=i.charAt(0)!==n?n+i:i):this[t]=i;break;default:this[t]=i}for(t=0;t<R.length;t++)(i=R[t])[4]&&(this[i[1]]=this[i[1]].toLowerCase());return this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null",this.href=this.toString(),this},toString:function(t){t&&"function"==typeof t||(t=A.stringify);var i=this.protocol;return i&&":"!==i.charAt(i.length-1)&&(i+=":"),i+=this.slashes?"//":"",this.username&&(i+=this.username,this.password&&(i+=":"+this.password),i+="@"),i+=this.host+this.pathname,(t="object"===h(this.query)?t(this.query):this.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),this.hash&&(i+=this.hash),i}},F.extractProtocol=I,F.location=q,F.trimLeft=P,F.qs=A;var _=F,C=/^xn--/,D=/[^\0-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,U={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Y=Math.floor,L=String.fromCharCode;function $(t){throw new RangeError(U[t])}function H(t,i){var n=t.split("@"),r="";1<n.length&&(r=n[0]+"@",t=n[1]),n=[];for(var e=(t=(t=t.replace(N,".")).split(".")).length;e--;)n[e]=i(t[e]);return r+(i=n).join(".")}function X(t,i){return t+22+75*(26>t)-((0!=i)<<5)}function Z(t,i,n){var r=0;for(t=n?Y(t/700):t>>1,t+=Y(t/i);455<t;r+=36)t=Y(t/35);return Y(r+36*t/(t+38))}var B=function(t){return H(t,(function(t){return C.test(t)?function(t){var i=[],n=t.length,r=0,e=128,s=72,o=t.lastIndexOf("-");0>o&&(o=0);for(var a=0;a<o;++a)128<=t.charCodeAt(a)&&$("not-basic"),i.push(t.charCodeAt(a));for(o=0<o?o+1:0;o<n;){a=r;for(var h=1,f=36;;f+=36){o>=n&&$("invalid-input");var u=t.charCodeAt(o++);(36<=(u=10>u-48?u-22:26>u-65?u-65:26>u-97?u-97:36)||u>Y((2147483647-r)/h))&&$("overflow"),r+=u*h;var l=f<=s?1:f>=s+26?26:f-s;if(u<l)break;h>Y(2147483647/(u=36-l))&&$("overflow"),h*=u}s=Z(r-a,u=i.length+1,0==a),Y(r/u)>2147483647-e&&$("overflow"),e+=Y(r/u),r%=u,i.splice(r++,0,e)}return String.fromCodePoint.apply(String,i)}(t.slice(4).toLowerCase()):t}))},G=/[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]/,J=/[\u0591-\u06ef\u06fa-\u07ff\u200f\ufb1d-\ufdff\ufe70-\ufefc]/;function V(t){if(K(t=new _(t).hostname))var i=!1;else i=B(t),i=63>=t.length&&!(G.test(i)&&J.test(i))&&-1!=t.indexOf(".");return i?63<(i=function(t){return H(t,(function(t){return D.test(t)?"xn--"+function(t){for(var i,r=[],e=(t=function(t){for(var i=[],n=0,r=t.length;n<r;){var e=t.charCodeAt(n++);if(55296<=e&&56319>=e&&n<r){var s=t.charCodeAt(n++);56320==(64512&s)?i.push(((1023&e)<<10)+(1023&s)+65536):(i.push(e),n--)}else i.push(e)}return i}(t)).length,s=128,o=0,a=72,h=n(t,!0);!(i=h()).done;){var f=i.value;128>f&&r.push(L(f))}var u=f=r.length;for(f&&r.push("-");u<e;){for(var l,c=2147483647,p=n(t,!0);!(l=p()).done;){var m=l.value;m>=s&&m<c&&(c=m)}var v=u+1;c-s>Y((2147483647-o)/v)&&$("overflow"),o+=(c-s)*v,s=c;for(var d,y=n(t,!0);!(d=y()).done;){var g=d.value;if(g<s&&2147483647<++o&&$("overflow"),g==s){var b=o;for(c=36;;c+=36){var w=c<=a?1:c>=a+26?26:c-a;if(b<w)break;b-=w;var x=36-w;r.push(L(X(w+b%x,0))),b=Y(b/x)}r.push(L(X(b,0))),a=Z(o,v,u==f),o=0,++u}}++o,++s}return r.join("")}(t):t}))}(i=(i=(i=B(t)).split("-").join("--")).split(".").join("-")).toLowerCase()).length?W(t):(K(i)&&(i="0-".concat(i,"-0")),Promise.resolve(i)):W(t)}function W(t){return(t="undefined"!=typeof window?function(t){return t=new TextEncoder("utf-8").encode(t),window.crypto.subtle.digest("SHA-256",t).then((function(t){var i=[];t=new DataView(t);for(var n=0;n<t.byteLength;n+=4){var r=("00000000"+t.getUint32(n).toString(16)).slice(-8);i.push(r)}return i.join("")}))}(t):void 0).then((function(t){return function(t){var i=[];t.match(/.{1,2}/g).forEach((function(t,n){i[n]=parseInt(t,16)}));var n=i.length%5,r=Math.floor(i.length/5);if(t=[],0!=n){for(var e=0;e<5-n;e++)i+="\0";r+=1}for(e=0;e<r;e++)t.push("abcdefghijklmnopqrstuvwxyz234567".charAt(i[5*e]>>3)),t.push("abcdefghijklmnopqrstuvwxyz234567".charAt((7&i[5*e])<<2|i[5*e+1]>>6)),t.push("abcdefghijklmnopqrstuvwxyz234567".charAt((63&i[5*e+1])>>1)),t.push("abcdefghijklmnopqrstuvwxyz234567".charAt((1&i[5*e+1])<<4|i[5*e+2]>>4)),t.push("abcdefghijklmnopqrstuvwxyz234567".charAt((15&i[5*e+2])<<1|i[5*e+3]>>7)),t.push("abcdefghijklmnopqrstuvwxyz234567".charAt((127&i[5*e+3])>>2)),t.push("abcdefghijklmnopqrstuvwxyz234567".charAt((3&i[5*e+3])<<3|i[5*e+4]>>5)),t.push("abcdefghijklmnopqrstuvwxyz234567".charAt(31&i[5*e+4]));for(r=0,1==n?r=6:2==n?r=4:3==n?r=3:4==n&&(r=1),n=0;n<r;n++)t.pop();for(n=0;n<r;n++)t.push("=");return t.join("")}("ffffffffff"+t+"000000").substr(8,Math.ceil(4*t.length/5))}))}function K(t){return"--"==t.slice(2,4)&&"xn"!=t.slice(0,2)}var Q="viewer";function tt(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(t)?"/i":x(t)?"/r":i===Q?"/v":"/c"}var it="amp-viewer-messaging",nt="channelOpen",rt="__AMPHTML__";function et(t){if("string"!=typeof t)return t;if("{"!=t.charAt(0))return null;try{return JSON.parse(t)}catch(t){return null}}var st,ot=function(){function t(t,i,n){this.win_=t,this.origin_=i,this.target_=n}var i=t.prototype;return i.addEventListener=function(t,i){var n=this;this.win_.addEventListener("message",(function(t){t.origin==n.origin_&&t.source==n.target_&&i(t)}))},i.postMessage=function(t){var i="null"===this.origin_?"*":this.origin_;this.target_.postMessage(t,i)},i.start=function(){},t}(),at=function(){function t(t,i,n,r,e){this.win_=t,this.port_=i,this.isWebview_=!!n,this.token_=r||null,this.verifyToken_=!!e,this.requestIdCounter_=0,this.waitingForResponse_={},this.messageHandlers_={},this.defaultHandler_=null,this.port_.addEventListener("message",this.handleMessage_.bind(this)),this.port_.start()}t.initiateHandshakeWithDocument=function(i,n){return new Promise((function(r){var e=setInterval((function(){var s=new MessageChannel,o={app:rt,name:"handshake-poll"};i.postMessage(o,"*",[s.port2]);var a=s.port1;a.addEventListener("message",(function i(s){var o=et(s.data);if(o&&o.app===rt&&o.name===nt){clearInterval(e),a.removeEventListener("message",i);var h=new t(null,a,!1,n,!0);h.sendResponse_(o.requestid,nt,null),r(h)}})),a.start()}),1e3)}))},t.waitForHandshakeFromDocument=function(i,n,r,e,s){return new Promise((function(o){i.addEventListener("message",(function a(h){var f=et(h.data);if(f&&(h.origin==r||s&&s.test(h.origin))&&(!h.source||h.source==n)&&f.app===rt&&f.name===nt){i.removeEventListener("message",a);var u=new t(null,new ot(i,h.origin,n),!1,e,!0);u.sendResponse_(f.requestid,nt,null),o(u)}}))}))};var i=t.prototype;return i.registerHandler=function(t,i){this.messageHandlers_[t]=i},i.unregisterHandler=function(t){delete this.messageHandlers_[t]},i.setDefaultHandler=function(t){this.defaultHandler_=t},i.handleMessage_=function(t){var i=et(t.data);i&&i.app===rt&&(this.token_&&this.verifyToken_&&i.messagingToken!==this.token_?this.logError_(it+": handleMessage_ error: ","invalid token"):"q"===i.type?this.handleRequest_(i):"s"===i.type&&this.handleResponse_(i))},i.sendRequest=function(t,i,n){var r=this,e=++this.requestIdCounter_,s=void 0;return n&&(s=new Promise((function(t,i){r.waitingForResponse_[e]={resolve:t,reject:i}}))),this.sendMessage_({app:rt,requestid:e,type:"q",name:t,data:i,rsvp:n}),s},i.sendResponse_=function(t,i,n){this.sendMessage_({app:rt,requestid:t,type:"s",name:i,data:n})},i.sendResponseError_=function(t,i,n){var r=this.errorToString_(n);this.logError_(it+": sendResponseError_, message name: "+i,r),this.sendMessage_({app:rt,requestid:t,type:"s",name:i,data:null,error:r})},i.sendMessage_=function(t){var i=Object.assign(t,{});this.token_&&!this.verifyToken_&&(i.messagingToken=this.token_),this.port_.postMessage(this.isWebview_?JSON.stringify(i):i)},i.handleRequest_=function(t){var i=this,n=this.messageHandlers_[t.name];if(n||(n=this.defaultHandler_),!n){var r=new Error("Cannot handle request because no default handler is set!");throw r.args=t.name,r}var e=n(t.name,t.data,!!t.rsvp);if(t.rsvp){var s=t.requestid;if(!e)throw this.sendResponseError_(s,t.name,new Error("no response")),new Error("expected response but none given: "+t.name);e.then((function(n){i.sendResponse_(s,t.name,n)}),(function(n){i.sendResponseError_(s,t.name,n)}))}},i.handleResponse_=function(t){var i=t.requestid,n=this.waitingForResponse_[i];n&&(delete this.waitingForResponse_[i],t.error?(this.logError_(it+": handleResponse_ error: ",t.error),n.reject(new Error("Request ".concat(t.name," failed: ").concat(t.error)))):n.resolve(t.data))},i.logError_=function(t,i){if(this.win_){var n="amp-messaging-error-logger: "+t;n+=" data: "+this.errorToString_(i),this.win_.viewerState=n}},i.errorToString_=function(t){return t?t.message?t.message:String(t):"unknown error"},t}(),ht="visible",ft="inactive";function ut(t){try{t.focus()}catch(t){}}function lt(t,i,n){var r=t.hasAttribute(i),e=void 0!==n?n:!r;return e!==r&&(e?t.setAttribute(i,""):t.removeAttribute(i)),e}var ct=["Webkit","webkit","Moz","moz","ms","O","o"];function pt(t,i,n,r,e){var s=function(t,i,n){if(i.startsWith("--"))return i;st||(st=p());var r=st[i];if(!r||n){if(r=i,void 0===t[i]){var e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(i),s=function(t,i){for(var n=0;n<ct.length;n++){var r=ct[n]+i;if(void 0!==t[r])return r}return""}(t,e);void 0!==t[s]&&(r=s)}n||(st[i]=r)}return r}(t.style,i,e);if(s){var o,a=r?n+r:n;t.style.setProperty((o=s.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()})),ct.some((function(t){return o.startsWith(t+"-")}))?"-".concat(o):o),a)}}function mt(t,i){for(var n in i)pt(t,n,i[n])}function vt(t,i){for(var n=0;n<i.length;n++)pt(t,i[n],null)}var dt,yt=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function gt(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return decodeURIComponent(t)}catch(t){return i}}function bt(t){var i,n=p();if(!t)return n;for(;i=yt.exec(t);){var r=gt(i[1],i[1]),e=i[2]?gt(i[2].replace(/\+/g," "),i[2]):"";n[r]=e}return n}function wt(t,i,n){var r=0,e=null;function s(s){e=null,r=t.setTimeout(o,n),i.apply(null,s)}function o(){r=0,e&&s(e)}return function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];r?e=i:s(i)}}var xt=self.AMP_CONFIG||{},kt=("string"==typeof xt.thirdPartyFrameRegex?new RegExp(xt.thirdPartyFrameRegex):xt.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,jt=("string"==typeof xt.cdnProxyRegex?new RegExp(xt.cdnProxyRegex):xt.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function St(t){if(!self.document||!self.document.head)return null;if(self.location&&jt.test(self.location.origin))return null;var i=self.document.head.querySelector('meta[name="'.concat(t,'"]'));return i&&i.getAttribute("content")||null}var Et={thirdParty:xt.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:xt.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:kt,cdn:xt.cdnUrl||St("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:jt,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:xt.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:xt.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:xt.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:xt.geoApiUrl||St("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var At=self.__AMP_LOG;function Ot(t,i,n,r){var e={detail:n};if(Object.assign(e,r),"function"==typeof t.CustomEvent)return new t.CustomEvent(i,e);var s=t.document.createEvent("CustomEvent");return s.initCustomEvent(i,!!e.bubbles,!!e.cancelable,n),s}function zt(t,i,n,r){var e=n,s=function(t,i,n,r){var e=t,s=n,o=function(t){try{return s(t)}catch(t){var i,n;throw null===(i=(n=self).__AMP_REPORT_ERROR)||void 0===i||i.call(n,t),t}},a=function(){if(void 0!==dt)return dt;dt=!1;try{var t={get capture(){return dt=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return dt}(),h=!(null==r||!r.capture);return e.addEventListener(i,o,a?r:h),function(){null==e||e.removeEventListener(i,o,a?r:h),s=null,e=null,o=null}}(t,i,(function(t){try{e(t)}finally{e=null,s()}}),r);return s}var Mt,Pt,Rt=function(){function t(t,i,n){this.t=t,this.Gn=i,this.sm=n,this.om=null,this.am()}var i=t.prototype;return i.am=function(){this.t.IntersectionObserver&&this.t===this.t.parent?this.hm():this.um()},i.hm=function(){var t=this,i=new this.t.IntersectionObserver((function(n){n.forEach((function(n){n.isIntersecting&&(t.sm(),i.unobserve(t.Gn))}))}));i.observe(this.Gn)},i.um=function(){this.om=wt(this.t,this.fm.bind(this),500),this.t.addEventListener("scroll",this.om),this.fm(this.Gn)},i.fm=function(){var t=this.Gn.getBoundingClientRect().top;this.t.innerHeight>t&&(this.sm(),this.t.removeEventListener("scroll",this.om))},t}(),Tt=function(){function t(t){this.t=t,this.lm={startY:0,lastDelta:0,touchStartTimeMs:null,touchEndTimeMs:null,touchMoveTimeMs:null},this.pm={startY:0,isRunning:!1,acceleration:1,speedLimit:.3,startTimeMs:null,maxTimeBetweenSwipesMs:250,moveTimeThresholdMs:100,durationMs:null,meetsDeltaYThreshold:!1,deltaYThresholdPx:5,deltaY:null,offsetThresholdPx:30,offsetPx:null,multiplier:1}}var i=t.prototype;return i.onTouchStart=function(t,i){this.lm.startY=i,this.lm.touchStartTimeMs=t,this.pm.startY=this.t.scrollY,this.pm.isRunning&&this.lm.touchEndTimeMs-this.lm.touchStartTimeMs<this.pm.maxTimeBetweenSwipesMs?this.pm.multiplier+=this.pm.acceleration:this.pm.multiplier=1,this.pm.isRunning=!1},i.onTouchMove=function(t,i){this.pm.acceleration=Math.abs(this.pm.deltaY/(t-this.lm.touchMoveTimeMs)),this.lm.touchMoveTimeMs=t,wt(this.t,this.vm.bind(this,i),50)()},i.vm=function(t){this.pm.deltaY=t-this.lm.startY,this.pm.meetsDeltaYThreshold=Math.abs(this.pm.deltaY)>this.pm.deltaYThresholdPx,this.pm.meetsDeltaYThreshold&&this.t.scrollBy(0,-this.pm.deltaY)},i.onTouchEnd=function(t){var i=this;if(this.lm.touchEndTimeMs=t,this.pm.meetsDeltaYThreshold){var n=this.lm.touchEndTimeMs-this.lm.touchMoveTimeMs;this.pm.offsetPx=this.dm(),n<this.pm.moveTimeThresholdMs&&Math.abs(this.pm.offsetPx)>this.pm.offsetThresholdPx&&(this.pm.durationMs=1.2*this.t.innerHeight,this.pm.isRunning=!0,requestAnimationFrame((function(t){i.pm.startTimeMs=t,i.pm.startY=i.t.scrollY,i.ym(t)}))),this.pm.multiplier=1,this.lm.startY=0,this.pm.deltaY=0}},i.dm=function(){var t=this.t.innerHeight*this.pm.speedLimit,i=Math.pow(this.pm.acceleration,2)*this.t.innerHeight;return(i=Math.min(t,i))*(this.pm.deltaY>0?-this.pm.multiplier:this.pm.multiplier)},i.ym=function(t){var i=t-this.pm.startTimeMs;if(!(i>this.pm.durationMs)){var n=this.gm(i/this.pm.durationMs)*this.pm.offsetPx,r=this.pm.startY+n;this.pm.isRunning?(this.t.scroll(0,r),requestAnimationFrame(this.ym.bind(this))):cancelAnimationFrame(requestAnimationFrame(this.ym.bind(this)))}},i.gm=function(t){return 1- --t*t*t*t},t}(),qt=function(){function t(t){this.St=t,this.It=0,this.Ct=0,this.Ot=p()}var i=t.prototype;return i.has=function(t){return!!this.Ot[t]},i.get=function(t){var i=this.Ot[t];if(i)return i.access=++this.Ct,i.payload},i.put=function(t,i){this.has(t)||this.It++,this.Ot[t]={payload:i,access:this.Ct},this.Rt()},i.Rt=function(){if(!(this.It<=this.St)){var t,i=this.Ot,n=this.Ct+1;for(var r in i){var e=i[r].access;e<n&&(n=e,t=r)}void 0!==t&&(delete i[t],this.It--)}},t}();function It(t,i){return Mt||(Mt=self.document.createElement("a"),Pt=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new qt(100))),Ft(Mt,t,i?null:Pt)}function Ft(t,i,n){if(n&&n.has(i))return n.get(i);t.href=i,t.protocol||(t.href=t.href);var r,e={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname),("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)&&(e.port="",e.host=e.hostname),r=t.origin&&"null"!=t.origin?t.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href,e.origin=r;var s=e;return n&&n.put(i,s),s}function _t(t,i){return function(t,i,n){if(!i)return t;var r=t.split("#",2),e=r[0].split("?",2);return e[0]+(e[1]?"?".concat(e[1],"&").concat(i):"?".concat(i))+(r[1]?"#".concat(r[1]):"")}(t,Ct(i))}function Ct(t){var i,n,r,e=[];for(var s in t){var o=t[s];if(null!=o){o=u(r=o)?r:[r];for(var a=0;a<o.length;a++)e.push((i=s,n=o[a],"".concat(encodeURIComponent(i),"=").concat(encodeURIComponent(n))))}}return e.join("&")}function Dt(t){var i=t.indexOf("#");return-1==i?t:t.substring(0,i)}function Nt(t){var i=t.indexOf("#");return-1==i?"":t.substring(i)}function Ut(t){return Et.cdnProxyRegex.test(function(t){return"string"==typeof t?It(t):t}(t).origin)}function Yt(t){var i=t.indexOf("?");if(-1==i)return t;var n=Nt(t);return t.substring(0,i)+n}new Set(["c","v","a","ad"]);var Lt="i-amphtml-story-player-loading",$t="i-amphtml-story-player-loaded",Ht="i-amphtml-story-player-error",Xt=["cdn.ampproject.org","www.bing-amp.com"],Zt=["allow-top-navigation"],Bt="amp-story-player-hide-button",Gt="PAGE_ATTACHMENT_STATE",Jt="UI_STATE",Vt="MUTED_STATE",Wt="CURRENT_PAGE_ID",Kt="i-amphtml-story-player-no-navigation-transition",Qt="amp-story-player",ti="amp-story-player-dev",ii=function(){function t(t,i){return this.t=t,this.Gn=i,this.Yd=t.document,this.bm=this.Yd.createElement("a"),this.wm=[],this.nm=null,this.xm=0,this.km=0,this.jm=null,this.Sm=null,this.Am=null,this.lm={startX:0,startY:0,lastX:0,isSwipeX:null},this.Em=null,this.Mm=new s,this.Om(),this.Pm=new Tt(t),this.zm=!0,this.Tm=null,this.Im=null,this.Rm=null,this.Gn}var i=t.prototype;return i.Om=function(){this.Gn.buildPlayer=this.buildPlayer.bind(this),this.Gn.layoutPlayer=this.layoutPlayer.bind(this),this.Gn.getElement=this.getElement.bind(this),this.Gn.getStories=this.getStories.bind(this),this.Gn.load=this.load.bind(this),this.Gn.show=this.show.bind(this),this.Gn.add=this.add.bind(this),this.Gn.play=this.play.bind(this),this.Gn.pause=this.pause.bind(this),this.Gn.go=this.go.bind(this),this.Gn.mute=this.mute.bind(this),this.Gn.unmute=this.unmute.bind(this),this.Gn.getStoryState=this.getStoryState.bind(this),this.Gn.rewind=this.rewind.bind(this)},i.load=function(){if(!this.Gn.isConnected)throw new Error("[".concat(Qt,"] element must be connected to the DOM before calling load()."));if(this.Gn.tm)throw new Error("[".concat(Qt,"] calling load() on an already loaded element."));this.buildPlayer(),this.layoutPlayer()},i.qm=function(t){t.idx=this.wm.length,t.distance=t.idx-this.xm,t.connectedDeferred=new s,this.wm.push(t)},i.add=function(t){if(!(t.length<=0)){if(!Array.isArray(t)||!t.every((function(t){return t&&t.href})))throw new Error('"stories" parameter has the wrong structure');for(var i=this.wm.length,n=0;n<t.length;n++){var r=t[n];this.qm(r),this.Fm(r)}this.tc(i)}},i.play=function(){this.Gn.im||this.layoutPlayer(),this.Cm(!1)},i.pause=function(){this.Cm(!0)},i.Cm=function(t){this.zm=!t;var i=this.wm[this.xm];this.vi(i,t?"paused":ht)},i.getElement=function(){return this.Gn},i.getStories=function(){return this.wm},i.buildPlayer=function(){this.Gn.tm||(this._m(),this.rm(),this.Dm(),this.Nm(),this.Um(),this.Ym(this.wm.length-this.xm-1),this.Lm(),this.$m(),this.Hm(),this.Xm(),this.Zm(),this.Vm(),this.Gn.tm=!0)},i._m=function(){var t,i=this;((t=this.Gn.querySelectorAll("a"))?Array.prototype.slice.call(t):[]).forEach((function(t){var n=t.querySelector("img[data-amp-story-player-poster-img]"),r=n&&n.getAttribute("src"),e={href:t.href,title:t.textContent&&t.textContent.trim()||null,posterImage:t.getAttribute("data-poster-portrait-src")||r};i.qm(e)}))},i.Vm=function(){this.Gn.dispatchEvent(Ot(this.t,"ready",{})),this.Gn.isReady=!0},i.Dm=function(){var t=this;this.wm.forEach((function(i){t.Fm(i)}))},i.rm=function(){this.nm=this.Yd.createElement("div"),this.nm.classList.add("i-amphtml-story-player-main-container");var t=this.Yd.createElement("div");t.classList.add("i-amphtml-fill-content","i-amphtml-story-player-shadow-root-intermediary"),this.Gn.appendChild(t);var i=this.Gn.attachShadow?t.attachShadow({mode:"open"}):t,n=this.Yd.createElement("style");n.textContent=':host{all:initial;color:initial}.story-player-iframe{height:100%;width:100%;-ms-flex:0 0 100%;flex:0 0 100%;border:0;opacity:0;transition:opacity 500ms ease;position:absolute}.i-amphtml-story-player-main-container{height:100%;position:relative;overflow:hidden;transform-style:preserve-3d}.i-amphtml-story-player-loaded .story-player-iframe{opacity:1;transition:transform 200ms cubic-bezier(0.4,0,0.2,1)}.i-amphtml-story-player-no-navigation-transition .story-player-iframe{transition-duration:0.01s}.i-amphtml-story-player-main-container .story-player-iframe[i-amphtml-iframe-position="0"],.i-amphtml-story-player-main-container iframe:first-of-type{transform:translateZ(1px)}.i-amphtml-story-player-main-container .story-player-iframe[i-amphtml-iframe-position="1"],.i-amphtml-story-player-main-container iframe:nth-of-type(2),.i-amphtml-story-player-main-container iframe:nth-of-type(3){transform:translate3d(100%,0,0)}.i-amphtml-story-player-main-container .story-player-iframe[i-amphtml-iframe-position="-1"]{transform:translate3d(-100%,0,0)}.amp-story-player-exit-control-button{position:absolute;height:48px;width:48px;background-repeat:no-repeat;background-position:50%;margin-top:7px;background-size:28px;border:0px;background-color:transparent;outline:transparent;cursor:pointer;z-index:1}.amp-story-player-close-button{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" fill="%23FFF"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>\')}.amp-story-player-back-button{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" fill="%23FFF"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>\')}.amp-story-player-hide-button{display:none}.i-amphtml-story-player-panel{--i-amphtml-story-player-panel-ratio:69/116;--i-amphtml-story-player-panel-responsive-margin:max(74px,calc(var(--i-amphtml-story-player-height)*0.0825));--i-amphtml-story-player-panel-height:calc(var(--i-amphtml-story-player-height) - var(--i-amphtml-story-player-panel-responsive-margin)*2);--i-amphtml-story-player-panel-width:calc(var(--i-amphtml-story-player-panel-height)*var(--i-amphtml-story-player-panel-ratio));--i-amphtml-story-player-panel-button-margin:max(10px,calc(50vw - 145px - var(--i-amphtml-story-player-panel-width)/2))}.i-amphtml-story-player-panel.i-amphtml-story-player-panel-medium{--i-amphtml-story-player-panel-responsive-margin:0px;--i-amphtml-story-player-panel-width:calc(var(--i-amphtml-story-player-height)*var(--i-amphtml-story-player-panel-ratio))}.i-amphtml-story-player-panel.i-amphtml-story-player-panel-small{--i-amphtml-story-player-panel-ratio:36/53}.i-amphtml-story-player-panel-next,.i-amphtml-story-player-panel-prev{position:absolute;top:50%;transform:translateY(-50%);width:48px;height:48px;z-index:1;background-color:transparent;border:none;background-position:50%;background-repeat:no-repeat;cursor:pointer;transition:opacity 150ms}.i-amphtml-story-player-panel-next[disabled],.i-amphtml-story-player-panel-prev[disabled]{opacity:.1;cursor:initial}.i-amphtml-story-player-full-bleed-story .i-amphtml-story-player-panel-next,.i-amphtml-story-player-full-bleed-story .i-amphtml-story-player-panel-prev,:not(.i-amphtml-story-player-panel) .i-amphtml-story-player-panel-next,:not(.i-amphtml-story-player-panel) .i-amphtml-story-player-panel-prev{opacity:0;pointer-events:none}.i-amphtml-story-player-panel-next,.i-amphtml-story-player-panel-prev{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="none"><path stroke="%23fff" stroke-linecap="round" stroke-width="1.9" d="M17 29.2V18.8c0-1.2 1.4-2 2.5-1.3l7.5 5.2c1 .6 1 2 0 2.6l-7.5 5.2c-1 .7-2.5 0-2.5-1.3z"/><rect width="1.8" height="15.6" x="30.2" y="16.2" fill="%23fff" rx=".9"/></svg>\')!important}.i-amphtml-story-player-panel-prev{margin-inline-start:calc(var(--i-amphtml-story-player-panel-button-margin));transform:translateY(-50%) rotate(180deg)}.i-amphtml-story-player-panel-next{margin-inline-end:var(--i-amphtml-story-player-panel-button-margin);right:0}[dir=rtl].i-amphtml-story-player-panel-prev{right:0}[dir=rtl].i-amphtml-story-player-panel-next{left:0;transform:translateY(-50%) rotate(180deg)}\n/*# sourceURL=/css/amp-story-player-shadow.css*/',i.appendChild(n),i.insertBefore(this.nm,i.firstElementChild)},i.Nm=function(){var t=this,i=this.Gn.getAttribute("exit-control");if("back-button"===(n=i)||"close-button"===n){var n,r=this.Yd.createElement("button");this.nm.appendChild(r);var e="back-button"===i;r.classList.add(e?"amp-story-player-back-button":"amp-story-player-close-button"),r.classList.add("amp-story-player-exit-control-button"),r.addEventListener("click",(function(){t.Gn.dispatchEvent(Ot(t.t,e?"amp-story-player-back":"amp-story-player-close",{}))}))}},i.Um=function(){if(this.jm)return this.jm;var t=this.Gn.getAttribute("amp-cache");t&&!Xt.includes(t)&&console.error("[".concat(Qt,"]"),"Unsupported cache specified, use one of following: ".concat(Xt));var i,n,r,e=this.Gn.querySelector("script");if(!e)return null;if("SCRIPT"!=(i=e).tagName||"APPLICATION/JSON"!=(null===(n=i.getAttribute("type"))||void 0===n?void 0:n.toUpperCase()))throw new Error('<script> child must have type="application/json"');try{this.jm=(r=e.textContent,JSON.parse(r))}catch(t){console.error("[".concat(Qt,"] "),t)}return this.jm},i.Fm=function(t){var i=this.Yd.createElement("iframe");t.posterImage&&pt(i,"backgroundImage",t.posterImage),i.classList.add("story-player-iframe"),i.setAttribute("allow","autoplay"),function(t){if(t.sandbox&&t.sandbox.supports){for(var i=["allow-top-navigation-by-user-activation","allow-popups-to-escape-sandbox"],n=0;n<i.length;n++){var r=i[n];if(!t.sandbox.supports(r))return void(At.dev||(At.dev=function(t,i){throw new Error("failed to call initLogConstructor")}())).info("3p-frame","Iframe doesn't support %s",r)}t.sandbox=i.join(" ")+" "+["allow-forms","allow-modals","allow-pointer-lock","allow-popups","allow-same-origin","allow-scripts"].join(" ")}}(i),this.Gm(i),this.Jm(i),t.iframe=i},i.Gm=function(t){if(t.sandbox&&t.sandbox.supports&&!(t.sandbox.length<=0))for(var i=0;i<Zt.length;i++){var n=Zt[i];if(!t.sandbox.supports(n))throw new Error("Iframe doesn't support: ".concat(n));t.sandbox.add(n)}},i.Bm=function(t){var i=this,n=t.iframe;t.messagingPromise=new Promise((function(r){i.Wm(t,n).then((function(n){n.setDefaultHandler((function(){return e()})),n.registerHandler("touchstart",(function(t,n){i.Km(n)})),n.registerHandler("touchmove",(function(t,n){i.Qm(n)})),n.registerHandler("touchend",(function(t,n){i.zv(n)})),n.registerHandler("selectDocument",(function(t,n){i.qv(n)})),n.registerHandler("storyContentLoaded",(function(){t.storyContentLoaded=!0})),n.sendRequest("onDocumentState",{"state":Gt},!1),n.sendRequest("onDocumentState",{"state":Wt},!1),n.sendRequest("onDocumentState",{"state":Vt}),n.sendRequest("onDocumentState",{"state":Jt}),n.registerHandler("documentStateUpdate",(function(t,r){i.Fv(r,n)})),i.jm&&i.jm.controls&&(i._v(t.idx),n.sendRequest("customDocumentUI",{"controls":i.jm.controls},!1)),r(n)}),(function(t){console.error("[".concat(Qt,"]"),t)}))}))},i._v=function(t){if(t===this.wm.length-1){var i=l(this.jm.controls,(function(t){return"skip-next"===t.name||"skip-to-next"===t.name}));i>=0&&(this.jm.controls[i].state="disabled")}},i.Wm=function(t,i){var n=this;return this.Dv(t.href).then((function(t){return at.waitForHandshakeFromDocument(n.t,i.contentWindow,n.Uv(t).origin,null,Et.cdnProxyRegex)}))},i.Jm=function(t){var i=this;this.nm.classList.add(Lt),t.onload=function(){i.nm.classList.remove(Lt),i.nm.classList.add($t),i.Gn.classList.add($t)},t.onerror=function(){i.nm.classList.remove(Lt),i.nm.classList.add(Ht),i.Gn.classList.add(Ht)}},i.layoutPlayer=function(){var t=this;if(!this.Gn.im){if(new Rt(this.t,this.Gn,(function(){return t.Mm.resolve()})),this.t.ResizeObserver)new this.t.ResizeObserver((function(i){var n=i[0].contentRect,r=n.height,e=n.width;t.Yv(r,e)})).observe(this.Gn);else{var i=this.Gn.getBoundingClientRect(),n=i.height,r=i.width;this.Yv(n,r)}this.tc(),this.Gn.im=!0}},i.Zm=function(){var t=this;this.Im=this.Yd.createElement("button"),this.Im.classList.add("i-amphtml-story-player-panel-prev"),this.Im.addEventListener("click",(function(){return t.Lv()})),this.Im.setAttribute("aria-label","previous story"),this.nm.appendChild(this.Im),this.Rm=this.Yd.createElement("button"),this.Rm.classList.add("i-amphtml-story-player-panel-next"),this.Rm.addEventListener("click",(function(){return t.eo()})),this.Rm.setAttribute("aria-label","next story"),this.nm.appendChild(this.Rm),this.Hv()},i.Hv=function(){lt(this.Im,"disabled",this.Xv(this.xm-1)&&!this.Am),lt(this.Rm,"disabled",this.Xv(this.xm+1)&&!this.Am)},i.Yv=function(t,i){var n=i/t>.75;this.nm.classList.toggle("i-amphtml-story-player-panel",n),n&&(mt(this.nm,{"--i-amphtml-story-player-height":"".concat(t,"px")}),this.nm.classList.toggle("i-amphtml-story-player-panel-medium",t<756),this.nm.classList.toggle("i-amphtml-story-player-panel-small",t<538))},i.Zv=function(){var t=this.jm.behavior.endpoint;return t?(t=t.replace(/\${offset}/,this.wm.length.toString()),fetch(t,{method:"GET",headers:{Accept:"application/json"}}).then((function(t){return t.json()})).catch((function(t){console.error("[".concat(Qt,"]"),t)}))):(this.Sm=!1,e())},i.show=function(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=this.Vv(t),o=e();return s.idx!==this.xm&&(this.xm=s.idx,o=this.tc(),!1===r.animate&&(this.nm.classList.toggle(Kt,!0),zt(s.iframe,"transitionend",(function(){i.nm.classList.remove(Kt)}))),this.Gv()),null!=n?o.then((function(){return i.Jv(n)})):o},i.mute=function(){var t=this.wm[this.xm];this.Bv(t,!0)},i.unmute=function(){var t=this.wm[this.xm];this.Bv(t,!1)},i.getStoryState=function(t){"page-attachment"===t&&this.Wv()},i.Kv=function(t){var i=Ot(this.t,"navigation",t);this.Gn.dispatchEvent(i)},i.Gv=function(){var t=this,i=this.xm,n=this.wm.length-this.xm-1,r={"index":i,"remaining":n};this.Hv(),this.Qv().then((function(i){return t.Zd(i)})),this.Kv(r),this.Ym(n)},i.Qv=function(){var t=this.wm[this.xm];return new Promise((function(i){t.messagingPromise.then((function(t){t.sendRequest("getDocumentState",{state:Jt},!0).then((function(t){return i(t.value)}))}))}))},i.Zd=function(t){var i=2===t||0===t;this.nm.classList.toggle("i-amphtml-story-player-full-bleed-story",i)},i.Ym=function(t){var i=this;this.jm&&this.jm.behavior&&this.Qd()&&t<=2&&this.Zv().then((function(t){t&&i.add(t)})).catch((function(t){console.error("[".concat(Qt,"]"),t)}))},i.ty=function(t){return t&&t.on&&t.action},i.Qd=function(){if(null!==this.Sm)return this.Sm;var t,i=this.jm.behavior;return this.Sm=this.ty(i)&&"end"===(t=i).on&&"fetch"===t.action&&t.endpoint,this.Sm},i.eo=function(){!this.Am&&this.Xv(this.xm+1)||(this.Am&&this.Xv(this.xm+1)?this.go(1):(this.xm++,this.tc(),this.Gv()))},i.Lv=function(){!this.Am&&this.Xv(this.xm-1)||(this.Am&&this.Xv(this.xm-1)?this.go(-1):(this.xm--,this.tc(),this.Gv()))},i.go=function(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0!==t||0!==n){if(!this.Am&&this.Xv(this.xm+t))throw new Error("Out of Story range.");var s=this.xm+t,o=t>0?this.wm[s%this.wm.length]:this.wm[(s%this.wm.length+this.wm.length)%this.wm.length],a=e();this.xm!==o.idx&&(a=this.show(o.href,null,r)),a.then((function(){i.iy(n)}))}},i.ny=function(t){var i=0===t.distance?0:t.idx>this.xm?1:-1;requestAnimationFrame((function(){var n=t.iframe;vt(n,["transform","transition"]),n.setAttribute("i-amphtml-iframe-position",i)}))},i.sy=function(t){var i,n=this;return this.wm[this.xm].storyContentLoaded?e():0!==t.distance?this.Em.promise:(null===(i=this.Em)||void 0===i||i.reject("[".concat(ti,"] Cancelling previous story load promise.")),this.Em=new s,t.messagingPromise.then((function(i){return i.registerHandler("storyContentLoaded",(function(){t.storyContentLoaded=!0,n.Em.resolve()}))})),e())},i.tc=function(){for(var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.xm,n=[],r=function(r){var e=t.wm[(r+i)%t.wm.length],s=e.distance;if(e.distance=Math.abs(t.xm-e.idx),s<=1&&e.distance>1&&t.ey(e),e.distance<=1&&!e.iframe.isConnected&&t.oy(e),e.distance>1)return"continue";n.push(t.sy(e).then((function(){return t.Dv(e.href)})).then((function(i){t.hy(i,e.iframe.src)||t.uy(e,i)})).then((function(){return t.Mm.promise})).then((function(){0===e.distance&&t.zm&&t.vi(e,ht),0===s&&1===e.distance&&t.vi(e,ft)})).then((function(){t.ny(e),0===e.distance&&ut(e.iframe)})).catch((function(t){t.includes(ti)||console.error("[".concat(Qt,"]"),t)})))},e=0;e<this.wm.length;e++)r(e);return Promise.all(n)},i.oy=function(t){this.nm.appendChild(t.iframe),this.Bm(t),t.connectedDeferred.resolve()},i.ey=function(t){t.storyContentLoaded=!1,t.connectedDeferred=new s,t.iframe.setAttribute("src",""),t.iframe.remove()},i.uy=function(t,i){var n=t.iframe,r=this.Uv(i,"prerender").href;n.setAttribute("src",r),t.title&&n.setAttribute("title",t.title)},i.hy=function(t,i){return!(i.length<=0)&&Dt(Yt(i))===Dt(Yt(t))},i.Dv=function(t){var i=this.Gn.getAttribute("amp-cache");if(!i||!Xt.includes(i))return Promise.resolve(t);if(Ut(t)){var n=It(t);return n.pathname.startsWith("/c/")&&(n.pathname="/v/"+n.pathname.substr(3)),Promise.resolve(n.toString())}return function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new _(i),e=tt(r.pathname,n);return e+="https:"===r.protocol?"/s/":"/",i.endsWith("/")||(r.pathname=r.pathname.replace(/\/$/,"")),V(r.toString()).then((function(n){var s=new _(i);return s.protocol="https",n=n+"."+t,s.host=n,s.hostname=n,s.pathname=e+r.hostname+r.pathname,s.toString()}))}(i,t,"viewer").then((function(t){return t}))},i.Uv=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ft,n={"visibilityState":i,"origin":this.t.origin,"showStoryUrlInfo":"0","storyPlayer":"v0","cap":"swipe"};"auto"===this.Tm&&(n.attribution="auto");var r=Nt(t),e=bt(r),s=y(y({},e),n),o=Dt(t);if(Ut(t)){var a={"amp_js_v":"0.1"};o=_t(o,a)}var h=o+"#"+Ct(s);return Ft(this.bm,h)},i.vi=function(t,i){t.messagingPromise.then((function(t){return t.sendRequest("visibilitychange",{state:i},!0)}))},i.ly=function(t,i,n){t.messagingPromise.then((function(t){t.sendRequest("setDocumentState",{state:i,value:n})}))},i.Bv=function(t,i){this.ly(t,Vt,i)},i.Wv=function(){var t=this;this.wm[this.xm].messagingPromise.then((function(i){i.sendRequest("getDocumentState",{state:Gt},!0).then((function(i){return t.py(i.value)}))}))},i.Jv=function(t){this.wm[this.xm].messagingPromise.then((function(i){return i.sendRequest("selectPage",{"id":t})}))},i.Vv=function(t){var i=t?l(this.wm,(function(i){return i.href===t})):this.xm;if(!this.wm[i])throw new Error("Story URL not found in the player: ".concat(t));return this.wm[i]},i.rewind=function(t){var i=this.Vv(t);this.my(i).then((function(){return i.messagingPromise})).then((function(t){return t.sendRequest("rewind",{})}))},i.my=function(t){return t.iframe.isConnected?e():t.connectedDeferred.promise},i.iy=function(t){0!==t&&this.vy(t)},i.vy=function(t){this.wm[this.xm].messagingPromise.then((function(i){return i.sendRequest("selectPage",{delta:t})}))},i.Fv=function(t,i){switch(t.state){case Gt:this.yy(t.value);break;case Wt:this.gy(t.value,i);break;case Vt:this.by(t.value);break;case Jt:this.Zd(t.value);break;case"AMP_STORY_PLAYER_EVENT":this.wy(t.value)}},i.wy=function(t){switch(t){case"amp-story-player-skip-next":case"amp-story-player-skip-to-next":this.eo();break;default:this.Gn.dispatchEvent(Ot(this.t,t,{}))}},i.by=function(t){this.Gn.dispatchEvent(Ot(this.t,"amp-story-muted-state",{muted:t}))},i.gy=function(t,i){var n=this;i.sendRequest("getDocumentState",{"state":"STORY_PROGRESS"},!0).then((function(i){n.Gn.dispatchEvent(Ot(n.t,"storyNavigation",{"pageId":t,"progress":i.value}))}))},i.yy=function(t){this.xy(!t),this.py(t)},i.xy=function(t){var i=this.nm.querySelector("button.amp-story-player-exit-control-button");i&&(t?i.classList.remove(Bt):i.classList.add(Bt))},i.py=function(t){this.Gn.dispatchEvent(Ot(this.t,t?"page-attachment-open":"page-attachment-close",{}))},i.qv=function(t){this.ky(t),t.next?this.eo():t.previous&&this.Lv()},i.ky=function(t){var i,n;this.Am||!t.next&&!t.previous||(t.next?(i=this.xm+1===this.wm.length,n="noNextStory"):(i=0===this.xm,n="noPreviousStory"),i&&this.Gn.dispatchEvent(Ot(this.t,n,{})))},i.Km=function(t){var i=this.jy(t);i&&(this.lm.startX=i.screenX,this.lm.startY=i.screenY,this.Pm&&this.Pm.onTouchStart(t.timeStamp,i.clientY),this.Gn.dispatchEvent(Ot(this.t,"amp-story-player-touchstart",{"touches":t.touches})))},i.Qm=function(t){var i=this.jy(t);if(i)if(this.Gn.dispatchEvent(Ot(this.t,"amp-story-player-touchmove",{"touches":t.touches,"isNavigationalSwipe":this.lm.isSwipeX})),!1!==this.lm.isSwipeX){var n=i.screenX,r=i.screenY;this.lm.lastX=n,(null!==this.lm.isSwipeX||(this.lm.isSwipeX=Math.abs(this.lm.startX-n)>Math.abs(this.lm.startY-r),this.lm.isSwipeX))&&this.Sy({deltaX:n-this.lm.startX,last:!1})}else this.Pm&&this.Pm.onTouchMove(t.timeStamp,i.clientY)},i.zv=function(t){this.Gn.dispatchEvent(Ot(this.t,"amp-story-player-touchend",{"touches":t.touches,"isNavigationalSwipe":this.lm.isSwipeX})),!0===this.lm.isSwipeX?this.Sy({deltaX:this.lm.lastX-this.lm.startX,last:!0}):this.Pm&&this.Pm.onTouchEnd(t.timeStamp),this.lm.startX=0,this.lm.startY=0,this.lm.lastX=0,this.lm.isSwipeX=null,this.km=0},i.Sy=function(t){if(!(this.wm.length<=1)){var i=t.deltaX;if(!0===t.last){var n=Math.abs(i);return 1===this.km&&(n>50&&(this.Ay()||this.Am)?this.eo():this.Ey()),void(2===this.km&&(n>50&&(this.Ay()||this.Am)?this.Lv():this.Ey()))}this.My(i)}},i.Ey=function(){var t=this.wm[this.xm].iframe;requestAnimationFrame((function(){vt(m(t),["transform","transition"])}));var i=this.Ay();i&&requestAnimationFrame((function(){vt(m(i.iframe),["transform","transition"])}))},i.Ay=function(){var t=1===this.km?this.xm+1:this.xm-1;return this.Xv(t)?null:this.wm[t]},i.Xv=function(t){return t>=this.wm.length||t<0},i.Lm=function(){if(this.jm){var t=this.jm.behavior;t&&"boolean"==typeof t.autoplay&&(this.zm=t.autoplay)}},i.$m=function(){if(this.jm){var t=this.jm.display;t&&"auto"===t.attribution&&(this.Tm="auto")}},i.Hm=function(){if(this.jm){var t=this.jm.behavior;t&&!1===t.pageScroll&&(this.Pm=null)}},i.Xm=function(){if(null!==this.Am)return this.Am;if(!this.jm)return this.Am=!1,!1;var t,i=this.jm.behavior;return this.Am=this.ty(i)&&"end"===(t=i).on&&"circular-wrapping"===t.action,this.Am},i.My=function(t){var i;t<0?(this.km=1,i="translate3d(calc(100% + ".concat(t,"px), 0, 0)")):(this.km=2,i="translate3d(calc(".concat(t,"px - 100%), 0, 0)"));var n=this.wm[this.xm].iframe,r="translate3d(".concat(t,"px, 0, 0)");requestAnimationFrame((function(){mt(m(n),{transform:r,transition:"none"})}));var e=this.Ay();e&&requestAnimationFrame((function(){mt(m(e.iframe),{transform:i,transition:"none"})}))},i.jy=function(t){var i=t.touches;if(!i||i.length<1)return null;var n=i[0],r=n.clientX,e=n.clientY;return{screenX:n.screenX,screenY:n.screenY,clientX:r,clientY:e}},t}(),ni=function(t){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&o(t,i)}(s,t);var i,n,r=(i=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=a(i);if(n){var e=a(this).constructor;t=Reflect.construct(r,arguments,e)}else t=r.apply(this,arguments);return f(this,t)});function s(t){var i;return(i=r.call(this,t)).tyt=new ii(i.win,t),i}s.prerenderAllowed=function(){return!0};var h=s.prototype;return h.buildCallback=function(){this.tyt.buildPlayer()},h.layoutCallback=function(){return this.tyt.layoutPlayer(),e()},h.isLayoutSupported=function(t){return function(t){return"fixed"==t||"fixed-height"==t||"responsive"==t||"fill"==t||"flex-item"==t||"fluid"==t||"intrinsic"==t}(t)},s}(t.BaseElement);t.registerElement("amp-story-player",ni,'amp-story-player{position:relative;display:block}.i-amphtml-story-player-shadow-root-intermediary{width:100%;height:100%}amp-story-player a:first-of-type{width:100%;height:100%;background:var(--story-player-poster,#d3d3d3);background-size:100% 100%;display:block}amp-story-player.i-amphtml-story-player-loaded a{display:none}amp-story-player:after{content:" ";position:absolute;box-sizing:border-box;top:calc(50% - 32px);left:calc(50% - 32px);width:64px;height:64px;border-radius:50%;border-color:#fff transparent;border-style:solid;border-width:6px;filter:drop-shadow(0px 1px 3px rgba(0,0,0,0.25));animation-name:i-amphtml-story-player-spinner;animation-duration:4400ms;animation-timing-function:cubic-bezier(0.4,0,0.2,1);animation-iteration-count:infinite}@keyframes i-amphtml-story-player-spinner{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}to{transform:rotate(1080deg)}}.i-amphtml-story-player-loaded:after{visibility:hidden}\n/*# sourceURL=/css/amp-story-player.css*/')}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-story-player-0.1.js.map