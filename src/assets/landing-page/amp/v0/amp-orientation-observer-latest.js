;
(self.AMP=self.AMP||[]).push({m:0,v:"2203281422000",n:"amp-orientation-observer",ev:"0.1",l:!0,f:function(n,t){!function(){function t(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function e(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function r(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?e(Object(i),!0).forEach((function(e){t(n,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))}))}return n}function i(n,t){return(i=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function o(n){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function u(n){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function f(n,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}Array.isArray;var c=Object.prototype;c.hasOwnProperty,c.toString;var a=self.AMP_CONFIG||{},s=("string"==typeof a.thirdPartyFrameRegex?new RegExp(a.thirdPartyFrameRegex):a.thirdPartyFrameRegex,("string"==typeof a.cdnProxyRegex?new RegExp(a.cdnProxyRegex):a.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function l(n){if(!self.document||!self.document.head)return null;if(self.location&&s.test(self.location.origin))return null;var t=self.document.head.querySelector('meta[name="'.concat(n,'"]'));return t&&t.getAttribute("content")||null}a.thirdPartyUrl,a.thirdPartyFrameHost,a.cdnUrl||l("runtime-host"),a.errorReportingUrl,a.betaErrorReportingUrl,a.localDev,a.geoApiUrl||l("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var h=self.__AMP_LOG;function v(n){return function(n,t){throw new Error("failed to call initLogConstructor")}()}function b(n,t,e,r,i,o,u,f,c,a,s){return n}function d(n){return n.nodeType?(e=n,t=(e.ownerDocument||e).defaultView,function(n,t){return p(n=function(n){return n.__AMP_TOP||(n.__AMP_TOP=n)}(n),"ampdoc")}(t)).getAmpDoc(n):n;var t,e}function p(n,t){b(m(n,t));var e=function(n){var t=n.__AMP_SERVICES;return t||(t=n.__AMP_SERVICES={}),t}(n)[t];return e.obj||(b(e.ctor),b(e.context),e.obj=new e.ctor(e.context),b(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}function m(n,t){var e=n.__AMP_SERVICES&&n.__AMP_SERVICES[t];return!(!e||!e.ctor)}var y="amp-orientation-observer",j=["alpha","beta","gamma"],O={"alpha":180,"beta":0,"gamma":0},g={"alpha":[0,360],"beta":[-180,180],"gamma":[-90,90]},w=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&i(n,t)}(c,n);var t,e,u=(t=c,e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}(),function(){var n,r=o(t);if(e){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)});function c(n){var t;return(t=u.call(this,n)).qi=d(t.element),t.Ks=null,t.$j=r({},g),t._j=r({},O),t.qj=r({},O),t.Gj={beta:[],alpha:[],gamma:[]},t.Hj=null,t}var a=c.prototype;return a.buildCallback=function(){var n,t,e,r,i;this.Ks=(n=this.element,t="action",e=d(n),m(i=(r=d(e)).isSingleDoc()?r.win:r,t)?p(i,t):null),this.qi.whenFirstVisible().then(this.zo.bind(this))},a.zo=function(){var n,t=this;n=this.win.DeviceOrientationEvent,(h.user||(h.user=v()),void h.user.win?h.userForEmbed||(h.userForEmbed=v()):h.user).assert(n,"The current browser doesn't support the `window.DeviceOrientationEvent`",undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined),j.forEach((function(n){t.$j[n]=t.pk("".concat(n,"-range"),t.$j[n])})),this.Hj=this.element.hasAttribute("smoothing")?Number(this.element.getAttribute("smoothing"))||4:null,this.win.addEventListener("deviceorientation",(function(n){t.Jj(n)}),!0)},a.pk=function(n,t){var e=this.element.getAttribute(n);if(e){var r=e.trim().split(" ");return[parseInt(r[0],10),parseInt(r[1],10)]}return t},a.Jj=function(n){var t=this;if(n instanceof DeviceOrientationEvent){var e=this.win.screen,r=n.alpha,i=n.beta,o=n.gamma,u="orientation"in e?e.orientation.angle:e.orientation;if(90==this.win.orientation||-90==this.win.orientation){var f=o;o=i,i=f}u<0&&(o=-o,i=-i);var c={alpha:r,beta:i,gamma:o};j.forEach((function(n){Math.abs(c[n]-t._j[n])>.1&&(t.Hj?t._j[n]=t.Kj(n,c[n]):t._j[n]=c[n],t.Qj(n,t._j[n],t.$j[n]))}))}},a.Kj=function(n,t){this.Gj[n].length>this.Hj&&this.Gj[n].shift(),this.Gj[n].push(t);var e=this.Gj[n].reduce((function(n,t){return n+t}))/this.Hj;return this.Gj[n].length>this.Hj&&this.qj[n]==O[n]&&(this.qj[n]=e),e-this.qj[n]},a.Qj=function(n,t,e){var r,i,o,u=e[0]<0?t.toFixed()-e[0]:t.toFixed(),f=function(n,t,e,r){var i={detail:e};if(Object.assign(i,void 0),"function"==typeof n.CustomEvent)return new n.CustomEvent(t,i);var o=n.document.createEvent("CustomEvent");return o.initCustomEvent(t,!!i.bubbles,!!i.cancelable,e),o}(this.win,"".concat(y,".").concat(n),{"angle":(r=t,i=e[0],o=e[1],Math.min(Math.max(r,i),o)).toFixed(),"percent":u/(e[1]-e[0])});this.Ks.trigger(this.element,n,f,1)},c}(n.BaseElement);n.registerElement(y,w)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-orientation-observer-0.1.js.map