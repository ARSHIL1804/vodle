;
!function(n){var t=self.BENTO=self.BENTO||{};(t.bento=t.bento||[]).push((function(n){"use strict";function t(n,e){return(t=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,e)}function e(n){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function r(n){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function o(n,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function u(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function l(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function i(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?l(Object(e),!0).forEach((function(t){u(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function a(n,t){if(null==n)return{};var e,r,o={},u=Object.keys(n);for(r=0;r<u.length;r++)e=u[r],t.indexOf(e)>=0||(o[e]=n[e]);return o}var c;Array.isArray;var f="unload",s=(u(c={},"auto",0),u(c,"lazy",1),u(c,"eager",2),u(c,f,3),"loading"),d="complete",p=["allow","allowFullScreen","iframeStyle","name","title","matchesMessagingOrigin","messageHandler","ready","loading","onReadyState","sandbox","src"],b=function(){return!1},m=(0,n.forwardRef)((function(t,e){var r=t.allow,o=t.allowFullScreen,u=t.iframeStyle,l=t.name,c=t.title,m=t.matchesMessagingOrigin,y=void 0===m?b:m,v=t.messageHandler,g=t.ready,h=void 0===g||g,O=t.loading,j=t.onReadyState,w=t.sandbox,S=t.src,R=a(t,p),k=(0,n.useAmpContext)().playable,E=(0,n.useLoading)(O),I=E!==f,x=(0,n.useRef)(!1),T=(0,n.useValueRef)(j),z=(0,n.useCallback)((function(n){if(n!==x.current){x.current=n;var t=T.current;null==t||t(n?d:s)}}),[T]),B=(0,n.useRef)(null);return(0,n.useImperativeHandle)(e,(function(){return{get readyState(){return x.current?d:s},get node(){return B.current}}}),[]),(0,n.useLayoutEffect)((function(){I||z(!1)}),[I,z]),(0,n.useEffect)((function(){var n=B.current;!k&&n&&(function(n){return!(!n||"about:blank"==n||n.includes("#"))}(n.src)?n.src=n.src:n.parentNode.insertBefore(n,n.nextSibling))}),[k]),(0,n.useLayoutEffect)((function(){var n=B.current;if(n&&I){var t=function(n){var t=B.current;t&&n.source==t.contentWindow&&y(n.origin)&&v(n)},e=n.ownerDocument.defaultView;return e.addEventListener("message",t),function(){return e.removeEventListener("message",t)}}}),[y,v,I,h]),(0,n.createElement)(n.ContainWrapper,i(i({},R),{},{layout:!0,size:!0,paint:!0}),I&&h&&(0,n.createElement)("iframe",{allow:r,allowFullScreen:o,frameBorder:"0",loading:E,name:l,onLoad:function(){return z(!0)},part:"iframe",ref:B,sandbox:w,scrolling:"no",src:S,style:i(i({},u),{},{width:"100%",height:"100%",contentVisibility:"auto"}),title:c}))}));m.displayName="IframeEmbed";var y=Object.prototype,v=(y.hasOwnProperty,y.toString,self.AMP_CONFIG||{}),g=("string"==typeof v.thirdPartyFrameRegex?new RegExp(v.thirdPartyFrameRegex):v.thirdPartyFrameRegex,("string"==typeof v.cdnProxyRegex?new RegExp(v.cdnProxyRegex):v.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function h(n){if(!self.document||!self.document.head)return null;if(self.location&&g.test(self.location.origin))return null;var t=self.document.head.querySelector('meta[name="'.concat(n,'"]'));return t&&t.getAttribute("content")||null}v.thirdPartyUrl,v.thirdPartyFrameHost,v.cdnUrl||h("runtime-host"),v.errorReportingUrl,v.betaErrorReportingUrl,v.localDev,v.geoApiUrl||h("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var O=["color","onLoad","playlistId","secretToken","trackId","visual"],j=function(n){return"https://w.soundcloud.com"===n},w=function(n){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&t(n,e)}(i,n);var r,u,l=(r=i,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}(),function(){var n,t=e(r);if(u){var l=e(this).constructor;n=Reflect.construct(t,arguments,l)}else n=t.apply(this,arguments);return o(this,n)});function i(){return l.apply(this,arguments)}return i.getPreconnects=function(){return["https://api.soundcloud.com/"]},i}(n.PreactBaseElement);w.Component=function(t){var e=t.color,r=t.onLoad,o=t.playlistId,u=t.secretToken,l=t.trackId,c=t.visual,f=void 0!==c&&c,s=a(t,O),d=(0,n.useRef)(null),p=(0,n.useValueRef)(r);(0,n.useEffect)((function(){return function(){var n,t;null===(n=d.current)||void 0===n||null===(t=n.contentWindow)||void 0===t||t.postMessage(JSON.stringify({"method":"pause"}),"https://w.soundcloud.com"),d.current=null}}),[]);var b=(0,n.useCallback)((function(n){var t,e,r=(t=function(n){return n.data}(n),JSON.parse(t));"ready"===r.method&&(null===(e=p.current)||void 0===e||e.call(p))}),[p]);if(!function(n,t){return null!=t||void 0!==n||("data-trackid or data-playlistid is required for <amp-soundcloud>",console.warn("data-trackid or data-playlistid is required for <amp-soundcloud>"),!1)}(l,o))return null;var y=null!=l?l:o,v="https://w.soundcloud.com/player/?url="+encodeURIComponent("https://api.soundcloud.com/"+(null!=l?"tracks":"playlists")+"/"+y);return u&&(v+=encodeURIComponent("?secret_token="+u)),f?v+="&visual=true":e&&(v+="&color="+encodeURIComponent(e)),(0,n.createElement)(m,i({allow:"autoplay",frameborder:"no",ref:d,scrolling:"no",src:v,title:"Soundcloud Widget - "+y,messageHandler:b,matchesMessagingOrigin:j},s))},w.props={"children":{passthroughNonEmpty:!0},"color":{attr:"data-color"},"playlistId":{attr:"data-playlistid"},"secretToken":{attr:"data-secret-token"},"trackId":{attr:"data-trackid"},"visual":{attr:"data-visual",type:"boolean",default:!1}},w.layoutSizeDefined=!0,w.usesShadowDom=!0,w.loadable=!0,(0,n.defineBentoElement)("bento-soundcloud",w,undefined)}))}();
//# sourceMappingURL=bento-soundcloud-1.0.js.map