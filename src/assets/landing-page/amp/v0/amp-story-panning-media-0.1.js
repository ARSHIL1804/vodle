;
(self.AMP=self.AMP||[]).push({m:0,v:"2203281422000",n:"amp-story-panning-media",ev:"0.1",l:!0,f:function(t,n){!function(){function n(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function r(t,n){return(r=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}var u=Array.isArray,a=Object.prototype;function f(t,n,r,i,e,o,u,a,f,s,c){return t}a.hasOwnProperty,a.toString;var s,c=function(){var t=this;this.promise=new Promise((function(n,r){t.resolve=n,t.reject=r}))},l=["Webkit","webkit","Moz","moz","ms","O","o"];function h(t){var n=t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}));return l.some((function(t){return n.startsWith(t+"-")}))?"-".concat(n):n}function m(t,n,r){if(n.startsWith("--"))return n;var i;s||(i=Object.create(null),s=i);var e=s[n];if(!e||r){if(e=n,void 0===t[n]){var o=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),u=function(t,n){for(var r=0;r<l.length;r++){var i=l[r]+n;if(void 0!==t[i])return i}return""}(t,o);void 0!==t[u]&&(e=u)}r||(s[n]=e)}return e}function v(t,n){var r=t.style;for(var i in n)r.setProperty(h(m(r,i)),String(n[i]),"important")}function p(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(!isFinite(r)||r<0)throw new Error("Invalid depth: "+r);if(t===n)return!0;for(var i=[{a:t,b:n,depth:r}];i.length>0;){var o=i.shift(),a=o.a,f=o.b,s=o.depth;if(s>0){if(e(a)!==e(f))return!1;if(u(a)&&u(f)){if(a.length!==f.length)return!1;for(var c=0;c<a.length;c++)i.push({a:a[c],b:f[c],depth:s-1});continue}if(a&&f&&"object"===e(a)&&"object"===e(f)){var l=Object.keys(a),h=Object.keys(f);if(l.length!==h.length)return!1;for(var m=0,v=l;m<v.length;m++){var p=v[m];i.push({a:a[p],b:f[p],depth:s-1})}continue}}if(a!==f)return!1}return!0}var d=self.AMP_CONFIG||{},b=("string"==typeof d.thirdPartyFrameRegex?new RegExp(d.thirdPartyFrameRegex):d.thirdPartyFrameRegex,("string"==typeof d.cdnProxyRegex?new RegExp(d.cdnProxyRegex):d.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function y(t){if(!self.document||!self.document.head)return null;if(self.location&&b.test(self.location.origin))return null;var n=self.document.head.querySelector('meta[name="'.concat(t,'"]'));return n&&n.getAttribute("content")||null}function g(t){if(!t)return null;var n=t.match(/^(.*)\/(.*)-([0-9.]+|latest)(\.max)?\.(?:js|mjs)$/i),r=n?n[2]:void 0,i=n?n[3]:void 0;return r&&i?{extensionId:r,extensionVersion:i}:null}d.thirdPartyUrl,d.thirdPartyFrameHost,d.cdnUrl||y("runtime-host"),d.errorReportingUrl,d.betaErrorReportingUrl,d.localDev,d.geoApiUrl||y("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var w=self.__AMP_LOG;function x(t){return w.user||(w.user=j()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(w.user.win,t)?w.userForEmbed||(w.userForEmbed=j()):w.user}function j(t){return function(t,n){throw new Error("failed to call initLogConstructor")}()}function O(t,n,r,i,e,o,u,a,f,s,c){return t}function A(t,n){return P(t,n)}function M(t,n){O(function(t,n){var r=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!r||!r.ctor)}(t,n));var r=F(t)[n];return r.obj||(O(r.ctor),O(r.context),r.obj=new r.ctor(r.context),O(r.obj),r.context=null,r.resolve&&r.resolve(r.obj)),r.obj}function P(t,n){var r=F(t)[n];return r?r.promise?r.promise:(M(t,n),r.promise=Promise.resolve(r.obj)):null}function F(t){var n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}var R,k=(n(R={},31,(function(t,n){return t.length!==n.length})),n(R,15,(function(t,n){return t.element!==n.element||t.state!==n.state})),n(R,36,(function(t,n){return t.length!==n.length})),n(R,38,(function(t,n){return t.length!==n.length})),n(R,39,(function(t,n){return null===t||null===n||t.width!==n.width||t.height!==n.height})),n(R,21,(function(t,n){return null===t||null===n||!p(t,n,2)})),n(R,26,(function(t,n){return null===t||null===n||!p(t,n,2)})),n(R,16,(function(t,n){return!p(t,n,3)})),"AMP_STORY_PANNING_MEDIA"),E=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&r(t,n)}(s,t);var e,u,a=(e=s,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=i(e);if(u){var r=i(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function s(t){var n;return(n=a.call(this,t)).Fot=null,n.zot={},n.qot=null,n.Bot={},n.bJ=null,n.PB=null,n.RB=!1,n.Yot=null,n.Vot=null,n}var l=s.prototype;return l.buildCallback=function(){var t,n=this;return(t=this.win,function(t,n,r,i,e){return A(t,n)||function(t,n,r,i,e){return(o=t.document,new Promise((function(t){return function(t,n){!function(t,n,r){if(n())r();else{var i=((u=t).ownerDocument||u).defaultView;if(i.MutationObserver){var e=new i.MutationObserver((function(){n()&&(e.disconnect(),r())}));e.observe(t,{childList:!0})}else var o=i.setInterval((function(){n()&&(i.clearInterval(o),r())}),5)}var u}(t.documentElement,(function(){return!!t.body}),n)}(o,t)}))).then((function(){var n=function(t,n){return M(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),"extensions")}(t);return function(t,n,r){return function(t){if(!t)return[];for(var n=t.querySelectorAll("script[custom-element],script[custom-template]"),r=[],i=0;i<n.length;i++){var e=n[i],o=e.getAttribute("custom-element")||e.getAttribute("custom-template"),u=g(e.src);o&&u&&r.push({script:e,extensionId:o,extensionVersion:u.extensionVersion})}return r}(t.document.head).some((function(t){var i=t.extensionId,e=t.extensionVersion;return n==i&&r==e}))}(n.win,r,i)?n.waitForExtension(r,i):null})).then((function(r){return r?e?A(t,n):function(t,n){return function(t,n){var r=P(t,n);if(r)return r;var i,e,o,u,a=F(t);return a[n]=(e=(i=new c).promise,o=i.reject,u=i.resolve,e.catch((function(){})),{obj:null,promise:e,resolve:u,reject:o,context:null,ctor:null}),a[n].promise}(t,n)}(t,n):null}));var o}(t,n,r,i,e)}(t,"story-store","amp-story","1.0")).then((function(t){return n.bJ=t}))},l.layoutCallback=function(){var t=this;return this.Fot=this.element.querySelector("amp-img"),this.Vot=this.element.getAttribute("group-id")||this.Fot.getAttribute("src"),this.UU(),function(t){if(f(function(t){var n=t.tagName;return n.startsWith("AMP-")&&!("AMP-STICKY-AD-TOP-PADDING"==n||"AMP-BODY"==n)}(t)),t.createdCallback)return Promise.resolve(t);if(!t.__AMP_UPG_PRM){var n=new c;t.__AMP_UPG_PRM=n.promise,t.__AMP_UPG_RES=n.resolve}var r=t.__AMP_UPG_PRM;return f(r),r}(this.Fot).then((function(){return t.Fot.signals().whenSignal("load-end")})).then((function(){t.element.querySelector("img").classList="",t.Zot()})).catch((function(){return x().error(k,"Failed to load the amp-img.")}))},l.UU=function(){var t=this;this.bJ.subscribe(39,(function(){t.qot={width:t.element.offsetWidth,height:t.element.offsetHeight},t.Zot(),t.$ot(),t.fY()}),!0),this.bJ.subscribe(33,(function(n){t.RB=n===t.CB(),t.fY()}),!0),this.bJ.subscribe(21,(function(n){return t.Kot(n)}),!0);var n=new MutationObserver((function(n){return t.Yot=parseInt(n[0].target.getAttribute("distance"),10)}));this.TB()&&n.observe(this.TB(),{attributes:!0,attributeFilter:["distance"]})},l.$ot=function(){var t=parseFloat(this.element.getAttribute("data-x")||0),n=parseFloat(this.element.getAttribute("data-y")||0),r=parseFloat(this.element.getAttribute("data-zoom")||1);if(this.element.hasAttribute("lock-bounds")){this.zot.zoom=r<1?1:r;var i=this.Wot(),e=i.horizontal,o=i.vertical;this.zot.x=Math.max(-e,Math.min(t,e)),this.zot.y=Math.max(-o,Math.min(n,o))}else this.zot={x:t,y:n,zoom:r}},l.Wot=function(){var t=this.qot,n=t.height,r=t.width,i=this.Fot.getAttribute("width"),e=this.Fot.getAttribute("height");i&&e||x().error(k,'"lock-bounds" requires "width" and "height" to be set on the amp-img child.');var o=r/n<i/e?n/e:r/i,u=o*e;return{horizontal:50*(1-r/(o*i*this.zot.zoom)),vertical:50*(1-n/(u*this.zot.zoom))}},l.fY=function(){var t=this;if(this.RB){var r,i,e=this.bJ.get(21)[this.Vot];!e||null!==(r=this.win.matchMedia("(prefers-reduced-motion: reduce)"))&&void 0!==r&&r.matches?this.bJ.dispatch(3,n({},this.Vot,this.zot)):requestAnimationFrame((function r(o){i||(i=o);var u,a=o-i;if(a<1e3){var f=t.zot,s=f.x,c=f.y,l=f.zoom,h=(u=a/1e3)<.5?2*u*u:1-Math.pow(-2*u+2,2)/2;t.bJ.dispatch(3,n({},t.Vot,{x:e.x+(s-e.x)*h,y:e.y+(c-e.y)*h,zoom:e.zoom+(l-e.zoom)*h})),t.RB&&requestAnimationFrame(r)}else t.bJ.dispatch(3,n({},t.Vot,t.zot))}))}},l.Zot=function(){var t=this,n=this.element.querySelector("img");if(n){var r=this.qot,i=r.height,e=r.width/i,o=this.Fot.getAttribute("width")/this.Fot.getAttribute("height");this.mutateElement((function(){e<o?(v(t.Fot,{left:"auto",right:"auto",top:"0",bottom:"0",width:"auto",height:"100%"}),v(n,{width:"auto",height:"100%"})):(v(t.Fot,{left:"0",right:"0",top:"auto",bottom:"auto",width:"100%",height:"auto"}),v(n,{width:"100%",height:"auto"}))}))}},l.Kot=function(t){this.Yot<=1&&t[this.Vot]&&!p(this.Bot,t[this.Vot])&&(this.Bot=t[this.Vot],this.Hot())},l.Hot=function(){var t=this,n=this.Bot,r=n.x,i=n.y,e=n.zoom;return this.mutateElement((function(){v(t.Fot,{transform:"translate3d(".concat(r,"%, ").concat(i,"%, ").concat(t.Jot(e),"px)")})}))},l.Jot=function(t){var n=(t-1)/t;return isFinite(n)?n:-1e5},l.CB=function(){return null==this.PB&&(this.PB=this.TB().getAttribute("id")),this.PB},l.TB=function(){return function(t,n,r){var i;for(i=t;i&&void 0!==i;i=i.parentElement)if(n(i))return i;return null}(this.element,(function(t){return"amp-story-page"===t.tagName.toLowerCase()}))},l.isLayoutSupported=function(t){return"fill"==t},s}(t.BaseElement);t.registerElement("amp-story-panning-media",E,"amp-story-panning-media{display:-ms-flexbox!important;display:flex!important;-ms-flex-pack:center!important;justify-content:center!important;-ms-flex-align:center!important;align-items:center!important;perspective:1px!important}amp-story-panning-media amp-img{-webkit-backface-visibility:hidden!important;backface-visibility:hidden!important}amp-story-grid-layer[template=fill] amp-story-panning-media amp-img img{position:relative!important;display:inline-block!important}\n/*# sourceURL=/extensions/amp-story-panning-media/0.1/amp-story-panning-media.css*/")}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-story-panning-media-0.1.js.map