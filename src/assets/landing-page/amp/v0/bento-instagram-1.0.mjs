;
import{PreactBaseElement as e}from"../bento.mjs";function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?n(Object(o),!0).forEach((function(n){t(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}import{createElement as a}from"../bento.mjs";import{useCallback as s,useState as l}from"../bento.mjs";import{forwardRef as i}from"../bento.mjs";import{useValueRef as c}from"../bento.mjs";import{createElement as m}from"../bento.mjs";import{useCallback as f,useEffect as u,useImperativeHandle as d,useLayoutEffect as b,useRef as p}from"../bento.mjs";import{forwardRef as g}from"../bento.mjs";import{ContainWrapper as j,useValueRef as w}from"../bento.mjs";import{useAmpContext as O,useLoading as h}from"../bento.mjs";var y=["allow","allowFullScreen","iframeStyle","name","title","matchesMessagingOrigin","messageHandler","ready","loading","onReadyState","sandbox","src"],v=()=>!1,S=g((function(e,t){let{allow:n,allowFullScreen:a,iframeStyle:s,name:l,title:i,matchesMessagingOrigin:c=v,messageHandler:g,ready:S=!0,loading:R,onReadyState:E,sandbox:x,src:z}=e,F=o(e,y);const{playable:I}=O(),M=h(R),H="unload"!==M,L=p(!1),V=w(E),k=f((e=>{if(e!==L.current){L.current=e;const t=V.current;null==t||t(e?"complete":"loading")}}),[V]),q=p(null);return d(t,(()=>({get readyState(){return L.current?"complete":"loading"},get node(){return q.current}})),[]),b((()=>{H||k(!1)}),[H,k]),u((()=>{const e=q.current;if(!I&&e){const{src:t}=e;(e=>!(!e||"about:blank"==e||e.includes("#")))(t)?e.src=e.src:e.parentNode.insertBefore(e,e.nextSibling)}}),[I]),b((()=>{const e=q.current;if(!e||!H)return;const t=e=>{const t=q.current;t&&e.source==t.contentWindow&&c(e.origin)&&g(e)},{defaultView:n}=e.ownerDocument;return n.addEventListener("message",t),()=>n.removeEventListener("message",t)}),[c,g,H,S]),m(j,r(r({},F),{},{layout:!0,size:!0,paint:!0}),H&&S&&m("iframe",{allow:n,allowFullScreen:a,frameBorder:"0",loading:M,name:l,onLoad:()=>k(!0),part:"iframe",ref:q,sandbox:x,scrolling:"no",src:z,style:r(r({},s),{},{width:"100%",height:"100%",contentVisibility:"auto"}),title:i}))}));S.displayName="IframeEmbed";var{hasOwnProperty:R,toString:E}=Object.prototype,x=self.AMP_CONFIG||{},z=("string"==typeof x.thirdPartyFrameRegex?new RegExp(x.thirdPartyFrameRegex):x.thirdPartyFrameRegex,("string"==typeof x.cdnProxyRegex?new RegExp(x.cdnProxyRegex):x.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function F(e){if(!self.document||!self.document.head)return null;if(self.location&&z.test(self.location.origin))return null;const t=self.document.head.querySelector(`meta[name="${e}"]`);return t&&t.getAttribute("content")||null}x.thirdPartyUrl,x.thirdPartyFrameHost,x.cdnUrl||F("runtime-host"),x.errorReportingUrl,x.betaErrorReportingUrl,x.localDev,x.geoApiUrl||F("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var I=["captioned","onLoad","requestResize","shortcode","title"],M={},H=e=>"https://www.instagram.com"===e,L=i((function(e,t){let{captioned:n,onLoad:i,requestResize:m,shortcode:f,title:u="Instagram"}=e,d=o(e,I);const[b,p]=l(M),[g,j]=l(0),w=c(i),O=s((e=>{const t=(n=function(e){return e.data}(e),JSON.parse(n));var n;if("MEASURE"==t.type&&t.details){var r;const e=t.details.height;m&&m(e),p({"height":e}),j(1),null===(r=w.current)||void 0===r||r.call(w)}}),[m,w]);return a(S,r({iframeStyle:{opacity:g},matchesMessagingOrigin:H,messageHandler:O,ref:t,src:"https://www.instagram.com/p/"+encodeURIComponent(f)+"/embed/"+(n?"captioned/":"")+"?cr=1&v=12",title:u,wrapperStyle:b},d))}));L.displayName="Instagram";var V=class extends e{};V.Component=L,V.loadable=!0,V.unloadOnPause=!0,V.props={"captioned":{attr:"data-captioned"},"shortcode":{attr:"data-shortcode"},"title":{attr:"title"}},V.usesShadowDom=!0,V.layoutSizeDefined=!0;import{defineBentoElement as k}from"../bento.mjs";k("bento-instagram",V,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-instagram-1.0.mjs.map