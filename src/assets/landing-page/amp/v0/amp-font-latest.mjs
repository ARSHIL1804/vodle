;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-font",ev:"0.1",l:!0,f:function(t,i){(()=>{var{hasOwnProperty:i,toString:s}=Object.prototype,n=self.AMP_CONFIG||{},o=("string"==typeof n.thirdPartyFrameRegex?new RegExp(n.thirdPartyFrameRegex):n.thirdPartyFrameRegex,("string"==typeof n.cdnProxyRegex?new RegExp(n.cdnProxyRegex):n.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function e(t){if(!self.document||!self.document.head)return null;if(self.location&&o.test(self.location.origin))return null;const i=self.document.head.querySelector(`meta[name="${t}"]`);return i&&i.getAttribute("content")||null}n.thirdPartyUrl,n.thirdPartyFrameHost,n.cdnUrl||e("runtime-host"),n.errorReportingUrl,n.betaErrorReportingUrl,n.localDev,n.geoApiUrl||e("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var r=self.__AMP_LOG;function h(t){return function(t,i){throw new Error("failed to call initLogConstructor")}()}function l(t,i,s,n,o,e,r,h,l,a,u){return t}function a(t,i){l(function(t,i){const s=t.__AMP_SERVICES&&t.__AMP_SERVICES[i];return!(!s||!s.ctor)}(t,i));const s=function(t){let i=t.__AMP_SERVICES;return i||(i=t.__AMP_SERVICES={}),i}(t)[i];return s.obj||(l(s.ctor),l(s.context),s.obj=new s.ctor(s.context),l(s.obj),s.context=null,s.resolve&&s.resolve(s.obj)),s.obj}var u,c=t=>a(t,"timer"),f=t=>{return i="vsync",a(function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),i);var i},d=["Webkit","webkit","Moz","moz","ms","O","o"];function m(t,i,s,n,o){const e=function(t,i,s){if(i.startsWith("--"))return i;u||(u=Object.create(null));let n=u[i];if(!n||s){if(n=i,void 0===t[i]){const s=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(i),o=function(t,i){for(let s=0;s<d.length;s++){const n=d[s]+i;if(void 0!==t[n])return n}return""}(t,s);void 0!==t[o]&&(n=o)}s||(u[i]=n)}return n}(t.style,i,o);if(!e)return;const r=n?s+n:s;t.style.setProperty(function(t){const i=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return d.some((t=>i.startsWith(t+"-")))?`-${i}`:i}(e),r)}function _(t,i){for(const s in i)m(t,s,i[s])}var p=["sans-serif","serif"],A=class extends t.BaseElement{static prerenderAllowed(){return!0}constructor(t){super(t),this.FM="",this.xM="",this.SM="",this.zM="",this.LM=null}buildCallback(){var t,i,s,n,o,e,l,a,u,d,m;this.FM=(t=this.element.getAttribute("font-family"),i="The font-family attribute is required for <amp-font> %s",s=this.element,(r.user||(r.user=h()),void r.user.win?r.userForEmbed||(r.userForEmbed=h()):r.user).assert(t,i,s,n,o,e,l,a,u,d,m)),this.xM=this.element.getAttribute("font-weight")||"400",this.SM=this.element.getAttribute("font-style")||"normal",this.zM=this.element.getAttribute("font-variant")||"normal",this.LM=new class{constructor(t){this.Ci=t,this.Ao=t.win.document,this.cf=null,this.$M=null,this.jM=!1,this.kM=!1}load(t,i){return this.$M=t,c(this.Ci.win).timeoutPromise(i,this.OM()).then((()=>{this.jM=!0,this.WM()}),(t=>{throw this.kM=!0,this.WM(),t}))}OM(){return new Promise(((t,i)=>{const s=this.$M.fontStyle+" "+this.$M.variant+" "+this.$M.weight+" "+this.$M.size+" '"+this.$M.family+"'";this.CM()?this.Ao.fonts.check(s)?t():this.Ao.fonts.load(s).then((()=>this.Ao.fonts.load(s))).then((()=>{this.Ao.fonts.check(s)?t():i(new Error("Font could not be loaded, probably due to incorrect @font-face."))})).catch(i):this.ZM().then(t,i)}))}CM(){return"fonts"in this.Ao}ZM(){return new Promise(((t,i)=>{const s=f(this.Ci.win),n=this.qM(),o=s.createTask({measure:()=>{this.jM?t():this.kM?i(new Error("Font loading timed out.")):n.some((t=>t.compare()))?t():o()}});o()}))}qM(){const t=this.cf=this.Ao.createElement("div");_(t,{fontSize:"40px",fontVariant:this.$M.variant,fontWeight:this.$M.weight,fontStyle:this.$M.fontStyle,left:"-999px",lineHeight:"normal",margin:0,padding:0,position:"absolute",top:"-999px",visibility:"hidden"});const i=p.map((i=>new class{constructor(t,i,s){const n=t.ownerDocument,o=`${i},${s}`;this.HM=this.NM(n,s),this.QM=this.NM(n,o),t.appendChild(this.HM),t.appendChild(this.QM)}NM(t,i){const s=t.createElement("div");return s.textContent="MAxmTYklsjo190QW",_(s,{float:"left",fontFamily:i,margin:0,padding:0,whiteSpace:"nowrap"}),s}compare(){const t=Math.abs(this.HM.offsetWidth-this.QM.offsetWidth)>2,i=Math.abs(this.HM.offsetHeight-this.QM.offsetHeight)>2;return t||i}}(t,this.$M.family,i)));return this.Ci.getBody().appendChild(t),i}WM(){var t,i;this.cf&&(null===(i=(t=this.cf).parentElement)||void 0===i||i.removeChild(t)),this.cf=null}}(this.getAmpDoc()),this.UM()}UM(){const t={fontStyle:this.SM,variant:this.zM,weight:this.xM,size:"medium",family:this.FM};this.LM.load(t,this.YM()).then((()=>{this.BM()})).catch((t=>{this.DM()}))}BM(){const t=this.element.getAttribute("on-load-add-class"),i=this.element.getAttribute("on-load-remove-class");this.GM(t,i)}DM(){const t=this.element.getAttribute("on-error-add-class"),i=this.element.getAttribute("on-error-remove-class");this.GM(t,i)}GM(t,i){const s=this.getAmpDoc(),n=s.getRootNode().documentElement||s.getBody();t&&n.classList.add(t),i&&n.classList.remove(i),this.WM()}WM(){this.LM=null}YM(){let t=parseInt(this.element.getAttribute("timeout"),10);var i;return t="number"!=typeof(i=t)||!isFinite(i)||t<0?3e3:t,t=Math.max(t-c(this.win).timeSinceStart(),100),t}};t.registerElement("amp-font",A)})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-font-0.1.mjs.map