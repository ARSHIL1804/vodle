;
(self.AMP=self.AMP||[]).push({m:0,v:"2203281422000",n:"amp-nested-menu",ev:"0.1",l:!0,f:function(n,e){!function(){var e;function t(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function i(n,e){return(i=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}function r(n){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function u(n){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function s(n,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return t(n)}var o="ArrowLeft",a="ArrowUp",m="ArrowDown",f="Home";function c(n){return n?Array.prototype.slice.call(n):[]}Array.isArray;var p,l=Object.prototype;function d(n,e){return n.replace(/^|,/g,"$&".concat(e," "))}function h(n,e){if(void 0!==p?p:p=function(n){try{var e=n.ownerDocument,t=e.createElement("div"),i=e.createElement("div");return t.appendChild(i),t.querySelector(":scope div")===i}catch(n){return!1}}(n))return n.querySelector(d(e,":scope"));var t=function(n,e){var t=n.classList,i="i-amphtml-scoped";t.add(i);var r=d(e,".".concat(i)),u=n.querySelectorAll(r);return t.remove(i),u}(n,e)[0];return void 0===t?null:t}function b(n,e,t){var i;for(i=n;i&&i!==t;i=i.parentElement)if(e(i))return i;return null}function v(n,e){return n.closest?n.closest(e):b(n,(function(n){return function(n,e){var t=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;return!!t&&t.call(n,e)}(n,e)}))}function y(n){try{n.focus()}catch(n){}}l.hasOwnProperty,l.toString;var w=self.AMP_CONFIG||{},g=("string"==typeof w.thirdPartyFrameRegex?new RegExp(w.thirdPartyFrameRegex):w.thirdPartyFrameRegex,("string"==typeof w.cdnProxyRegex?new RegExp(w.cdnProxyRegex):w.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function x(n){if(!self.document||!self.document.head)return null;if(self.location&&g.test(self.location.origin))return null;var e=self.document.head.querySelector('meta[name="'.concat(n,'"]'));return e&&e.getAttribute("content")||null}w.thirdPartyUrl,w.thirdPartyFrameHost,w.cdnUrl||x("runtime-host"),w.errorReportingUrl,w.betaErrorReportingUrl,w.localDev,w.geoApiUrl||x("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var E=self.__AMP_LOG;function R(n){return function(n,e){throw new Error("failed to call initLogConstructor")}()}function j(n,e,t,i,r,u,s,o,a,m,f){return n}function A(n,e,t,i,r,u,s,o,a,m,f){return(E.user||(E.user=R()),void E.user.win?E.userForEmbed||(E.userForEmbed=R()):E.user).assert(n,e,t,i,r,u,s,o,a,m,f)}function O(n){return n.nodeType?(t=n,e=(t.ownerDocument||t).defaultView,function(n,e){return S(n=function(n){return n.__AMP_TOP||(n.__AMP_TOP=n)}(n),"ampdoc")}(e)).getAmpDoc(n):n;var e,t}function S(n,e){j(L(n,e));var t=function(n){var e=n.__AMP_SERVICES;return e||(e=n.__AMP_SERVICES={}),e}(n)[e];return t.obj||(j(t.ctor),j(t.context),t.obj=new t.ctor(t.context),j(t.obj),t.context=null,t.resolve&&t.resolve(t.obj)),t.obj}function L(n,e){var t=n.__AMP_SERVICES&&n.__AMP_SERVICES[e];return!(!t||!t.ctor)}var k=function(n){return S(n,"timer")},X="amp-nested-menu",q="left",z="right",B=function(n){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&i(n,e)}(d,n);var u,p,l=(u=d,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}(),function(){var n,e=r(u);if(p){var t=r(this).constructor;n=Reflect.construct(e,arguments,t)}else n=e.apply(this,arguments);return s(this,n)});function d(n){var e;return(e=l.call(this,n)).ql=e.win.document,e.Ks=null,e.pW=null,e.Xq=n,e.Bq=e.Ju.bind(t(e)),e.Dq=e.$q.bind(t(e)),e}d.prerenderAllowed=function(){return!0};var w=d.prototype;return w.buildCallback=function(){var n,e=this.element;this.Ks=function(n){return e="action",t=O(n),L(r=(i=O(t)).isSingleDoc()?i.win:i,e)?S(r,e):null;var e,t,i,r}(this.element),this.pW=e.getAttribute("side"),this.pW!=q&&this.pW!=z&&(this.pW="rtl"==((n=this.ql).body.getAttribute("dir")||n.documentElement.getAttribute("dir")||"ltr")?q:z,e.setAttribute("side",this.pW)),this.registerAction("reset",this.reset.bind(this)),e.addEventListener("click",this.Bq),e.addEventListener("keydown",this.Dq)},w.layoutCallback=function(){return this.Hq(),e||(e=Promise.resolve(void 0))},w.Hq=function(){var n=this;c(this.element.querySelectorAll("[amp-nested-submenu-open],[amp-nested-submenu-close]")).forEach((function(e){e.hasAttribute("tabindex")||e.setAttribute("tabindex",0),e.setAttribute("role","button"),e.hasAttribute("amp-nested-submenu-open")&&e.setAttribute("aria-expanded","false"),A(0==n.Ks.hasAction(e,"tap"),"submenu open/close buttons should not have tap actions registered.")}))},w.isLayoutSupported=function(n){return"fill"==n},w.Ju=function(n){var e=n.target,t=v(n.target,"[amp-nested-submenu-open],[amp-nested-submenu-close]");t&&this.kz(e,t)&&(t.hasAttribute("amp-nested-submenu-open")?this.Zq(t):this.Gq(t))},w.kz=function(n,e){var t=!!b(n,(function(n){return"A"==n.tagName}),e),i=this.Ks.hasAction(n,"tap",e);return!t&&!i},w.Zq=function(n){var e=h(n.parentElement,">[amp-nested-submenu]");A(e,"".concat(X," requires each submenu open button to have a submenu as its sibling")),this.xD(e)},w.xD=function(n){var e=this;if(!n.hasAttribute("open")){var t=this.Kq(n);t&&(t.setAttribute("child-open",""),n.setAttribute("open",""),this.Xq=n,k(this.win).delay((function(){h(n.parentElement,">[amp-nested-submenu-open]").setAttribute("aria-expanded","true");var t=c(n.querySelectorAll("[amp-nested-submenu-close]")).filter((function(t){return e.Kq(t)==n}))[0];A(t,"".concat(X," requires each submenu to contain at least one submenu close button")),y(t)}),350))}},w.Gq=function(n){var e=v(n,"[amp-nested-submenu]");A(e,"".concat(X,": submenu close buttons are only allowed inside submenus")),this.AW(e)},w.AW=function(n){if(n.hasAttribute("open")){var e=this.Kq(n);e&&(e.removeAttribute("child-open"),n.removeAttribute("open"),this.Xq=e,k(this.win).delay((function(){var e=h(n.parentElement,">[amp-nested-submenu-open]");e.setAttribute("aria-expanded","false"),y(e)}),350))}},w.reset=function(){for(;this.element.hasAttribute("child-open");)this.AW(this.Xq)},w.$q=function(n){if(!n.defaultPrevented)switch(n.key){case"Enter":case" ":return void this.Ju(n);case o:case"ArrowRight":this.Qq(n);break;case a:case m:case f:case"End":this.Vq(n)}},w.Qq=function(n){var e=n.key==o;if(this.pW==q&&(e=!e),e)this.AW(this.Xq);else{var t=n.target;t.hasAttribute("amp-nested-submenu-open")&&this.Zq(t)}},w.Vq=function(n){var e=n.target,t=b(e,(function(n){return"LI"==n.tagName}),this.Kq(e));if(t){var i;if(n.key===a)i=t.previousElementSibling;else if(n.key===m)i=t.nextElementSibling;else if(n.key===f)i=t.parentElement.firstElementChild;else{if("End"!==n.key)return;i=t.parentElement.lastElementChild}if(i){var r=i.querySelector("button,a[href],[tabindex]");r&&(n.preventDefault(),y(r))}}},w.Kq=function(n){return v(n.parentElement,"amp-nested-menu,[amp-nested-submenu]")},d}(n.BaseElement);n.registerElement(X,B,"amp-nested-menu,amp-nested-menu [amp-nested-submenu]{position:absolute!important;top:0!important;width:100%!important;height:100%!important;margin:0!important;padding:0!important;transform:translateX(0)!important}amp-nested-menu.i-amphtml-layout-size-defined{overflow:visible!important}amp-nested-menu ol,amp-nested-menu ul{list-style-type:none;padding:0}amp-nested-menu [amp-nested-submenu-close],amp-nested-menu [amp-nested-submenu-open]{cursor:pointer}amp-nested-menu [amp-nested-submenu]{opacity:0!important;visibility:hidden!important;transition:transform 233ms,opacity 233ms,visibility 0s 233ms}amp-nested-menu,amp-nested-menu [amp-nested-submenu][open]{opacity:1!important;visibility:visible!important;transition:transform 233ms}amp-nested-menu [amp-nested-submenu][child-open],amp-nested-menu[child-open]{visibility:hidden!important;transition:transform 233ms,visibility 0s 233ms}amp-nested-menu[side=left] [amp-nested-submenu]{right:100%!important}amp-nested-menu[side=right] [amp-nested-submenu]{left:100%!important}amp-nested-menu[side=left] [amp-nested-submenu][child-open],amp-nested-menu[side=left][child-open]{transform:translateX(100%)!important}amp-nested-menu[side=right] [amp-nested-submenu][child-open],amp-nested-menu[side=right][child-open]{transform:translateX(-100%)!important}\n/*# sourceURL=/extensions/amp-nested-menu/0.1/amp-nested-menu.css*/")}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-nested-menu-0.1.js.map