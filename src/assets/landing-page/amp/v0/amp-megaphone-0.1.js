;
(self.AMP=self.AMP||[]).push({m:0,v:"2203281422000",n:"amp-megaphone",ev:"0.1",l:!0,f:function(t,n){!function(){function n(t,e){return(n=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,e)}function e(t){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,n){if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}var o=Array.isArray;function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function f(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return u(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=Object.prototype,s=(a.hasOwnProperty,a.toString);function c(t){return"[object Object]"===s.call(t)}function l(t){var n=Object.getOwnPropertyDescriptor(t,"message");if(null!=n&&n.writable)return t;var e=t.message,r=t.stack,i=new Error(e);for(var o in t)i[o]=t[o];return i.stack=r,i}function h(t){for(var n,e=null,r="",i=f(arguments,!0);!(n=i()).done;){var o=n.value;o instanceof Error&&!e?e=l(o):(r&&(r+=" "),r+=o)}return e?r&&(e.message=r+": "+e.message):e=new Error(r),e}function v(t){var n,e;null===(n=(e=self).__AMP_REPORT_ERROR)||void 0===n||n.call(e,t)}function d(t){var n=h.apply(null,arguments);setTimeout((function(){throw v(n),n}))}function p(t){try{for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return t.apply(null,e)}catch(t){d(t)}}var m={"getPropertyPriority":function(){return""},"getPropertyValue":function(){return""}},y=/vertical/,b=new WeakMap,g=new WeakMap,w=new WeakMap;function S(t){var n=b.get(t);return n||(n=new t.ResizeObserver(j),b.set(t,n)),n}function j(t){for(var n=new Set,e=t.length-1;e>=0;e--){var r=t[e],i=r.target;if(!n.has(i)){n.add(i);var o=g.get(i);if(o){w.set(i,r);for(var u=0;u<o.length;u++){var f=o[u],a=f.callback;O(f.type,a,r)}}}}}function O(t,n,e){if(0==t){var r=e.contentRect,i=r.height;p(n,{width:r.width,height:i})}else if(1==t){var o,u=e.borderBoxSize;if(u)o=u.length>0?u[0]:{inlineSize:0,blockSize:0};else{var f,a,s=e.target,c=((b=s).ownerDocument||b).defaultView,l=y.test(function(t,n){return t.getComputedStyle(n)||m}(c,s).writingMode),h=s,v=h.offsetHeight,d=h.offsetWidth;l?(a=d,f=v):(f=d,a=v),o={inlineSize:f,blockSize:a}}p(n,o)}var b}var E=function(){function t(t){this.Gn=t,this.Zn=!1,this.Un=!1,this.Jn=this.Jn.bind(this)}var n=t.prototype;return n.updatePlaying=function(t){t!==this.Zn&&(this.Zn=t,t?(this.Un=!1,function(t,n,e){var r=t.ownerDocument.defaultView;if(r){var i=g.get(t);if(i||(i=[],g.set(t,i),S(r).observe(t)),!i.some((function(t){return t.callback===e&&1===t.type}))){i.push({type:1,callback:e});var o=w.get(t);o&&setTimeout((function(){return O(1,e,o)}))}}}(this.Gn,0,this.Jn)):function(t,n){!function(t,n,e){var r=g.get(t);if(r&&(function(t,n){for(var r=[],i=0,o=0;o<t.length;o++){var u=t[o];(f=u).callback===e&&1===f.type?r.push(u):(i<o&&(t[i]=u),i++)}var f;i<t.length&&(t.length=i)}(r),0==r.length)){g.delete(t),w.delete(t);var i=t.ownerDocument.defaultView;i&&S(i).unobserve(t)}}(t,0,n)}(this.Gn,this.Jn))},n.Jn=function(t){var n=t.blockSize,e=t.inlineSize>0&&n>0;if(e!==this.Un){this.Un=e;var r=this.Gn;e||r.pause()}},t}(),R=self.AMP_CONFIG||{},A=("string"==typeof R.thirdPartyFrameRegex?new RegExp(R.thirdPartyFrameRegex):R.thirdPartyFrameRegex,("string"==typeof R.cdnProxyRegex?new RegExp(R.cdnProxyRegex):R.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function x(t){if(!self.document||!self.document.head)return null;if(self.location&&A.test(self.location.origin))return null;var n=self.document.head.querySelector('meta[name="'.concat(t,'"]'));return n&&n.getAttribute("content")||null}R.thirdPartyUrl,R.thirdPartyFrameHost,R.cdnUrl||x("runtime-host"),R.errorReportingUrl,R.betaErrorReportingUrl,R.localDev,R.geoApiUrl||x("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var k,z=self.__AMP_LOG;function I(t){return function(t,n){throw new Error("failed to call initLogConstructor")}()}function T(t,n,e,r,i,o,u,f,a,s,c){return t}new Set(["c","v","a","ad"]);var C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}(a,t);var r,u,f=(r=a,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=e(r);if(u){var o=e(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return i(this,t)});function a(t){var n;return(n=f.call(this,t)).tb=null,n.eb=null,n.Vj=!1,n.Qw="",n.Gt=new E(n.element),n}var s=a.prototype;return s.preconnectCallback=function(t){var n,e,r=(n=this.win,e="preconnect",function(t,n){T(function(t,n){var e=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!e||!e.ctor)}(t,n));var e=function(t){var n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}(t)[n];return e.obj||(T(e.ctor),T(e.context),e.obj=new e.ctor(e.context),T(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}(n=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(n),e)),i=this.getAmpDoc();r.url(i,this.Qw,t),r.url(i,"https://assets.megaphone.fm",t),r.url(i,"https://megaphone.imgix.net",t)},s.isLayoutSupported=function(t){return function(t){return"fixed"==t||"fixed-height"==t}(t)},s.buildCallback=function(){this.element.classList.add("i-amphtml-media-component"),this.JE()},s.mutatedAttributesCallback=function(){this.JE(),this.tb&&(this.tb.src=this.ek())},s.layoutCallback=function(){var t,n,e,r,i,o,u,f,a=this.element.ownerDocument.createElement("iframe");return a.setAttribute("frameborder","no"),a.setAttribute("scrolling","no"),a.src=this.ek(),this.eb=(t=this.win,n="message",e=this.GE.bind(this),r=void 0,i=t,o=e,u=function(t){try{return o(t)}catch(t){var n,e;throw null===(n=(e=self).__AMP_REPORT_ERROR)||void 0===n||n.call(e,t),t}},f=function(){if(void 0!==k)return k;k=!1;try{var t={get capture(){return k=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return k}(),i.addEventListener(n,u,!!f&&r),function(){null==i||i.removeEventListener(n,u,!!f&&r),o=null,i=null,u=null}),function(t,n){t.classList.add("i-amphtml-fill-content")}(a),this.element.appendChild(a),this.tb=a,this.Gt.updatePlaying(!0),this.loadPromise(a)},s.unlayoutCallback=function(){var t,n;return this.tb&&(null===(n=(t=this.tb).parentElement)||void 0===n||n.removeChild(t),this.tb=null),this.eb&&this.eb(),this.Gt.updatePlaying(!1),!0},s.ek=function(){this.JE();var t,n,e=(t=this.element.getAttribute("data-playlist")||this.element.getAttribute("data-episode"),"data-playlist or data-episode is required for <amp-megaphone> %s",n=this.element,(z.user||(z.user=I()),void z.user.win?z.userForEmbed||(z.userForEmbed=I()):z.user).assert(t,"data-playlist or data-episode is required for <amp-megaphone> %s",n,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined)),r=this.element.hasAttribute("data-light"),i=this.element.hasAttribute("data-sharing"),u=this.element.getAttribute("data-episodes"),f=this.element.getAttribute("data-start"),a=this.element.hasAttribute("data-tile"),s={"p":this.Vj?e:void 0,"light":r||void 0,"sharing":i||void 0,"episodes":this.Vj&&u||void 0,"start":!this.Vj&&f||void 0,"tile":!this.Vj&&a||void 0};return function(t,n,e){if(!n)return t;var r=t.split("#",2),i=r[0].split("?",2);return i[0]+(i[1]?"?".concat(i[1],"&").concat(n):"?".concat(n))+(r[1]?"#".concat(r[1]):"")}(this.Qw+"/"+(this.Vj?"":e+"/"),function(t){var n,e,r,i=[];for(var u in t){var f=t[u];if(null!=f){f=o(r=f)?r:[r];for(var a=0;a<f.length;a++)i.push((n=u,e=f[a],"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(e))))}}return i.join("&")}(s))},s.JE=function(){this.Vj=this.element.hasAttribute("data-playlist"),this.Qw="https://".concat(this.Vj?"playlist":"player",".megaphone.fm")},s.GE=function(t){if(t.origin==this.Qw&&t.source==this.tb.contentWindow){var n=function(t){return t.data}(t);if(n&&(c(n)||n.startsWith("{"))){var e=c(n)?n:function(t,n){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null}}(n);if("iframe.resize"==e.context){var r=e.height;this.attemptChangeHeight(r).catch((function(){}))}}}},s.pauseCallback=function(){this.tb&&this.tb.contentWindow&&(this.tb.contentWindow.postMessage(JSON.stringify({"method":"pause"}),this.Qw),this.tb.src=this.tb.src)},a}(t.BaseElement);t.registerElement("amp-megaphone",C)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-megaphone-0.1.js.map