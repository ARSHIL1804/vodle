;
import{PreactBaseElement as e}from"../bento.mjs";function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?n(Object(o),!0).forEach((function(n){t(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}import*as l from"../bento.mjs";import{forwardRef as a}from"../bento.mjs";import{useValueRef as s}from"../bento.mjs";import{createElement as i}from"../bento.mjs";import{useCallback as u,useEffect as c,useImperativeHandle as f,useLayoutEffect as m,useRef as d}from"../bento.mjs";import{forwardRef as b}from"../bento.mjs";import{ContainWrapper as g,useValueRef as p}from"../bento.mjs";import{useAmpContext as j,useLoading as v}from"../bento.mjs";var w=["allow","allowFullScreen","iframeStyle","name","title","matchesMessagingOrigin","messageHandler","ready","loading","onReadyState","sandbox","src"],y=()=>!1,O=b((function(e,t){let{allow:n,allowFullScreen:l,iframeStyle:a,name:s,title:b,matchesMessagingOrigin:O=y,messageHandler:h,ready:R=!0,loading:S,onReadyState:$,sandbox:E,src:x}=e,L=o(e,w);const{playable:U}=j(),k=v(S),z="unload"!==k,F=d(!1),M=p($),P=u((e=>{if(e!==F.current){F.current=e;const t=M.current;null==t||t(e?"complete":"loading")}}),[M]),C=d(null);return f(t,(()=>({get readyState(){return F.current?"complete":"loading"},get node(){return C.current}})),[]),m((()=>{z||P(!1)}),[z,P]),c((()=>{const e=C.current;if(!U&&e){const{src:t}=e;(e=>!(!e||"about:blank"==e||e.includes("#")))(t)?e.src=e.src:e.parentNode.insertBefore(e,e.nextSibling)}}),[U]),m((()=>{const e=C.current;if(!e||!z)return;const t=e=>{const t=C.current;t&&e.source==t.contentWindow&&O(e.origin)&&h(e)},{defaultView:n}=e.ownerDocument;return n.addEventListener("message",t),()=>n.removeEventListener("message",t)}),[O,h,z,R]),i(g,r(r({},L),{},{layout:!0,size:!0,paint:!0}),z&&R&&i("iframe",{allow:n,allowFullScreen:l,frameBorder:"0",loading:k,name:s,onLoad:()=>P(!0),part:"iframe",ref:C,sandbox:E,scrolling:"no",src:x,style:r(r({},a),{},{width:"100%",height:"100%",contentVisibility:"auto"}),title:b}))}));O.displayName="IframeEmbed";var{hasOwnProperty:h,toString:R}=Object.prototype,S=self.AMP_CONFIG||{},$=("string"==typeof S.thirdPartyFrameRegex?new RegExp(S.thirdPartyFrameRegex):S.thirdPartyFrameRegex,("string"==typeof S.cdnProxyRegex?new RegExp(S.cdnProxyRegex):S.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function E(e){if(!self.document||!self.document.head)return null;if(self.location&&$.test(self.location.origin))return null;const t=self.document.head.querySelector(`meta[name="${e}"]`);return t&&t.getAttribute("content")||null}S.thirdPartyUrl,S.thirdPartyFrameHost,S.cdnUrl||E("runtime-host"),S.errorReportingUrl,S.betaErrorReportingUrl,S.localDev,S.geoApiUrl||E("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG,new Set(["c","v","a","ad"]);var x=["onLoad","requestResize","title","url"],{useCallback:L,useEffect:U,useMemo:k,useRef:z,useState:F}=l,M={},P=a((function(e,t){let{onLoad:n,requestResize:a,title:i="WordPress Embed",url:u}=e,c=o(e,x);const[f,m]=F(M),[d,b]=F(0),g=z(null),[p,j]=F(null),v=s(n),w=k((()=>function(e,t,n,r){return function(e,t,n){if(!t)return e;const r=e.split("#",2),o=r[0].split("?",2);let l=o[0]+(o[1]?`?${o[1]}&${t}`:`?${t}`);return l+=r[1]?`#${r[1]}`:"",l}(e,`${encodeURIComponent("embed")}=${encodeURIComponent("true")}`)}(u)),[u]),y=L((e=>{const t=new URL(u),n=new URL(e);return t.origin===n.origin}),[u]),h=L((e=>{var t;const n=function(e){return e.data}(e);switch(n.message){case"height":if("number"==typeof n.value){const e=n.value;a&&a(e),m({"height":e}),b(1)}null===(t=v.current)||void 0===t||t.call(v);break;case"link":y(n.value)&&p&&(p.top.location.href=n.value)}}),[a,y,p,v]);return U((()=>{var e,t;j(null===(e=g.current)||void 0===e||null===(t=e.ownerDocument)||void 0===t?void 0:t.defaultView)}),[]),function(e){try{return new URL(e),!0}catch(e){return console.warn("Please provide a valid url"),!1}}(u)?l.createElement(O,r({iframeStyle:{opacity:d},matchesMessagingOrigin:y,messageHandler:h,ref:t,contentRef:g,src:w,wrapperStyle:f,title:i},c)):null}));P.displayName="BentoWordPressEmbed";var C=class extends e{};C.Component=P,C.props={url:{attr:"data-url",default:""},title:{attr:"title"}},C.layoutSizeDefined=!0,C.usesShadowDom=!0;import{defineBentoElement as H}from"../bento.mjs";H("bento-wordpress-embed",C,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-wordpress-embed-1.0.mjs.map