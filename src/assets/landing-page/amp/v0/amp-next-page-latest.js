;
(self.AMP=self.AMP||[]).push({m:0,v:"2203281422000",n:"amp-next-page",ev:"1.0",l:!0,f:function(t,n){!function(){function n(t,i){return(n=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,i)}function i(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&n(t,i)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,e=r(t);if(n){var u=r(this).constructor;i=Reflect.construct(e,arguments,u)}else i=e.apply(this,arguments);return o(this,i)}}function s(t){return t?Array.prototype.slice.call(t):[]}var a=Array.isArray;function c(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}var h=Object.prototype,f=h.hasOwnProperty,l=h.toString;function v(t){var n=Object.create(null);return t&&Object.assign(n,t),n}function p(t,n){return f.call(t,n)}function d(t,n){if("."==n)return t;for(var i,r=t,o=function(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return c(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(t,n):void 0}}(t))||t&&"number"==typeof t.length){i&&(t=i);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n.split("."));!(i=o()).done;){var u=i.value;if(!(u&&r&&void 0!==r[u]&&"object"==e(r)&&p(r,u))){r=void 0;break}r=r[u]}return r}function m(t,n,i,r,e,o,u,s,a,c,h){return t}function g(t,n){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null==n||n(t),null}}function y(t){return(t.ownerDocument||t).defaultView}var b,x=/(\0)|^(-)$|([\x01-\x1f\x7f]|^-?[0-9])|([\x80-\uffff0-9a-zA-Z_-]+)|[^]/g;function w(t,n,i,r,e){return e||(n?"ï¿½":r?t.slice(0,-1)+"\\"+t.slice(-1).charCodeAt(0).toString(16)+" ":"\\"+t)}function S(t){return void 0!==b?b:b=function(t){try{var n=t.ownerDocument,i=n.createElement("div"),r=n.createElement("div");return i.appendChild(r),i.querySelector(":scope div")===r}catch(t){return!1}}(t)}function k(t,n){return t.replace(/^|,/g,"$&".concat(n," "))}function R(t){return String(t).replace(x,w)}function j(t){m(/^[\w-]+$/.test(t))}function E(t,n){var i=t.classList,r="i-amphtml-scoped";i.add(r);var e=k(n,".".concat(r)),o=t.querySelectorAll(e);return i.remove(r),o}function P(t,n){if(S(t))return t.querySelector(k(n,":scope"));var i=E(t,n)[0];return void 0===i?null:i}function O(t,n){return j(n),P(t,"> [".concat(n,"]"))}function A(t,n){return j(n),i=t,r="> ".concat(n),S(i)?i.querySelectorAll(k(r,":scope")):E(i,r);var i,r}function I(t){var n;null===(n=t.parentElement)||void 0===n||n.removeChild(t)}function N(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function T(t,n){t.insertBefore(n,t.firstChild)}function C(t){if(Node.prototype.getRootNode)return t.getRootNode();var n,i;for(n=t;n.parentNode&&(!(i=n)||"I-AMPHTML-SHADOW-ROOT"!=i.tagName&&(11!=i.nodeType||"[object ShadowRoot]"!==Object.prototype.toString.call(i)));n=n.parentNode);return n}function L(t,n){for(var i=t.length,r=0;r<i;r++)n(t[r],r)}var U=self.AMP_CONFIG||{},$=("string"==typeof U.thirdPartyFrameRegex?new RegExp(U.thirdPartyFrameRegex):U.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,M=("string"==typeof U.cdnProxyRegex?new RegExp(U.cdnProxyRegex):U.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function z(t){if(!self.document||!self.document.head)return null;if(self.location&&M.test(self.location.origin))return null;var n=self.document.head.querySelector('meta[name="'.concat(t,'"]'));return n&&n.getAttribute("content")||null}var D={thirdParty:U.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:U.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:$,cdn:U.cdnUrl||z("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:M,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:U.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:U.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:U.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:U.geoApiUrl||z("amp-geo-api")},F=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function _(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return decodeURIComponent(t)}catch(t){return n}}function H(t){var n=(t||self).location;return function(t){var n,i=v();if(!t)return i;for(;n=F.exec(t);){var r=_(n[1],n[1]),e=n[2]?_(n[2].replace(/\+/g," "),n[2]):"";i[r]=e}return i}(n.originalHash||n.hash)}var V="";function Z(t){var n;return V||(V=(null===(n=t.AMP_CONFIG)||void 0===n?void 0:n.v)||"01".concat("2203281422000")),V}function q(t,n){var i=n||H(t);return["1","actions","amp","amp4ads","amp4email"].includes(i.development)||!!t.AMP_DEV_MODE}function B(t){if(!t)return null;var n=t.match(/^(.*)\/(.*)-([0-9.]+|latest)(\.max)?\.(?:js|mjs)$/i),i=n?n[2]:void 0,r=n?n[3]:void 0;return i&&r?{extensionId:i,extensionVersion:r}:null}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var J,K=self.__AMP_LOG;function W(t,n){throw new Error("failed to call initLogConstructor")}function Y(t){return K.user||(K.user=G()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(K.user.win,t)?K.userForEmbed||(K.userForEmbed=G()):K.user}function G(t){return W()}function Q(){return K.dev||(K.dev=W())}function X(t,n,i,r,e,o,u,s,a,c,h){return t}function tt(t,n,i,r,e,o,u,s,a,c,h){return Y().assert(t,n,i,r,e,o,u,s,a,c,h)}function nt(){return J||(J=Promise.resolve(void 0))}var it=function(){var t=this;this.promise=new Promise((function(n,i){t.resolve=n,t.reject=i}))};function rt(t,n){return ct(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function et(t,n){return ct(at(st(t)),n)}function ot(t,n){var i=at(st(t));return pt(i,n)?ct(i,n):null}function ut(t,n){return ht(at(t),n)}function st(t){return t.nodeType?(n=y(t),rt(n,"ampdoc")).getAmpDoc(t):t;var n}function at(t){var n=st(t);return n.isSingleDoc()?n.win:n}function ct(t,n){X(pt(t,n));var i=ft(t)[n];return i.obj||(X(i.ctor),X(i.context),i.obj=new i.ctor(i.context),X(i.obj),i.context=null,i.resolve&&i.resolve(i.obj)),i.obj}function ht(t,n){var i=ft(t)[n];return i?i.promise?i.promise:(ct(t,n),i.promise=Promise.resolve(i.obj)):null}function ft(t){var n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}function lt(t){return"function"==typeof t.dispose}function vt(t,n){if(lt(n))try{(function(t){return X(lt(t)),t})(n).dispose()}catch(n){Q().error("SERVICE","failed to dispose service",t,n)}}function pt(t,n){var i=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!i||!i.ctor)}function dt(t,n,i,r){var e=ut(t,n);if(e)return e;var o=st(t);return o.whenExtensionsKnown().then((function(){var t=o.getExtensionVersion(i);return t?rt(o.win,"extensions").waitForExtension(i,t):null})).then((function(i){return i?r?ut(t,n):function(t,n){return function(t,n){var i=ht(t,n);if(i)return i;var r,e,o,u,s=ft(t);return s[n]=(e=(r=new it).promise,o=r.reject,u=r.resolve,e.catch((function(){})),{obj:null,promise:e,resolve:u,reject:o,context:null,ctor:null}),s[n].promise}(at(t),n)}(t,n):null}))}var mt,gt,yt=function(t){return dt(t,"amp-analytics-instrumentation","amp-analytics")},bt=function(t){return rt(t,"batched-xhr")},xt=function(t){return function(t,n,i){var r=ot(t,n);return r?Promise.resolve(r):dt(t,n,"amp-bind")}(t,"bind")},wt=function(t){return et(t,"mutator")},St=function(t){return et(t,"viewer")},kt=function(t){return rt(t,"vsync")},Rt=function(t){return et(t,"viewport")},jt=function(t){return rt(t,"xhr")},Et="prerender",Pt="visible",Ot="hidden";function At(t){var n=t.ownerDocument||t;return mt&&mt.ownerDocument===n||(mt=n.createElement("div")),It}function It(t){return function(t,n){m(1===n.length),t.innerHTML=n[0];var i=t.firstElementChild;return m(i),m(!i.nextElementSibling),t.removeChild(i),i}(mt,t)}var Nt=["Webkit","webkit","Moz","moz","ms","O","o"];function Tt(t,n,i,r,e){var o=function(t,n,i){if(n.startsWith("--"))return n;gt||(gt=v());var r=gt[n];if(!r||i){if(r=n,void 0===t[n]){var e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),o=function(t,n){for(var i=0;i<Nt.length;i++){var r=Nt[i]+n;if(void 0!==t[r])return r}return""}(t,e);void 0!==t[o]&&(r=o)}i||(gt[n]=r)}return r}(t.style,n,e);if(o){var u,s=r?i+r:i;t.style.setProperty((u=o.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()})),Nt.some((function(t){return u.startsWith(t+"-")}))?"-".concat(u):u),s)}}function Ct(t,n){void 0===n&&(n=t.hasAttribute("hidden")),n?t.removeAttribute("hidden"):t.setAttribute("hidden","")}function Lt(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];yt(t).then((function(e){e&&e.triggerEventForTarget(t,n,i,r)}))}function Ut(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $t(t,n,i){return n&&Ut(t.prototype,n),i&&Ut(t,i),t}var Mt="inside",zt="top",Dt="bottom";function Ft(t,n){return!(!t||!n)&&t.left==n.left&&t.top==n.top&&t.width==n.width&&t.height==n.height}var _t,Ht,Vt=function(){function t(t,n,i,r){this.element=n,this.Ds=r,this.fidelity=i,this.turn=0==i?Math.floor(4*Math.random()):0,this.tA=null,this.Tu=Rt(t)}var n=t.prototype;return n.Ns=function(t){var n=this.tA;if(!(n&&Ft(n.positionRect,t.positionRect)&&Ft(n.viewportRect,t.viewportRect))){X(t.positionRect);var i,r,e=t.positionRect;t.relativePos=(i=e,r=t.viewportRect,i.top<r.top?zt:i.bottom>r.bottom?Dt:Mt),function(t,n){return t.top<=n.bottom&&n.top<=t.bottom&&t.left<=n.right&&n.left<=t.right}(e,t.viewportRect)?(this.tA=t,this.Ds(t)):this.tA&&(this.tA=null,t.positionRect=null,this.Ds(t))}},n.update=function(t){var n=this;if(!t){if(0!=this.turn)return void this.turn--;0==this.fidelity&&(this.turn=4)}var i,r,e=this.Tu.getSize(),o={left:0,top:0,width:i=e.width,height:r=e.height,bottom:0+r,right:0+i,x:0,y:0};this.Tu.getClientRectAsync(this.element).then((function(t){n.Ns({positionRect:t,viewportRect:o,relativePos:null})}))},t}(),Zt=function(){function t(t){var n=this;this.qi=t,this.t=t.win,this.nA=[],this.Iu=kt(this.t),this.Tu=Rt(t),this.Xg=[],this.rA=!1,this.iA=!1,this.eA=!1,this.aA=function(t,n,i){var r=0,e=0,o=null;function u(){r=0;var i,s=500-(t.Date.now()-e);s>0?r=t.setTimeout(u,s):(i=o,o=null,n.apply(null,i))}return function(){e=t.Date.now();for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];o=i,r||(r=t.setTimeout(u,500))}}(this.t,(function(){n.rA=!1}))}var n=t.prototype;return n.observe=function(t,n,i){var r=this,e=new Vt(this.qi,t,n,i);return this.nA.push(e),this.eA||this.sA(),e.update(),function(){for(var t=0;t<r.nA.length;t++)if(r.nA[t]==e)return void r.uA(t)}},n.unobserve=function(t){for(var n=0;n<this.nA.length;n++)if(this.nA[n].element==t)return void this.uA(n);Q().error("POSITION_OBSERVER","cannot unobserve unobserved element")},n.uA=function(t){this.nA.splice(t,1),0==this.nA.length&&this.oA()},n.sA=function(){var t=this;this.eA=!0,this.Xg.push(this.Tu.onScroll((function(){t.fA()}))),this.Xg.push(this.Tu.onResize((function(){t.cA()})))},n.oA=function(){for(this.eA=!1;this.Xg.length;)this.Xg.pop()()},n.updateAllEntries=function(t){for(var n=0;n<this.nA.length;n++)this.nA[n].update(t)},n.fA=function(){this.aA(),this.rA=!0,this.iA||this.lA()},n.cA=function(){this.updateAllEntries(!0)},n.lA=function(){var t=this;this.updateAllEntries(),this.iA=!0,this.rA?this.Iu.measure((function(){t.lA()})):this.iA=!1},t}(),qt=function(){function t(t,n){this.$i=t,this.iut=null,this.out=null,this.callback=n}var n=t.prototype;return n.observe=function(t,n){var i=this,r=t.ownerDocument.createElement("div");r.classList.add("i-amphtml-next-page-document-top-sentinel");var e=t.ownerDocument.createElement("div");e.classList.add("i-amphtml-next-page-document-bottom-sentinel"),n.insertBefore(r,t),n.insertBefore(e,t.nextSibling),this.$i.getPositionObserver().observe(r,0,(function(t){return i.uut(t)})),this.$i.getPositionObserver().observe(e,0,(function(t){return i.sut(t)}))},n.uut=function(t){this.iut=t.relativePos,this.$i.updateRelativePos(this)},n.sut=function(t){this.out=t.relativePos,this.$i.updateRelativePos(this)},n.usesSentinel=function(){return!0},$t(t,[{key:"top",get:function(){return this.iut}},{key:"bottom",get:function(){return this.out}}]),t}(),Bt=function(t){i(r,t);var n=u(r);function r(t,i,r){var e;return(e=n.call(this,t,i)).aut=r,e}return r.prototype.usesSentinel=function(){return!1},$t(r,[{key:"nextPageEl",get:function(){return this.aut}}]),r}(qt),Jt=function(){function t(t){this.qi=t,this.cg=[],this.dA=0,this.pH=-1,this.cut=null,this.Tu=Rt(t),this.hut=0,this.fut=!1,this.Aa=wt(t);var n=function(t,n,i){var r=0,e=null;function o(i){e=null,r=t.setTimeout(u,200),n.apply(null,i)}function u(){r=0,e&&o(e)}return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r?e=n:o(n)}}(t.win,this.xH.bind(this));this.Tu.onScroll(n.bind(this)),this.Tu.onResize(n.bind(this)),this.xH()}var n=t.prototype;return n.xH=function(){var t=this;this.fut||(this.fut=!0,this.Aa.measureElement((function(){t.hut=t.Tu.getHeight();var n=t.Tu.getScrollTop(),i=n-t.dA;if(!(Math.abs(i)<20)){var r=i>0?-1:1;t.cg.forEach((function(n){n.usesSentinel()&&t.cut===r||t.updateRelativePos(n)})),t.dA=n,t.cut=t.pH,t.pH=r}})).then((function(){t.fut=!1})))},n.isScrollingUp=function(){return 1===this.pH},n.isScrollingDown=function(){return-1===this.pH},n.observe=function(t,n,i){var r=new qt(this,i);this.cg.push(r),r.observe(t,n)},n.observeHost=function(t,n){var i=new Bt(this,n,t);this.cg.push(i)},n.getPositionObserver=function(){return t=this.qi,n="position-observer",i=Zt,function(t,n,i,r,e,o){var u=ft(t),s=u[i];s||(s=u[i]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),s.ctor||(s.ctor=r,s.context=n,s.sharedInstance=!1,s.resolve&&ct(t,i))}(at(r=st(t)),r,n,i),et(this.qi.getHeadNode(),"position-observer");var t,n,i,r},n.updateRelativePos=function(t){var n=t.usesSentinel()?this.getRelativePosFromSentinel(t):this.getRelativePosFromScroll(t);n&&t.callback(X(n))},n.getRelativePosFromScroll=function(t){var n=this.dA,i=this.hut,r=t.nextPageEl.getLayoutBox().top;return n<r-i?5:n<r&&r<=i&&n<=0?1:n<r?this.isScrollingDown()?3:4:2},n.getRelativePosFromSentinel=function(t){var n=t.bottom,i=t.top;return i||n?i===Mt&&n===Mt?1:i&&i!==zt||n&&n!==Dt?(i&&i!==zt||n!==zt)&&(i!==Dt||n&&n!==Dt)?!(i!==zt&&i!==Mt||n&&n!==Dt)==!!this.isScrollingUp()?3:4:2:5:null},$t(t,[{key:"mutator",get:function(){return this.Aa}}]),t}(),Kt="amp-next-page-hidden",Wt=function(){function t(t,n){this.Sg=t,this.sz=n.title,this.pi=n.url,this.lut=n.url,this.FI=n.image,this.vut=null,this.Ft=null,this.bX=null,this.Pi=1,this.J=Et,this.dut=2}var n=t.prototype;return n.is=function(t){return this.Pi===t},n.isLoaded=function(){return 3===this.Pi||5===this.Pi||6===this.Pi},n.isVisible=function(){return this.isLoaded()&&this.J===Pt},n.setVisibility=function(t){this.isLoaded()&&t!=this.J&&(this.is(6)&&t===Pt&&this.resume(),this.J=t,this.vut&&(this.vut.setVisibilityState(t),this.vut.ampdoc.getBody().classList.toggle("amp-next-page-visible",this.isVisible()),this.vut.ampdoc.getBody().classList.toggle(Kt,!this.isVisible())))},n.pause=function(){var t=this;return this.vut?this.vut.close().then((function(){return t.Sg.closeDocument(t).then((function(){t.vut=null,t.J=Ot,t.Pi=6}))})):nt()},n.resume=function(){return this.mut()},n.fetch=function(){var t=this;return 5===this.Pi||2===this.Pi||3===this.Pi||4===this.Pi?nt():(this.Pi=2,this.Sg.fetchPageDocument(this).then((function(n){return t.Pi=3,t.bX=n,t.Ft=t.Sg.createDocumentContainerForPage(t),t.mut()})).catch((function(){t.Pi=4})))},n.mut=function(){var t=this;return this.Sg.attachDocumentToPage(this,X(this.bX),this.is(6)).then((function(n){n?(t.Pi=5,t.vut=n,t.is(6)||t.Sg.setLastFetchedPage(t)):t.Pi=4}))},$t(t,[{key:"url",get:function(){return this.pi},set:function(t){this.pi=t}},{key:"initialUrl",get:function(){return this.lut}},{key:"image",get:function(){return this.FI}},{key:"title",get:function(){return this.sz}},{key:"relativePos",get:function(){return this.dut},set:function(t){this.dut=t}},{key:"document",get:function(){if(this.vut)return this.vut.ampdoc.getRootNode()}},{key:"container",get:function(){return this.Ft}},{key:"shadowDoc",get:function(){return this.vut}}]),t}(),Yt=function(t){i(r,t);var n=u(r);function r(t,i,r,e,o){var u;return(u=n.call(this,t,i)).Pi=r,u.J=e,u.ql=o,u}return $t(r,[{key:"document",get:function(){return this.ql}}]),r}(Wt),Gt=function(){function t(t){this.St=t,this.It=0,this.Ct=0,this.Ot=v()}var n=t.prototype;return n.has=function(t){return!!this.Ot[t]},n.get=function(t){var n=this.Ot[t];if(n)return n.access=++this.Ct,n.payload},n.put=function(t,n){this.has(t)||this.It++,this.Ot[t]={payload:n,access:this.Ct},this.Rt()},n.Rt=function(){if(!(this.It<=this.St)){var t,n=this.Ot,i=this.Ct+1;for(var r in n){var e=n[r].access;e<i&&(i=e,t=r)}void 0!==t&&(delete n[t],this.It--)}},t}(),Qt=new Set(["c","v","a","ad"]),Xt=function(t){return"string"==typeof t?tn(t):t};function tn(t,n){return _t||(_t=self.document.createElement("a"),Ht=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new Gt(100))),function(t,n,i){if(i&&i.has(n))return i.get(n);t.href=n,t.protocol||(t.href=t.href);var r,e={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname),("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)&&(e.port="",e.host=e.hostname),r=t.origin&&"null"!=t.origin?t.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href,e.origin=r;var o=e;return i&&i.put(n,o),o}(_t,t,n?null:Ht)}function nn(t){return"https:"==(t=Xt(t)).protocol||"localhost"==t.hostname||"127.0.0.1"==t.hostname||(i=".localhost",(r=(n=t.hostname).length-i.length)>=0&&n.indexOf(i,r)==r);var n,i,r}function rn(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"source";return tt(null!=t,"%s %s must be available",n,i),tt(nn(t)||/^\/\//.test(t),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',n,i,t),t}function en(t){if(!function(t){return D.cdnProxyRegex.test(Xt(t).origin)}(t=Xt(t)))return t.href;var n=t.pathname.split("/"),i=n[1];tt(Qt.has(i),"Unknown path prefix in url %s",t.href);var r=n[2],e="s"==r?"https://"+decodeURIComponent(n[3]):"http://"+decodeURIComponent(r);return tt(e.indexOf(".")>0,"Expected a . in origin %s",e),n.splice(1,"s"==r?3:2),e+n.join("/")+function(t,n){if(!t||"?"==t)return"";var i=new RegExp("[?&]".concat("(amp_(js[^&=]*|gsa|r|kit)|usqp)","\\b[^&]*"),"g"),r=t.replace(i,"").replace(/^[?&]/,"");return r?"?"+r:""}(t.search)+(t.hash||"")}function on(t){return tn(en(t)).origin}function un(t,n){var i=tn(t),r=tn(n).origin,e=on(n);return tt(i.origin===r||i.origin===e,"Invalid page URL supplied to amp-next-page, pages must be from the same origin as the current document"),i}var sn='.i-amphtml-next-page-document{overflow:hidden}.i-amphtml-next-page-document:not(.amp-next-page-visible) [i-amphtml-fixedid]{display:none}.i-amphtml-next-page-document.amp-next-page-visible{opacity:1;overflow:visible}.i-amphtml-next-page-document:after,.i-amphtml-next-page-document:before{content:" ";display:table}.i-amphtml-next-page-placeholder{background:#eee}.amp-next-page-separator{border-bottom:1px solid rgba(0,0,0,0.12)}.amp-next-page-links{border-top:1px solid rgba(0,0,0,0.1);margin-top:16px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.amp-next-page-link{border-bottom:1px solid rgba(0,0,0,0.1);display:block;overflow:auto;padding:10px 0;text-decoration:none}.amp-next-page-image{width:72px;height:72px;float:left;margin:0 10px;background-size:cover;background-position:50%}.amp-next-page-text{position:relative;margin:5px 30px 5px 0;color:#3c4043;font-size:17px}\n/*# sourceURL=/extensions/amp-next-page/1.0/amp-next-page.css*/';function an(t,n,i,r){var e=function(t){return ot(t,"url-replace")}(t);return(i>=1?e.expandUrlAsync(n):Promise.resolve(n)).then((function(n){if(1===i){var o=e.collectDisallowedVarsSync(t);if(o.length>0)throw Y().createError("URL variable substitutions in CORS fetches from dynamic URLs (e.g. via amp-bind) require opt-in. "+'Please add data-amp-replace="'.concat(o.join(" "),'" to the ')+"<".concat(t.tagName,"> element. See https://bit.ly/amp-var-subs."))}var u={};return t.hasAttribute("credentials")&&(u.credentials=t.getAttribute("credentials")),r&&(u.cache="reload"),{"xhrUrl":n,"fetchOpt":u}}))}var cn,hn,fn="render-start",ln="none";function vn(){return void 0===hn&&(hn=dn()!=ln&&(pn(Element.prototype.attachShadow)||pn(Element.prototype.createShadowRoot))),hn}function pn(t){return!!t&&-1!=t.toString().indexOf("[native code]")}function dn(t){return void 0===cn&&(n=t||Element,cn=n.prototype.attachShadow?"v1":n.prototype.createShadowRoot?"v0":ln),cn;var n}var mn={strictStyling:!1,scopeRules:function(t,n,i){var r="";return t&&Array.prototype.forEach.call(t,(function(t){if(t.selectorText&&t.style&&void 0!==t.style.cssText)r+=this.scopeSelector(t.selectorText,n,this.strictStyling,i)+" {\n\t",r+=this.propertiesFromRule(t)+"\n}\n\n";else if(t.type===CSSRule.MEDIA_RULE)r+="@media "+t.media.mediaText+" {\n",r+=this.scopeRules(t.cssRules,n),r+="\n}\n\n";else try{t.cssText&&(r+=t.cssText+"\n\n")}catch(n){t.type===CSSRule.KEYFRAMES_RULE&&t.cssRules&&(r+=this.ieSafeCssTextFromKeyFrameRule(t))}}),this),r},ieSafeCssTextFromKeyFrameRule:function(t){var n="@keyframes "+t.name+" {";return Array.prototype.forEach.call(t.cssRules,(function(t){n+=" "+t.keyText+" {"+t.style.cssText+"}"})),n+=" }"},scopeSelector:function(t,n,i,r){var e=[];return t.split(",").forEach((function(t){t=t.trim(),r&&(t=r(t)),this.selectorNeedsScoping(t,n)&&(t=i&&!t.match(xn)?this.applyStrictSelectorScope(t,n):this.applySelectorScope(t,n)),e.push(t)}),this),e.join(", ")},selectorNeedsScoping:function(t,n){if(Array.isArray(n))return!0;var i=this.makeScopeMatcher(n);return!t.match(i)},makeScopeMatcher:function(t){return t=t.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+t+")"+bn,"m")},applySelectorScope:function(t,n){return Array.isArray(n)?this.applySelectorScopeList(t,n):this.applySimpleSelectorScope(t,n)},applySelectorScopeList:function(t,n){for(var i,r=[],e=0;i=n[e];e++)r.push(this.applySimpleSelectorScope(t,i));return r.join(", ")},applySimpleSelectorScope:function(t,n){return t.match(wn)?(t=t.replace(xn,n)).replace(wn,n+" "):n+" "+t},applyStrictSelectorScope:function(t,n){n=n.replace(/\[is=([^\]]*)\]/g,"$1");var i=[" ",">","+","~"],r=t,e="["+n+"]";return i.forEach((function(t){var n=r.split(t);r=n.map((function(t){var n=t.trim().replace(wn,"");return n&&i.indexOf(n)<0&&n.indexOf(e)<0&&(t=n.replace(/([^:]*)(:*)(.*)/,"$1"+e+"$2$3")),t})).join(t)})),r},propertiesFromRule:function(t){var n=t.style.cssText;t.style.content&&!t.style.content.match(/['"]+|attr/)&&(n=n.replace(/content:[^;]*;/g,"content: '"+t.style.content+"';"));var i=t.style;for(var r in i)"initial"===i[r]&&(n+=r+": initial; ");return n}},gn="-shadowcsshost",yn=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",bn=(new RegExp("("+gn+yn,"gim"),new RegExp("(-shadowcsscontext"+yn,"gim"),"([>\\s~+[.,{:][\\s\\S]*)?$"),xn=gn+"-no-combinator",wn=new RegExp(gn,"gim");function Sn(t,n,i,r,e){var o=t.getHeadNode(),u=function(t,n,i,r){var e=t.__AMP_CSS_SM;e||(e=t.__AMP_CSS_SM=v());var o=!i&&r&&"amp-custom"!=r&&"amp-keyframes"!=r,u=i?"amp-runtime":o?"amp-extension=".concat(r):null;if(u){var s=kn(t,e,u);if(s)return"STYLE"==s.tagName&&s.textContent!==n&&(s.textContent=n),s}var a=(t.ownerDocument||t).createElement("style");a.textContent=n;var c=null;return i?a.setAttribute("amp-runtime",""):o?(a.setAttribute("amp-extension",r||""),c=kn(t,e,"amp-runtime")):(r&&a.setAttribute(r,""),c=t.lastChild),function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(i){var r=i.nextSibling;t.insertBefore(n,r)}else T(t,n)}(t,a,c),u&&(e[u]=a),a}(o,function(t,n){var i=t.__AMP_CSS_TR;return i?i(n):n}(o,n),r||!1,e||null);if(i){var s=t.getRootNode();if(Rn(s,u))return i(u),u;var a=setInterval((function(){Rn(s,u)&&(clearInterval(a),i(u))}),4)}return u}function kn(t,n,i){if(n[i])return n[i];var r=t.querySelector("style[".concat(i,"], link[").concat(i,"]"));return r?(n[i]=r,r):null}function Rn(t,n){for(var i=t.styleSheets,r=0;r<i.length;r++)if(i[r].ownerNode==n)return!0;return!1}new RegExp("-shadowcsscontext","gim");var jn=function(){function t(t){this.fv=t.document.implementation.createHTMLDocument(""),this.fv.open(),this.Iu=kt(t),this.lv=this.vv.bind(this),this.dv=null,this.mv=null,this.pv=null,this.bv=!1,this.gv=nt(),this.yv=!1,this.wv=null}var n=t.prototype;return n.onBody=function(t){this.dv=t},n.onBodyChunk=function(t){this.mv=t},n.onEnd=function(t){this.pv=t},n.write=function(t){if(this.yv)throw new Error("closed already");return t&&this.fv.write(t),this._e(),this.gv},n.close=function(){return this.fv.close(),this.yv=!0,this._e(),this.gv},n.abort=function(t){throw new Error("Not implemented")},n.releaseLock=function(){throw new Error("Not implemented")},n._e=function(){m(this.dv&&this.mv&&this.pv),this.bv||(this.bv=!0,this.Iu.mutate(this.lv))},n.vv=function(){if(this.bv=!1,!this.wv&&this.fv.body&&(this.wv=this.dv(this.fv)),this.wv){var t=this.fv.body,n=m(this.wv),i=0;for(Pn(t);t.firstChild;)i++,n.appendChild(t.firstChild);i>0&&this.mv()}this.yv&&this.pv()},$t(t,[{key:"closed",get:function(){throw new Error("Not implemented")}},{key:"desiredSize",get:function(){throw new Error("Not implemented")}},{key:"ready",get:function(){throw new Error("Not implemented")}}]),t}(),En=function(){function t(t){this.Av=[],this.Iu=kt(t),this.dv=null,this.mv=null,this.pv=null,this.gv=nt(),this.yv=!1}var n=t.prototype;return n.onBody=function(t){this.dv=t},n.onBodyChunk=function(t){this.mv=t},n.onEnd=function(t){this.pv=t},n.write=function(t){if(m(this.dv&&this.mv&&this.pv),this.yv)throw new Error("closed already");return t&&this.Av.push(t),this.gv},n.close=function(){var t=this;return m(this.dv&&this.mv&&this.pv),this.yv=!0,this.Iu.mutate((function(){return t.Of()})),this.gv},n.abort=function(t){throw new Error("Not implemented")},n.releaseLock=function(){throw new Error("Not implemented")},n.Of=function(){var t=this.Av.join(""),n=(new DOMParser).parseFromString(t,"text/html");if(n.body){var i=n.body,r=this.dv(n),e=0;for(Pn(i);i.firstChild;)e++,r.appendChild(i.firstChild);e>0&&this.mv()}this.pv()},$t(t,[{key:"closed",get:function(){throw new Error("Not implemented")}},{key:"desiredSize",get:function(){throw new Error("Not implemented")}},{key:"ready",get:function(){throw new Error("Not implemented")}}]),t}();function Pn(t){L(A(t,"noscript"),(function(t){I(t)}))}var On,An=/[^\.\-\_0-9a-zA-Z]/,In=/[^\-\_0-9a-zA-Z]/;function Nn(t,n,i){var r,e,o=t.ownerDocument;if(vn())r=o.importNode(n,i);else{"block",e=(r=o.createElement("amp-body")).style,m(!0),m(!e.display),e.display="block";for(var u=0;u<n.attributes.length;u++)r.setAttribute(n.attributes[0].name,n.attributes[0].value);if(i)for(var s=n.firstChild;s;s=s.nextSibling)r.appendChild(o.importNode(s,!0))}Tt(r,"position","relative");var a=t.body;return a&&t.removeChild(a),t.appendChild(r),Object.defineProperty(t,"body",{configurable:!0,value:r}),r}function Tn(t){return t.replace(/(html|body)/g,Cn)}function Cn(t,n,i,r){var e=r.charAt(i-1),o=r.charAt(i+t.length);return e&&!An.test(e)||o&&!In.test(o)?t:"amp-"+t}function Ln(t,n){var i=t.createElement("style");i.textContent=n;try{return(t.head||t.documentElement).appendChild(i),i.sheet?i.sheet.cssRules:null}finally{i.parentNode&&i.parentNode.removeChild(i)}}var Un="multidoc-manager",$n=function(){function n(t,n,i,r){this.win=t,this.ll=n,this.Zl=i,this.js=r,this.Ev=[]}var i=n.prototype;return i.xv=function(n,i,r,e){var o=this;r=r||Object.create(null),this.Ov(),Tt(n,"visibility","hidden");var u=function(t){var n,i=y(t),r=t.shadowRoot||t.__AMP_SHADOW_ROOT;if(r)return r.innerHTML="",r;var e,o=dn();if("v1"==o?(n=t.attachShadow({mode:"open"})).styleSheets||Object.defineProperty(n,"styleSheets",{get:function(){var t=[];return L(n.childNodes,(function(n){"STYLE"===n.tagName&&t.push(n.sheet)})),t}}):n="v0"==o?t.createShadowRoot():function(t){var n=t.ownerDocument;t.classList.add("i-amphtml-shadow-host-polyfill");var i=n.createElement("style");i.textContent=".i-amphtml-shadow-host-polyfill>:not(i-amphtml-shadow-root){display:none!important}",t.appendChild(i);var r=n.createElement("i-amphtml-shadow-root");return t.appendChild(r),t.__AMP_SHADOW_ROOT=r,Object.defineProperty(t,"shadowRoot",{enumerable:!0,configurable:!0,value:r}),r.host=t,r.getElementById=function(t){var n=R(t);return r.querySelector("#".concat(n))},Object.defineProperty(r,"styleSheets",{get:function(){return n.styleSheets?s(n.styleSheets).filter((function(t){return r.contains(t.ownerNode)})):[]}}),r}(t),!vn()){var u="i-amphtml-sd-".concat(i.Math.floor(1e4*i.Math.random()));n.id=u,n.host.classList.add(u),e=function(t){return function(t,n){return function(t,n){var i=X(t.id),r=t.ownerDocument,e=null;try{e=Ln(r.implementation.createHTMLDocument(""),n)}catch(t){}if(!e)try{e=Ln(r,n)}catch(t){}return e?mn.scopeRules.call(mn,e,".".concat(i),Tn):n}(t,n)}(n,t)},n.__AMP_CSS_TR=e}return n}(n);u.AMP&&(Y().warn(Un,"Shadow doc wasn't previously closed"),this.Tv(u));var c={};u.AMP=c,c.url=i;var h=tn(i).origin,f=this.ll.installShadowDoc(i,u,{params:r});c.ampdoc=f,Q().fine(Un,"Attach to shadow root:",u,f),Sn(f,t.combinedCss,null,!0),t.installAmpdocServices(f);var v,p,d=St(f);return c.setVisibilityState=function(t){f.overrideVisibilityState(t)},c.postMessage=d.receiveMessage.bind(d),c.onMessage=function(t){v=t},d.setMessageDeliverer((function(t,n,i){var r;return"broadcast"==t?(o.Iv(n,u),i?nt():void 0):null===(r=v)||void 0===r?void 0:r(t,n,i)}),h),c.close=function(){return o.Tv(u)},(p=self,p.__AMP_MODE?p.__AMP_MODE:p.__AMP_MODE=function(t){return{localDev:!1,development:q(t,H(t)),esm:!1,test:!1,rtvVersion:Z(t)}}(p)).development&&(c.toggleRuntime=d.toggleRuntime.bind(d),c.resources=et(f,"resources")),c.getState=function(t){return xt(u).then((function(n){return n?n.getState(t):Promise.reject("amp-bind is not available in this document")}))},c.setState=function(t){return xt(u).then((function(n){return n?"string"==typeof t?n.setStateWithExpression(t,{}):(i=t,"[object Object]"===l.call(i)||a(t)?n.setStateWithObject(t):Promise.reject("Invalid state")):Promise.reject("amp-bind is not available in this document");var i}))},e(c,u,f).then((function(){f.setReady(),f.signals().signal(fn),Tt(n,"visibility","visible")})),this.Ev.includes(u)||this.Ev.push(u),Q().fine(Un,"Shadow root initialization is done:",u,f),c},i.attachShadowDoc=function(t,n,i,r){var e=this;return Y().assertString(i),Q().fine(Un,"Attach shadow doc:",n),this.xv(t,i,r,(function(i,r,o){if(e.Pv(o,r,n),n.body){var u=Nn(r,n.body,!0);u.classList.add("amp-shadow"),o.setBody(u)}return setTimeout((function(){o.signals().signal(fn),Tt(t,"visibility","visible")}),50),nt()}))},i.attachShadowDocAsStream=function(t,n,i){var r=this;return Y().assertString(n),Q().fine(Un,"Attach shadow doc as stream"),this.xv(t,n,i,(function(n,i,e){var o,u=!1,s=function(t){return void 0===On&&(On=function(t){return!(!t.document.implementation||"function"!=typeof t.document.implementation.createHTMLDocument||(n=t,rt(n,"platform")).isFirefox());var n}(t)),On}(o=r.win)?new jn(o):new En(o);return n.writer=s,s.onBody((function(t){r.Pv(e,i,t);var n=Nn(i,t.body,!1);return n.classList.add("amp-shadow"),e.setBody(n),n})),s.onBodyChunk((function(){u||(u=!0,setTimeout((function(){e.signals().signal(fn),Tt(t,"visibility","visible")}),50))})),new Promise((function(t){s.onEnd((function(){t(),n.writer=null}))}))}))},i.Pv=function(t,n,i){if(i.head){n.AMP.head=i.head;for(var r={},e=A(this.win.document.head,"link"),o=0;o<e.length;o++){var u=e[o].getAttribute("href");u&&(r[u]=!0)}for(var s=i.head.firstElementChild;s;s=s.nextElementSibling){var a=s.tagName,c=s.getAttribute("name"),h=s.getAttribute("rel");switch(a){case"TITLE":n.AMP.title=s.textContent,Q().fine(Un,"- set title: ",n.AMP.title);break;case"META":s.hasAttribute("charset")||"viewport"==c||(c?t.setMetaByName(c,s.getAttribute("content")||""):Q().warn(Un,"meta ignored: ",s));break;case"LINK":var f=s.getAttribute("href");if("canonical"==h)n.AMP.canonicalUrl=f,Q().fine(Un,"- set canonical: ",n.AMP.canonicalUrl);else if("stylesheet"==h)if(r[f])Q().fine(Un,"- stylesheet already included: ",f),Sn(t,'@import "'.concat(f,'"'),null,!1);else{r[f]=!0;var l=this.win.document.createElement("link");l.setAttribute("rel","stylesheet"),l.setAttribute("type","text/css"),l.setAttribute("href",f),this.win.document.head.appendChild(l),Q().fine(Un,"- import font to parent: ",f,l)}else Q().fine(Un,"- ignore link rel=",h);break;case"STYLE":s.hasAttribute("amp-boilerplate")?Q().fine(Un,"- ignore boilerplate style: ",s):s.hasAttribute("amp-custom")?(Sn(t,s.textContent,null,!1,"amp-custom"),Q().fine(Un,"- import style: ",s)):s.hasAttribute("amp-keyframes")&&(Sn(t,s.textContent,null,!1,"amp-keyframes"),Q().fine(Un,"- import style: ",s));break;case"SCRIPT":if(s.hasAttribute("src")){Q().fine(Un,"- src script: ",s);var v=s.getAttribute("src"),p=B(v),d=s.getAttribute("custom-element"),m=s.getAttribute("custom-template"),g=d||m;p?g?this.Zl.installExtensionForDoc(t,g,p.extensionVersion):s.hasAttribute("data-amp-report-test")||Y().error(Un,"- unknown script: ",s,v):Q().fine(Un,"- ignore runtime script: ",v)}else-1==(s.getAttribute("type")||"application/javascript").indexOf("javascript")?(n.appendChild(this.win.document.importNode(s,!0)),Q().fine(Un,"- non-src script: ",s)):s.hasAttribute("amp-onerror")||Y().error(Un,"- unallowed inline javascript: ",s);break;case"NOSCRIPT":break;default:Y().error(Un,"- UNKNOWN head element:",s)}}}t.setExtensionsKnown()},i.Iv=function(t,n){var i=this;this.Ov(),this.Ev.forEach((function(r){if(r!=n){var e=St(r.AMP.ampdoc);i.js.delay((function(){e.receiveMessage("broadcast",t,!1)}),0)}}))},i.Tv=function(t){this.Sv(t);var n=t.AMP;delete t.AMP;var i=n.ampdoc;return i.overrideVisibilityState("inactive"),function(t){!function(t){var n=ft(t),i=function(t){if(!Object.prototype.hasOwnProperty.call(n,t))return"continue";var i=n[t];if(i.sharedInstance)return"continue";i.obj?vt(t,i.obj):i.promise&&i.promise.then((function(n){return vt(t,n)}))};for(var r in n)i(r)}(t)}(i),this.js.timeoutPromise(15,new this.win.Promise((function(t){ut(i,"resources").then((function(n){n?n.onNextPass(t):t()}))})),"Timeout reached waiting for visibility state change callback").catch((function(t){Y().info(Un,t)}))},i.Sv=function(t){var n=this.Ev.indexOf(t);-1!=n&&this.Ev.splice(n,1)},i.Mv=function(t){var n=this;this.js.delay((function(){n.Tv(t)}),0)},i.Ov=function(){var t=this;this.Ev.forEach((function(n){n.host&&function(t){var n=t.isConnected;if(void 0!==n)return n;for(var i=t;(i=C(i)).host;)i=i.host;return i.nodeType===Node.DOCUMENT_NODE}(n.host)||(Y().warn(Un,"Shadow doc wasn't previously closed"),t.Sv(n),t.Mv(n))}))},n}(),Mn=['<div class=amp-next-page-separator aria-label="Next article separator" tabindex=0></div>'],zn=['<div class=amp-next-page-links aria-label="Read more articles"></div>'],Dn=["<a class=amp-next-page-link><img ref=image class=amp-next-page-image> <span ref=title class=amp-next-page-text></span></a>"],Fn="amp-next-page",_n="i-amphtml-next-page-document",Hn="i-amphtml-next-page-shadow-root",Vn="i-amphtml-next-page-placeholder",Zn=function(){return nt()},qn=function(){function t(t){var n=this;this.qi=t,this.t=t.win,this.Yd=this.t.document,this.Tu=Rt(t),this.co=St(t),this.Aa=wt(t),this.Dy=et(t,"templates"),this.gut=null,this.yut=null,this.but=Zn,this.xut=!1,this.wut=null,this.Sut=null,this.kut=null,this.Rut=null,this.wu=null,this.aE=null,this.TJ,this.jut=null,this.Eut=null,this.Put=null,this.Out={},this.Aut=!1,this.Iut=1/0,this.Nut=null,this.Ai=null,this.mi=new Promise((function(t){n.Ai=t}))}var n=t.prototype;return n.isBuilt=function(){return!!this.TJ},n.build=function(t){var n=this;if(this.isBuilt())return nt();this.qi.getBody().lastElementChild!==t&&Y().warn(Fn,"should be the last element in the body of the document, a footer element can be added as a child of <amp-next-page> if it has the `footer` attribute"),this.Sut=t,this.Nut=this.Tut().getAttribute("src"),this.Aut=this.Tut().hasAttribute("deep-parsing")?"false"!==this.Tut().getAttribute("deep-parsing"):!this.Nut,this.Iut=this.Tut().hasAttribute("max-pages")?parseInt(this.Tut().getAttribute("max-pages"),10):1/0,this.gut=this.Cut(t),this.yut=this.Lut(t),this.Eut=this.createHostPage(),this.Put=this.Eut,this.toggleHiddenAndReplaceableElements(this.Yd),T(this.Sut,this.yut),this.wu=et(this.qi,"history"),this.aE=et(this.qi,"navigation"),this.Rut=new $n(this.t,rt(this.t,"ampdoc"),function(t){return rt(t,"extensions")}(this.t),ct(this.t,"timer")),this.kut=new Jt(this.qi),this.mi.then((function(){n.kut.observeHost(n.Tut(),(function(t){n.Eut.relativePos=t,n.updateVisibility()}))})),this.TJ||(this.TJ=[this.Eut],this.setLastFetchedPage(this.Eut));var i=function(){n.but(),n.Ai()};return this.Uut().then((function(){return n.$ut()})).then(i,i),this.Tut().classList.add("i-amphtml-next-page"),this.mi},n.Uut=function(){var t=this;return new Promise((function(n){if(0!=t.Tu.getScrollTop())return n();var i=t.Tu.onScroll((function(){n(),i()}))}))},n.Tut=function(){return this.Sut},n.maybeFetchNext=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.TJ.filter((function(t){return!t.is(1)})).length>this.Iut,r=this.TJ.some((function(t){return t.is(2)})),e=this.Mut()>3&&!n;if(this.xut||r||e||i)return nt();var o=this.TJ.length,u=this.TJ[this.zut(this.jut)+1];return u?u.fetch().then((function(){u.is(4)&&t.setLastFetchedPage(u)})).then((function(){return t.but()}),(function(n){return t.but().then((function(){throw n}))})):this.Dut().then((function(n){return t.Fut(n)})).then((function(){return t.TJ.length<=o?(t.xut=!0,t.but()):t.maybeFetchNext(!0)}))},n.updateVisibility=function(){var t=this;this.TJ.forEach((function(n,i){2===n.relativePos?n.isVisible()&&n.setVisibility(Ot):3!==n.relativePos&&(n.isVisible()||n.setVisibility(Pt),t._ut(i),t.Hut(i))})),this.TJ.some((function(t){return t.isVisible()}))||this.Eut.setVisibility(Pt),this.TJ.filter((function(t){return t.isVisible()})).forEach((function(n){return t.toggleHiddenAndReplaceableElements(X(n.document))}));var n=function(t,n){for(var i=0;i<t.length;i++)if(t[i].isVisible())return i;return-1}(this.TJ),i=this.TJ[n]||null;i&&this.Put!==i&&this.setTitlePage(i),this.maybeFetchNext()},n._ut=function(t,n){var i=void 0===n?5:n;this.kut.isScrollingDown()&&this.Eut.isVisible()&&this.Eut.setVisibility(Ot);var r=this.kut.isScrollingDown()?this.TJ.slice(1,t).reverse():this.TJ.slice(t+1);return Promise.all(r.filter((function(t){return 2===t.relativePos})).map((function(t,n){if(t.isVisible()&&t.setVisibility(Ot),n>=i)return t.pause()})))},n.Hut=function(t,n){var i=void 0===n?5:n,r=this.TJ.slice(1).slice(Math.max(0,t-i-1),Math.min(this.TJ.length,t+i+1)).filter((function(t){return t.is(6)}));return Promise.all(r.map((function(t){return t.resume()})))},n.setLastFetchedPage=function(t){this.jut=t},n.setTitlePage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.Eut;if(t){var n=t.title,i=t.url;this.Yd.title=n,this.wu.replace({title:n,url:i}),this.Put=t,Lt(this.Tut(),"amp-next-page-scroll",{"title":n,"url":i},!1)}else Q().warn(Fn,"setTitlePage called before next-page-service is built")},n.createHostPage=function(){var t,n,i,r=this.Yd,e=r.location,o=r.title,u=e.href,s=function(t){var n=t.querySelector('script[type="application/ld+json"]');if(n){var i=g(n.textContent);if(i&&i.image)return"string"==typeof i.image?i.image:i.image["@list"]&&"string"==typeof i.image["@list"][0]?i.image["@list"][0]:"string"==typeof i.image.url?i.image.url:"string"==typeof i.image[0]?i.image[0]:void 0}}(this.Yd)||((t=this.Yd.querySelector('meta[property="og:image"]'))?t.getAttribute("content"):void 0)||(n=this.Yd,(i=n.querySelector('link[rel="shortcut icon"]')||n.querySelector('link[rel="icon"]'))?i.getAttribute("href"):void 0)||"";return new Yt(this,{url:u,title:o||"",image:s},5,Pt,this.Yd)},n.createDocumentContainerForPage=function(t){var n=this,i=this.Yd.createElement("div");i.classList.add("i-amphtml-next-page-document-container"),this.Sut.insertBefore(i,this.yut);var r=this.Yd.createElement("div");return r.classList.add(Hn),i.appendChild(r),this.kut.observe(r,i,(function(i){t.relativePos=i,n.updateVisibility()})),i},n.Vut=function(){return this.co.hasCapability("cid")?"cid":null},n.attachDocumentToPage=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.Mut()<1&&!i)return Promise.resolve(null);var r=t.container,e=P(r,"> .".concat(R(Hn)));if(!e){X(t.is(6));var o=P(r,"> .".concat(R(Vn)));(e=this.Yd.createElement("div")).classList.add(Hn),r.replaceChild(e,o)}this.sanitizeDoc(n);try{var u=this.Rut.attachShadowDoc(e,n,t.url,{visibilityState:Et,cap:this.Vut()}),s=this.co.maybeGetMessageDeliverer();s&&u.onMessage((function(t,n,i){if("documentHeight"!==t&&"scroll"!==t&&"viewport"!==t)return s(t,n,i)}));var a=X(u.ampdoc);Sn(a,sn,null,!1,Fn);var c=a.getBody();c.classList.add(_n);var h=this.gut.cloneNode(!0);T(r,h);var f=this.Zut(h,t);return f.then((function(){return u}))}catch(t){return Q().error(Fn,"failed to attach shadow document for page",t),Promise.resolve(null)}},n.closeDocument=function(t){if(t.is(6))return nt();var n=t.container,i=P(n,"> .".concat(R(Hn))),r=this.Yd.createElement("div");r.classList.add(Vn);var e=0,o=0;return this.Aa.measureMutateElement(i,(function(){e=i.offsetHeight,o=i.offsetWidth}),(function(){!function(t,n){for(var i in n)Tt(t,i,n[i])}(r,{"height":"".concat(e,"px"),"width":"".concat(o,"px")}),n.replaceChild(r,i)}))},n.sanitizeDoc=function(t){var n=this;s(t.querySelectorAll("amp-next-page")).forEach((function(t){if(n.Aut){var i=n.qut(t);n.But(i)}I(t)})),t.body.classList.add(Kt),this.toggleHiddenAndReplaceableElements(t,!1)},n.toggleHiddenAndReplaceableElements=function(t){var n=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t!==this.Eut.document&&s(t.querySelectorAll("[next-page-hide]")).forEach((function(t){return Ct(t,!1)})),i&&s(t.querySelectorAll("*:not(amp-next-page) [next-page-replace]")).forEach((function(t){var i=t.getAttribute("next-page-replace");i||(i=String(Date.now()+Math.floor(100*Math.random())),t.setAttribute("next-page-replace",i)),n.Out[i]&&n.Out[i]!==t&&Ct(n.Out[i],!1),n.Out[i]=t,Ct(t,!0)}))},n.Mut=function(){return Math.round((this.Tu.getScrollHeight()-this.Tu.getScrollTop()-this.Tu.getHeight())/this.Tu.getHeight())},n.zut=function(t){return this.TJ.indexOf(t)},n.fetchPageDocument=function(t){var n=this;return jt(this.t).fetch(t.url,{ampCors:!1}).then((function(i){return un(i.url,n.qi.getUrl()),t.url=i.url,i.text()})).then((function(t){var i=n.Yd.implementation.createHTMLDocument("");return i.open(),i.write(t),i.close(),i})).catch((function(n){throw Y().error(Fn,"failed to fetch %s",t.url,n),n}))},n.$ut=function(){var t=this,n=this.qut(this.Tut());return n.length?this.But(n):(tt(this.Nut,"%s should contain a <script> child or a URL specified in [src]",Fn),this.Dut().then((function(n){return 0===n.length?(Y().warn(Fn,"Could not find recommendations"),nt()):t.But(n)})))},n.Fut=function(t){var n=this;return!t.length||this.xut||t.forEach((function(t){try{if(function(t,n){Y().assertString(t.url,"page url must be a string");var i,r,e=en(n),o=tn(n).origin;t.url=(i=t.url,r=Xt(r=e),"function"==typeof URL?new URL(i,r.href).toString():function(t,n){n=Xt(n);var i=tn(t=t.replace(/\\/g,"/"));return t.toLowerCase().startsWith(i.protocol)?i.href:t.startsWith("//")?n.protocol+t:t.startsWith("/")?n.origin+t:n.origin+n.pathname.replace(/\/[^/]*$/,"/")+t}(i,r));var u=un(t.url,n);Y().assertString(t.image,"page image must be a string"),Y().assertString(t.title,"page title must be a string");var s=on(n);s!==o&&u.origin===s&&(t.url="".concat(o,"/c/")+("https:"===u.protocol?"s/":"")+encodeURIComponent(u.host)+u.pathname+(u.search||"")+(u.hash||""))}(t,n.qi.getUrl()),n.TJ.some((function(n){return n.initialUrl==t.url})))return;n.TJ.push(new Wt(n,t))}catch(t){Y().error(Fn,"Failed to queue page due to error:",t)}})),nt()},n.But=function(t){var n=this;return this.Fut(t).then((function(){return n.maybeFetchNext()}))},n.qut=function(t){var n=A(t,"SCRIPT");if(!n.length)return[];tt(1===n.length,"".concat(Fn," should contain at most one <script> child"));var i=n[0];tt(function(t){var n;return"SCRIPT"==t.tagName&&"APPLICATION/JSON"==(null===(n=t.getAttribute("type"))||void 0===n?void 0:n.toUpperCase())}(i),"".concat(Fn," page list should ")+'be inside a <script> tag with type="application/json"');var r=g(i.textContent,(function(t){Y().error(Fn,"failed to parse inline page list",t)})),o=Y().assertArray(r,"".concat(Fn," Page list expected an array, found: ").concat(e(r)));return I(i),o},n.Dut=function(){var t=this;return this.Nut?(this.wut||(this.wut=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.expr,e=void 0===r?".":r,o=i.urlReplacement,u=void 0===o?0:o,s=i.refresh,a=void 0!==s&&s,c=i.xssiPrefix,h=void 0===c?void 0:c,f=i.url,l=void 0===f?n.getAttribute("src"):f;rn(l,n);var v=bt(t.win);return an(n,l,u,a).then((function(t){return v.fetchJson(t.xhrUrl,t.fetchOpt)})).then((function(n){return jt(t.win).xssiJson(n,h)})).then((function(t){if(null==t)throw new Error("Response is undefined.");return d(t,e||".")})).catch((function(t){throw Y().createError("failed fetching JSON data",t)}))}(this.qi,this.Tut(),{urlReplacement:2,xssiPrefix:this.Tut().getAttribute("xssi-prefix")||void 0}).then((function(n){return t.Nut=n.next||null,t.Nut&&t.Tut().setAttribute("src",t.Nut),n.pages||[]})).catch((function(n){return Y().error(Fn,"error fetching page list from remote server",n),t.Nut=null,[]}))),this.wut):Promise.resolve([])},n.Cut=function(t){var n=O(t,"separator");return n?(I(n),n.hasAttribute("tabindex")||n.setAttribute("tabindex","0"),n):this.Jut()},n.Jut=function(){return At(this.Tut())(Mn)},n.Zut=function(t,n){var i=this;if(!this.Dy.hasTemplate(t))return nt();var r={title:n.title,url:n.url,image:n.image};return this.Dy.findAndRenderTemplate(t,r).then((function(n){return i.Aa.mutateElement(t,(function(){N(t),t.appendChild(n)}))}))},n.Lut=function(t){var n=this,i=O(t,"recommendation-box");return i?(this.but=this.Dy.hasTemplate(i)?function(){return n.Kut()}:Zn,i):(this.but=function(){return n.Wut()},this.Yut())},n.Yut=function(){return At(this.Tut())(zn)},n.Kut=function(){var t=this,n=this.yut;X(this.Dy.hasTemplate(n));var i=this.Dy.maybeFindTemplate(n),r={pages:(this.TJ||[]).filter((function(t){return!t.isLoaded()&&!t.is(2)})).map((function(t){return{title:t.title,url:t.url,image:t.image}}))};return this.Dy.findAndRenderTemplate(n,r).then((function(r){return t.Aa.mutateElement(n,(function(){N(n),n.appendChild(i),n.appendChild(r)}))}))},n.Wut=function(){var t=this,n=this.yut,i={pages:(this.TJ||[]).filter((function(t){return!t.isLoaded()&&!t.is(2)})).map((function(t){return{title:t.title,url:t.url,image:t.image}}))},r=At(this.Tut()),e=i.pages.map((function(n){var i=r(Dn),e=function(t){for(var n=t.querySelectorAll("[ref]"),i=v(),r=0;r<n.length;r++){var e=n[r],o=e.getAttribute("ref");m(o),e.removeAttribute("ref"),m(void 0===i[o]),i[o]=e}return i}(i),o=e.image,u=e.title;return o.src=n.image,u.textContent=n.title,i.href=n.url,i.addEventListener("click",(function(i){Lt(t.Tut(),"amp-next-page-click",{"title":n.title,"url":n.url},!1),t.aE.navigateToAmpUrl(n.url,"content-discovery")&&i.preventDefault()})),i}));return this.Aa.mutateElement(n,(function(){N(n),e.forEach((function(t){return n.appendChild(t)}))}))},t}(),Bn=function(t){i(r,t);var n=u(r);function r(t){var i;return(i=n.call(this,t)).Gut=null,i}var e=r.prototype;return e.isLayoutSupported=function(t){return"container"===t},e.buildCallback=function(){return this.Gut=et(this.element,"next-page"),this.Gut.build(this.element)},r}(t.BaseElement);t.registerServiceForDoc("next-page",qn),t.registerElement("amp-next-page",Bn,sn)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
/**
* @license
* Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
* Use of this source code is governed by a BSD-style
* license that can be found in the LICENSE file or at
* https://developers.google.com/open-source/licenses/bsd
*/}});
//# sourceMappingURL=amp-next-page-1.0.js.map