{"version":3,"file":"amp-vk-0.1.mjs","mappings":";mGAeO,IAAMA,QAACA,GAAWC,OCdlBC,eAAgBC,EAASC,SAAUC,GAAaC,OAAOC,UCWvD,ICLDC,EAAMC,KAAKC,YAAc,GAOzBC,GAJmC,iBAA/BH,EAAI,qBACR,IAAII,OAAOJ,EAAI,sBACfA,EAAI,sBAGwB,iBAAxBA,EAAI,cACR,IAAII,OAAOJ,EAAI,eACfA,EAAI,gBACR,uDAYF,WAAoBK,GAElB,IAAKJ,KAAKK,WAAaL,KAAKK,SAASC,KACnC,OAAO,KAIT,GAAIN,KAAKO,UAAYL,EAAcM,KAAKR,KAAKO,SAASE,QACpD,OAAO,KAGT,MAAMC,EAASV,KAAKK,SAASC,KAAYK,cACtC,cAAaP,OAEhB,OAAQM,GAAUA,EAAOE,aAAa,YAAe,KAmBzCb,EAAI,cACKA,EAAI,oBAGvBA,EAAI,QAAac,EAAW,gBAO5Bd,EAAI,kBAGJA,EAAI,sBAEIA,EAAI,SAeNA,EAAI,WAAgBc,EAAW,eCuZzCb,KAAKc,UAAYd,KAAKc,WAAa,CACjCC,KAAM,KACNC,IAAK,KACLC,aAAc,MAGhB,IAAMC,EAAOlB,KAAKc,UA+ElB,WAAuBK,GACrB,OAxCF,SAA4BC,EAAWC,GAEnC,MAAM,IAAIC,MAAM,qCAsCXC,GAsEF,WACLC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAGE,OAAOV,EAuDJ,WACLA,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,OA3KKhB,EAAKH,OACRG,EAAKH,KAAOoB,UAGEjB,EAAKH,KAAKqB,IAEtBlB,EAAKD,eACJC,EAAKD,aAAekB,KAGlBjB,EAAKH,MAiKgBsB,OAC1Bb,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GCpmBG,WAAoBE,EAAKE,GAE9B,OAAOC,EADPH,EAyIK,SAAsBA,GAC3B,OAAOA,EAAII,YAAcJ,EAAII,UAAYJ,GA1InCK,CAAaL,GACYE,GA8D1B,WAA0BI,EAAiBJ,GAGhD,OAAOC,EA8GT,SAAgCI,GAC9B,MAAMC,EAASC,EAAUF,GACzB,OAAOC,EAAOE,cAAgBF,EAAOR,IAAMQ,EAjH5BG,CADAF,EAAUH,IAESJ,GAkG7B,WAAmBK,GACxB,OAAIA,EAAUK,UC5ROC,ED6RAN,EAqBGP,GChTrBa,EAAKC,eAA0CD,GAAOE,YDkTvDC,EAAWhB,EAAK,WAtBaiB,UAAgCV,GAEVA,EChShD,IAAgBM,EDkTGb,EAa1B,WAA4BkB,EAAQhB,GAClCiB,EAgSF,SAA6BD,EAAQhB,GACnC,MAAMkB,EAAUF,EAAOG,gBAAkBH,EAAOG,eAAenB,GAE/D,SAAUkB,IAAWA,EAAQE,MAlS3BC,CAAoBL,EAAQhB,IAG9B,MACMsB,EAiIR,SAAqBN,GACnB,IAAIO,EAAWP,EAAOG,eAItB,OAHKI,IACHA,EAAWP,EAAOG,eAAiB,IAE9BI,EAvIUC,CAAYR,GACVhB,GAanB,OAZKsB,EAAEG,MACLR,EAAUK,EAAEF,MACZH,EAAUK,EAAEI,SACZJ,EAAEG,IAAM,IAAIH,EAAEF,KAAKE,EAAEI,SACrBT,EAAUK,EAAEG,KACZH,EAAEI,QAAU,KAGRJ,EAAEK,SACJL,EAAEK,QAAQL,EAAEG,MAGTH,EAAEG,IE1SJ,ICvDHG,EDuDSC,EA6pBIzB,GAEX0B,EAAiB1B,EAAiB,UEtiBjC,WACL2B,EACAC,EACAC,GAEA,IAAKD,EACH,OAAOD,EAET,MAAMG,EAAkBH,EAAII,MAAM,IAAK,GACjCC,EAAeF,EAAgB,GAAGC,MAAM,IAAK,GAEnD,IAAIE,EACFD,EAAa,IACZA,EAAa,GACVH,EACG,IAAGD,KAAeI,EAAa,KAC/B,IAAGA,EAAa,MAAMJ,IACxB,IAAGA,KAEV,OADAK,GAAUH,EAAgB,GAAM,IAAGA,EAAgB,KAAO,GACnDG,EAoCF,WAAwBN,EAAKO,GAClC,OAAOC,EAA8BR,EA6BhC,SAA8BO,GACnC,MAAMhB,EAAI,GACV,UAAWkB,KAAKF,EAAQ,CACtB,IAAIG,EAAIH,EAAOE,GACf,GAAS,MAALC,EAAJ,CAIAA,ETnPKxF,EADgCyF,ESoPRD,GTlPFC,EACzB,CAAmBA,GSkPrB,QAASC,EAAI,EAAGA,EAAIF,EAAEG,OAAQD,IAC5BrB,EAAEuB,MApEmBC,EAoEIN,EApECO,EAoEEN,EAAEE,GAnE1B,GAAEK,mBAAmBF,MAAQE,mBAAmBD,QAD1D,IAA2BD,EAAKC,ETlLSL,ESyPvC,OAAOpB,EAAE2B,KAAK,KA1C4BC,CAAqBZ,IAlOrC,IAAIa,IAAI,CAElC,IAEA,IAEA,IAEA,WCLIC,EACE,OADFA,EAEE,OAGDC,gBAAoBC,EAAIC,YAE7BC,YAAYC,GACVC,MAAMD,GAGNE,KAAKC,GAAU,KAGfD,KAAKE,GAAgB,EAGrBF,KAAKG,GAAmB,KAGxBH,KAAKI,GAAa,KAGlBJ,KAAKK,GAAW,KAGhBL,KAAKM,GAAU,KAGfN,KAAKO,GAAQ,KAGbP,KAAKQ,GAAS,KAGdR,KAAKS,GAAU,KAOjBC,mBAAmBC,GHgXJ,IAACC,KG/WSZ,KAAK7D,IHgXrBgB,EAAWyD,EAAQ,eGhXOxC,IAC/B4B,KAAK5C,YACL,iBACAuD,GAQJE,KAEE,MAAMC,EAAcC,KAAKC,MAAMtH,SAAS,IACxC,IAAIuH,EAQJ,OANIjB,KAAKI,KAAeX,EACtBwB,EAAmBjB,KAAKkB,KACflB,KAAKI,KAAeX,IAC7BwB,EAAmBjB,KAAKmB,MAGnBF,EAAiBG,MAAMC,GACrBzC,EAA8ByC,EAAWP,KAQpDI,KACE,OAAOhD,EAAsB8B,KAAKF,SAC/BwB,iBACAF,MAAMG,IACL,MAAMC,EAAaxB,KAAKF,QAAe2B,YACjCC,EAAU1B,KAAK5C,YAAYuE,SAgBjC,OAAOC,EAfW,iCACE,CAClBC,MAAO,IACPC,QAAS,OACTC,OAAQ,IACRC,WAAYhC,KAAKK,GACjB4B,UAAWjC,KAAKM,GAChB4B,OAAQlC,KAAKO,GACb4B,MAAO,IACPX,aAAcA,EACdpD,MAAOsD,EACPU,WAAYb,EACZc,QAAS,gBAWjBlB,KACE,OAAOjD,EAAsB8B,KAAKF,SAC/BwB,iBACAF,MAAMG,IACL,MAAMG,EAAU1B,KAAK5C,YAAYuE,SAcjC,OAAOC,EAbW,oCACE,CAClBC,MAAO7B,KAAKQ,GACZsB,QAAS,OACTC,OAAQ,IACRO,UAAWtC,KAAKS,GAChB0B,MAAO,IACP/D,MAAOsD,EACPW,QAAS,WACTE,cAAe,GACfH,WAAYb,OAQpBiB,sBACExC,KAAKI,GAAaqC,EAChBzC,KAAKF,QAAQnF,aAAa,kBAC1B,2DACAqF,KAAKF,SAGP2C,cACyBzC,KAAKI,gBAC3B,2BAA0BJ,KAAKI,MAG9BJ,KAAKI,KAAeX,EACtBO,KAAK0C,KACI1C,KAAKI,KAAeX,GAC7BO,KAAK2C,KAKTD,KACE1C,KAAKK,GAAWoC,EACdzC,KAAKF,QAAQnF,aAAa,iBAC1B,+DACAqF,KAAKF,SAGPE,KAAKM,GAAUmC,EACbzC,KAAKF,QAAQnF,aAAa,gBAC1B,8DACAqF,KAAKF,SAGPE,KAAKO,GAAQkC,EACXzC,KAAKF,QAAQnF,aAAa,aAC1B,2DACAqF,KAAKF,SAKT6C,KACE3C,KAAKQ,GAASiC,EACZzC,KAAKF,QAAQnF,aAAa,eAC1B,6DACAqF,KAAKF,SAGPE,KAAKS,GAAUgC,EACbzC,KAAKF,QAAQnF,aAAa,gBAC1B,8DACAqF,KAAKF,SAKT8C,iBACE,MAAMC,EAAS7C,KAAKF,QAAQ7C,cAAc6F,cAAc,UASxD,OARA9C,KAAKC,GAAU4C,EAEf7C,KAAKG,GFpKF,SACLL,EACAiD,EACAC,EACAC,GAEA,IAAIC,EAAepD,EACfqD,EAAgBH,EAEhBI,EAAWC,IACb,IACE,OAAOF,EAAcE,SACdC,GAAG,QAGV,MADA,mBAAKC,0BAAL,gBAA0BD,GACpBA,IAGV,MAAMrF,EA2BD,WAEL,QAAsBuF,IAAlBvF,EACF,OAAOA,EAGTA,GAAgB,EAChB,IAEE,MAAMwF,EAAU,CACVC,cAEF,OADAzF,GAAgB,GACT,IAGXlE,KAAK4J,iBACH,eAEoB,KAEpBF,GAEF1J,KAAK6J,oBACH,eAEoB,KAEpBH,SAEKI,IAGT,OAAO5F,EA3De6F,GAQtB,OALAZ,EAAaS,iBACXZ,EACAK,IACAnF,GAAgBgF,GAEX,KACLC,WAAcU,oBACZb,EACAK,IACAnF,GAAgBgF,GAGAE,EAAiB,KACjBD,EAAgB,KAClCE,EAAU,MGtBLW,CDwJH/D,KAAK7D,IACL,UACA6D,KAAKgE,GAAuBC,KAAKjE,WC3JciD,GD8J1CjD,KAAKa,KAAgBO,MAAM8C,IAChCrB,EAAOqB,IAAMA,EACbrB,EAAOsB,aAAa,OAAQ,OAC5BtB,EAAOsB,aAAa,YAAa,MACjCtB,EAAOsB,aAAa,cAAe,KACnCtB,EAAOsB,aAAa,kBAAmB,QAEtBtB,ERmCbuB,UAAUC,IAAI,0BQlClBrE,KAAKF,QAAQwE,YAAYzB,GAElB7C,KAAKuE,YAAY1B,MAQ5BmB,GAAuBV,GACrB,GACe,mBAAbA,EAAE9I,QACF8I,EAAEkB,SAAWxE,KAAKC,GAAQwE,cAE1B,OAEF,MAAMC,EAAoBpB,ECxK8BqB,KDyKxD,GAAID,EAAW,CACb,MACME,EADS,yBACQC,KAAKH,GAC5B,GAAIE,GAAWA,EAAQ,GAAI,CACzB,MAAME,EAAYC,SAASH,EAAQ,GAAI,IACnC5E,KAAKE,KAAkB4E,IACzB9E,KAAKE,GAAgB4E,EACrB9E,KAAKgF,kBAAkBF,MAO/BG,kBAAkBC,GAChB,MRvOU,eQwORA,GRrOO,cQsOPA,GR3OG,UQ4OHA,EAKJC,kBACE,OAAO,EAITC,mBErKK,IAAuBtF,EAASuF,EF6KnC,OAPIrF,KAAKC,KErKX,WAD4BH,EFuKVE,KAAKC,IEtKfqF,qBAAR,SAAuBC,YAAYzF,GFuK/BE,KAAKC,GAAU,MAEbD,KAAKG,IACPH,KAAKG,MAEA,IAKTR,EAAI6F,gBAAgB,SAAU9F","names":["isArray","Array","hasOwnProperty","hasOwn_","toString","toString_","Object","prototype","env","self","AMP_CONFIG","cdnProxyRegex","RegExp","name","document","head","location","test","origin","metaEl","querySelector","getAttribute","getMetaUrl","__AMP_LOG","user","dev","userForEmbed","logs","suffix","levelFunc","opt_suffix","Error","callLogConstructor","shouldBeTrueish","opt_message","opt_1","opt_2","opt_3","opt_4","opt_5","opt_6","opt_7","opt_8","opt_9","getUserLogger","win","assert","id","getServiceInternal","__AMP_TOP","getTopWindow","elementOrAmpDoc","nodeOrDoc","ampdoc","getAmpdoc","isSingleDoc","getAmpdocServiceHolder","nodeType","node","ownerDocument","defaultView","getService","getAmpDoc","holder","devAssert","service","__AMP_SERVICES","ctor","isServiceRegistered","s","services","getServices","obj","context","resolve","optsSupported","Services","getServiceForDoc","url","paramString","opt_addToFront","mainAndFragment","split","mainAndQuery","newUrl","params","appendEncodedParamStringToUrl","k","v","arrayOrSingleItem","i","length","push","key","value","encodeURIComponent","join","serializeQueryString","Set","EmbedType","AmpVk","AMP","BaseElement","constructor","element","super","this","iframe_","widgetHeight_","unlistenMessage_","embedType_","ownerId_","postId_","hash_","apiId_","pollId_","preconnectCallback","opt_onLayout","window","getIFrameSrc_","createdTime","Date","now","iframeSrcPromise","getVkPostIFrameSrc_","getVkPollIFrameSrc_","then","iframeSrc","getReferrerUrl","ref","startWidth","offsetWidth","pageUrl","getUrl","addParamsToUrl","app","width","_ver","owner_id","post_id","hash","amp","referrer","title","poll_id","description","buildCallback","userAssert","postBuildCallback_","pollBuildCallback_","layoutCallback","iframe","createElement","eventType","listener","opt_evtListenerOpts","localElement","localListener","wrapped","event","e","__AMP_REPORT_ERROR","undefined","options","capture","addEventListener","removeEventListener","err","detectEvtListenerOptsSupport","internalListenImplementation","handleVkIframeMessage_","bind","src","setAttribute","classList","add","appendChild","loadPromise","source","contentWindow","eventData","data","matches","exec","newHeight","parseInt","forceChangeHeight","isLayoutSupported","layout","unlayoutOnPause","unlayoutCallback","_element$parentElemen","parentElement","removeChild","registerElement"],"sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2203281422000/","sources":["src/core/types/array.js","src/core/types/object/index.js","src/core/dom/layout/index.js","src/config.js","src/utils/log.js","src/service-helpers.js","src/core/window/index.js","src/service/index.js","src/core/dom/event-helper-listen.js","src/url.js","extensions/amp-vk/0.1/amp-vk.js","src/utils/event-helper.js","src/core/dom/index.js"]}
