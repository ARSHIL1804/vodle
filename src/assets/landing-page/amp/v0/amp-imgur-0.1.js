;
(self.AMP=self.AMP||[]).push({m:0,v:"2203281422000",n:"amp-imgur",ev:"0.1",l:!0,f:function(n,t){!function(){function t(n,e){return(t=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,e)}function e(n){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function r(n){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function i(n,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}var u=function(){var n=this;this.promise=new Promise((function(t,e){n.resolve=t,n.reject=e}))};Array.isArray;var o=Object.prototype,f=(o.hasOwnProperty,o.toString);function l(n){return"[object Object]"===f.call(n)}var c=self.AMP_CONFIG||{},s=("string"==typeof c.thirdPartyFrameRegex?new RegExp(c.thirdPartyFrameRegex):c.thirdPartyFrameRegex,("string"==typeof c.cdnProxyRegex?new RegExp(c.cdnProxyRegex):c.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function a(n){if(!self.document||!self.document.head)return null;if(self.location&&s.test(self.location.origin))return null;var t=self.document.head.querySelector('meta[name="'.concat(n,'"]'));return t&&t.getAttribute("content")||null}c.thirdPartyUrl,c.thirdPartyFrameHost,c.cdnUrl||a("runtime-host"),c.errorReportingUrl,c.betaErrorReportingUrl,c.localDev,c.geoApiUrl||a("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var h=self.__AMP_LOG;function d(n){return h.user||(h.user=m()),function(n,t){return t&&t.ownerDocument.defaultView!=n}(h.user.win,n)?h.userForEmbed||(h.userForEmbed=m()):h.user}function m(n){return function(n,t){throw new Error("failed to call initLogConstructor")}()}function v(n,t,e,r,i,u,o,f,l,c,s){return n}var p,b="amp-imgur",y=function(n){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&t(n,e)}(c,n);var r,o,f=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}(),function(){var n,t=e(r);if(o){var u=e(this).constructor;n=Reflect.construct(t,arguments,u)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var t;return(t=f.call(this,n)).tb=null,t.eb=null,t.zj=null,t}var s=c.prototype;return s.isLayoutSupported=function(n){return function(n){return"fixed"==n||"fixed-height"==n||"responsive"==n||"fill"==n||"flex-item"==n||"fluid"==n||"intrinsic"==n}(n)},s.buildCallback=function(){var n,t;n=this.element.dataset.imgurId,t=this.element,d().assert(n,"The data-imgur-id attribute is required for <amp-imgur> %s",t,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined)},s.layoutCallback=function(){var n,t,e,r,i,u,o,f,l=this;this.eb=(n=this.win,t="message",e=this.Bj.bind(this),r=void 0,i=n,u=e,o=function(n){try{return u(n)}catch(n){var t,e;throw null===(t=(e=self).__AMP_REPORT_ERROR)||void 0===t||t.call(e,n),n}},f=function(){if(void 0!==p)return p;p=!1;try{var n={get capture(){return p=!0,!1}};self.addEventListener("test-options",null,n),self.removeEventListener("test-options",null,n)}catch(n){}return p}(),i.addEventListener(t,o,!!f&&r),function(){null==i||i.removeEventListener(t,o,!!f&&r),u=null,i=null,o=null});var c=this.element.dataset.imgurId.replace(/^(a\/)?(.*)/,(function(n,t,e){return(t||"")+encodeURIComponent(e)}));return this.Cj(c).catch((function(n){if(c.startsWith("a/"))throw n;var t="a/".concat(c);return l.Cj(t).then((function(){d().warn(b,'id should be prefixed with "a/", loaded album using data-imgur-id="'.concat(t,'". This element should be updated to use "a/".'))}))})).catch((function(){d().error(b,'Failed to load. Is "'.concat(c,'" a correct id?'))}))},s.Cj=function(n){var t,e,r=this,i=this.element,o=(t=i.ownerDocument,e={"scrolling":"no","frameborder":"0","allowfullscreen":"true","title":i.title||"imgur post"},function(n,t){for(var e in t)n.setAttribute(e,t[e]);return n}(t.createElement("iframe"),e));o.src="https://imgur.com/".concat(n,"/embed?pub=true"),this.tb&&i.removeChild(this.tb),this.tb=o,i.appendChild(o),function(n,t){n.classList.add("i-amphtml-fill-content")}(o);var f=new u,l=f.promise,c=f.resolve;return this.zj=c,this.loadPromise(this.tb).then((function(){return(n=r.win,function(n,t){v(function(n,t){var e=n.__AMP_SERVICES&&n.__AMP_SERVICES.timer;return!(!e||!e.ctor)}(n));var e=function(n){var t=n.__AMP_SERVICES;return t||(t=n.__AMP_SERVICES={}),t}(n)[t];return e.obj||(v(e.ctor),v(e.context),e.obj=new e.ctor(e.context),v(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}(n,"timer")).timeoutPromise(500,l);var n}))},s.Bj=function(n){if("https://imgur.com"==n.origin&&n.source==this.tb.contentWindow){var t=function(n){return n.data}(n);if(t&&(l(t)||t.startsWith("{"))){null==this||this.zj();var e=l(t)?t:function(n,t){try{return function(n){return JSON.parse(n)}(n)}catch(n){return null}}(t);if("resize_imgur"==e.message){var r=e.height;this.attemptChangeHeight(r).catch((function(){}))}}}},s.unlayoutCallback=function(){var n,t;return this.tb&&(null===(t=(n=this.tb).parentElement)||void 0===t||t.removeChild(n),this.tb=null),this.eb&&this.eb(),!0},c}(n.BaseElement);n.registerElement(b,y)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-imgur-0.1.js.map