{"version":3,"file":"amp-story-subscriptions-0.1.js","mappings":"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","names":["o","p","_setPrototypeOf","Object","setPrototypeOf","__proto__","_getPrototypeOf","getPrototypeOf","obj","_typeof","Symbol","iterator","constructor","prototype","self","call","TypeError","ReferenceError","assertThisInitialized","key","value","defineProperty","enumerable","configurable","writable","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","target","i","arguments","length","source","ownKeys","forEach","getOwnPropertyDescriptors","defineProperties","isArray","Array","_Object$prototype","parent","child","appendChild","maybeNode","nodeType","document","createTextNode","String","element","name","setAttribute","eventName","toLowerCase","substring","addEventListener","a","b","depth","isFinite","Error","queue","shift","_queue$shift","keysA","keysB","_i","k","_keysA","hasOwnProperty","toString","env","AMP_CONFIG","cdnProxyRegex","RegExp","head","location","test","origin","metaEl","querySelector","getAttribute","scriptUrl","matches","match","extensionId","undefined","extensionVersion","shouldBeTrueish","opt_message","opt_1","opt_2","opt_3","opt_4","opt_5","opt_6","opt_7","opt_8","opt_9","getMetaUrl","__AMP_LOG","user","dev","userForEmbed","Deferred","this","promise","Promise","res","rej","_this","resolve","reject","win","id","getServicePromiseOrNullInternal","holder","devAssert","service","__AMP_SERVICES","ctor","isServiceRegistered","s","getServices","context","getServiceInternal","services","AmpStorySubscriptions","_defineProperty","old","curr","state","width","height","deepEquals","subClass","superClass","create","_inherits","Derived","hasNativeReflectConstruct","_super","AmpStorySubscriptions2","Reflect","construct","sham","Proxy","Boolean","valueOf","e","isNativeReflectConstruct","result","Super","NewTarget","possibleConstructorReturn","storeService_","buildCallback","_this2","dialogEl","tag","props","children","_key","_objectSpread2","xmlns","createElementNS","createElement","extension","version","opt_element","getServicePromiseOrNull","doc","callback","checkFunc","node","ownerDocument","defaultView","MutationObserver","observer","disconnect","observe","childList","interval","setInterval","clearInterval","waitForChild","documentElement","body","waitForBodyOpen","then","extensions","__AMP_TOP","getTopWindow","getService","list","querySelectorAll","scripts","script","urlParts","parseExtensionUrl","src","extensionScriptsInNode","some","_ref","extensionScriptInNode","waitForExtension","ext","cached","deferred","catch","getServicePromiseInternal","getServicePromise","getElementServicePromiseOrNull","getElementServiceIfAvailable","storeService","initializeListeners_","_proto","isLayoutSupported","layout","subscribe","isDialogVisible","_this3","onSubscriptionStateChange_","mutateElement","_this4","classList","toggle","AMP","BaseElement","registerElement"],"sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2203281422000/","sources":["node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","node_modules/@babel/runtime/helpers/esm/typeof.js","node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","node_modules/@babel/runtime/helpers/esm/defineProperty.js","node_modules/@babel/runtime/helpers/esm/objectSpread2.js","src/core/types/array.js","src/core/types/object/index.js","src/core/dom/jsx/index.ts","src/core/types/object/json.js","src/config.js","src/service/extension-script.js","src/utils/log.js","src/core/data-structures/promise.js","src/service-helpers.js","src/service/index.js","extensions/amp-story-subscriptions/0.1/amp-story-subscriptions.js","extensions/amp-story/1.0/amp-story-store-service.js","node_modules/@babel/runtime/helpers/esm/inherits.js","node_modules/@babel/runtime/helpers/esm/createSuper.js","node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","src/element-service.js","src/core/dom/index.js","src/core/window/index.js","src/core/dom/layout/index.js","build/amp-story-subscriptions-0.1.css.js"]}
