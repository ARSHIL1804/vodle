;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-fx-collection",ev:"0.1",l:!0,f:function(t,n){(()=>{function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var s=0,e=new Array(n);s<n;s++)e[s]=t[s];return e}function s(t,s){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,s){if(t){if("string"==typeof t)return n(t,s);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,s):void 0}}(t))||s&&t&&"number"==typeof t.length){e&&(t=e);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,{hasOwnProperty:i,toString:r}=Object.prototype;function o(t){const n=Object.getOwnPropertyDescriptor(t,"message");if(null!=n&&n.writable)return t;const{message:s,stack:e}=t,i=new Error(s);for(const n in t)i[n]=t[n];return i.stack=e,i}function a(t){let n=null,e="";for(var i,r=s(arguments,!0);!(i=r()).done;){const t=i.value;t instanceof Error&&!n?n=o(t):(e&&(e+=" "),e+=t)}return n?e&&(n.message=e+": "+n.message):n=new Error(e),n}function u(t){var n,s;null===(n=(s=self).__AMP_REPORT_ERROR)||void 0===n||n.call(s,t)}var c=self.AMP_CONFIG||{},l=("string"==typeof c.thirdPartyFrameRegex?new RegExp(c.thirdPartyFrameRegex):c.thirdPartyFrameRegex,("string"==typeof c.cdnProxyRegex?new RegExp(c.cdnProxyRegex):c.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function h(t){if(!self.document||!self.document.head)return null;if(self.location&&l.test(self.location.origin))return null;const n=self.document.head.querySelector(`meta[name="${t}"]`);return n&&n.getAttribute("content")||null}c.thirdPartyUrl,c.thirdPartyFrameHost,c.cdnUrl||h("runtime-host"),c.errorReportingUrl,c.betaErrorReportingUrl,c.localDev,c.geoApiUrl||h("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var f=self.__AMP_LOG;function d(t,n){throw new Error("failed to call initLogConstructor")}function p(t){return d()}function v(t,n,s,e,i,r,o,a,u,c,l){return t}function m(t,n,s,e,i,r,o,a,u,c,l){return(f.user||(f.user=p()),void f.user.win?f.userForEmbed||(f.userForEmbed=p()):f.user).assert(t,n,s,e,i,r,o,a,u,c,l)}var b,g=["fade-in","fade-in-scroll","float-in-bottom","float-in-top","fly-in-bottom","fly-in-left","fly-in-right","fly-in-top","parallax"],y=g[0],A=g[1],_=g[2],P=g[3],w=g[4],E=g[5],x=g[6],I=g[7],M=g[8],R={[y]:{observes:0,opacity:!0},[A]:{observes:0,opacity:!0},[_]:{observes:1,translates:{y:!0}},[P]:{observes:1,translates:{y:!0}},[w]:{observes:0,translates:{y:!0}},[E]:{observes:0,translates:{x:!0}},[x]:{observes:0,translates:{x:!0}},[I]:{observes:0,translates:{y:!0}},[M]:{observes:0,translates:{y:!0}}};function T(t,n){if(t==n)return!1;const{observes:s,opacity:e,translates:i}=R[t],{observes:r,opacity:o,translates:a}=R[n];if(s!==r)return!1;if(e&&o)return!1;if(i&&a){if(i.x&&a.x)return!1;if(i.y&&a.y)return!1}return!0}function V(t){return m(g.indexOf(t)>-1,"Invalid amp-fx type `%s`",t)}var $=["Webkit","webkit","Moz","moz","ms","O","o"],S={"getPropertyPriority":()=>"","getPropertyValue":()=>""};function z(t){const n=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return $.some((t=>n.startsWith(t+"-")))?`-${n}`:n}function j(t,n,s){if(n.startsWith("--"))return n;b||(b=Object.create(null));let e=b[n];if(!e||s){if(e=n,void 0===t[n]){const s=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),i=function(t,n){for(let s=0;s<$.length;s++){const e=$[s]+n;if(void 0!==t[e])return e}return""}(t,s);void 0!==t[i]&&(e=i)}s||(b[n]=e)}return e}function O(t,n){const{style:s}=t;for(const t in n)s.setProperty(z(j(s,t)),String(n[t]),"important")}function C(t,n,s,e,i){const r=j(t.style,n,i);if(!r)return;const o=e?s+e:s;t.style.setProperty(z(r),o)}function F(t,n){for(const s in n)C(t,s,n[s])}function k(t){return`${t}px`}function H(t,n){return t.getComputedStyle(n)||S}function Y(t){return"display"in t&&function(t,...n){const s=a.apply(null,n);s.name=t||s.name,u(s)}("STYLE","`display` style detected. You must use toggle instead."),t}function N(t,n,s,e){const i=W(t),r=Z(i);!function(t,n,s,e,i,r){const o=U(t);let a=o[s];a||(a=o[s]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),a.ctor||(a.ctor=e,a.context=n,a.sharedInstance=!1,a.resolve&&B(t,s))}(r,i,n,s),e&&B(r,n)}function X(t,n){return B(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function L(t,n){return B(Z(W(t)),n)}function W(t){return t.nodeType?(n=t,s=(n.ownerDocument||n).defaultView,X(s,"ampdoc")).getAmpDoc(t):t;var n,s}function Z(t){const n=W(t);return n.isSingleDoc()?n.win:n}function B(t,n){v(function(t,n){const s=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!s||!s.ctor)}(t,n));const s=U(t)[n];return s.obj||(v(s.ctor),v(s.context),s.obj=new s.ctor(s.context),v(s.obj),s.context=null,s.resolve&&s.resolve(s.obj)),s.obj}function U(t){let n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}var q=t=>L(t,"mutator"),D=t=>L(t,"viewport");function G(t,n){return!(!t||!n)&&t.left==n.left&&t.top==n.top&&t.width==n.width&&t.height==n.height}function J(t){N(t,"position-observer",class{constructor(t){this.Ci=t,this.i=t.win,this.tx=[],this.br=X(this.i,"vsync"),this.bn=D(t),this.T_=[],this.nx=!1,this.sx=!1,this.ix=!1,this.ox=function(t,n,s){let e=0,i=0,r=null;function o(){e=0;const s=500-(t.Date.now()-i);var a;s>0?e=t.setTimeout(o,s):(a=r,r=null,n.apply(null,a))}return function(...n){i=t.Date.now(),r=n,e||(e=t.setTimeout(o,500))}}(this.i,(()=>{this.nx=!1}))}observe(t,n,s){const e=new class{constructor(t,n,s,e){this.element=n,this.Te=e,this.fidelity=s,this.turn=0==s?Math.floor(4*Math.random()):0,this.ux=null,this.bn=D(t)}Pe(t){const n=this.ux;if(n&&G(n.positionRect,t.positionRect)&&G(n.viewportRect,t.viewportRect))return;v(t.positionRect);const s=t.positionRect;var e,i;t.relativePos=(e=s,i=t.viewportRect,e.top<i.top?"top":e.bottom>i.bottom?"bottom":"inside"),function(t,n){return t.top<=n.bottom&&n.top<=t.bottom&&t.left<=n.right&&n.left<=t.right}(s,t.viewportRect)?(this.ux=t,this.Te(t)):this.ux&&(this.ux=null,t.positionRect=null,this.Te(t))}update(t){if(!t){if(0!=this.turn)return void this.turn--;0==this.fidelity&&(this.turn=4)}const n=this.bn.getSize(),s={left:0,top:0,width:e=n.width,height:i=n.height,bottom:0+i,right:0+e,x:0,y:0};var e,i;this.bn.getClientRectAsync(this.element).then((t=>{this.Pe({positionRect:t,viewportRect:s,relativePos:null})}))}}(this.Ci,t,n,s);return this.tx.push(e),this.ix||this.lx(),e.update(),()=>{for(let t=0;t<this.tx.length;t++)if(this.tx[t]==e)return void this.hx(t)}}unobserve(t){for(let n=0;n<this.tx.length;n++)if(this.tx[n].element==t)return void this.hx(n);(f.dev||(f.dev=d())).error("POSITION_OBSERVER","cannot unobserve unobserved element")}hx(t){this.tx.splice(t,1),0==this.tx.length&&this.vx()}lx(){this.ix=!0,this.T_.push(this.bn.onScroll((()=>{this.mx()}))),this.T_.push(this.bn.onResize((()=>{this.bx()})))}vx(){for(this.ix=!1;this.T_.length;)this.T_.pop()()}updateAllEntries(t){for(let n=0;n<this.tx.length;n++)this.tx[n].update(t)}mx(){this.ox(),this.nx=!0,this.sx||this.gx()}bx(){this.updateAllEntries(!0)}gx(){this.updateAllEntries(),this.sx=!0,this.nx?this.br.measure((()=>{this.gx()})):this.sx=!1}})}function K(t,n,s){v("X"==n||"Y"==n),v(1==Math.abs(s));const e=t.element,i="X"==n,r=s*t.flyInDistance+(i?"vw":"vh");t.initialTrigger||(q(e).mutateElement(e,(()=>{const n=H(t.win,e),s=i?"left":"top",o="auto"===n[s]?"0px":n[s],a={position:"static"===n.position?"relative":n.position,visibility:"visible"};a[s]=`calc(${o} - ${r})`,F(e,Y(a))})),t.initialTrigger=!0),F(e,{"transition-duration":t.duration,"transition-timing-function":t.easing,"transform":`translate${n}(${r})`})}function Q(t){const n=parseFloat(t.getAttribute("data-margin-start"));return n&&m(n>=0&&n<=100,"data-margin-start must be a percentage value and be between 0% and 100% for: %s",t),n}function tt(t){return t&&t.positionRect?t.positionRect.top:null}function nt(t,n,s){const e=tt(t);return v(1==Math.abs(s)),!!e&&e+s*n.viewportHeight*n.flyInDistance/100<=(1-n.marginStart)*n.viewportHeight}function st(t,n,s){const e=tt(t),i=void 0!==s?s:n.viewportHeight;return!!e&&e<=(1-n.marginStart)*i}var et={[M]:{userAsserts(t){const n=m(t.getAttribute("data-parallax-factor"),"data-parallax-factor=<number> attribute must be provided for: %s",t);m(parseFloat(n)>0,"data-parallax-factor must be a number and greater than 0 for: %s",t)},update(t){const n=this,s=tt(t);if(v(n.adjustedViewportHeight),!s||s>n.adjustedViewportHeight)return;const e=-(parseFloat(n.factor)-1),i=(n.adjustedViewportHeight-s)*e;n.offset=i,F(n.element,{transform:`translateY(${n.offset.toFixed(0)}px)`})}},[w]:{userAsserts:Q,update(t){const n=this;v(n.viewportHeight),nt(t,n,-1)&&K(n,"Y",-1)}},[E]:{userAsserts:Q,update(t){const n=this;v(n.viewportHeight),st(t,n)&&K(n,"X",1)}},[x]:{userAsserts:Q,update(t){const n=this;v(n.viewportHeight),st(t,n)&&K(n,"X",-1)}},[I]:{userAsserts:Q,update(t){const n=this;v(n.viewportHeight),nt(t,n,1)&&K(n,"Y",1)}},[y]:{userAsserts:Q,update(t){const n=this;v(n.viewportHeight),st(t,n)&&F(n.element,{"transition-duration":n.duration,"transition-timing-function":n.easing,"opacity":1})}},[A]:{userAsserts(t){const n=Q(t),s=parseFloat(t.getAttribute("data-margin-end"));s&&(m(s>=0&&s<=100,"data-margin-end must be a percentage value and be between 0% and 100% for: %s",t),m(s>n,"data-margin-end must be greater than data-margin-start for: %s",t))},update(t){const n=this,{marginStart:s,viewportHeight:e}=n;if(v(n.adjustedViewportHeight),!st(t,n,n.adjustedViewportHeight))return;if(!n.hasRepeat&&n.offset>=1)return;const i=1*(e-tt(t)-s*e)/((n.marginEnd-s)*e);n.offset=i,F(n.element,{opacity:n.offset})}}};function it(t){const n=parseFloat(t);return isNaN(n)?null:n/100}function rt(t){switch(t){case y:case x:case E:case I:case w:return{"start":.05};case A:return{"start":0,"end":.5};default:return{"start":0,"end":1}}}function ot(t,n,s,e,i){return t[n]==s||(at(e),!1)}function at(t,n=0){const{classList:s,id:e,parentElement:i,tagName:r}=t;if(e)return`#${e}`;let o=r.toLowerCase();if(s.length>0){const t=s.length>1?"...":"";o+=`.${s[0]}${t}`}if(!i)return`${o} (detached)`;const{firstElementChild:a,lastElementChild:u}=i;return t==a&&t==u||(t==a?o+=":first-child":t==u&&(o+=":last-child")),n>0?o:`${at(i,n+1)} > ${o}`}t.registerServiceForDoc("amp-fx-collection",class{constructor(t){this.Ci=t,this.yx=[],Promise.all([t.whenReady(),t.whenFirstVisible()]).then((()=>{const t=this.Ci.getRootNode();this.Ax(),function(t,n,s,i){let r=t,o=s;const a=function(){if(void 0!==e)return e;e=!1;try{const t={get capture(){return e=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return e}();r.addEventListener("amp:dom-update",(t=>{try{return o(t)}catch(t){var n,s;throw null===(n=(s=self).__AMP_REPORT_ERROR)||void 0===n||n.call(s,t),t}}),!!a&&i)}(t,0,(()=>this.Ax()),void 0)}))}Ax(){!function(t,n){const{length:s}=t;for(let e=0;e<s;e++)n(t[e])}(this.Ci.getRootNode().querySelectorAll("[amp-fx]"),(t=>{this.yx.includes(t)||function(t,...n){try{t.apply(null,n)}catch(t){!function(t){const n=a.apply(null,arguments);setTimeout((()=>{throw u(n),n}))}(t)}}((()=>this._x(t)))}))}_x(t){v(t.hasAttribute("amp-fx")),v(!this.yx.includes(t)),v(this.Ci.isVisible()),function(t){v(t.hasAttribute("amp-fx"));const n=t.getAttribute("amp-fx").trim().toLowerCase().split(/\s+/);return m(n.length,"No value provided for `amp-fx` attribute"),function(t){for(let n=0;n<t.length;n++){const s=t[n];for(let e=n+1;e<t.length;e++)T(s,t[e])||t.splice(e--,1)}return t}(n.filter(V))}(t).forEach((n=>{this.Px(t,n)})),this.yx.push(t)}Px(t,n){const{observes:e}=v(R[n]);1!=e?function(t,n,s){J(t),new class{constructor(t,n,s){this.win=t.win,this.Mf=(t=>L(t,"position-observer"))(n),this.bn=D(n),this.wn=q(n),this.viewportHeight=null,this.adjustedViewportHeight=null,this.element=n,this.offset=0,this.wx=s,et[s].userAsserts(n),this.factor=parseFloat(n.getAttribute("data-parallax-factor")),this.marginStart=n.hasAttribute("data-margin-start")?it(n.getAttribute("data-margin-start")):rt(s).start,this.marginEnd=n.hasAttribute("data-margin-end")?it(n.getAttribute("data-margin-end")):rt(s).end,this.easing=function(t){const n={"linear":"cubic-bezier(0.00, 0.00, 1.00, 1.00)","ease-in-out":"cubic-bezier(0.80, 0.00, 0.20, 1.00)","ease-in":"cubic-bezier(0.80, 0.00, 0.60, 1.00)","ease-out":"cubic-bezier(0.40, 0.00, 0.40, 1.00)"};return n[t]?n[t]:(m(t.startsWith("cubic-bezier"),"All custom bezier curves should be specified by following the `cubic-bezier()` function notation."),t)}(n.hasAttribute("data-easing")?n.getAttribute("data-easing"):function(t){switch(t){default:return"ease-in";case x:case E:case I:case w:return"ease-out"}}(s)),this.duration=n.hasAttribute("data-duration")?n.getAttribute("data-duration"):function(t,n){switch(n){case y:return"1000ms";case w:case I:case E:case x:const{width:n}=D(t).getSize();return(s=Math.min(1e3,n))<480?s=480:s>1e3&&(s=1e3),200*(s-480)/520+400+"ms";default:return"1ms"}var s}(t,s),this.flyInDistance=n.hasAttribute("data-fly-in-distance")?parseFloat(n.getAttribute("data-fly-in-distance")):function(t,n){switch(n){case w:case I:const{width:n}=D(t).getSize();return n<1e3?25:33;case E:case x:return 100;default:return 1}}(t,s),this.hasRepeat=n.hasAttribute("data-repeat"),this.initialTrigger=!1,this.Ex().then((t=>{this.adjustedViewportHeight=t,this.xx()})),this.Ix()}xx(){this.Mf.observe(this.element,1,et[this.wx].update.bind(this)),this.bn.onResize((()=>{this.Ix(),this.Ex().then((t=>{this.adjustedViewportHeight=t}))}))}Ix(){this.wn.measureElement((()=>{this.viewportHeight=this.bn.getHeight()}))}Ex(){return this.wn.measureElement((()=>{const t=this.bn.getHeight();let n=0;for(let t=this.element;t;t=t.offsetParent)n+=t.offsetTop;return n<t?n:t}))}}(t,n,s),F(n,Y(function(t,n){switch(n){case M:case w:case I:case E:case x:return{"will-change":"transform"};case y:case A:return{"will-change":"opacity","opacity":0};default:return{"visibility":"visible"}}}(0,s)))}(this.Ci,t,n):function(t,n,e){if((i=n,L(i,"viewer")).isEmbedded())return;var i;const r="fx-scroll-dispatch";N(t,r,class{constructor(t){this.Ci=t,this.Ou=new class{constructor(){this.Tt=null}add(t){return this.Tt||(this.Tt=[]),this.Tt.push(t),()=>{this.remove(t)}}remove(t){this.Tt&&function(t,n){const s=t.indexOf(n);-1!=s&&t.splice(s,1)}(this.Tt,t)}removeAll(){this.Tt&&(this.Tt.length=0)}fire(t){if(this.Tt)for(var n,e=s(this.Tt.slice(),!0);!(n=e()).done;)(0,n.value)(t)}getHandlerCount(){var t,n;return null!==(t=null===(n=this.Tt)||void 0===n?void 0:n.length)&&void 0!==t?t:0}},this.Mx=function(t){let n=!1,s=null,e=t;return(...t)=>(n||(s=e.apply(self,t),n=!0,e=null),s)}((()=>this.Cu())),this.Rx=0,this.Tx=0,this.Vx=!0}observe(t){this.Ou.add(t),this.Mx()}Cu(){const t=D(this.Ci);t.onScroll((()=>{this.$x(t.getScrollTop())}))}$x(t){this.Tx=t;const n=this.Tx-this.Rx;return(!this.Vx&&n>0||this.Vx&&n<0)&&(this.Rx=this.Tx),!this.Vx&&this.Tx<=36||!this.Vx&&n<-20?(this.Sx(!0),void(this.Rx=this.Tx)):void(this.Vx&&n>80&&(this.Sx(!1),this.Rx=this.Tx))}Sx(t){this.Vx!=t&&(this.Vx=t,this.Ou.fire(t))}});const o=L(t,r),a=q(n);let u=!0;a.measureMutateElement(n,(()=>{const s=H(t.win,n),i=function(t,n,s){const e=n.replace(/^float\-in\-([^\s]+)$/,"$1");return v(e.length>0),ot(s,e,k(0),t)?e:null}(n,e,s),r=function(t,n){return ot(n,"overflow","hidden",t)&&ot(n,"position","fixed",t)}(n,s);i&&r?o.observe((t=>{!function(t,n,s){let e=0;q(t).measureMutateElement(t,(()=>{e=function(t,n,s){if(n)return 0;const e=t.getBoundingClientRect().height;return"top"==s?-e:e}(t,n,s)}),(()=>{!function(t,n){O(t,{"transition":"transform 300ms ease","transform":`translate(0, ${k(n)})`})}(t,e)}))}(n,t,v(i))})):u=!1}),(()=>{u&&function(t){O(t,{"will-change":"transform"})}(n)}))}(this.Ci,t,n)}})})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-fx-collection-0.1.mjs.map