{"version":3,"file":"amp-web-push-permission-dialog.mjs","mappings":"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","names":["hasOwnProperty","hasOwn_","toString","toString_","Object","prototype","QUERY_STRING_REGEX","component","fallback","decodeURIComponent","e","cachedAnchorEl","env","self","AMP_CONFIG","cdnProxyRegex","RegExp","name","document","head","location","test","origin","metaEl","querySelector","getAttribute","event","data","url","opt_nocache","createElement","anchorEl","opt_cache","href","URL","parseUrlWithA","getMetaUrl","__AMP_LOG","user","dev","userForEmbed","Set","constructor","options","debug","windowContext","window","this","messages_","listeners_","debug_","listening_","connecting_","connected_","channel_","messagePort_","onListenConnectionMessageReceivedProc_","onConnectConnectionMessageReceivedProc_","onChannelMessageReceivedProc_","window_","listen","allowedOrigins","Promise","resolve","reject","Error","Array","isArray","onListenConnectionMessageReceived_","bind","addEventListener","then","send","WindowMessenger","Topics","CONNECT_HANDSHAKE","isAllowedOrigin_","normalizedOrigin","parseUrlDeprecated","i","length","resolvePromise","rejectPromise","messageChannelEvent","message","getData","ports","messagePorts","removeEventListener","onChannelMessageReceived_","start","connect","remoteWindowContext","expectedRemoteOrigin","MessageChannel","port1","onConnectConnectionMessageReceived_","postMessage","topic","port2","messagePort","NOTIFICATION_PERMISSION_STATE","SERVICE_WORKER_STATE","SERVICE_WORKER_REGISTRATION","SERVICE_WORKER_QUERY","STORAGE_GET","existingMessage","promiseResolver","sendReply_","listeners","listener","on","callback","push","off","callbackIndex","indexOf","splice","id","payload","isReply","crypto","getRandomValues","Uint8Array","join","_ampWebPushPermissionDialog","ampMessenger_","isCurrentDialogPopup","opener","requestNotificationPermission","Notification","requestPermission","permission","run","onCloseIconClick_","storeNotificationPermission_","showTargetPermissionSection_","showPostloadSection_","onPermissionDefaultOrGranted_","onPermissionDenied_","closeIcon","closeDialog","close","queryParams","queryString","params","opt_initial","obj","create","map","match","exec","tryDecodeUriComponent","value","replace","parseQueryString","fakeLocation","search","redirectLocation","redirectToUrl","navigator","permissions","query","permissionStatus","onchange","DEFAULT","localStorage","setItem","allSections","querySelectorAll","section","setDomElementVisibility_","ident","CSS","escape","preloadSection","postloadSection","domElement","isVisible","invisibilityCssClassName","classList","remove","add","result","closeFrame","parsedUrl","protocol"],"sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2203281422000/","sources":["src/core/types/object/index.js","src/core/types/string/url.js","build/all/amp-web-push-0.1/vars.js","src/url.js","src/config.js","src/utils/event-helper.js","src/utils/log.js","build/all/amp-web-push-0.1/window-messenger.js","build/all/amp-web-push-0.1/amp-web-push-permission-dialog.js","src/core/dom/css-selectors.js"]}
