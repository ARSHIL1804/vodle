;
import{PreactBaseElement as e}from"../bento.mjs";function t(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},{isArray:c}=Array;function f(e,t){return t.toUpperCase()}var{hasOwnProperty:d,toString:m}=Object.prototype;function p(e){const t=Object.getOwnPropertyDescriptor(e,"message");if(null!=t&&t.writable)return e;const{message:n,stack:o}=e,r=new Error(n);for(const t in e)r[t]=e[t];return r.stack=o,r}function y(e){let t=null,n="";for(var o,r=s(arguments,!0);!(o=r()).done;){const e=o.value;e instanceof Error&&!t?t=p(e):(n&&(n+=" "),n+=e)}return t?n&&(t.message=n+": "+t.message):t=new Error(n),t}function b(e){const t=y.apply(null,arguments);return t.expected=!0,t}function v(e,...t){var n,o,r;n=b.apply(null,t),null===(o=(r=self).__AMP_REPORT_ERROR)||void 0===o||o.call(r,n)}import{Fragment as g,createElement as h}from"../bento.mjs";import{useCallback as w,useEffect as j,useImperativeHandle as k,useLayoutEffect as I,useMemo as O,useRef as S,useState as C}from"../bento.mjs";import{forwardRef as x}from"../bento.mjs";import{ContainWrapper as q,useValueRef as R}from"../bento.mjs";import{useAmpContext as P,useLoading as E}from"../bento.mjs";import{useCallback as M,useLayoutEffect as $}from"../bento.mjs";import{useAmpContext as A}from"../bento.mjs";var U={bubbles:!0,cancelable:!0};function L(e,t,n,o){const r=n||{};e.ownerDocument;const a=e.ownerDocument.createEvent("Event");a.data=r;const{bubbles:l,cancelable:i}=o||U;a.initEvent(t,l,i),e.dispatchEvent(a)}var N=self.AMP_CONFIG||{},T=("string"==typeof N.thirdPartyFrameRegex?new RegExp(N.thirdPartyFrameRegex):N.thirdPartyFrameRegex,("string"==typeof N.cdnProxyRegex?new RegExp(N.cdnProxyRegex):N.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function F(e){if(!self.document||!self.document.head)return null;if(self.location&&T.test(self.location.origin))return null;const t=self.document.head.querySelector(`meta[name="${e}"]`);return t&&t.getAttribute("content")||null}N.thirdPartyUrl,N.thirdPartyFrameHost,N.cdnUrl||F("runtime-host"),N.errorReportingUrl,N.betaErrorReportingUrl,N.localDev,N.geoApiUrl||F("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var V={"title":"","artist":"","album":"","artwork":[{"src":""}]};function z(e){const t=e.querySelector('script[type="application/ld+json"]');if(!t)return;const n=function(e,t){try{return function(e){return JSON.parse(e)}(e)}catch(e){return null}}(t.textContent);return n&&n.image?"string"==typeof n.image?n.image:n.image["@list"]&&"string"==typeof n.image["@list"][0]?n.image["@list"][0]:"string"==typeof n.image.url?n.image.url:"string"==typeof n.image[0]?n.image[0]:void 0:void 0}function _(e){const t=e.querySelector('meta[property="og:image"]');return t?t.getAttribute("content"):void 0}function B(e){const t=e.querySelector('link[rel="shortcut icon"]')||e.querySelector('link[rel="icon"]');return t?t.getAttribute("href"):void 0}function J({displayIcon:e,displayOverlay:t,metadata:n,onOverlayClick:o,pause:r,play:a,playing:l,wrapperRef:i}){const{playable:s}=P();return j((()=>{if(!s)return void r();const e=new IntersectionObserver((e=>{e[e.length-1].isIntersecting?a().catch((()=>{})):r()}),{threshold:.5});return e.observe(i.current),()=>{e.disconnect()}}),[i,a,r,s]),h(g,null,e&&h("div",{class:"eq-9e7199f"+(l?" eq-playing-9e7199f":"")},h(Y,null)),t&&h("button",{"aria-label":n&&n.title||"Unmute video",tabindex:"0",class:"autoplay-mask-button-9e7199f fill-content-overlay-fc551a7",onClick:o}))}var Y=function(e){let t=!1,n=null,o=()=>[1,2,3,4].map((e=>h("div",{class:"eq-col-9e7199f",key:e})));return(...e)=>(t||(n=o.apply(self,e),t=!0,o=null),n)}(),H=x((function(e,n){let r="class",{autoplay:a=!1,component:i="video",controls:s=!1,loading:c,loop:f=!1,mediasession:d=!0,noaudio:m=!1,onPlayingState:p,onReadyState:y,poster:b,sources:g,src:x,style:M,[r]:U}=e,L=t(e,["autoplay","component","controls","loading","loop","mediasession","noaudio","onPlayingState","onReadyState","poster","sources","src","style",r].map(o));!function(){const{notify:e}=A();$((()=>{e&&e()}))}();const{playable:N}=P(),T=E(c),F="unload"!==T,[Y,H]=C(a),[W,Z]=C(!1),[D,G]=C(null),[K,Q]=C(!a),X=S(null),ee=S(null),te=O((()=>new u),[]),ne=S("loading"),oe=R(y),re=w(((e,t)=>{if(e!==ne.current){ne.current=e;const n=oe.current;n&&n(e,t)}}),[oe]),ae=R(p),le=w((e=>{Z(e);const t=ae.current;t&&t(e)}),[ae]);I((()=>{F||le(!1)}),[F,le]);const ie=w((()=>te.promise.then((()=>function(e,t){const n=(o=()=>e.play(!1),new Promise((e=>{e(o())})));var o;return n.catch((e=>{v(0,e)})),n}(ee.current)))),[te]),se=w((()=>{te.promise.then((()=>{var e;return null===(e=ee.current)||void 0===e?void 0:e.pause()}))}),[te]),ue=w((()=>te.promise.then((()=>ee.current.requestFullscreen()))),[te]),ce=w((()=>{H(!1),Q(!0)}),[]);return I((()=>{var e;const t=null===(e=ee.current)||void 0===e?void 0:e.readyState;null!=t&&re(t>0?"complete":"loading")}),[re]),I((()=>(d&&W&&D&&function(e,t,n,o){const{navigator:r}=e;"mediaSession"in r&&e.MediaMetadata&&(r.mediaSession.metadata=new e.MediaMetadata(V),r.mediaSession.metadata=new e.MediaMetadata(t),r.mediaSession.setActionHandler("play",n),r.mediaSession.setActionHandler("pause",o))}(window,D,ie,se),()=>{})),[d,W,D,ie,se]),j((()=>{N||se()}),[N,se]),k(n,(()=>({get readyState(){return ne.current},play:ie,pause:se,requestFullscreen:ue,get currentTime(){return ee.current?ee.current.currentTime:0},get duration(){return ee.current?ee.current.duration:NaN},get autoplay(){return a},get controls(){return s},get loop(){return f},userInteracted:ce,mute:()=>H(!0),unmute:()=>{K&&H(!1)}})),[ie,se,ue,ce,K,a,s,f]),h(q,{contentRef:X,class:U,style:M,size:!0,layout:!0,paint:!0},F&&h(i,l(l({},L),{},{ref:ee,loading:T,muted:Y,loop:f,controls:s&&(!a||K),onCanPlay:()=>{te.resolve(),re("complete")},onLoadedMetadata:()=>{d&&te.promise.then((()=>{var e,t;G((e=ee.current,l({"title":(t=L).title||t["aria-label"]||document.title,"artist":t.artist||"","album":t.album||"","artwork":[{"src":t.artwork||t.poster||z(document)||_(document)||B(document)||""}]},e&&e.getMetadata?e.getMetadata():Object.create(null))))})),re("complete")},onPlaying:()=>le(!0),onPause:()=>le(!1),onEnded:()=>le(!1),onError:e=>{re("error",e),te.reject(e)},class:"fill-stretch-fc551a7",src:x,poster:b}),g),a&&!K&&h(J,{metadata:D,playing:W,displayIcon:!m&&Y,wrapperRef:X,play:ie,pause:se,displayOverlay:s,onOverlayClick:ce}))}));H.displayName="VideoWrapper";var W=class extends e{};W.Component=H,W.loadable=!0,W.layoutSizeDefined=!0,W.staticProps,W.props={"album":{attr:"album"},"alt":{attr:"alt"},"artist":{attr:"artist"},"artwork":{attr:"artwork"},"attribution":{attr:"attribution"},"autoplay":{attr:"autoplay",type:"boolean"},"controls":{attr:"controls",type:"boolean"},"controlslist":{attr:"controlslist"},"crossorigin":{attr:"crossorigin"},"disableremoteplayback":{attr:"disableremoteplayback"},"loop":{attr:"loop",type:"boolean"},"noaudio":{attr:"noaudio",type:"boolean"},"poster":{attr:"poster"},"sources":{selector:"source",single:!1,clone:!0},"src":{attr:"src"},"title":{attr:"title"},"dock":{attr:"dock",media:!0},"rotate-to-fullscreen":{attr:"rotate-to-fullscreen",type:"boolean",media:!0}},W.shadowCss='.fill-stretch-fc551a7{width:100%;height:100%;position:relative}.fill-content-overlay-fc551a7{top:0;left:0;right:0;bottom:0;position:absolute}.autoplay-mask-button-9e7199f{width:100%;border:none;display:block;-webkit-appearance:none;appearance:none;background:transparent}.eq-9e7199f{right:7px;width:20px;bottom:7px;height:12px;display:-ms-flexbox;display:flex;opacity:0.8;z-index:1;overflow:hidden;position:absolute;-ms-flex-align:end;align-items:flex-end;pointer-events:none!important}.eq-playing-9e7199f>div:after,.eq-playing-9e7199f>div:before{animation-play-state:running}.eq-col-9e7199f{-ms-flex:1;flex:1;height:100%;position:relative;margin-right:1px}.eq-col-9e7199f:after,.eq-col-9e7199f:before{width:100%;height:100%;content:"";position:absolute;animation:keyframes-eq-animation-9e7199f 0s linear infinite alternate;will-change:transform;background-color:#fafafa;animation-play-state:paused}.eq-col-9e7199f:nth-child(4):before{animation-duration:0.4s}.eq-col-9e7199f:nth-child(4):after{animation-duration:0.25s}.eq-col-9e7199f:nth-child(3):before{animation-duration:0.3s}.eq-col-9e7199f:nth-child(3):after{animation-duration:0.35s}.eq-col-9e7199f:nth-child(2):before{animation-duration:0.5s}.eq-col-9e7199f:nth-child(2):after{animation-duration:0.4s}.eq-col-9e7199f:first-child:before{animation-duration:0.3s}.eq-col-9e7199f:first-child:after{animation-duration:0.45s}@keyframes keyframes-eq-animation-9e7199f{0%{transform:translateY(100%)}to{transform:translateY(0)}}',W.usesShadowDom=!0;import{createElement as Z}from"../bento.mjs";import{Slot as D,createSlot as G}from"../bento.mjs";new Set(["c","v","a","ad"]);var K={"playing":"playing","pause":"pause","ended":"ended","ads-ad-started":"ad_start","ads-ad-ended":"ad_end","loadedmetadata":"loadedmetadata"};function Q(e){return"ref:"===e.substring(0,4)?`ref:${encodeURIComponent(e.substring(4))}`:encodeURIComponent(e)}import{createElement as X}from"../bento.mjs";import{useCallback as ee,useImperativeHandle as te,useLayoutEffect as ne,useMemo as oe,useRef as re}from"../bento.mjs";import{forwardRef as ae}from"../bento.mjs";var le=["loading","unloadOnPause","sandbox","muted","controls","origin","onCanPlay","onMessage","playerStateRef","makeMethodMessage","makeFullscreenMessage","onIframeLoad"],ie=["allow-scripts","allow-same-origin","allow-popups","allow-popups-to-escape-sandbox","allow-top-navigation-by-user-activation"].join(" ");function se(e,t,n){e&&e.contentWindow&&t.then((()=>{e.contentWindow.postMessage(n(),"*")}))}var ue=ae((function(e,n){let{loading:o,unloadOnPause:r=!1,sandbox:a=ie,muted:i=!1,controls:s=!1,origin:c,onCanPlay:f,onMessage:d,playerStateRef:m,makeMethodMessage:p,makeFullscreenMessage:y,onIframeLoad:b}=e,v=t(e,le);const g=re(null),h=oe((()=>new u),[]),w=re(p),j=ee((e=>{se(null==g?void 0:g.current,h.promise,(()=>w.current(e)))}),[h.promise]),k=re(y),I=ee((()=>se(null==g?void 0:g.current,h.promise,k.current)),[h.promise]);te(n,(()=>({get currentTime(){var e,t;return null!==(e=null==m||null===(t=m.current)||void 0===t?void 0:t.currentTime)&&void 0!==e?e:NaN},get duration(){var e,t;return null!==(e=null==m||null===(t=m.current)||void 0===t?void 0:t.duration)&&void 0!==e?e:NaN},requestFullscreen:()=>{if(!k.current)return h.promise.then((()=>{g.current.requestFullscreen()}));I()},play:()=>j("play"),pause:()=>{if(r){const e=g.current;e&&(e.src=e.src)}else j("pause")}})),[m,j,I,h.promise,r]);const O=function(e){const t=re(null);return t.current=e,t}(d);return ne((()=>{if(!g.current)return;function e(e){O.current&&(c&&!c.test(e.origin)||e.source!=g.current.contentWindow||O.current({currentTarget:g.current,target:g.current,data:e.data}))}const{defaultView:t}=g.current.ownerDocument;return t.addEventListener("message",e),()=>t.removeEventListener("message",e)}),[c,O]),ne((()=>{j(i?"mute":"unmute")}),[i,j]),ne((()=>{j(s?"showControls":"hideControls")}),[s,j]),X("iframe",l(l({},v),{},{ref:g,allowfullscreen:!0,frameborder:"0",sandbox:a,loading:o,onCanPlay:()=>{f&&h.promise.then(f),h.resolve()},onLoad:e=>{null==b||b(e)}}))}));ue.displayName="VideoIframeInternal";var ce=ae((function(e,t){return X(H,l(l({ref:t},e),{},{component:ue}))}));ce.displayName="VideoIframe";import{createElement as fe}from"../bento.mjs";import{useCallback as de,useMemo as me,useRef as pe,useState as ye}from"../bento.mjs";import{forwardRef as be}from"../bento.mjs";import{useValueRef as ve}from"../bento.mjs";var ge=["account","autoplay","embed","muted","player","playlistId","referrer","videoId","onPlayingState","urlParams","onLoad"],he="default",we={"mute":"muted","unmute":"muted","showControls":"controls","hideControls":"controls"};function je(e){var t;let n;switch(e){case"showControls":case"mute":n=!0;break;case"hideControls":case"unmute":n=!1}return JSON.stringify({"command":null!==(t=we[e])&&void 0!==t?t:e,"args":n})}var ke=be((function(e,n){const{account:o,autoplay:r,embed:a=he,muted:i,player:s=he,playlistId:u,referrer:f,videoId:d,onPlayingState:m,urlParams:p,onLoad:y}=e,b=t(e,ge),v=pe({}),g=ve(y),[h,w]=ye(i),j=me((()=>function(e,t,n,o,r,a,i){let s="";return o?s="&playlistId="+Q(o):r&&(s="&videoId="+Q(r)),function(e,t,n){if(!t)return e;const o=e.split("#",2),r=o[0].split("?",2);let a=r[0]+(r[1]?`?${r[1]}&${t}`:`?${t}`);return a+=o[1]?`#${o[1]}`:"",a}(`https://players.brightcove.net/${encodeURIComponent(e)}/${encodeURIComponent(t)}_${encodeURIComponent(n)}/index.html?amp=1`+s,function(e){const t=[];for(const a in e){let l=e[a];if(null!=l){l=c(r=l)?r:[r];for(let e=0;e<l.length;e++)t.push((n=a,o=l[e],`${encodeURIComponent(n)}=${encodeURIComponent(o)}`))}}var n,o,r;return t.join("&")}(l(l({},i),{},{referrer:a,playsinline:!0,autoplay:void 0})))}(o,s,a,u,d,f,p)),[o,a,s,u,f,p,d]),k=de((({currentTarget:e,data:t})=>{var n;const o=null==t?void 0:t.event;switch(o){case"ready":L(e,"canplay"),null===(n=g.current)||void 0===n||n.call(g);break;case"playing":null==m||m(!0);break;case"pause":case"ended":null==m||m(!1)}if(null!=t&&t.ct&&(v.current.currentTime=t.ct),null!=t&&t.pr&&(v.current.playedRanges=t.pr),null!=t&&t.dur&&(v.current.duration=t.dur),K[o])L(e,K[o]);else if("volumechange"===o){const n=t.muted;if(null==n||n==h)return;w(n),L(e,function(e){return e?"muted":"unmuted"}(n))}}),[h,m,g]);return function({account:e}){return!!e||(console.warn("account is required for <Brightcove>"),!1)}(e)?fe(ce,l(l({ref:n},b),{},{autoplay:r,controls:!0,makeMethodMessage:je,muted:h,onMessage:k,playerStateRef:v,src:j})):null}));ke.displayName="BentoBrightcove";var Ie=class extends W{};Ie.Component=ke,Ie.props={"account":{attr:"data-account"},"autoplay":{attr:"autoplay",type:"boolean"},"embed":{attr:"data-embed",default:"default"},"player":{attrs:["data-player","data-player-id"],parseAttrs(e){const{"player":t,"playerId":n}=e.dataset;return t||n||"default"}},"playlistId":{attr:"data-playlist-id"},"referrer":{attr:"data-referrer"},"urlParams":function(e){const t=t=>(null==t?void 0:t.startsWith(e))&&t!==e;return{"attrMatches":t,"parseAttrs":n=>{let o;const r=n.attributes;for(let n=0;n<r.length;n++){const l=r[n];t(l.name)&&(o||(o={}),o[(a=l.name.slice(e.length),a.replace(/-([a-z])/g,f))]=l.value)}var a;return o}}}("data-param-"),"videoId":{attr:"data-video-id"},"dock":{attr:"dock",media:!0}},Ie.layoutSizeDefined=!0,Ie.usesShadowDom=!0;import{defineBentoElement as Oe}from"../bento.mjs";Oe("bento-brightcove",Ie,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-brightcove-1.0.mjs.map