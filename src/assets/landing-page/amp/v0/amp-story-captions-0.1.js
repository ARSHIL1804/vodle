;
(self.AMP=self.AMP||[]).push({m:0,v:"2203281422000",n:"amp-story-captions",ev:"0.1",l:!0,f:function(n,t){!function(){function t(n,e){return(t=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,e)}function e(n){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function r(n){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function i(n,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function o(n){return n?Array.prototype.slice.call(n):[]}Array.isArray;var u,s=Object.prototype,f=(s.hasOwnProperty,s.toString,"fixed"),c=self.AMP_CONFIG||{},l=("string"==typeof c.thirdPartyFrameRegex?new RegExp(c.thirdPartyFrameRegex):c.thirdPartyFrameRegex,("string"==typeof c.cdnProxyRegex?new RegExp(c.cdnProxyRegex):c.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function a(n){if(!self.document||!self.document.head)return null;if(self.location&&l.test(self.location.origin))return null;var t=self.document.head.querySelector('meta[name="'.concat(n,'"]'));return t&&t.getAttribute("content")||null}function h(n,t,e,r){return function(n,t,e,r){var i=n,o=e,s=function(n){try{return o(n)}catch(n){var t,e;throw null===(t=(e=self).__AMP_REPORT_ERROR)||void 0===t||t.call(e,n),n}},f=function(){if(void 0!==u)return u;u=!1;try{var n={get capture(){return u=!0,!1}};self.addEventListener("test-options",null,n),self.removeEventListener("test-options",null,n)}catch(n){}return u}(),c=!(null==r||!r.capture);return i.addEventListener(t,s,f?r:c),function(){null==i||i.removeEventListener(t,s,f?r:c),o=null,i=null,s=null}}(n,t,e,r)}c.thirdPartyUrl,c.thirdPartyFrameHost,c.cdnUrl||a("runtime-host"),c.errorReportingUrl,c.betaErrorReportingUrl,c.localDev,c.geoApiUrl||a("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var p=function(){function n(n,t,e){var r=this;this.lO=n,this.$nn=t,this.Gn=e.ownerDocument.createElement("div"),e.appendChild(this.Gn),this.Znn=[],this.tc(),this.Gnn=h(t,"cuechange",(function(){r.tc()})),this.Jnn=h(n,"timeupdate",(function(){r.Aft()}))}var t=n.prototype;return t.dispose=function(){var n,t;this.Gnn(),this.Jnn(),null===(t=(n=this.Gn).parentElement)||void 0===t||t.removeChild(n),this.lO=null,this.$nn=null},t.tc=function(){var n=this;!function(n){for(;n.firstChild;)n.removeChild(n.firstChild)}(this.Gn),this.Znn.length=0,o(this.$nn.activeCues).forEach((function(t){var e=n.Gn.ownerDocument.createElement("div"),r=t.getCueAsHTML(),i=n.Gn.ownerDocument.createElement("span");e.appendChild(i);var u=[];o(r.childNodes).forEach((function(t){if("timestamp"===t.target){var r=function(n){var t=/^(?:(\d{2,}):)?(\d{2}):(\d{2})\.(\d{3})$/.exec(n);return t?3600*(t[1]?parseInt(t[1],10):0)+60*parseInt(t[2],10)+parseInt(t[3],10)+parseInt(t[4],10)/1e3:null}(t.data);null!==r&&(u.push(r),i=n.Gn.ownerDocument.createElement("span"),e.appendChild(i))}else i.appendChild(t)})),n.Znn.push(u),n.Gn.appendChild(e)})),this.Aft()},t.Aft=function(){var n=this,t=this.lO.currentTime;o(this.Gn.childNodes).forEach((function(e,r){o(e.childNodes).forEach((function(e,i){i>0&&e.classList.toggle("amp-story-captions-future",n.Znn[r][i-1]>t)}))}))},n}(),v=function(n){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&t(n,e)}(c,n);var r,u,s=(r=c,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}(),function(){var n,t=e(r);if(u){var o=e(this).constructor;n=Reflect.construct(t,arguments,o)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var t;return(t=s.call(this,n)).Ft=null,t.lO=null,t.Knn=null,t.Qnn=[],t}var l=c.prototype;return l.buildCallback=function(){this.Ft=this.element.ownerDocument.createElement("div"),this.element.appendChild(this.Ft)},l.isLayoutSupported=function(n){return function(n){return n==f||"fixed-height"==n||"responsive"==n||"fill"==n||"flex-item"==n||"fluid"==n||"intrinsic"==n}(n)||"container"===n},l.setVideoElement=function(n){var t=this;this.Knn&&this.Knn(),this.lO=n,this.Wnn(),this.Knn=h(n.textTracks,"change",(function(){t.Wnn()}))},l.Wnn=function(){for(var n=this;this.Qnn.length;)this.Qnn.pop().dispose();o(this.lO.textTracks).forEach((function(t){"showing"!==t.mode&&"hidden"!==t.mode||(t.mode="hidden",n.Qnn.push(new p(n.lO,t,n.Ft)))}))},c}(n.BaseElement);n.registerElement("amp-story-captions",v,"amp-story-captions{white-space:pre-wrap}.amp-story-captions-future{color:gray}\n/*# sourceURL=/extensions/amp-story-captions/0.1/amp-story-captions.css*/")}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-story-captions-0.1.js.map