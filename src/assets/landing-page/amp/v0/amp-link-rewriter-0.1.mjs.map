{"version":3,"file":"amp-link-rewriter-0.1.mjs","mappings":"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","names":["hasOwnProperty","hasOwn_","toString","toString_","Object","prototype","obj","key","call","env","self","AMP_CONFIG","cdnProxyRegex","RegExp","name","document","head","location","test","origin","metaEl","querySelector","getAttribute","getMetaUrl","__AMP_LOG","user","dev","userForEmbed","logs","opt_element","getUserLogger","win","ownerDocument","defaultView","isFromEmbed","suffix","levelFunc","opt_suffix","Error","callLogConstructor","shouldBeTrueish","opt_message","opt_1","opt_2","opt_3","opt_4","opt_5","opt_6","opt_7","opt_8","opt_9","elementOrAmpDoc","id","getServiceInternal","getAmpdocServiceHolder","getAmpdoc","nodeOrDoc","nodeType","node","__AMP_TOP","getTopWindow","getService","getAmpDoc","ampdoc","isSingleDoc","holder","devAssert","isServiceRegistered","s","services","__AMP_SERVICES","getServices","ctor","context","resolve","service","Services","getServiceForDoc","get","element","getServiceForDocOrNull","Priority_Enum","Set","config","scripts","parent","querySelectorAll","selector","distribute","replace","prependSelectorsWith","length","script","tagName","toUpperCase","isJsonScriptTag","json","textContent","JSON","parse","_unused","getChildJsonConfig","e","createError","getConfigJson","assert","output","section","hasOwn","attribute","parseAttribute","vars","scopeDocument","newAttr","keys","forEach","htmlElement","configOpts","anchorAttr","every","WL_ANCHOR_ATTR","PREFIX_DATA_ATTR","REG_DOMAIN_URL","PAGE_PROP_ALLOWLIST","SOURCE_URL","DOCUMENT_REFERRER","AMP_GEO","AmpLinkRewriter","AMP","BaseElement","constructor","super","this","rewriter_","referrer_","buildCallback","viewer","whenReady","then","getReferrerUrl","referrer","letsRockIt_","bind","ampElement","ampDoc","ampDoc_","configOpts_","getConfigOpts","listElements_","doc","getRootNode","cssSelector","join","selection","filteredSelection","iterable","cb","i","hasAttributeValues","push","iterateCursor","getScopeElements","rewrittenUrl_","urlReplacementService_","handleClick","anchor","isRewritten_","isNotFiltered_","sourceTrimmedDomain","sourceUrl","match","canonicalTrimmedDomain","canonicalUrl","isInternalLink_","setRedirectUrl_","href","isListed_","closest","callback","opt_stopAt","el","parentElement","matcher","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","isBelongsToContainer","filter","trimmedDomains","some","domain","domainHrefMatch","replacePageProp_","replaceVars_","expandUrlSync","val","dataset","opt_computeParamNameFunc","opt_paramPattern","params","paramPattern","toLowerCase","substr","getDataParamsFromAttributes","undefined","assign","Math","random","encodeURIComponent","attachClickEvent_","registerAnchorMutator","isLayoutSupported","layout","registerElement"],"sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2203281422000/","sources":["src/core/types/object/index.js","src/config.js","src/utils/log.js","src/service-helpers.js","src/core/window/index.js","src/service/index.js","src/service/navigation.js","src/url.js","extensions/amp-link-rewriter/0.1/config-options.js","src/core/dom/index.js","src/core/dom/query.js","src/core/dom/css-selectors.js","src/core/types/object/json.js","extensions/amp-link-rewriter/0.1/scope.js","extensions/amp-link-rewriter/0.1/link-rewriter.js","extensions/amp-link-rewriter/0.1/amp-link-rewriter.js","src/core/dom/layout/index.js"]}
