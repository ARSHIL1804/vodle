;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-stream-gallery",ev:"0.1",l:!0,f:function(t,s){(()=>{function s(t,s){(null==s||s>t.length)&&(s=t.length);for(var i=0,e=new Array(s);i<s;i++)e[i]=t[i];return e}function i(t,i){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,i){if(t){if("string"==typeof t)return s(t,i);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(t,i):void 0}}(t))||i&&t&&"number"==typeof t.length){e&&(t=e);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e;function r(t){return t?Array.prototype.slice.call(t):[]}var{isArray:n}=Array,{hasOwnProperty:l,toString:a}=Object.prototype;function o(t){const s=Object.create(null);return t&&Object.assign(s,t),s}function h(t,s,i,e,r,n,l,a,o,h,u){return t}var u,c,m={bubbles:!0,cancelable:!0};function p(t,s){const{length:i}=t;for(let e=0;e<i;e++)s(t[e],e)}function d(t,s,i){const e=t.hasAttribute(s),r=void 0!==i?i:!e;return r!==e&&(r?t.setAttribute(s,""):t.removeAttribute(s)),r}function _(t){const s=t.ownerDocument||t;return u&&u.ownerDocument===s||(u=s.createElement("div")),A}function A(t){return function(t,s){h(1===s.length),t.innerHTML=s[0];const i=t.firstElementChild;return h(i),h(!i.nextElementSibling),t.removeChild(i),i}(u,t)}var f=["Webkit","webkit","Moz","moz","ms","O","o"];function g(t){const s=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return f.some((t=>s.startsWith(t+"-")))?`-${s}`:s}function P(t,s,i){if(b(s))return s;c||(c=o());let e=c[s];if(!e||i){if(e=s,void 0===t[s]){const i=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(s),r=function(t,s){for(let i=0;i<f.length;i++){const e=f[i]+s;if(void 0!==t[e])return e}return""}(t,i);void 0!==t[r]&&(e=r)}i||(c[s]=e)}return e}function v(t,s){const{style:i}=t;for(const t in s)i.setProperty(g(P(i,t)),String(s[t]),"important")}function x(t,s,i,e,r){const n=P(t.style,s,r);if(!n)return;const l=e?i+e:i;t.style.setProperty(g(n),l)}function b(t){return t.startsWith("--")}function I(t,s,i){return s in t?Object.defineProperty(t,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[s]=i,t}function w(t,s){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);s&&(e=e.filter((function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),i.push.apply(i,e)}return i}function M(t){for(var s=1;s<arguments.length;s++){var i=null!=arguments[s]?arguments[s]:{};s%2?w(Object(i),!0).forEach((function(s){I(t,s,i[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach((function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))}))}return t}var y=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function E(t,s=""){try{return decodeURIComponent(t)}catch(t){return s}}function T(t,s,i){let e=0,r=0,n=null;function l(){e=0;const a=i-(t.Date.now()-r);var o;a>0?e=t.setTimeout(l,a):(o=n,n=null,s.apply(null,o))}return function(...s){r=t.Date.now(),n=s,e||(e=t.setTimeout(l,i))}}var V=self.AMP_CONFIG||{},R=("string"==typeof V.thirdPartyFrameRegex?new RegExp(V.thirdPartyFrameRegex):V.thirdPartyFrameRegex,("string"==typeof V.cdnProxyRegex?new RegExp(V.cdnProxyRegex):V.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function S(t){if(!self.document||!self.document.head)return null;if(self.location&&R.test(self.location.origin))return null;const s=self.document.head.querySelector(`meta[name="${t}"]`);return s&&s.getAttribute("content")||null}V.thirdPartyUrl,V.thirdPartyFrameHost,V.cdnUrl||S("runtime-host"),V.errorReportingUrl,V.betaErrorReportingUrl,V.localDev,V.geoApiUrl||S("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var C=self.__AMP_LOG;function k(t){return function(t,s){throw new Error("failed to call initLogConstructor")}()}function O(t,s,i,e,r,n,l,a,o,h,u){return t}function j(t,s){return N(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),s)}function z(t){return t.nodeType?(s=t,i=(s.ownerDocument||s).defaultView,j(i,"ampdoc")).getAmpDoc(t):t;var s,i}function L(t){const s=z(t);return s.isSingleDoc()?s.win:s}function N(t,s){O(B(t,s));const i=function(t){let s=t.__AMP_SERVICES;return s||(s=t.__AMP_SERVICES={}),s}(t)[s];return i.obj||(O(i.ctor),O(i.context),i.obj=new i.ctor(i.context),O(i.obj),i.context=null,i.resolve&&i.resolve(i.obj)),i.obj}function B(t,s){const i=t.__AMP_SERVICES&&t.__AMP_SERVICES[s];return!(!i||!i.ctor)}var $,W="__AMP__EXPERIMENT_TOGGLES",U=t=>function(t,s){const i=L(z(t));return B(i,s)?N(i,s):null}(t,"action"),H=t=>function(t,s){return N(L(z(t)),s)}(t,"owners"),Q=t=>j(t,"platform");function D(t,s,i,e){let r=t,n=i,l=t=>{try{return n(t)}catch(t){var s,i;throw null===(s=(i=self).__AMP_REPORT_ERROR)||void 0===s||s.call(i,t),t}};const a=function(){if(void 0!==$)return $;$=!1;try{const t={get capture(){return $=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return $}(),o=!(null==e||!e.capture);return r.addEventListener(s,l,a?e:o),()=>{null==r||r.removeEventListener(s,l,a?e:o),n=null,r=null,l=null}}function F(t,s,i,e){const r={detail:i};return Object.assign(r,e),new t.CustomEvent(s,r)}function G(t,s,i,e){return D(t,s,i,e)}function Z(t){return t.detail}function X(t,s,i,e){let r=i;const n=D(t,s,(t=>{try{r(t)}finally{r=null,n()}}),e);return n}function q(t,s){return t>0&&s>0?t%s:(t%s+s)%s}function J(t,s,i){return h(s<=i),Math.min(Math.max(t,s),i)}var K="amp-carousel:indexchange",Y="amp-carousel:scrollstart",tt="amp-carousel:scrollpositionchange",st="start";function it(t,s){const{bottom:i,height:e,left:r,right:n,top:l,width:a}=s.getBoundingClientRect();return{start:0==t?r:l,end:0==t?n:i,length:0==t?a:e}}function et(t,s){const{end:i,start:e}=it(t,s);return(e+i)/2}function rt(t,s){const{start:i}=it(t,s);return i}function nt(t,s,i){return s==st?rt(t,i):et(t,i)}function lt(t,s,i){x(s,0==t?"width":"height",`${i}px`)}function at(t,s,i){const{end:e,start:r}=it(t,s);return r<=i&&i<e}function ot(t,s,i,e){const r=nt(t,s,e),n=nt(t,s,i),{length:l}=it(t,e);return(r-n)/l}function ht(t,s,i){!function(t,s,i){0==t?s.scrollLeft=i:s.scrollTop=i}(t,s,function(t,s){return 0==t?s.scrollLeft:s.scrollTop}(t,s)+i)}var ut="i-amphtml-carousel-spacer";function ct(t,s){const i=function(t,s,i){const e=P(t.style,"scrollBehavior",void 0);if(e)return b(e)?t.style.getPropertyValue(e):t.style[e]}(t);x(t,"scrollBehavior","auto"),s(),x(t,"scrollBehavior",i)}function mt(t){return t.reduce(((t,s)=>t+s),0)}var pt="__AMP_CAROUSEL_NEAR_VIEWPORT",dt="__AMP_CAROUSEL_IN_VIEWPORT",_t=100,At=.01;function ft(t){return t.split(",").map((t=>{const s=/[a-z0-9.]+$/.exec(t);if(!s)return;const{index:i}=s,e=t.slice(i),r=t.slice(0,i).trim();return{mediaQueryList:window.matchMedia(r),value:e}})).filter(Boolean)}function gt(t){for(let s=0;s<t.length;s++){const{mediaQueryList:i,value:e}=t[s];if(i.matches)return e}return""}var Pt=["<div class=i-amphtml-carousel-content><div class=i-amphtml-stream-gallery-slides><div class=i-amphtml-carousel-scroll></div></div><div class=i-amphtml-stream-gallery-arrow-prev-slot></div><div class=i-amphtml-stream-gallery-arrow-next-slot></div></div>"],vt=["<button class=i-amphtml-stream-gallery-next aria-hidden=true></button>"],xt=["<button class=i-amphtml-stream-gallery-prev aria-hidden=true></button>"],bt={"never":0,"auto":1,"always":2},It=class extends t.BaseElement{static prerenderAllowed(){return!0}constructor(t){super(t),this.tQ=new class{constructor(t){this.lU=t,this.sQ={},this.iQ={}}updateAttribute(t,s){if(!this.lU[t])return;const i=this.iQ[t];i&&this.eQ(i,null);const e=ft(s),r=()=>{this.rQ(t,gt(e))};this.eQ(e,r),r(),this.iQ[t]=e}rQ(t,s){if(this.sQ[t]===s)return;const i=this.lU[t];i&&i(s),this.sQ[t]=s}eQ(t,s){t.forEach((t=>{const{mediaQueryList:i}=t;i.onchange=s}))}}(this.nQ()),this.mD=Q(this.win).isIos(),this.fc=null,this.uG=null,this.mz=null,this.lQ=null,this.aQ=null,this.oQ=null,this.hQ=null,this.uQ=1,this.cQ=Number.MAX_VALUE,this.mQ=Number.MAX_VALUE,this.pQ=1,this.dQ=1,this._Q=!1,this.AQ=0,this.fQ=[],this.cS=null,this.gQ=!1,this.PQ=null}nQ(){return{"extra-space":t=>{this.vQ(t)},"inset-arrow-visibility":t=>{this.xQ(t)},"loop":t=>{this.bQ("true"==t)},"outset-arrows":t=>{this.IQ("true"==t)},"peek":t=>{this.wQ(Number(t))},"slide":t=>{this.uG.goToSlide(Number(t))},"slide-align":t=>{this.uG.updateAlignment(t)},"snap":t=>{this.uG.updateSnap("false"!=t)},"max-item-width":t=>{this.MQ(Number(t))},"max-visible-count":t=>{this.yQ(Number(t))},"min-item-width":t=>{this.EQ(Number(t))},"min-visible-count":t=>{this.TQ(Number(t))}}}VQ(){this.registerAction("prev",(t=>{const{trust:s}=t;this.uG.prev(this.RQ(s))}),1),this.registerAction("next",(t=>{const{trust:s}=t;this.uG.next(this.RQ(s))}),1),this.registerAction("goToSlide",(t=>{const{args:s,trust:i}=t;this.uG.goToSlide(s.index||-1,{actionSource:this.RQ(i)})}),1)}eJ(){this.element.addEventListener(K,(t=>{this.SQ(t)})),this.element.addEventListener(Y,(()=>{this.CQ()})),this.element.addEventListener(tt,(()=>{this.kQ()})),this.aQ.addEventListener("click",(t=>{t.target!=t.currentTarget&&this.uG.prev(0)})),this.lQ.addEventListener("click",(t=>{t.target!=t.currentTarget&&this.uG.next(0)}))}goToSlide(t){this.uG.goToSlide(t,{smoothScroll:!1})}isLayoutSupported(t){return function(t){return"fixed"==t||"fixed-height"==t||"responsive"==t||"fill"==t||"flex-item"==t||"fluid"==t||"intrinsic"==t}(t)}buildCallback(){var t,s,e,l,a,u,c,m,d,_,A,f;s=function(t,s){const e=function(t){var s,e,r,l,a;if(t[W])return t[W];t[W]=o();const u=t[W];h(u);const c=M(M({},null!==(s=t.AMP_CONFIG)&&void 0!==s?s:{}),null!==(e=t.AMP_EXP)&&void 0!==e?e:(m=(null===(r=t.__AMP_EXP)||void 0===r?void 0:r.textContent)||"{}",JSON.parse(m)));var m;for(const t in c){const s=c[t];"number"==typeof s&&s>=0&&s<=1&&(u[t]=Math.random()<s)}const p=null===(l=t.AMP_CONFIG)||void 0===l?void 0:l["allow-doc-opt-in"];if(n(p)&&p.length){const s=t.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(s)for(var d,_,A=i((null===(d=s.getAttribute("content"))||void 0===d?void 0:d.split(","))||[],!0);!(_=A()).done;){const t=_.value;p.includes(t)&&(u[t]=!0)}}Object.assign(u,function(t){var s;let e="";try{var r;"localStorage"in t&&(e=null!==(r=t.localStorage.getItem("amp-experiment-toggles"))&&void 0!==r?r:"")}catch(t){}const n=(null===(s=e)||void 0===s?void 0:s.split(/\s*,\s*/g))||[],l=o();for(var a,h=i(n,!0);!(a=h()).done;){const t=a.value;t&&("-"==t[0]?l[t.substr(1)]=!1:l[t]=!0)}return l}(t));const f=null===(a=t.AMP_CONFIG)||void 0===a?void 0:a["allow-url-opt-in"];if(n(f)&&f.length){const s=function(t){const s=o();if(!t)return s;let i;for(;i=y.exec(t);){const t=E(i[1],i[1]),e=i[2]?E(i[2].replace(/\+/g," "),i[2]):"";s[t]=e}return s}(t.location.originalHash||t.location.hash);for(var g,P=i(f,!0);!(g=P()).done;){const t=g.value,i=s[`e-${t}`];"1"==i&&(u[t]=!0),"0"==i&&(u[t]=!1)}}return u}(t);return!!e["amp-stream-gallery"]}(this.win),e="The amp-stream-gallery experiment must be enabled to use the component",(C.user||(C.user=k()),void C.user.win?C.userForEmbed||(C.userForEmbed=k()):C.user).assert(s,e,l,a,u,c,m,d,_,A,f),this.fc=U(this.element),this.OQ(),this.uG=new class{constructor(t){const{element:s,initialIndex:i,runMutate:e,scrollContainer:r,win:n}=t;this.i=n,this.jQ=e,this.yf=s,this.oQ=r,this.zQ=new class{constructor(t){const{advanceable:s,element:i,scrollContainer:e,win:r}=t;this.i=r,this.oQ=e,this.LQ=s,this.NQ=0,this.zQ=!1,this.BQ=1,this.$Q=1e3,this.WQ=!1,this.UQ=!1,this.HQ=null,this.QQ=Number.POSITIVE_INFINITY,this.Ci=i.getAmpDoc(),this.DQ(this.$Q),this.oQ.addEventListener("scroll",(()=>this.FQ()),!0),G(this.oQ,"touchstart",(()=>this.GQ()),{capture:!0,passive:!0}),G(i,K,(t=>{this.ZQ(t)}))}stop(){this.UQ=!0}pause(){this.WQ=!0}resume(){this.WQ=!1,this.XQ()}updateAutoAdvance(t){this.zQ=t,this.XQ()}updateAutoAdvanceCount(t){this.BQ=t,this.XQ()}updateAutoAdvanceInterval(t){this.$Q=Math.max(t,1e3),this.DQ(this.$Q),this.XQ()}updateMaxAdvances(t){this.QQ=t}DQ(t){const s=T(this.i,(()=>{s==this.HQ&&this.qQ()}),t);this.HQ=s}GQ(){this.pause(),X(window,"touchend",(()=>{this.resume()}),{capture:!0,passive:!0})}JQ(){return this.zQ&&this.Ci.isVisible()&&!this.WQ&&!this.UQ&&this.NQ<this.QQ}FQ(){this.XQ()}ZQ(t){const s=Z(t).actionSource;s&&4!==s&&this.stop()}qQ(){this.JQ()&&(this.LQ.advance(this.BQ,{actionSource:4,allowWrap:!0}),this.NQ+=this.BQ)}XQ(){this.JQ()&&this.HQ()}}({win:n,element:s,scrollContainer:r,advanceable:this}),this.KQ=new class{constructor(t){const{element:s,runMutate:i,scrollContainer:e,stoppable:r,win:n}=t;this.i=n,this.oQ=e,this.jQ=i,this.fQ=[],this.YQ=1,this.xZ=!1,this.wZ=!1,this.Se=0,s.addEventListener("focus",(()=>{r.stop()}),!0),s.addEventListener(K,(t=>{this.SQ(t)}))}updateMixedLength(t){this.xZ=t}updateUi(){this.wZ||(this.wZ=!0,this.jQ((()=>{this.wZ=!1,this.TZ(),this.VZ()})))}updateSlides(t){this.fQ=t,this.updateUi()}updateVisibleCount(t){this.YQ=t,this.updateUi()}SZ(){return this.xZ||this.YQ>=2}TZ(){this.SZ()?(this.oQ.removeAttribute("aria-live"),this.oQ.setAttribute("role","list"),this.fQ.forEach((t=>{t.setAttribute("role","listitem")}))):(this.oQ.setAttribute("aria-live","polite"),this.oQ.removeAttribute("role"),this.fQ.forEach((t=>{t.removeAttribute("role")})))}VZ(){this.fQ.forEach(((t,s)=>{const i=!this.SZ()&&s!==this.Se;t.setAttribute("aria-hidden",i)}))}SQ(t){const s=Z(t).index;this.Se=s,this.jQ((()=>{this.VZ()}))}}({win:n,element:s,scrollContainer:r,runMutate:e,stoppable:this.zQ}),this.CZ=T(n,(()=>this.kZ()),200),this.OZ=1,this.jZ=Number.POSITIVE_INFINITY,this.xZ=!1,this.fQ=[],this.zZ=!0,this.wZ=!1,this.LZ=[],this.NZ=[],this.BZ=[],this.$Z=[],this.WZ=!1,this.UZ=!1,this.HZ=0,this.QZ=null,this.DZ=NaN,this.FZ=!1,this.GZ=!1,this.ZZ=void 0,this.XZ=st,this.qZ=0,this.JZ=!0,this.KZ=!0,this.cS=i||0,this._d=!1,this.$B=!0,this.YZ=1,this.YQ=1,this.oQ.addEventListener("scroll",(()=>this.FQ()),!0),this.oQ.addEventListener("scrollend",(()=>this.BX()),!0),G(this.oQ,"touchstart",(()=>this.GQ()),{capture:!0,passive:!0}),G(this.oQ,"wheel",(()=>this.WX()),{capture:!0,passive:!0})}next(t){this.advance(this.OZ,{actionSource:t})}prev(t){this.advance(-this.OZ,{actionSource:t})}advance(t,s={}){const{cS:i,QZ:e,fQ:r}=this,{actionSource:n,allowWrap:l=!1}=s,a=null!==e?e:i,o=a+t,h=r.length-1,u=0===a,c=a===h,m=o<0,p=o>h,d=t>0&&this.HX(a)&&this.HX(o);let _;_=this.isLooping()?q(o,h+1):l?d?0:m&&u||p&&!c?h:m&&!u||p&&c?0:o:d?a:J(o,0,h),this.goToSlide(_,{actionSource:n})}pauseLayout(){this.WZ=!0,this.zQ.pause()}resumeLayout(){this.WZ=!1,this.updateUi(),this.zQ.resume()}getCurrentIndex(){return this.cS}getVisibleCount(){return this.YQ}isLooping(){return this._d&&this.fQ.length/this.YQ>=3}goToSlide(t,s={}){const{actionSource:i,smoothScroll:e=!0}=s;t<0||t>this.fQ.length-1||isNaN(t)||t!==this.cS&&(this.FZ||this.QX()||(this.UZ=!1,this.QZ=t,this.ZZ=i,this.DX(this.fQ[t],{smoothScroll:e})))}updateAdvanceCount(t){this.OZ=t}updateAlignment(t){this.XZ="start"===t?st:"center",this.updateUi()}updateAutoAdvance(t){this.zQ.updateAutoAdvance(t)}updateAutoAdvanceCount(t){this.zQ.updateAutoAdvanceCount(t)}updateAutoAdvanceInterval(t){this.zQ.updateAutoAdvanceInterval(t)}updateAutoAdvanceLoops(t){this.jZ=t,this.updateUi()}updateForwards(t){this.JZ=t,this.updateUi()}updateHideScrollbar(t){this.KZ=t,this.updateUi()}updateHorizontal(t){this.qZ=t?0:1,this.updateUi()}updateLoop(t){this._d=t,this.updateUi()}updateMixedLength(t){this.xZ=t,this.KQ.updateMixedLength(t),this.updateUi()}updateSlides(t){const{length:s}=t;s?(this.fQ=t,this.cS=this.isLooping()?q(this.cS,s):J(this.cS,0,s-1)||0,this.KQ.updateSlides(t),this.updateUi()):this.yf.tagName.toUpperCase()}updateSnap(t){this.$B=t,this.updateUi()}updateSnapBy(t){this.YZ=Math.max(1,t),this.updateUi()}updateUserScrollable(t){this.zZ=t,this.updateUi()}updateUi(){this.wZ||this.WZ||(this.wZ=!0,this.jQ((()=>{this.wZ=!1,this.oQ.setAttribute("mixed-length",this.xZ),this.oQ.setAttribute("user-scrollable",this.zZ),this.oQ.setAttribute("hide-scrollbar",this.KZ),this.oQ.setAttribute("horizontal",0===this.qZ),this.oQ.setAttribute("loop",this.isLooping()),this.oQ.setAttribute("snap",this.$B),v(this.oQ,{"--visible-count":this.YQ}),this.fQ.length&&(this.zQ.updateMaxAdvances(this.jZ*this.fQ.length-1),this.FX(),this.GX(),this.ZX(),this.kZ(!0))})))}updateVisibleCount(t){this.YQ=Math.max(1,t),this.KQ.updateVisibleCount(t),this.updateUi()}XX(t,s){this.DZ!==t&&(this.DZ=t,this.yf.dispatchEvent(F(this.i,K,{"index":t,"total":this.fQ.length,"actionSource":s,"slides":this.fQ},{bubbles:!0})))}qX(t,s){this.cS=t,this.HZ=s,this.yf.dispatchEvent(F(this.i,"amp-carousel:offsetchange",{"index":t,"total":this.fQ.length,"offset":this.JZ?-s:s,"slides":this.fQ},{bubbles:!0}))}notifyScrollStart(){this.yf.dispatchEvent(F(this.i,Y,null))}JX(){this.yf.dispatchEvent(F(this.i,tt,null))}GQ(){this.FZ=!0,this.ZZ=3,this.QZ=null,this.UZ=!1,X(window,"touchend",(()=>{this.FZ=!1,this.CZ()}),{capture:!0,passive:!0})}WX(){this.ZZ=2,this.QZ=null,this.UZ=!1}FQ(){this.UZ?this.UZ=!1:(this.GZ=!0,this.KX(),this.notifyScrollStart(),this.CZ())}BX(){null===this.QZ&&this.kZ()}QX(){return this.GZ&&(3===this.ZZ||2===this.ZZ)}YX(t,s,i){const e=s*i*(this.JZ?1:-1);!function(t,s,i){const e=0==t?i:0,r=0==t?0:i;x(s,"transform",`translate(${e}px, ${r}px)`),v(s,{"--content-transform":`translate(${e}px, ${r}px)`})}(this.qZ,t,e),t._revolutions=s}dY(t){this.fQ.forEach((s=>{this.YX(s,0,t)}))}_Y(){return this.fQ.map((t=>it(this.qZ,t).length))}isAtEnd(){return!this.isLooping()&&this.AY()}isAtStart(){return!this.isLooping()&&this.fY()}AY(){const t=this.oQ,s=t.getBoundingClientRect().width*(this.JZ?1:-1),i=this.JZ?Math.ceil(s):Math.floor(s),e=t.scrollLeft+i,r=t.scrollWidth;return this.JZ?e>=r:e<=-r}fY(){const t=this.oQ.scrollLeft;return this.JZ?t<=0:t>=0}gY(t){const s=[];for(let i=0;i<t;i++){const t=document.createElement("div");t.className=ut,s.push(t)}return s}FX(){const{qZ:t,fQ:s}=this,i=this._Y(),e=mt(i),r=this.isLooping()?s.length:0;this.LZ.forEach((t=>{this.oQ.removeChild(t)})),this.LZ=this.gY(r),this.LZ.forEach(((e,r)=>{lt(t,e,i[r]),this.oQ.insertBefore(e,s[0])})),this.NZ.forEach((t=>{this.oQ.removeChild(t)})),this.NZ=this.gY(r),this.NZ.forEach(((s,r)=>{lt(t,s,i[r]),this.YX(s,-1,e),this.oQ.appendChild(s)})),this.BZ.forEach((t=>{this.oQ.removeChild(t)})),this.BZ=this.gY(r),this.BZ.forEach(((s,r)=>{lt(t,s,i[r]),this.YX(s,-1,e),this.oQ.appendChild(s)})),this.$Z=this.LZ.concat(this.NZ,this.BZ)}GX(){const t=this.fQ.length,s=this.XZ===st,i=1===q(this.YQ,2),e=s||i?"0%":"50%";p(this.oQ.children,((s,i)=>{const r=q(i,t),n=0===q(r,this.YZ);!s.classList.contains(ut)&&this.isLooping()||function(t,s){for(const i in s)x(t,i,s[i])}(s,{"scroll-snap-align":n?this.XZ:"none","scroll-snap-coordinate":n?e:"none"})}))}ZX(){const{BZ:t,LZ:s,cS:i,fQ:e}=this,r=Math.max(0,e.length-i-1),n=Math.max(0,i-1);s.forEach(((t,n)=>{const l=function(t,s,i){const{length:e}=i;return t===s?e:q(t-s,e)}(i,n,s)>e.length-1;t.hidden=l||n<e.length-r})),t.forEach(((s,r)=>{const l=function(t,s,i){const{length:e}=i;return t===s?e:q(s-t,e)}(i,r,t)>e.length-1;s.hidden=l||r>n}))}KX(){const{XZ:t,$Z:s,qZ:i,cS:e,oQ:r,fQ:n}=this,l=mt(this._Y()),a=!!s.length,o=a?s:n,h=function(t,s,i,e,r){const n=nt(t,s,i);if(at(t,e[r],n))return r;for(let s=1;s<=e.length/2;s++){const i=q(r+s,e.length),l=q(r-s,e.length);if(at(t,e[i],n))return i;if(at(t,e[l],n))return l}}(i,t,r,o,a?e+n.length:e);if(void 0===h)return;const u=o[h],c=h%n.length,m=ot(i,t,r,u);this.qX(c,m),c!==e&&this.jQ((()=>{this.PY(l)}))}kZ(t=!1){const{ZZ:s}=this;if(this.FZ)return;if(this.ZZ=void 0,this.GZ=!1,this.jQ((()=>{this.JX()})),this.DZ===this.cS&&null===this.QZ&&!t)return;null!==this.QZ&&(this.cS=this.QZ,this.QZ=null,this.HZ=0);const i=mt(this._Y());this.jQ((()=>{this.XX(this.cS,s),this.qX(this.cS,this.HZ),this.dY(i),this.ZX(),this.PY(i),this.vY()}))}vY(){const{XZ:t,qZ:s,HZ:i,cS:e,oQ:r,fQ:n}=this,l=n[e],a=ot(s,t,r,l)-i,{length:o}=it(s,l),h=a*o;h&&(this.UZ=!0,ct(r,(()=>{ht(s,r,h)})))}DX(t,s){const{smoothScroll:i}=s;(i?(t,s)=>s():ct)(this.oQ,(()=>{!function(t,s,i,e,r=0){const n=s==st,{length:l}=it(t,e);ht(t,i,(n?rt(t,e):et(t,e))-(n?rt(t,i):et(t,i))-r*l)}(this.qZ,this.XZ,this.oQ,t)}))}xY(t,s,i){const{cS:e,DZ:r,fQ:n}=this,l=n[e]._revolutions||0,a=i?1:-1;for(let o=1;o<=s;o++){const s=q(e+o*a,n.length);if(s===r&&e!==r)break;const h=n[s],u=s>e!==i?l+a:l;this.YX(h,u,t)}}PY(t){if(!this.isLooping())return;const{XZ:s,fQ:i,YQ:e}=this,r=s===st?e-1:0,n=(i.length-1-r)/2,l=(i.length-1+r)/2;this.xY(t,Math.round(n),!1),this.xY(t,Math.round(l),!0)}HX(t){const{XZ:s,fQ:i,YQ:e}=this,r=s===st?e:e/2;return t>=i.length-r}}({win:this.win,element:this.element,scrollContainer:this.oQ,initialIndex:this.bY(),runMutate:t=>this.mutateElement(t)}),this.uG.updateSnap(!1),this.uG.updateForwards(!("rtl"==((t=O(this.element.ownerDocument)).body.getAttribute("dir")||t.documentElement.getAttribute("dir")||"ltr"))),r(this.element.attributes).forEach((t=>{this.IY(t.name,t.value)})),this.uG.updateSlides(this.fQ),this.wY(),this.VQ(),this.eJ(),this.MY()}OQ(){const{element:t}=this;let s,i;r(t.children).forEach((t=>{const e=t.getAttribute("slot");"prev-arrow"==e?s=t:"next-arrow"==e?i=t:"I-AMPHTML-SIZER"!=t.tagName&&this.fQ.push(t)})),t.appendChild(this.yY()),this.oQ=t.querySelector(".i-amphtml-carousel-scroll"),this.hQ=t.querySelector(".i-amphtml-stream-gallery-slides"),this.mz=t.querySelector(".i-amphtml-carousel-content"),this.aQ=t.querySelector(".i-amphtml-stream-gallery-arrow-prev-slot"),this.lQ=t.querySelector(".i-amphtml-stream-gallery-arrow-next-slot"),this.fQ.forEach((t=>{t.classList.add("i-amphtml-carousel-slotted"),this.oQ.appendChild(t)})),this.aQ.appendChild(s||this.EY()),this.lQ.appendChild(i||this.TY())}isRelayoutNeeded(){return!0}pauseCallback(){this.uG.pauseLayout()}resumeCallback(){this.uG.resumeLayout()}layoutCallback(){return this.VY(),this.uG.updateUi(),this.PQ.wasLaidOut(),e||(e=Promise.resolve(void 0))}unlayoutCallback(){return this.PQ.wasUnlaidOut(),!0}mutatedAttributesCallback(t){for(const s in t)this.IY(s,String(t[s]))}IY(t,s){this.tQ.updateAttribute(t,s)}yY(){return _(this.element)(Pt)}TY(){return _(this.element)(vt)}EY(){return _(this.element)(xt)}RQ(t){return 3==t?0:1}bY(){const t=this.element.getAttribute("slide")||"0";return Number(gt(ft(t)))}RY(t,s){const i=(t-this.AQ*s)/s,e=Math.floor(i);return Math.max(1,e)+this.AQ}SY(){return this._Q?this.aQ.getBoundingClientRect().width+this.lQ.getBoundingClientRect().width:0}CY(t){return 2==t||3==t||0==t}kY(){return 2!=this.uQ&&(0==this.uQ||this.gQ||0!=this.AQ)}wQ(t){this.AQ=Math.max(0,t||0),this.VY()}MQ(t){this.cQ=t||Number.MAX_VALUE,this.VY()}yQ(t){this.mQ=t||Number.MAX_VALUE,this.VY()}EQ(t){this.pQ=t||1,this.VY()}TQ(t){this.dQ=t||1,this.VY()}VY(){const{cQ:t,mQ:s,pQ:i,dQ:e,fQ:r}=this,n=this.element.getBoundingClientRect().width-this.SY(),l=this.RY(n,i),a=Math.min(r.length,s),o=Math.min(Math.max(e,l),a),h=Math.floor(o);this.mutateElement((()=>{const s=l>a?a*t+"px":l*t+"px";x(this.hQ,"max-width",s)})),this.uG.updateSlides(this.fQ),this.uG.updateAdvanceCount(h),this.uG.updateSnapBy(h),this.uG.updateVisibleCount(o)}IQ(t){this._Q=t,this.MY()}vQ(t){this.mz.setAttribute("i-amphtml-stream-gallery-extra-space",t)}xQ(t){this.uQ=bt[t]||1,this.MY()}bQ(t){t&&Q(this.win).isIos()||this.uG.updateLoop(t)}MY(){p(this.aQ.children,(t=>{d(t,"disabled",this.uG.isAtStart())})),p(this.lQ.children,(t=>{d(t,"disabled",this.uG.isAtEnd())})),d(this.mz,"i-amphtml-stream-gallery-hide-inset-buttons",this.kY()),d(this.mz,"amp-stream-gallery-outset-arrows",this._Q)}wY(){const t=H(this.element);this.PQ=new class{constructor(t){const{ampElement:s,intersectionElement:i,intersectionThreshold:e=At,nearbyMarginInPercent:r=_t,viewportIntersectionThreshold:n=e,viewportIntersectionCallback:l=(()=>{})}=t;this.OY=s,this.zT=H(s.element),this.jY=i,this.zY=e,this.LY=r,this.NY=n,this.BY=l,this.$Y=!1,this.xL=[],this.WY=null,this.UY=null,this.Ep=null,this.HY=!1}setQueueChanges(t){this.$Y=t}QY(t,s){s?this.zT.scheduleLayout(this.OY.element,t):this.zT.scheduleUnlayout(this.OY.element,t)}DY(t,s){this.BY(t,s)}Wr(){if(this.WY&&this.UY&&this.Ep)return;const{win:t}=this.OY;this.WY=new t.IntersectionObserver((t=>this.FY(t)),{root:this.jY,rootMargin:`${this.LY}%`,threshold:this.zY}),this.UY=new t.IntersectionObserver((t=>this.GY(t)),{root:this.jY,rootMargin:`${this.LY+10}%`,threshold:this.zY}),this.Ep=new t.IntersectionObserver((t=>this.ZY(t)),{root:this.jY,rootMargin:"0%",threshold:this.NY})}FY(t){t.filter((t=>{const{isIntersecting:s}=t;return s})).forEach((t=>{const{target:s}=t;s[pt]=0})),this.$Y||this.XY()}GY(t){t.filter((t=>{const{isIntersecting:s}=t;return!s})).forEach((t=>{const{target:s}=t;s[pt]=1})),this.$Y||this.qY()}ZY(t){t.forEach((t=>{const{isIntersecting:s,target:i}=t;i[dt]=s?0:1})),this.$Y||this.JY()}flushChanges(){this.XY(),this.qY(),this.JY()}XY(){for(let t=0;t<this.xL.length;t++){const s=this.xL[t];0==s[pt]&&(this.QY(s,!0),s[pt]=null)}}qY(){for(let t=0;t<this.xL.length;t++){const s=this.xL[t];1==s[pt]&&(this.QY(s,!1),s[pt]=null)}}JY(){for(let t=0;t<this.xL.length;t++){const s=this.xL[t];0==s[dt]?(this.QY(s,!0),this.DY(s,!0)):1==s[dt]&&this.DY(s,!1),s[dt]=null}}KY(t){if("IntersectionObserver"in this.OY.win){if(this.Wr(),!t)return this.WY.disconnect(),this.UY.disconnect(),void this.Ep.disconnect();for(let t=0;t<this.xL.length;t++)this.WY.observe(this.xL[t]),this.UY.observe(this.xL[t]),this.Ep.observe(this.xL[t])}}updateChildren(t){if(this.xL=t,"IntersectionObserver"in this.OY.win){for(let t=0;t<this.xL.length;t++)this.zT.setOwner(this.xL[t],this.OY.element);this.KY(!1),this.KY(this.HY)}}wasLaidOut(){this.HY=!0,this.KY(this.HY)}wasUnlaidOut(){this.HY=!1,this.KY(this.HY);for(let t=0;t<this.xL.length;t++)this.QY(this.xL[t],!1),this.DY(this.xL[t],!1)}}({ampElement:this,intersectionElement:this.oQ,nearbyMarginInPercent:this.mD?200:100,viewportIntersectionCallback:(s,i)=>{i?t.scheduleResume(this.element,s):t.schedulePause(this.element,s)}}),this.PQ.setQueueChanges(this.mD),this.PQ.updateChildren(this.fQ)}CQ(){this.PQ.setQueueChanges(this.mD)}kQ(){this.PQ.flushChanges(),this.PQ.setQueueChanges(!1),this.MY()}YY(t,s){const i=this.cS;if(this.cS=t,null==i)return;const e={"index":t},r="slideChange",n=this.CY(s)?3:1,l=F(this.win,`streamGallery.${r}`,e);this.fc.trigger(this.element,r,l,n),function(t,s,i,e){const r=i||{};h(t.ownerDocument);const n=t.ownerDocument.createEvent("Event");n.data=r;const{bubbles:l,cancelable:a}=m;n.initEvent("slideChange",l,a),t.dispatchEvent(n)}(this.element,0,e)}SQ(t){const s=Z(t),i=s.index,e=s.actionSource;this.gQ=this.gQ||3==e,this.YY(i,e),this.MY()}};t.registerElement("amp-stream-gallery",It,'.i-amphtml-carousel-content{position:absolute;top:0;left:0;bottom:0;right:0}.i-amphtml-carousel-scroll{display:-ms-flexbox;display:flex;width:100%;height:100%;-ms-flex-align:center;align-items:center;outline:none;scroll-behavior:smooth;-webkit-overflow-scrolling:touch!important;--visible-count:1}.i-amphtml-carousel-scroll[hide-scrollbar=true]{scrollbar-width:none}.i-amphtml-carousel-scroll[hide-scrollbar=true]::-webkit-scrollbar{display:none;box-sizing:content-box!important}.i-amphtml-carousel-scroll[horizontal=true]{-ms-flex-direction:row;flex-direction:row;scroll-snap-type-x:mandatory;scroll-snap-type:x mandatory;padding-bottom:20px!important;overflow-y:hidden}.i-amphtml-carousel-scroll[horizontal=false]{-ms-flex-direction:column;flex-direction:column;scroll-snap-type-y:mandatory;scroll-snap-type:y mandatory;padding-right:20px!important;overflow-x:hidden}.i-amphtml-carousel-scroll[snap=false]{scroll-snap-type:none}.i-amphtml-carousel-scroll[user-scrollable=false]{overflow:hidden}.i-amphtml-carousel-spacer{visibility:hidden;z-index:-1}.i-amphtml-carousel-slotted,.i-amphtml-carousel-spacer{box-sizing:border-box!important;margin:0!important;-ms-flex-negative:0!important;flex-shrink:0!important;width:100%;height:100%;scroll-snap-stop:always}.i-amphtml-carousel-scroll[horizontal=true][mixed-length=false]>.i-amphtml-carousel-slotted,.i-amphtml-carousel-scroll[horizontal=true][mixed-length=false]>.i-amphtml-carousel-spacer{width:calc(100%/var(--visible-count))!important;min-width:auto!important;max-width:none!important}.i-amphtml-carousel-scroll[horizontal=false][mixed-length=false]>.i-amphtml-carousel-slotted,.i-amphtml-carousel-scroll[horizontal=false][mixed-length=false]>.i-amphtml-carousel-spacer{height:calc(100%/var(--visible-count))!important;min-height:auto!important;max-height:none!important}.i-amphtml-carousel-scroll[horizontal=true][snap=true][mixed-length=true]>.i-amphtml-carousel-slotted,.i-amphtml-carousel-scroll[horizontal=true][snap=true][mixed-length=true]>.i-amphtml-carousel-spacer{max-width:100%!important}.i-amphtml-carousel-scroll[horizontal=false][snap=true][mixed-length=true]>.i-amphtml-carousel-slotted,.i-amphtml-carousel-scroll[horizontal=false][snap=true][mixed-length=true]>.i-amphtml-carousel-spacer{max-height:100%!important}.i-amphtml-carousel-scroll>.i-amphtml-carousel-slotted{will-change:transform}:not([amp-stream-gallery-outset-arrows])>.i-amphtml-stream-gallery-arrow-prev-slot{width:0;-ms-flex-pack:start;justify-content:flex-start}:not([amp-stream-gallery-outset-arrows])>.i-amphtml-stream-gallery-arrow-next-slot{width:0;-ms-flex-pack:end;justify-content:flex-end}:not([amp-stream-gallery-outset-arrows])>.i-amphtml-stream-gallery-arrow-next-slot>[disabled],:not([amp-stream-gallery-outset-arrows])>.i-amphtml-stream-gallery-arrow-prev-slot>[disabled],[i-amphtml-stream-gallery-hide-inset-buttons]:not([amp-stream-gallery-outset-arrows]) .i-amphtml-stream-gallery-arrow-next-slot>*,[i-amphtml-stream-gallery-hide-inset-buttons]:not([amp-stream-gallery-outset-arrows]) .i-amphtml-stream-gallery-arrow-prev-slot>*{opacity:0;pointer-events:none!important}:not([amp-stream-gallery-outset-arrows])>.i-amphtml-stream-gallery-arrow-next-slot>.i-amphtml-stream-gallery-next,:not([amp-stream-gallery-outset-arrows])>.i-amphtml-stream-gallery-arrow-prev-slot>.i-amphtml-stream-gallery-prev{-ms-flex-negative:0;flex-shrink:0;width:40px;height:40px}:not([amp-stream-gallery-outset-arrows])>.i-amphtml-stream-gallery-arrow-prev-slot>.i-amphtml-stream-gallery-prev{border-radius:0px 4px 4px 0px;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14 7.4 9.4 12l4.6 4.6" fill="none" stroke="%23000" stroke-width="2" stroke-linejoin="round" stroke-linecap="round"/></svg>\')}:not([amp-stream-gallery-outset-arrows])>.i-amphtml-stream-gallery-arrow-next-slot>.i-amphtml-stream-gallery-next{border-radius:4px 0px 0px 4px;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m10 7.4 4.6 4.6-4.6 4.6" fill="none" stroke="%23000" stroke-width="2" stroke-linejoin="round" stroke-linecap="round"/></svg>\')}[amp-stream-gallery-outset-arrows]>.i-amphtml-stream-gallery-arrow-next-slot>[disabled],[amp-stream-gallery-outset-arrows]>.i-amphtml-stream-gallery-arrow-prev-slot>[disabled]{opacity:0.4}[amp-stream-gallery-outset-arrows]>.i-amphtml-stream-gallery-arrow-next-slot>.i-amphtml-stream-gallery-next,[amp-stream-gallery-outset-arrows]>.i-amphtml-stream-gallery-arrow-prev-slot>.i-amphtml-stream-gallery-prev{width:32px;height:32px;border-radius:50%;background-size:24px 24px}[amp-stream-gallery-outset-arrows]>.i-amphtml-stream-gallery-arrow-prev-slot>.i-amphtml-stream-gallery-prev{margin-inline-start:6px;margin-inline-end:12px;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14 7.4 9.4 12l4.6 4.6" fill="none" stroke="%23000" stroke-width="2" stroke-linejoin="round" stroke-linecap="round"/></svg>\')}[amp-stream-gallery-outset-arrows]>.i-amphtml-stream-gallery-arrow-next-slot>.i-amphtml-stream-gallery-next{margin-inline-start:12px;margin-inline-end:6px;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m10 7.4 4.6 4.6-4.6 4.6" fill="none" stroke="%23000" stroke-width="2" stroke-linejoin="round" stroke-linecap="round"/></svg>\')}.i-amphtml-stream-gallery-inset-arrows{position:absolute;top:0;bottom:0;left:0;right:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;pointer-events:none}.i-amphtml-stream-gallery-arrow-prev-slot{-ms-flex-order:0;order:0}.i-amphtml-stream-gallery-arrow-next-slot{-ms-flex-order:2;order:2}.i-amphtml-stream-gallery-arrow-next-slot,.i-amphtml-stream-gallery-arrow-prev-slot{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;pointer-events:all}.i-amphtml-stream-gallery-arrow-next-slot>*,.i-amphtml-stream-gallery-arrow-prev-slot>*{-ms-flex-negative:0;flex-shrink:0}.i-amphtml-stream-gallery-next,.i-amphtml-stream-gallery-prev{position:relative;z-index:1;padding:0;border:none;outline:none;box-shadow:0px 2px 6px 0px rgba(0,0,0,.4);background-color:rgba(255,255,255,0.6);background-size:24px 24px;background-position:50%;background-repeat:no-repeat;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);transition:opacity 200ms ease-in}.i-amphtml-stream-gallery-next[disabled],.i-amphtml-stream-gallery-prev[disabled]{transition-timing-function:ease-out}[dir=rtl] .i-amphtml-stream-gallery-next,[dir=rtl] .i-amphtml-stream-gallery-prev{transform:scaleX(-1)}amp-stream-gallery .i-amphtml-carousel-content{display:-ms-flexbox;display:flex}.i-amphtml-stream-gallery-slides{-ms-flex-order:1;order:1;-ms-flex-positive:1;flex-grow:1;min-width:1px}[i-amphtml-stream-gallery-extra-space=around]{-ms-flex-pack:center;justify-content:center}amp-stream-gallery .i-amphtml-carousel-slotted>.i-amphtml-replaced-content{-o-object-fit:contain;object-fit:contain}\n/*# sourceURL=/extensions/amp-stream-gallery/0.1/amp-stream-gallery.css*/')})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-stream-gallery-0.1.mjs.map