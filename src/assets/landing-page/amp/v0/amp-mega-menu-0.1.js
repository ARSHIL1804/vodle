;
(self.AMP=self.AMP||[]).push({m:0,v:"2203281422000",n:"amp-mega-menu",ev:"0.1",l:!0,f:function(n,t){!function(){var t;function e(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function i(n,t){return(i=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function r(n){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function a(n){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function o(n,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return e(n)}var u="amp:dom-update",m="ArrowLeft";function f(n){return n?Array.prototype.slice.call(n):[]}Array.isArray;var c,s=Object.prototype;function l(n){return 1==(null==n?void 0:n.nodeType)}function h(n,t,e,i,r,a,o,u,m,f,c){return n}function p(n){return void 0!==c?c:c=function(n){try{var t=n.ownerDocument,e=t.createElement("div"),i=t.createElement("div");return e.appendChild(i),e.querySelector(":scope div")===i}catch(n){return!1}}(n)}function d(n,t){return n.replace(/^|,/g,"$&".concat(t," "))}function v(n,t){var e=n.classList,i="i-amphtml-scoped";e.add(i);var r=d(t,".".concat(i)),a=n.querySelectorAll(r);return e.remove(i),a}function b(n,t){if(p(n))return n.querySelector(d(t,":scope"));var e=v(n,t)[0];return void 0===e?null:e}function g(n,t,e){var i;for(i=n;i&&i!==e;i=i.parentElement)if(t(i))return i;return null}function y(n){var t=n.isConnected;if(void 0!==t)return t;for(var e=n;(e=w(e)).host;)e=e.host;return e.nodeType===Node.DOCUMENT_NODE}function w(n){if(Node.prototype.getRootNode)return n.getRootNode();var t,e;for(t=n;t.parentNode&&(!(e=t)||"I-AMPHTML-SHADOW-ROOT"!=e.tagName&&(11!=e.nodeType||"[object ShadowRoot]"!==Object.prototype.toString.call(e)));t=t.parentNode);return t}function x(n){try{n.focus()}catch(n){}}s.hasOwnProperty,s.toString;var k=[],E="__AMP_MODAL_SAVED_TAB_INDEX";function A(n){for(var t=[],e=n;e;e=e.parentNode||e.host)t.push(e);return t}function R(n,t,e){null===e||null==e?n.removeAttribute(t):n.setAttribute(t,e)}var j=self.AMP_CONFIG||{},O=("string"==typeof j.thirdPartyFrameRegex?new RegExp(j.thirdPartyFrameRegex):j.thirdPartyFrameRegex,("string"==typeof j.cdnProxyRegex?new RegExp(j.cdnProxyRegex):j.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function _(n){if(!self.document||!self.document.head)return null;if(self.location&&O.test(self.location.origin))return null;var t=self.document.head.querySelector('meta[name="'.concat(n,'"]'));return t&&t.getAttribute("content")||null}j.thirdPartyUrl,j.thirdPartyFrameHost,j.cdnUrl||_("runtime-host"),j.errorReportingUrl,j.betaErrorReportingUrl,j.localDev,j.geoApiUrl||_("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var S=self.__AMP_LOG;function M(n){return function(n,t){throw new Error("failed to call initLogConstructor")}()}function z(n,t,e,i,r,a,o,u,m,f,c){return n}function D(n){return n.nodeType?(e=n,t=(e.ownerDocument||e).defaultView,function(n,t){return L(n=function(n){return n.__AMP_TOP||(n.__AMP_TOP=n)}(n),"ampdoc")}(t)).getAmpDoc(n):n;var t,e}function L(n,t){z(P(n,t));var e=function(n){var t=n.__AMP_SERVICES;return t||(t=n.__AMP_SERVICES={}),t}(n)[t];return e.obj||(z(e.ctor),z(e.context),e.obj=new e.ctor(e.context),z(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}function P(n,t){var e=n.__AMP_SERVICES&&n.__AMP_SERVICES[t];return!(!e||!e.ctor)}var T="amp-mega-menu",I=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&i(n,t)}(j,n);var a,c,s=(a=j,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}(),function(){var n,t=r(a);if(c){var e=r(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function j(n){var t;return(t=s.call(this,n)).tz=[],t.iz=0,t.rz=null,t.oz=null,t.ql=t.win.document,t.uz=t.ql.documentElement,t.Ks=null,t.mz=n.id||Math.floor(100*Math.random()),t.fz=t.cz.bind(e(t)),t.lz=t.hz.bind(e(t)),t.pz=t.dz.bind(e(t)),t}j.prerenderAllowed=function(){return!0};var O=j.prototype;return O.isLayoutSupported=function(n){return"fixed-height"===n},O.buildCallback=function(){var n,t,e,i,r;this.Ks=(n=this.element,t="action",e=D(n),P(r=(i=D(e)).isSingleDoc()?i.win:i,t)?L(r,t):null)},O.layoutCallback=function(){return this.cz(),this.element.addEventListener(u,this.fz),this.oz||(this.oz=this.vz()),t||(t=Promise.resolve(void 0))},O.unlayoutCallback=function(){return this.element.removeEventListener(u,this.fz),this.bz(),!0},O.vz=function(){var n=this.ql.createElement("div");n.classList.add("i-amphtml-mega-menu-mask"),n.setAttribute("aria-hidden","true");var t,e=("header",((t=this.element).closest?t.closest("header"):g(t,(function(n){return function(n,t){var e=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;return!!e&&e.call(n,"header")}(n)})))||this.element);return e.classList.add("i-amphtml-mega-menu-mask-parent"),e.appendChild(n),n},O.cz=function(){var n,t,e=this;this.tz=f((t="nav > * > li",p(n=this.element)?n.querySelectorAll(d(t,":scope")):v(n,t))),this.tz.filter((function(n){return!n.classList.contains("i-amphtml-mega-menu-item")})).forEach((function(n){if(1!=n.childElementCount){var t=b(n,"> button")||b(n,"> [role=button]"),i=b(n,"> [role=dialog]");a=t,o="".concat(T," requires each expandable item to include a button that toggles it."),(S.user||(S.user=M()),void S.user.win?S.userForEmbed||(S.userForEmbed=M()):S.user).assert(a,o,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined),e.gz(n,t,i)}else{var r=n.firstElementChild;e.gz(n,r,null)}var a,o}))},O.gz=function(n,t,e){var i=this;if(n.classList.add("i-amphtml-mega-menu-item"),this.iz++,t.classList.add("i-amphtml-mega-menu-heading"),t.hasAttribute("tabindex")||t.setAttribute("tabindex",0),t.addEventListener("click",(function(n){return i.yz(n)})),t.addEventListener("keydown",(function(n){return i.wz(n)})),e&&!this.Ks.hasAction(t,"tap",n)){e.classList.add("i-amphtml-mega-menu-content"),e.setAttribute("aria-modal","false");var r=e.getAttribute("id");r||(r=this.mz+"_AMP_content_"+this.iz,e.setAttribute("id",r)),e.insertBefore(this.xz(),e.firstChild),e.appendChild(this.xz()),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-controls",r),t.setAttribute("aria-expanded","false")}},O.hz=function(n){var t=n.target;this.rz&&!this.rz.contains(t)&&y(t)&&this.bz()},O.dz=function(n){"Escape"===n.key&&this.bz()&&n.preventDefault()},O.yz=function(n){if(this.kz(n)){n.preventDefault(),n.stopPropagation();var t=n.currentTarget.parentElement;t!=this.bz()&&this.Ez(t)}},O.kz=function(n){var t=n.target,e=n.currentTarget;return!g(t,(function(n){return"A"==n.tagName}),e)&&!this.Ks.hasAction(t,"tap",e)&&e.hasAttribute("aria-haspopup")},O.wz=function(n){if(!n.defaultPrevented)switch(n.key){case m:case"ArrowRight":return void this.Az(n);case"Enter":case" ":return void(n.target==n.currentTarget&&this.yz(n))}},O.Az=function(n){var t,e,i,r=n.currentTarget.parentElement,a=this.tz.indexOf(r);if(-1!==a){n.preventDefault();var o=n.key==m?-1:1;"rtl"==((i=this.ql).body.getAttribute("dir")||i.documentElement.getAttribute("dir")||"ltr")&&(o=-o);var u=(t=a+o,e=this.tz.length,t>0&&e>0?t%e:(t%e+e)%e);x(this.Rz(this.tz[u]))}},O.Ez=function(n){var t=this;this.mutateElement((function(){var e=t.jz(n);(function(n){h(k.every((function(t){return t.element!==n}))),h(y(n));var t=function(n){for(var t=[],e=A(n),i=function(n){var i=e[n];if(!i.parentNode)return"continue";f(i.parentNode.children).filter((function(n){return n!=i})).forEach((function(n){return t.push(n)}))},r=0;r<e.length;r++)i(r);return t}(n),e=A(n).filter(l),i=function(n){for(var t=[],e=n;e;){var i=w(e),r=i.querySelectorAll(["a[href]","area[href]","button","details summary","iframe","input","select","textarea","[contenteditable]","[draggable]","[tabindex]"].join(","));Array.prototype.push.apply(t,r),e=i.host}return t}(n),r=i.filter((function(t){return n.contains(t)&&void 0!==t[E]})),a=i.filter((function(t){return!n.contains(t)&&void 0===t[E]})),o=t.concat(e).map((function(n){return{element:n,prevValue:n.getAttribute("aria-hidden")}}));e.forEach((function(n){return n.removeAttribute("aria-hidden")})),t.forEach((function(n){return n.setAttribute("aria-hidden","true")})),a.forEach((function(n){n[E]=n.getAttribute("tabindex"),n.setAttribute("tabindex","-1")})),r.forEach((function(n){h(void 0!==n[E]),R(n,"tabindex",n[E])})),k.push({element:n,hiddenElementInfos:o,focusableExternalElements:a,focusableInternalElements:r})})(e),e.setAttribute("aria-modal","true")})),n.setAttribute("open",""),this.element.setAttribute("open",""),this.oz.setAttribute("open",""),this.Rz(n).setAttribute("aria-expanded","true"),x(n.querySelector(".i-amphtml-screen-reader")),this.uz.addEventListener("click",this.lz),this.uz.addEventListener("keydown",this.pz),this.rz=n},O.bz=function(){var n=this;if(!this.rz)return null;var t=this.rz;this.mutateElement((function(){var e=n.jz(t);!function(n){var t=k.pop();h(t);var e=t.element,i=t.focusableExternalElements,r=t.focusableInternalElements,a=t.hiddenElementInfos;h(y(n)),h(e===n),a.forEach((function(n){return R(n.element,"aria-hidden",n.prevValue)})),r.forEach((function(n){return n.setAttribute("tabindex","-1")})),i.forEach((function(n){h(void 0!==n[E]),R(n,"tabindex",n[E]),n[E]=void 0}))}(e),e.setAttribute("aria-modal","false")})),t.removeAttribute("open"),this.element.removeAttribute("open"),this.oz.removeAttribute("open");var e=this.Rz(t);return e.setAttribute("aria-expanded","false"),t.contains(this.ql.activeElement)&&x(e),this.uz.removeEventListener("click",this.lz),this.uz.removeEventListener("keydown",this.pz),this.rz=null,t},O.Rz=function(n){return b(n,"> .i-amphtml-mega-menu-heading")},O.jz=function(n){return b(n,"> .i-amphtml-mega-menu-content")},O.xz=function(){var n=this,t=this.element.getAttribute("data-close-button-aria-label")||"Close the menu",e=this.ql.createElement("button");return e.textContent=t,e.classList.add("i-amphtml-screen-reader"),e.addEventListener("click",(function(){return n.bz()})),e},j}(n.BaseElement);n.registerElement(T,I,"amp-mega-menu{z-index:1000!important;white-space:nowrap!important}amp-mega-menu.i-amphtml-layout-size-defined[open]{overflow:visible!important}amp-mega-menu nav{background:#fff}amp-mega-menu nav>*{margin:0}amp-mega-menu .i-amphtml-mega-menu-item{display:inline-block!important}amp-mega-menu .i-amphtml-mega-menu-heading{cursor:pointer!important}amp-mega-menu .i-amphtml-mega-menu-content{position:absolute!important;left:0;width:100vw;opacity:0!important;visibility:hidden!important;background:#fff}amp-mega-menu .i-amphtml-mega-menu-item[open]>.i-amphtml-mega-menu-content{visibility:visible!important;opacity:1!important}amp-mega-menu .i-amphtml-mega-menu-item:not([open]) .i-amphtml-screen-reader{display:none!important}.i-amphtml-mega-menu-mask-parent{z-index:1000!important;position:relative}.i-amphtml-mega-menu-mask{position:fixed!important;z-index:-1!important;visibility:hidden!important;opacity:0!important;top:0!important;bottom:0!important;left:0!important;right:0!important;background:rgba(0,0,0,0.5);transition:opacity 200ms,visibility 0s 200ms}.i-amphtml-mega-menu-mask[open]{opacity:1!important;visibility:visible!important;transition:opacity 200ms}\n/*# sourceURL=/extensions/amp-mega-menu/0.1/amp-mega-menu.css*/")}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-mega-menu-0.1.js.map