;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-next-page",ev:"0.1",l:!1,f:function(t,n){(()=>{var{isArray:n}=Array;function e(t,n){const e=[];let i=0;for(let r=0;r<t.length;r++){const o=t[r];n(o,r,t)?e.push(o):(i<r&&(t[i]=o),i++)}return i<t.length&&(t.length=i),e}function i(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function r(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return i(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var{hasOwnProperty:o,toString:s}=Object.prototype;function c(t){return"[object Object]"===s.call(t)}function a(t){const n=Object.create(null);return t&&Object.assign(n,t),n}function u(t,n){return o.call(t,n)}function l(t){return 1==(null==(n=t)?void 0:n.nodeType)?(t=t).tagName.toLowerCase()+(t.id?`#${t.id}`:""):t;var n}function h(t,n,e,i,r,o,s,c,a,u,l){return t}function f(t){return JSON.parse(t)}function p(t){return(t.ownerDocument||t).defaultView}function d(t){h(/^[\w-]+$/.test(t))}function m(t,n){return t.querySelectorAll(function(t,n){return t.replace(/^|,/g,"$&:scope ")}(n))}function v(t,n){return d(n),m(t,`> ${n}`)}function g(t,n){return d(n),t.querySelector(n)}function b(t){var n;null===(n=t.parentElement)||void 0===n||n.removeChild(t)}function _(t){if(Node.prototype.getRootNode)return t.getRootNode();let n;for(n=t;n.parentNode&&(!(e=n)||"I-AMPHTML-SHADOW-ROOT"!=e.tagName&&(11!=e.nodeType||"[object ShadowRoot]"!==Object.prototype.toString.call(e)));n=n.parentNode);var e;return n}function P(t,n){const{length:e}=t;for(let i=0;i<e;i++)n(t[i],i)}function w(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function y(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,i)}return e}function A(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?y(Object(e),!0).forEach((function(n){w(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):y(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var x=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function R(t,n=""){try{return decodeURIComponent(t)}catch(t){return n}}function E(t){const n=a();if(!t)return n;let e;for(;e=x.exec(t);){const t=R(e[1],e[1]),i=e[2]?R(e[2].replace(/\+/g," "),e[2]):"";n[t]=i}return n}var S=self.AMP_CONFIG||{},I=("string"==typeof S.thirdPartyFrameRegex?new RegExp(S.thirdPartyFrameRegex):S.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,T=("string"==typeof S.cdnProxyRegex?new RegExp(S.cdnProxyRegex):S.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function M(t){if(!self.document||!self.document.head)return null;if(self.location&&T.test(self.location.origin))return null;const n=self.document.head.querySelector(`meta[name="${t}"]`);return n&&n.getAttribute("content")||null}var O={thirdParty:S.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:S.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:I,cdn:S.cdnUrl||M("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:T,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:S.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:S.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:S.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:S.geoApiUrl||M("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var $,j=self.__AMP_LOG;function k(t,n){throw new Error("failed to call initLogConstructor")}function V(t){return j.user||(j.user=U()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(j.user.win,t)?j.userForEmbed||(j.userForEmbed=U()):j.user}function U(t){return k()}function N(){return j.dev||(j.dev=k())}function C(t,n,e,i,r,o,s,c,a,u,l){return t}function L(t,n,e,i,r,o,s,c,a,u,l){return V().assert(t,n,e,i,r,o,s,c,a,u,l)}function D(){return $||($=Promise.resolve(void 0))}function H(t,n){return K(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function z(t,n){return K(G(B(t)),n)}function F(t,n){const e=G(B(t));return Q(e,n)?K(e,n):null}function q(t,n){return function(t,n){const e=Z(t,n);if(e)return e;const i=J(t);return i[n]=function(){const t=new class{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}},{promise:n,reject:e,resolve:i}=t;return n.catch((()=>{})),{obj:null,promise:n,resolve:i,reject:e,context:null,ctor:null}}(),i[n].promise}(G(t),n)}function W(t,n){return Z(G(t),n)}function B(t){return t.nodeType?(n=p(t),H(n,"ampdoc")).getAmpDoc(t):t;var n}function G(t){const n=B(t);return n.isSingleDoc()?n.win:n}function K(t,n){C(Q(t,n));const e=J(t)[n];return e.obj||(C(e.ctor),C(e.context),e.obj=new e.ctor(e.context),C(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}function Z(t,n){const e=J(t)[n];return e?e.promise?e.promise:(K(t,n),e.promise=Promise.resolve(e.obj)):null}function J(t){let n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}function Y(t){return"function"==typeof t.dispose}function X(t,n){if(Y(n))try{(function(t){return C(Y(t)),t})(n).dispose()}catch(n){N().error("SERVICE","failed to dispose service",t,n)}}function Q(t,n){const e=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!e||!e.ctor)}var tt="__AMP__EXPERIMENT_TOGGLES";function nt(t,e){const i=function(t){var e,i,o,s,c;if(t[tt])return t[tt];t[tt]=a();const u=t[tt];h(u);const l=A(A({},null!==(e=t.AMP_CONFIG)&&void 0!==e?e:{}),null!==(i=t.AMP_EXP)&&void 0!==i?i:f((null===(o=t.__AMP_EXP)||void 0===o?void 0:o.textContent)||"{}"));for(const t in l){const n=l[t];"number"==typeof n&&n>=0&&n<=1&&(u[t]=Math.random()<n)}const p=null===(s=t.AMP_CONFIG)||void 0===s?void 0:s["allow-doc-opt-in"];if(n(p)&&p.length){const n=t.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(n)for(var d,m,v=r((null===(d=n.getAttribute("content"))||void 0===d?void 0:d.split(","))||[],!0);!(m=v()).done;){const t=m.value;p.includes(t)&&(u[t]=!0)}}Object.assign(u,function(t){var n;let e="";try{var i;"localStorage"in t&&(e=null!==(i=t.localStorage.getItem("amp-experiment-toggles"))&&void 0!==i?i:"")}catch(t){}const o=(null===(n=e)||void 0===n?void 0:n.split(/\s*,\s*/g))||[],s=a();for(var c,u=r(o,!0);!(c=u()).done;){const t=c.value;t&&("-"==t[0]?s[t.substr(1)]=!1:s[t]=!0)}return s}(t));const g=null===(c=t.AMP_CONFIG)||void 0===c?void 0:c["allow-url-opt-in"];if(n(g)&&g.length){const n=E(t.location.originalHash||t.location.hash);for(var b,_=r(g,!0);!(b=_()).done;){const t=b.value,e=n[`e-${t}`];"1"==e&&(u[t]=!0),"0"==e&&(u[t]=!1)}}return u}(t);return!!i[e]}function et(t){if(!t)return null;const n=t.match(/^(.*)\/(.*)-([0-9.]+|latest)(\.max)?\.(?:js|mjs)$/i),e=n?n[2]:void 0,i=n?n[3]:void 0;return e&&i?{extensionId:e,extensionVersion:i}:null}function it(t,n,e,i){const r=W(t,n);if(r)return r;const o=B(t);return o.whenExtensionsKnown().then((()=>{const t=o.getExtensionVersion(e);return t?H(o.win,"extensions").waitForExtension(e,t):null})).then((e=>e?i?W(t,n):q(t,n):null))}var rt,ot=t=>H(t,"ampdoc"),st=t=>function(t,n,e){const i=F(t,n);return i?Promise.resolve(i):it(t,n,e)}(t,"bind","amp-bind"),ct=t=>H(t,"extensions"),at=t=>F(t,"url"),ut=t=>z(t,"viewer"),lt=t=>H(t,"vsync"),ht=t=>z(t,"viewport"),ft=t=>H(t,"xhr"),pt=new Set(["c","v","a","ad"]),dt="__amp_source_origin",mt=t=>"string"==typeof t?vt(t):t;function vt(t,n){return rt||(rt=self.document.createElement("a")),function(t,n,e){return t.href="",new URL(n,t.href)}(rt,t)}function gt(t){return O.cdnProxyRegex.test(mt(t).origin)}function bt(t){if(!gt(t=mt(t)))return t.href;const n=t.pathname.split("/"),e=n[1];L(pt.has(e),"Unknown path prefix in url %s",t.href);const i=n[2],r="s"==i?"https://"+decodeURIComponent(n[3]):"http://"+decodeURIComponent(i);return L(r.indexOf(".")>0,"Expected a . in origin %s",r),n.splice(1,"s"==i?3:2),r+n.join("/")+function(t,n){if(!t||"?"==t)return"";const e=new RegExp("[?&](amp_(js[^&=]*|gsa|r|kit)|usqp)\\b[^&]*","g"),i=t.replace(e,"").replace(/^[?&]/,"");return i?"?"+i:""}(t.search)+(t.hash||"")}function _t(t){return vt(bt(t)).origin}var Pt,wt=[/(^|\W)i-amphtml-/],yt="hidden";function At(t,n,e,i){return{left:t,top:n,width:e,height:i,bottom:n+i,right:t+e,x:t,y:n}}function xt(t,n){return!(!t||!n)&&t.left==n.left&&t.top==n.top&&t.width==n.width&&t.height==n.height}var Rt=["Webkit","webkit","Moz","moz","ms","O","o"];function Et(t,n,e,i,r){const o=function(t,n,e){if(n.startsWith("--"))return n;Pt||(Pt=a());let i=Pt[n];if(!i||e){if(i=n,void 0===t[n]){const e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),r=function(t,n){for(let e=0;e<Rt.length;e++){const i=Rt[e]+n;if(void 0!==t[i])return i}return""}(t,e);void 0!==t[r]&&(i=r)}e||(Pt[n]=i)}return i}(t.style,n,r);if(!o)return;const s=i?e+i:e;t.style.setProperty(function(t){const n=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return Rt.some((t=>n.startsWith(t+"-")))?`-${n}`:n}(o),s)}function St(t){!function(t,n,e,i){const r=B(t),o=G(r);!function(t,n,e,i,r,o){const s=J(t);let c=s[e];c||(c=s[e]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),c.ctor||(c.ctor=i,c.context=n,c.sharedInstance=!1,c.resolve&&K(t,e))}(o,r,n,class{constructor(t){this.Ci=t,this.i=t.win,this.tx=[],this.br=lt(this.i),this.bn=ht(t),this.T_=[],this.nx=!1,this.sx=!1,this.ix=!1,this.ox=function(t,n,e){let i=0,r=0,o=null;function s(){i=0;const c=e-(t.Date.now()-r);var a;c>0?i=t.setTimeout(s,c):(a=o,o=null,n.apply(null,a))}return function(...n){r=t.Date.now(),o=n,i||(i=t.setTimeout(s,e))}}(this.i,(()=>{this.nx=!1}),500)}observe(t,n,e){const i=new class{constructor(t,n,e,i){this.element=n,this.Te=i,this.fidelity=e,this.turn=0==e?Math.floor(4*Math.random()):0,this.ux=null,this.bn=ht(t)}Pe(t){const n=this.ux;if(n&&xt(n.positionRect,t.positionRect)&&xt(n.viewportRect,t.viewportRect))return;C(t.positionRect);const e=t.positionRect;var i,r;t.relativePos=(i=e,r=t.viewportRect,i.top<r.top?"top":i.bottom>r.bottom?"bottom":"inside"),function(t,n){return t.top<=n.bottom&&n.top<=t.bottom&&t.left<=n.right&&n.left<=t.right}(e,t.viewportRect)?(this.ux=t,this.Te(t)):this.ux&&(this.ux=null,t.positionRect=null,this.Te(t))}update(t){if(!t){if(0!=this.turn)return void this.turn--;0==this.fidelity&&(this.turn=4)}const n=this.bn.getSize(),e=At(0,0,n.width,n.height);this.bn.getClientRectAsync(this.element).then((t=>{this.Pe({positionRect:t,viewportRect:e,relativePos:null})}))}}(this.Ci,t,n,e);return this.tx.push(i),this.ix||this.lx(),i.update(),()=>{for(let t=0;t<this.tx.length;t++)if(this.tx[t]==i)return void this.hx(t)}}unobserve(t){for(let n=0;n<this.tx.length;n++)if(this.tx[n].element==t)return void this.hx(n);N().error("POSITION_OBSERVER","cannot unobserve unobserved element")}hx(t){this.tx.splice(t,1),0==this.tx.length&&this.vx()}lx(){this.ix=!0,this.T_.push(this.bn.onScroll((()=>{this.mx()}))),this.T_.push(this.bn.onResize((()=>{this.bx()})))}vx(){for(this.ix=!1;this.T_.length;)this.T_.pop()()}updateAllEntries(t){for(let n=0;n<this.tx.length;n++)this.tx[n].update(t)}mx(){this.ox(),this.nx=!0,this.sx||this.gx()}bx(){this.updateAllEntries(!0)}gx(){this.updateAllEntries(),this.sx=!0,this.nx?this.br.measure((()=>{this.gx()})):this.sx=!1}})}(t,"position-observer")}var It,Tt,Mt=".amp-next-page-default-separator{border-bottom:1px solid rgba(0,0,0,0.12)}.amp-next-page-links{border-top:1px solid rgba(0,0,0,0.12)}.amp-next-page-link{border-bottom:1px solid rgba(0,0,0,0.12)}.amp-next-page-text{color:#3c4043;font-size:17px}.i-amphtml-next-page-document{overflow-y:hidden}.i-amphtml-next-page-document>[i-amphtml-fixedid]{display:none}.i-amphtml-next-page-hidden{display:none!important}.i-amphtml-next-page{background:#fff}.i-amphtml-next-page>[separator]{display:none}.i-amphtml-reco-holder-article{display:block;overflow:auto;padding:10px 0;text-decoration:none}.i-amphtml-next-article-image{width:72px;height:72px;float:left;margin:0 10px;background-size:cover;background-position:50%}.i-amphtml-next-article-title{position:relative;margin:5px 30px 5px 0}\n/*# sourceURL=/extensions/amp-next-page/0.1/amp-next-page.css*/",Ot="render-start",$t="none";function jt(){return void 0===Tt&&(Tt=Vt()!=$t&&(kt(Element.prototype.attachShadow)||kt(Element.prototype.createShadowRoot))),Tt}function kt(t){return!!t&&-1!=t.toString().indexOf("[native code]")}function Vt(t){return void 0===It&&(n=t||Element,It=n.prototype.attachShadow?"v1":n.prototype.createShadowRoot?"v0":$t),It;var n}var Ut={strictStyling:!1,scopeRules:function(t,n,e){var i="";return t&&Array.prototype.forEach.call(t,(function(t){if(t.selectorText&&t.style&&void 0!==t.style.cssText)i+=this.scopeSelector(t.selectorText,n,this.strictStyling,e)+" {\n\t",i+=this.propertiesFromRule(t)+"\n}\n\n";else if(t.type===CSSRule.MEDIA_RULE)i+="@media "+t.media.mediaText+" {\n",i+=this.scopeRules(t.cssRules,n),i+="\n}\n\n";else try{t.cssText&&(i+=t.cssText+"\n\n")}catch(n){t.type===CSSRule.KEYFRAMES_RULE&&t.cssRules&&(i+=this.ieSafeCssTextFromKeyFrameRule(t))}}),this),i},ieSafeCssTextFromKeyFrameRule:function(t){var n="@keyframes "+t.name+" {";return Array.prototype.forEach.call(t.cssRules,(function(t){n+=" "+t.keyText+" {"+t.style.cssText+"}"})),n+=" }"},scopeSelector:function(t,n,e,i){var r=[];return t.split(",").forEach((function(t){t=t.trim(),i&&(t=i(t)),this.selectorNeedsScoping(t,n)&&(t=e&&!t.match(Dt)?this.applyStrictSelectorScope(t,n):this.applySelectorScope(t,n)),r.push(t)}),this),r.join(", ")},selectorNeedsScoping:function(t,n){if(Array.isArray(n))return!0;var e=this.makeScopeMatcher(n);return!t.match(e)},makeScopeMatcher:function(t){return t=t.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+t+")"+Lt,"m")},applySelectorScope:function(t,n){return Array.isArray(n)?this.applySelectorScopeList(t,n):this.applySimpleSelectorScope(t,n)},applySelectorScopeList:function(t,n){for(var e,i=[],r=0;e=n[r];r++)i.push(this.applySimpleSelectorScope(t,e));return i.join(", ")},applySimpleSelectorScope:function(t,n){return t.match(Ht)?(t=t.replace(Dt,n)).replace(Ht,n+" "):n+" "+t},applyStrictSelectorScope:function(t,n){n=n.replace(/\[is=([^\]]*)\]/g,"$1");var e=[" ",">","+","~"],i=t,r="["+n+"]";return e.forEach((function(t){var n=i.split(t);i=n.map((function(t){var n=t.trim().replace(Ht,"");return n&&e.indexOf(n)<0&&n.indexOf(r)<0&&(t=n.replace(/([^:]*)(:*)(.*)/,"$1"+r+"$2$3")),t})).join(t)})),i},propertiesFromRule:function(t){var n=t.style.cssText;t.style.content&&!t.style.content.match(/['"]+|attr/)&&(n=n.replace(/content:[^;]*;/g,"content: '"+t.style.content+"';"));var e=t.style;for(var i in e)"initial"===e[i]&&(n+=i+": initial; ");return n}},Nt="-shadowcsshost",Ct=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",Lt=(new RegExp("("+Nt+Ct,"gim"),new RegExp("(-shadowcsscontext"+Ct,"gim"),"([>\\s~+[.,{:][\\s\\S]*)?$"),Dt=Nt+"-no-combinator",Ht=new RegExp(Nt,"gim");function zt(t,n,e,i,r){const o=t.getHeadNode(),s=function(t,n,e,i){let r=t.__AMP_CSS_SM;r||(r=t.__AMP_CSS_SM=a());const o=!e&&i&&"amp-custom"!=i&&"amp-keyframes"!=i,s=e?"amp-runtime":o?`amp-extension=${i}`:null;if(s){const e=Ft(t,r,s);if(e)return"STYLE"==e.tagName&&e.textContent!==n&&(e.textContent=n),e}const c=(t.ownerDocument||t).createElement("style");c.textContent=n;let u=null;return e?c.setAttribute("amp-runtime",""):o?(c.setAttribute("amp-extension",i||""),u=Ft(t,r,"amp-runtime")):(i&&c.setAttribute(i,""),u=t.lastChild),function(t,n,e=null){if(!e)return void function(t,n){t.insertBefore(n,t.firstChild)}(t,n);const i=e.nextSibling;t.insertBefore(n,i)}(t,c,u),s&&(r[s]=c),c}(o,function(t,n){const e=t.__AMP_CSS_TR;return e?e(n):n}(o,n),i||!1,r||null);if(e){const n=t.getRootNode();if(qt(n,s))return e(s),s;const i=setInterval((()=>{qt(n,s)&&(clearInterval(i),e(s))}),4)}return s}function Ft(t,n,e){if(n[e])return n[e];const i=t.querySelector(`style[${e}], link[${e}]`);return i?(n[e]=i,i):null}function qt(t,n){const e=t.styleSheets;for(let t=0;t<e.length;t++)if(e[t].ownerNode==n)return!0;return!1}function Wt(t){P(v(t,"noscript"),(t=>{b(t)}))}new RegExp("-shadowcsscontext","gim");var Bt,Gt=/[^\.\-\_0-9a-zA-Z]/,Kt=/[^\-\_0-9a-zA-Z]/;function Zt(t,n,e){const i=t.ownerDocument;let r;if(jt())r=i.importNode(n,e);else{r=i.createElement("amp-body"),function(t,n){const{style:e}=t;h(!0),h(!e.display),e.display="block"}(r);for(let t=0;t<n.attributes.length;t++)r.setAttribute(n.attributes[0].name,n.attributes[0].value);if(e)for(let t=n.firstChild;t;t=t.nextSibling)r.appendChild(i.importNode(t,!0))}Et(r,"position","relative");const o=t.body;return o&&t.removeChild(o),t.appendChild(r),Object.defineProperty(t,"body",{configurable:!0,value:r}),r}function Jt(t){return t.replace(/(html|body)/g,Yt)}function Yt(t,n,e,i){const r=i.charAt(e-1),o=i.charAt(e+t.length);return r&&!Gt.test(r)||o&&!Kt.test(o)?t:"amp-"+t}function Xt(t,n){const e=t.createElement("style");e.textContent=n;try{return(t.head||t.documentElement).appendChild(e),e.sheet?e.sheet.cssRules:null}finally{e.parentNode&&e.parentNode.removeChild(e)}}function Qt(t){return function(t){return void 0===Bt&&(Bt=function(t){return!(!t.document.implementation||"function"!=typeof t.document.implementation.createHTMLDocument||(n=t,H(n,"platform")).isFirefox());var n}(t)),Bt}(t)?new class{constructor(t){this._a=t.document.implementation.createHTMLDocument(""),this._a.open(),this.br=lt(t),this.Aa=this.ga.bind(this),this.Pa=null,this.va=null,this.Ea=null,this.Ta=!1,this.ya=D(),this.Ia=!1,this.Ma=null}onBody(t){this.Pa=t}onBodyChunk(t){this.va=t}onEnd(t){this.Ea=t}write(t){if(this.Ia)throw new Error("closed already");return t&&this._a.write(t),this.ds(),this.ya}close(){return this._a.close(),this.Ia=!0,this.ds(),this.ya}abort(t){throw new Error("Not implemented")}releaseLock(){throw new Error("Not implemented")}get closed(){throw new Error("Not implemented")}get desiredSize(){throw new Error("Not implemented")}get ready(){throw new Error("Not implemented")}ds(){h(this.Pa&&this.va&&this.Ea),this.Ta||(this.Ta=!0,this.br.mutate(this.Aa))}ga(){if(this.Ta=!1,!this.Ma&&this._a.body&&(this.Ma=this.Pa(this._a)),this.Ma){const t=this._a.body,n=h(this.Ma);let e=0;for(Wt(t);t.firstChild;)e++,n.appendChild(t.firstChild);e>0&&this.va()}this.Ia&&this.Ea()}}(t):new class{constructor(t){this.Ra=[],this.br=lt(t),this.Pa=null,this.va=null,this.Ea=null,this.ya=D(),this.Ia=!1}onBody(t){this.Pa=t}onBodyChunk(t){this.va=t}onEnd(t){this.Ea=t}write(t){if(h(this.Pa&&this.va&&this.Ea),this.Ia)throw new Error("closed already");return t&&this.Ra.push(t),this.ya}close(){return h(this.Pa&&this.va&&this.Ea),this.Ia=!0,this.br.mutate((()=>this.Lr())),this.ya}abort(t){throw new Error("Not implemented")}releaseLock(){throw new Error("Not implemented")}get closed(){throw new Error("Not implemented")}get desiredSize(){throw new Error("Not implemented")}get ready(){throw new Error("Not implemented")}Lr(){const t=this.Ra.join(""),n=(new DOMParser).parseFromString(t,"text/html");if(n.body){const t=n.body,e=this.Pa(n);let i=0;for(Wt(t);t.firstChild;)i++,e.appendChild(t.firstChild);i>0&&this.va()}this.Ea()}}(t)}var tn="multidoc-manager",nn="amp-next-page";function en(t,n,e){return{ampUrl:t,amp:n||e?{title:n,canonicalUrl:e}:null,recUnit:{el:null,isObserving:!1},cancelled:!1}}var rn={NONE:0,OPT_IN:1,ALL:2};function on(t,n,e={}){const{expr:i=".",urlReplacement:o=rn.NONE,refresh:s=!1,xssiPrefix:c,url:a=n.getAttribute("src")}=e;!function(t,n,e="source"){var i;L(null!=t,"%s %s must be available",n,e),L("https:"==(i=mt(i=t)).protocol||"localhost"==i.hostname||"127.0.0.1"==i.hostname||function(t,n){const e=t.length-n.length;return e>=0&&t.indexOf(n,e)==e}(i.hostname,".localhost")||/^\/\//.test(t),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',n,e,t)}(a,n);const l=H(t.win,"batched-xhr");return function(t,n,e,i){const r=(t=>F(t,"url-replace"))(t);return(e>=rn.OPT_IN?r.expandUrlAsync(n):Promise.resolve(n)).then((n=>{if(e===rn.OPT_IN){const n=r.collectDisallowedVarsSync(t);if(n.length>0)throw V().createError(`URL variable substitutions in CORS fetches from dynamic URLs (e.g. via amp-bind) require opt-in. Please add data-amp-replace="${n.join(" ")}" to the <${t.tagName}> element. See https://bit.ly/amp-var-subs.`)}const o={};return t.hasAttribute("credentials")&&(o.credentials=t.getAttribute("credentials")),i&&(o.cache="reload"),{"xhrUrl":n,"fetchOpt":o}}))}(n,a,o,s).then((t=>l.fetchJson(t.xhrUrl,t.fetchOpt))).then((n=>ft(t.win).xssiJson(n,c))).then((t=>{if(null==t)throw new Error("Response is undefined.");return function(t,n){if("."==n)return t;let e=t;for(var i,o=r(n.split("."),!0);!(i=o()).done;){const t=i.value;if(!(t&&e&&void 0!==e[t]&&"object"==typeof e&&u(e,t))){e=void 0;break}e=e[t]}return e}(t,i||".")})).catch((t=>{throw V().createError("failed fetching JSON data",t)}))}var sn=["GET","POST"];function cn(t,n){const e=A({},n);if((i=n.body)&&"function"==typeof i.getFormData){const t=n.body;e.headers["Content-Type"]="multipart/form-data;charset=utf-8",e.body=function(t){const n=[];for(let e=t.next();!e.done;e=t.next())n.push(e.value);return n}(t.entries())}var i;return{input:t,init:e}}function an(t,i,r){let o=function(t,n){const e=t||{},i=e.credentials;return h(void 0===i||"include"==i||"omit"==i),e.method=void 0===(r=e.method)?"GET":(r=r.toUpperCase(),h(sn.includes(r)),r),e.headers=e.headers||{},e.headers.Accept=n,h(null!==e.body),e;var r}(r,"text/html");o=function(t,n,e){e=e||{};const i=function(t){return t.origin||vt(t.location.href).origin}(t);return i==vt(n).origin&&(e.headers=e.headers||{},e.headers["AMP-Same-Origin"]="true"),e}(t,i,o),i=function(t,n,e){return h("string"==typeof n),!1!==e.ampCors&&(n=function(t,n){return function(t){const n=E(vt(t).search);L(!(dt in n),"Source origin is not allowed in %s",t)}(n),function(t,n,e,i){return function(t,n,e){if(!n)return t;const i=t.split("#",2),r=i[0].split("?",2);let o=r[0]+(r[1]?`?${r[1]}&${n}`:`?${n}`);return o+=i[1]?`#${i[1]}`:"",o}(t,function(t,n){return`${encodeURIComponent("__amp_source_origin")}=${encodeURIComponent(n)}`}(0,e))}(n,0,_t(t.location.href))}(t,n)),n}(t,i,o);const s=ot(t),u=s.isSingleDoc()?s.getSingleDoc():null;return o.responseType="document",function(t,i,r,o){if(!i)return D();const s=o.prerenderSafe?D():i.whenFirstVisible(),u=ut(i),h=gt(r),f=u.hasCapability("xhrInterceptor"),p=o.bypassInterceptorForDev&&!1;return h||!f||p?s:i.getRootNode().documentElement.hasAttribute("allow-xhr-interception")?s.then((()=>u.isTrustedViewer())).then((i=>{if(!i&&!nt(t,"untrusted-xhr-interception"))return;const s={"originalRequest":cn(r,o)};return u.sendMessageAwaitResponse("xhr",s).then((t=>function(t,i){if(function(t,n,i="Assertion failed",r){var o,s;if(n)return n;t&&-1==i.indexOf(t)&&(i+=t);let c=3;const a=i.split("%s");let u=a.shift();const h=[u];for(;a.length;){const t=arguments[c++],n=a.shift();u+=l(t)+n,h.push(t,n.trim())}const f=new Error(u);throw f.messageArray=e(h,(t=>""!==t)),null===(o=(s=self).__AMP_REPORT_ERROR)||void 0===o||o.call(s,f),f}("​​​",c(t),"Object expected: %s",t,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0),"document"!=i)return new Response(t.body,t.init);const r=a(),o={status:200,statusText:"OK",getResponseHeader:t=>r[String(t).toLowerCase()]||null};if(t.init){const e=t.init;n(e.headers)&&e.headers.forEach((t=>{const n=t[0],e=t[1];r[String(n).toLowerCase()]=String(e)})),e.status&&(o.status=parseInt(e.status,10)),e.statusText&&(o.statusText=String(e.statusText))}return new Response(t.body?String(t.body):"",o)}(t,o.responseType)))})):s}(t,u,i,o).then((t=>t?t.text().then((t=>(new DOMParser).parseFromString(t,"text/html"))):function(t,n){return new Promise(((e,i)=>{const r=new XMLHttpRequest;r.open(n.method||"GET",t,!0),r.withCredentials="include"==n.credentials,r.responseType="document";for(const t in n.headers)r.setRequestHeader(t,n.headers[t]);r.onreadystatechange=()=>{if(!(r.readyState<2)){if(r.status<100||r.status>599)return r.onreadystatechange=null,void i(V().createExpectedError(`Unknown HTTP status ${r.status}`));if(4==r.readyState){const n={status:r.status,statusText:r.statusText,headers:un(r.getAllResponseHeaders())},i=(t=new Response("",n),new Promise((n=>{if(t.ok)return n(t);const{status:e}=t,i=V().createError(`HTTP error ${e}`);throw i.retriable=function(t){return 415==t||t>=500&&t<600}(e),i.response=t,i}))).then((t=>({response:t,xhr:r})));e(i)}}var t},r.onerror=()=>{i(V().createExpectedError("Request failure"))},r.onabort=()=>{i(V().createExpectedError("Request aborted"))},"POST"==n.method?r.send(n.body):r.send()}))}(i,o).then((t=>{const{xhr:n}=t;return n.responseXML}))))}function un(t){const n={};return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){const e=t.split(":"),i=e.shift().trim();if(i){const t=e.join(":").trim();n[i]=t}})),n}var ln="amp-next-page",hn="next-page",fn=class extends t.BaseElement{isLayoutSupported(t){return"container"==t}buildCallback(){L(nt(this.win,"amp-next-page"),"Experiment amp-next-page disabled");const t=(n=this.element,d("separator"),m(n,"> [separator]"));var n;L(t.length<=1,"%s should contain at most one <div separator> child",ln);let e=null;return 1===t.length&&(e=t[0],b(e)),(i=this.getAmpDoc(),q(i,hn)).then((t=>{if(t.isActive())return;const{element:n}=this;n.classList.add("i-amphtml-next-page");const i=n.hasAttribute("deep-parsing")?"deep-parsing":n.hasAttribute("xssi-prefix")?"xssi-prefix":n.hasAttribute("max-pages")?"max-pages":null;i&&this.wU(i);const r=n.getAttribute("src");let o,s=Promise.resolve([]);const c=n.getAttribute("type");if(c){L("adsense"===c,`${ln} only supports type=adsense`);const t=n.getAttribute("data-client"),e=n.getAttribute("data-slot");L(/^ca-pub-\d+$/.test(t),`${ln} AdSense client should be of the format 'ca-pub-123456'`),L(/^\d+$/.test(e),`${ln} AdSense slot should be a number`);const i=this.getConsentPolicy(),r=i?function(t,n="default"){return(t=>it(t,"consentPolicyManager","amp-consent"))(t).then((t=>t?t.whenPolicyResolved(n):null))}(n,i).catch((t=>(V().error(ln,"Error determining consent state",t),4))):Promise.resolve(1);s=r.then((n=>this.xU(t,e,1===n||3===n))).catch((t=>[]))}const a=this.EU();return o=r?this.SU().catch((t=>V().error(ln,"error fetching config",t))):Promise.resolve(a),a&&(r||c)&&this.wU("mixing configuration types"),L(a||r||c,"%s should contain a <script> child, a URL specified in [src], or a [type]",ln),Promise.all([o,s]).then((n=>{const i=n[0]||{},r=n[1]||[];i.pages=r.concat(i.pages||[]),this._x(t,i,e)}))}));var i}EU(){const t=v(this.element,"SCRIPT");if(!t.length)return null;L(1===t.length,`${ln} should contain at most one <script> child`);const n=t[0];var e,i;return L("SCRIPT"==(e=n).tagName&&"APPLICATION/JSON"==(null===(i=e.getAttribute("type"))||void 0===i?void 0:i.toUpperCase()),`${ln} config should be inside a <script> tag with type="application/json"`),function(t,n){try{return f(t)}catch(t){return null==n||n(t),null}}(n.textContent,(t=>{V().error(ln,"failed to parse config",t)}))}xU(t,n,e){const i=`https://googleads.g.doubleclick.net/pagead/ads?client=${t}&slotname=${n}&url=${encodeURIComponent(this.getAmpDoc().getUrl())}&ecr=1&crui=title&is_amp=3&output=xml`;return an(this.win,i,{credentials:e?"include":"omit"}).then((t=>{const n=at(this.element),{origin:e}=n.parse(this.getAmpDoc().getUrl()),i=[],r=t.getElementsByTagName("AD");for(let t=0;t<r.length;t++){const s=r[t],c=g(s,"LINE1"),a=g(s,"MEDIA_TEMPLATE_DATA"),u=s.getAttribute("visible_url"),l=s.getAttribute("url"),h=((o=c)&&o.textContent||"").trim(),f=pn(a);n.parse(u).origin===e&&l&&h&&f&&i.push({title:h,image:f,ampUrl:l})}var o;return i}))}_x(t,e,i){const{element:r}=this,o=function(t,e,i){return L(e,"amp-next-page config must be specified"),L(n(e.pages),"pages must be an array"),function(t,n,e){n.forEach((n=>function(t,n,e){V().assertString(n.ampUrl,"ampUrl must be a string");const i=bt(e);var r,o;n.ampUrl=(r=n.ampUrl,o=mt(o=i),new URL(r,o.href).toString());const s=at(t),c=s.parse(n.ampUrl),{origin:a}=s.parse(e),u=_t(e);L(c.origin===a||c.origin===u||function(t,n,e){const i=n.search.match(/adurl=(.*)(?:&|$)/);if(!i)return!1;const r=at(t).parse(i[1]);return"https://googleads.g.doubleclick.net"===n.origin&&r.origin===e}(t,c,a),"pages must be from the same origin as the current document"),V().assertString(n.image,"image must be a string"),V().assertString(n.title,"title must be a string"),u!==a&&c.origin===u&&(n.ampUrl=`${a}/c/`+("https:"===c.protocol?"s/":"")+encodeURIComponent(c.host)+c.pathname+(c.search||"")+(c.hash||""))}(t,n,e)))}(t,e.pages,i),"hideSelectors"in e&&(L(n(e.hideSelectors),"amp-next-page hideSelectors should be an array"),e.hideSelectors.forEach((t=>{wt.forEach((n=>{V().assertString(t,"amp-next-page hideSelector value should be a string"),L(!n.test(t),"amp-next-page hideSelector %s not allowed",t)}))}))),e}(r,e,this.getAmpDoc().getUrl());t.register(r,o,i),t.setAppendPageHandler((t=>this.IU(t)))}IU(t){return this.mutateElement((()=>this.element.appendChild(t)))}SU(){const t=this.getAmpDoc(),n=rn.ALL;return on(t,this.element,{urlReplacement:n})}wU(t){}};function pn(t){try{return f(t.textContent.trim().slice(0,-1))[0].core_image_url}catch(t){return""}}var dn=new class{constructor(){this.i=null,this.yf=null,this.eR=null,this.lU=null,this.TU,this.MU=null,this.wn=null,this.OU=null,this.$U=0,this.jU=!1,this.oR=null,this.bn=null,this.Mf=null,this.kU=[],this.VU=null,this.UU=()=>{},this.lk=null,this.h="",this.gn=null}isActive(){return null!==this.lU}register(e,i,r){if(this.isActive())return;const o=B(e),{win:s}=o;this.lU=i,this.i=s,this.MU=r||this.NU(),this.yf=e,this.eR=ft(s),this.lU.hideSelectors&&(this.TU=this.lU.hideSelectors.join(",")),this.oR=z(o,"navigation"),this.bn=ht(o),this.wn=(t=>z(t,"mutator"))(o),this.OU=new class{constructor(t,n,e,i){this.win=t,this.Dh=n,this.Xc=e,this.Ee=i,this.ca=[]}aa(e,i,r,o){r=r||Object.create(null),this.da(),Et(e,"visibility","hidden");const s=function(t){const n=p(t),e=t.shadowRoot||t.__AMP_SHADOW_ROOT;if(e)return e.innerHTML="",e;let i;const r=Vt();if("v1"==r?(i=t.attachShadow({mode:"open"}),i.styleSheets||Object.defineProperty(i,"styleSheets",{get:function(){const t=[];return P(i.childNodes,(n=>{"STYLE"===n.tagName&&t.push(n.sheet)})),t}})):i="v0"==r?t.createShadowRoot():function(t){const n=t.ownerDocument;t.classList.add("i-amphtml-shadow-host-polyfill");const e=n.createElement("style");e.textContent=".i-amphtml-shadow-host-polyfill>:not(i-amphtml-shadow-root){display:none!important}",t.appendChild(e);const i=n.createElement("i-amphtml-shadow-root");return t.appendChild(i),t.__AMP_SHADOW_ROOT=i,Object.defineProperty(t,"shadowRoot",{enumerable:!0,configurable:!0,value:i}),i.host=t,i.getElementById=function(t){const n=(e=t,CSS.escape(e));var e;return i.querySelector(`#${n}`)},Object.defineProperty(i,"styleSheets",{get:()=>{return n.styleSheets?(t=n.styleSheets,t?Array.prototype.slice.call(t):[]).filter((t=>i.contains(t.ownerNode))):[];var t}}),i}(t),!jt()){const t=`i-amphtml-sd-${n.Math.floor(1e4*n.Math.random())}`;i.id=t,i.host.classList.add(t),o=t=>function(t,n){return function(t,n){const e=C(t.id),i=t.ownerDocument;let r=null;try{r=Xt(i.implementation.createHTMLDocument(""),n)}catch(t){}if(!r)try{r=Xt(i,n)}catch(t){}if(!r)return n;const{scopeRules:o}=Ut;return o.call(Ut,r,`.${e}`,Jt)}(t,n)}(i,t),i.__AMP_CSS_TR=o}var o;return i}(e);s.AMP&&this.fa(s);const a={};s.AMP=a,a.url=i;const{origin:u}=vt(i),l=this.Dh.installShadowDoc(i,s,{params:r});a.ampdoc=l,zt(l,t.combinedCss,null,!0),t.installAmpdocServices(l);const h=ut(l);let f;return a.setVisibilityState=function(t){l.overrideVisibilityState(t)},a.postMessage=h.receiveMessage.bind(h),a.onMessage=function(t){f=t},h.setMessageDeliverer(((t,n,e)=>{var i;return"broadcast"==t?(this.pa(n,s),e?D():void 0):null===(i=f)||void 0===i?void 0:i(t,n,e)}),u),a.close=()=>this.fa(s),a.getState=t=>st(s).then((n=>n?n.getState(t):Promise.reject("amp-bind is not available in this document"))),a.setState=t=>st(s).then((e=>e?"string"==typeof t?e.setStateWithExpression(t,{}):c(t)||n(t)?e.setStateWithObject(t):Promise.reject("Invalid state"):Promise.reject("amp-bind is not available in this document"))),o(a,s,l).then((()=>{l.setReady(),l.signals().signal(Ot),Et(e,"visibility","visible")})),this.ca.includes(s)||this.ca.push(s),a}attachShadowDoc(t,n,e,i){return V().assertString(e),this.aa(t,e,i,((e,i,r)=>{if(this.ma(r,i,n),n.body){const t=Zt(i,n.body,!0);t.classList.add("amp-shadow"),r.setBody(t)}return setTimeout((()=>{r.signals().signal(Ot),Et(t,"visibility","visible")}),50),D()}))}attachShadowDocAsStream(t,n,e){return V().assertString(n),this.aa(t,n,e,((n,e,i)=>{let r=!1;const o=Qt(this.win);return n.writer=o,o.onBody((t=>{this.ma(i,e,t);const n=Zt(e,t.body,!1);return n.classList.add("amp-shadow"),i.setBody(n),n})),o.onBodyChunk((()=>{r||(r=!0,setTimeout((()=>{i.signals().signal(Ot),Et(t,"visibility","visible")}),50))})),new Promise((t=>{o.onEnd((()=>{t(),n.writer=null}))}))}))}ma(t,n,e){if(e.head){n.AMP.head=e.head;const i={},r=v(this.win.document.head,"link");for(let t=0;t<r.length;t++){const n=r[t].getAttribute("href");n&&(i[n]=!0)}for(let r=e.head.firstElementChild;r;r=r.nextElementSibling){const{tagName:e}=r,o=r.getAttribute("name"),s=r.getAttribute("rel");switch(e){case"TITLE":n.AMP.title=r.textContent;break;case"META":r.hasAttribute("charset")||"viewport"==o||o&&t.setMetaByName(o,r.getAttribute("content")||"");break;case"LINK":const e=r.getAttribute("href");if("canonical"==s)n.AMP.canonicalUrl=e;else if("stylesheet"==s)if(i[e])zt(t,`@import "${e}"`,null,!1);else{i[e]=!0;const t=this.win.document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),this.win.document.head.appendChild(t)}break;case"STYLE":r.hasAttribute("amp-boilerplate")||(r.hasAttribute("amp-custom")?zt(t,r.textContent,null,!1,"amp-custom"):r.hasAttribute("amp-keyframes")&&zt(t,r.textContent,null,!1,"amp-keyframes"));break;case"SCRIPT":if(r.hasAttribute("src")){const n=r.getAttribute("src"),e=et(n),i=r.getAttribute("custom-element"),o=r.getAttribute("custom-template"),s=i||o;e&&(s?this.Xc.installExtensionForDoc(t,s,e.extensionVersion):r.hasAttribute("data-amp-report-test")||V().error(tn,"- unknown script: ",r,n))}else-1==(r.getAttribute("type")||"application/javascript").indexOf("javascript")?n.appendChild(this.win.document.importNode(r,!0)):r.hasAttribute("amp-onerror")||V().error(tn,"- unallowed inline javascript: ",r);break;case"NOSCRIPT":break;default:V().error(tn,"- UNKNOWN head element:",r)}}}t.setExtensionsKnown()}pa(t,n){this.da(),this.ca.forEach((e=>{if(e==n)return;const i=ut(e.AMP.ampdoc);this.Ee.delay((()=>{i.receiveMessage("broadcast",t,!1)}),0)}))}fa(t){this.wa(t);const n=t.AMP;delete t.AMP;const{ampdoc:e}=n;return e.overrideVisibilityState("inactive"),function(t){!function(t){const n=J(t);for(const t in n){if(!Object.prototype.hasOwnProperty.call(n,t))continue;const e=n[t];e.sharedInstance||(e.obj?X(t,e.obj):e.promise&&e.promise.then((n=>X(t,n))))}}(t)}(e),this.Ee.timeoutPromise(15,new this.win.Promise((t=>{W(e,"resources").then((n=>{n?n.onNextPass(t):t()}))})),"Timeout reached waiting for visibility state change callback").catch((t=>{}))}wa(t){const n=this.ca.indexOf(t);-1!=n&&this.ca.splice(n,1)}ba(t){this.Ee.delay((()=>{this.fa(t)}),0)}da(){this.ca.forEach((t=>{t.host&&function(t){const n=t.isConnected;if(void 0!==n)return n;let e=t;for(;e=_(e),e.host;)e=e.host;return e.nodeType===Node.DOCUMENT_NODE}(t.host)||(this.wa(t),this.ba(t))}))}}(s,ot(s),ct(s),K(s,"timer")),this.lk=at(this.yf),this.h=this.lk.parse(o.getUrl()).origin,this.gn=(t=>z(t,"history"))(o),St(o),this.Mf=(t=>z(t,"position-observer"))(e);const{canonicalUrl:a}=(t=>z(t,"documentInfo").get())(o),u=en(s.document.location.href,s.document.title,a),l={ampdoc:o,url:s.document.location.href,title:s.document.title,canonicalUrl:a};u.amp=l,this.kU.push(u),this.VU=this.kU[0],this.bn.onScroll((()=>this.vm())),this.bn.onResize((()=>this.vm())),this.vm()}setAppendPageHandler(t){this.UU=t}aa(t,n){if(this.TU){const t=n.querySelectorAll(this.TU);for(let n=0;n<t.length;n++)t[n].classList.add("i-amphtml-next-page-hidden")}const e=n.querySelectorAll("amp-analytics");for(let t=0;t<e.length;t++)b(e[t]);const i=this.OU.attachShadowDoc(t,n,"",{visibilityState:"prerender"}),r=C(i.ampdoc);return zt(r,Mt,null,!1,nn),r.getBody().classList.add("i-amphtml-next-page-document"),i}CU(){const t=this.i.document.createElement("div");return t.classList.add("i-amphtml-next-page-measurer"),t}NU(){const t=this.i.document.createElement("div");return t.classList.add("amp-next-page-default-separator"),t}LU(){if(this.$U<this.lU.pages.length){const t=this.lU.pages[this.$U],n=en(t.ampUrl);this.kU.push(n);const e=this.i.document.createElement("div"),i=this.CU();e.appendChild(i);const r=this.MU.cloneNode(!0);r.removeAttribute("separator"),e.appendChild(r);const o=this.DU(this.$U);e.appendChild(o),n.recUnit.el=o;const s=this.i.document.createElement("div");e.appendChild(s);const c=this.$U;if(this.UU(e).then((()=>{this.Mf.observe(i,0,(t=>this.HU(c,t))),this.Mf.observe(o,0,(t=>this.zU(n)))})),this.$U>=2)return;this.$U++,this.eR.fetch(t.ampUrl,{ampCors:!1}).then((t=>(n.ampUrl=t.url,L(this.lk.parse(t.url).origin===this.h,"ampUrl resolved to a different origin from the origin of the current document"),t.text()))).then((t=>{const n=this.i.document.implementation.createHTMLDocument("");return n.open(),n.write(t),n.close(),n})).then((t=>new Promise(((i,r)=>{n.cancelled?i():(n.recUnit.isObserving&&(this.Mf.unobserve(o),n.recUnit.isObserving=!0),this.wn.mutateElement(e,(()=>{try{n.amp=this.aa(s,t),e=n.recUnit.el,void 0===(o=!1)&&(o=e.hasAttribute("hidden")),o?e.removeAttribute("hidden"):e.setAttribute("hidden",""),this.jU=!1,i()}catch(t){r(t)}var e,o})))}))),(n=>V().error(nn,"failed to fetch %s",t.ampUrl,n))).catch((n=>N().error(nn,"failed to attach shadow document for %s",t.ampUrl,n))).then((()=>this.vm()))}}DU(t){const n=this.i.document,e=t-1;let i=t,r="";t>0&&(r=this.kU[e].ampUrl);const o=n.createElement("div");for(o.classList.add("amp-next-page-links");i<this.lU.pages.length&&i-t<3;){const t=this.lU.pages[i];i++;const e=n.createElement("a");e.href=t.ampUrl,e.classList.add("i-amphtml-reco-holder-article","amp-next-page-link"),e.addEventListener("click",(n=>{this.FU("amp-next-page-click",t.ampUrl,r),this.oR.navigateToAmpUrl(t.ampUrl,"content-discovery")&&n.preventDefault()}));const s=n.createElement("div");s.classList.add("i-amphtml-next-article-image","amp-next-page-image"),Et(s,"background-image",`url(${t.image})`),e.appendChild(s);const c=n.createElement("div");c.classList.add("i-amphtml-next-article-title","amp-next-page-text"),c.textContent=t.title,e.appendChild(c),o.appendChild(e)}return o}vm(){if(this.jU)return;const t=this.bn.getSize(),n=At(0,0,t.width,t.height);this.bn.getClientRectAsync(this.yf).then((e=>{if(this.jU)return;const i=3*t.height;e.bottom-n.bottom<i&&(this.jU=!0,this.LU())}))}HU(t,n){if(!n||null!==n.positionRect)return;let e=this.kU[t],i="";switch(n.relativePos){case"top":e=this.kU[t+1],i="amp-next-page-scroll";break;case"bottom":i="amp-next-page-scroll-back"}e&&e.amp&&(this.FU(i,e.ampUrl,this.VU.ampUrl),this.qU(e))}zU(t){t.cancelled=!0,t.recUnit.isObserving&&(this.Mf.unobserve(t.recUnit.el),t.recUnit.isObserving=!1)}qU(t){this.kU.forEach((n=>{const{amp:e}=n;n===t?(this.i.document.title=e.title||"",this.VU=n,this.WU(n),this.BU(n,"visible")):this.BU(n,yt)}))}BU(t,n){if(t===this.kU[0])return;const e=t.amp&&t.amp.ampdoc;e&&(e.hasBeenVisible()||n!=yt)&&t.amp.setVisibilityState(n)}WU(t){const{canonicalUrl:n,title:e}=t.amp,{pathname:i,search:r}=this.lk.parse(t.ampUrl);this.gn.replace({title:e,url:i+r,canonicalUrl:n})}FU(t,n,e){const i={"toURL":n,"fromURL":e=e||""};!function(t,n,e={},i=!0){var r;(r=t,it(r,"amp-analytics-instrumentation","amp-analytics")).then((r=>{r&&r.triggerEventForTarget(t,n,e,i)}))}(this.yf,t,i)}};t.registerServiceForDoc(hn,(function(){return dn})),t.registerElement(ln,fn,Mt)})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
/**
* @license
* Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
* Use of this source code is governed by a BSD-style
* license that can be found in the LICENSE file or at
* https://developers.google.com/open-source/licenses/bsd
*/}});
//# sourceMappingURL=amp-next-page-0.1.mjs.map