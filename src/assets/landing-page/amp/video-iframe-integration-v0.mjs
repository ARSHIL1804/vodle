;
(()=>{function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}var n,{hasOwnProperty:s,toString:i}=Object.prototype;function r(t){let e=!1,n=null,s=t;return(...t)=>(e||(n=s.apply(self,t),e=!0,s=null),n)}function o(t,e){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null==e||e(t),null}}var l=self.AMP_CONFIG||{},a=("string"==typeof l.thirdPartyFrameRegex?new RegExp(l.thirdPartyFrameRegex):l.thirdPartyFrameRegex,("string"==typeof l.cdnProxyRegex?new RegExp(l.cdnProxyRegex):l.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function u(t){if(!self.document||!self.document.head)return null;if(self.location&&a.test(self.location.origin))return null;const e=self.document.head.querySelector(`meta[name="${t}"]`);return e&&e.getAttribute("content")||null}function h(t,e,s,i){return function(t,e,s,i){let r=t,o=s,l=t=>{try{return o(t)}catch(t){var e,n;throw null===(e=(n=self).__AMP_REPORT_ERROR)||void 0===e||e.call(n,t),t}};const a=function(){if(void 0!==n)return n;n=!1;try{const t={get capture(){return n=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return n}(),u=!(null==i||!i.capture);return r.addEventListener(e,l,a?i:u),()=>{null==r||r.removeEventListener(e,l,a?i:u),o=null,r=null,l=null}}(t,e,s,i)}l.thirdPartyUrl,l.thirdPartyFrameHost,l.cdnUrl||u("runtime-host"),l.errorReportingUrl,l.betaErrorReportingUrl,l.localDev,l.geoApiUrl||u("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var c="__AMP__VIDEO_IFRAME__";function p(t,...e){if(!t)throw new Error(`[<amp-video-iframe>] ${e.join(" ")} https://go.amp.dev/c/amp-video-iframe`);return t}var d=["pause","play","mute","unmute","fullscreenenter","fullscreenexit","showcontrols","hidecontrols"];!function(n){p(!n[c],"video-iframe-integration-v0.js should only be included once."),n[c]=!0,n.__AMP_REPORT_ERROR=console.error.bind(console);const s=new class{constructor(t){this.j=!0,this.$=0,this.F={},this.i=t,this.J={},this.C=r((()=>{!function(t,e){h(t,"message",(t=>{const n=o(t.data);n&&e(n)}))}(this.i,(t=>this.N(t)))})),this.Z=!1,this.B=!1,this.G=r((()=>o(this.i.name)))}getMetadata(){return this.G()}method(t,e){p(d.indexOf(t)>-1,`Invalid method ${t}.`);const n="play"==t||"pause"==t?this.K(e):e;this.J[t]=n,this.C()}N(t){const e=t.id;var n;"number"==typeof(n=e)&&isFinite(n)&&this.F[e]?this.v(e,t.args):"method"==t.event&&this.L(t.method)}v(t,e){(0,this.F[t])(e),delete this.F[t]}L(t){t in this.J&&this.J[t]()}listenTo(t,e,n){p(!this.B,"`listenTo` is meant to be used once per page.");const s={"jwplayer":()=>{p(!n,"listenTo('jwplayer', opt_instance) does not take an initializer."),this.U(this.W(e))},"videojs":()=>{this.X(p(e,"listenTo('videojs', element) expects a second argument"),n)}};p(s[t.toLowerCase()],`Invalid listener type [${t}].`,`Valid types are [${Object.keys(s).join(", ")}]`)(),this.B=!0}W(t){return t?(p(t.on,"listenTo('jwplayer', myjwplayer) takes a jwplayer instance as ","second argument"),t):p(this.i.jwplayer,"listenTo('jwplayer') expects a global jwplayer() in window.")()}U(t){["error","setupError"].forEach((e=>{t.on(e,(()=>{p.apply(null,[!1].concat(arguments)),this.postEvent("error")}))})),["adSkipped","adComplete","adError"].forEach((e=>{t.on(e,(()=>this.postEvent("ad_end")))})),t.on("adStarted",(()=>this.postEvent("ad_start")));const e={"play":"playing","ready":"canplay","pause":"pause"};Object.keys(e).forEach((n=>{t.on(n,(()=>this.postEvent(e[n])))})),t.on("volume",(t=>this.Y(t.volume))),this.method("play",(()=>t.play())),this.method("pause",(()=>t.pause())),this.method("mute",(()=>t.setMute(!0))),this.method("unmute",(()=>t.setMute(!1))),this.method("showcontrols",(()=>t.setControls(!0))),this.method("hidecontrols",(()=>t.setControls(!1))),this.method("fullscreenenter",(()=>t.setFullscreen(!0))),this.method("fullscreenexit",(()=>t.setFullscreen(!1)))}X(t,e){const n=function(t,e){return p(e||t.videojs,"Video.JS not imported or initializer undefined.")}(this.i,e),s=n(t);s.ready((()=>{const e="canplay";["playing","pause","ended"].forEach((t=>{s.on(t,(()=>this.postEvent(t)))})),s.readyState()>=3?this.postEvent(e):s.on(e,(()=>this.postEvent(e))),h(t,"volumechange",(()=>this.Y(s.volume()))),this.method("play",(()=>s.play())),this.method("pause",(()=>s.pause())),this.method("mute",(()=>s.muted(!0))),this.method("unmute",(()=>s.muted(!1))),this.method("showcontrols",(()=>s.controls(!0))),this.method("hidecontrols",(()=>s.controls(!1))),this.method("fullscreenenter",(()=>s.requestFullscreen())),this.method("fullscreenexit",(()=>s.exitFullscreen()))}))}Y(t){if(t<.01)return this.Z=!0,void this.postEvent("muted");this.Z&&(this.Z=!1,this.postEvent("unmuted"))}K(t){return()=>{try{e=()=>t(),new Promise((t=>{t(e())}))}catch(t){}var e}}postEvent(t){this.tt({"event":t})}postAnalyticsEvent(t,e){this.tt({"event":"analytics","analytics":{"eventType":t,"vars":e}})}tt(n,s){const i=this.$++,r=function(n){for(var s=1;s<arguments.length;s++){var i=null!=arguments[s]?arguments[s]:{};s%2?e(Object(i),!0).forEach((function(e){t(n,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))}))}return n}({id:i},n);return this.i.parent&&this.i.parent.postMessage(r,"*"),s&&(this.F[i]=s),i}getIntersection(t){this.et("getIntersection",t)}getConsentData(t){this.et("getConsentData",t)}et(t,e){return this.C(),this.tt({"method":t},e)}}(n),i=n.AmpVideoIframe=n.AmpVideoIframe||[];i.push=t=>t(s),i.forEach(i.push)}(self)})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=video-iframe-integration-v0.mjs.map