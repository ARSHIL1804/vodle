;
(self.AMP=self.AMP||[]).push({m:0,v:"2203281422000",n:"amp-embedly-card",ev:"0.1",l:!0,f:function(r,t){!function(){function t(r,n){return(t=Object.setPrototypeOf||function(r,t){return r.__proto__=t,r})(r,n)}function n(r,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),n&&t(r,n)}function e(r){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function o(r){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function i(r,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r)}function u(r){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(r){return!1}}();return function(){var n,o=e(r);if(t){var u=e(this).constructor;n=Reflect.construct(o,arguments,u)}else n=o.apply(this,arguments);return i(this,n)}}var a=Array.isArray;function f(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function c(r,t){var n="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=function(r,t){if(r){if("string"==typeof r)return f(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(r,t):void 0}}(r))||t&&r&&"number"==typeof r.length){n&&(r=n);var e=0;return function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l=Object.prototype;function s(r){var t=Object.create(null);return r&&Object.assign(t,r),t}function v(r,t,n,e,o,i,u,a,f,c,l){return r}function p(r){return JSON.parse(r)}function m(r,t){try{return p(r)}catch(r){return null==t||t(r),null}}function d(r){var t,n=parseFloat(r);return"number"==typeof(t=n)&&isFinite(t)?n:void 0}l.hasOwnProperty,l.toString;var h=self.AMP_CONFIG||{},b=("string"==typeof h.thirdPartyFrameRegex?new RegExp(h.thirdPartyFrameRegex):h.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,y=("string"==typeof h.cdnProxyRegex?new RegExp(h.cdnProxyRegex):h.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function g(r){if(!self.document||!self.document.head)return null;if(self.location&&y.test(self.location.origin))return null;var t=self.document.head.querySelector('meta[name="'.concat(r,'"]'));return t&&t.getAttribute("content")||null}var w={thirdParty:h.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:h.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:b,cdn:h.cdnUrl||g("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:y,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:h.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:h.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:h.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:h.geoApiUrl||g("amp-geo-api")},j=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function O(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return decodeURIComponent(r)}catch(r){return t}}function E(r){var t,n=s();if(!r)return n;for(;t=j.exec(r);){var e=O(t[1],t[1]),o=t[2]?O(t[2].replace(/\+/g," "),t[2]):"";n[e]=o}return n}function S(r){var t=(r||self).location;return E(t.originalHash||t.hash)}var R="";function x(r){var t=r||self;return t.__AMP_MODE?t.__AMP_MODE:t.__AMP_MODE=function(r){return{localDev:!1,development:I(r,S(r)),esm:!1,test:!1,rtvVersion:A(r)}}(t)}function A(r){var t;return R||(R=(null===(t=r.AMP_CONFIG)||void 0===t?void 0:t.v)||"01".concat("2203281422000")),R}function I(r,t){var n=t||S(r);return["1","actions","amp","amp4ads","amp4email"].includes(n.development)||!!r.AMP_DEV_MODE}function T(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function F(r){var t=Object.getOwnPropertyDescriptor(r,"message");if(null!=t&&t.writable)return r;var n=r.message,e=r.stack,o=new Error(n);for(var i in r)o[i]=r[i];return o.stack=e,o}function P(r){for(var t,n=null,e="",o=c(arguments,!0);!(t=o()).done;){var i=t.value;i instanceof Error&&!n?n=F(i):(e&&(e+=" "),e+=i)}return n?e&&(n.message=e+": "+n.message):n=new Error(e),n}function k(r){var t,n;null===(t=(n=self).__AMP_REPORT_ERROR)||void 0===t||t.call(n,r)}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var M=self.__AMP_LOG;function N(r,t){throw new Error("failed to call initLogConstructor")}function $(r){return M.user||(M.user=_()),function(r,t){return t&&t.ownerDocument.defaultView!=r}(M.user.win,r)?M.userForEmbed||(M.userForEmbed=_()):M.user}function _(r){return N()}function z(){return M.dev||(M.dev=N())}function D(r,t,n,e,o,i,u,a,f,c,l){return r}function U(r,t,n,e,o,i,u,a,f,c,l){return $().assert(r,t,n,e,o,i,u,a,f,c,l)}function V(r,t){return J(r=function(r){return r.__AMP_TOP||(r.__AMP_TOP=r)}(r),t)}function q(r,t){return J((n=G(r),(e=G(n)).isSingleDoc()?e.win:e),t);var n,e}function G(r){return r.nodeType?(n=r,t=(n.ownerDocument||n).defaultView,V(t,"ampdoc")).getAmpDoc(r):r;var t,n}function J(r,t){D(function(r,t){var n=r.__AMP_SERVICES&&r.__AMP_SERVICES[t];return!(!n||!n.ctor)}(r,t));var n=function(r){var t=r.__AMP_SERVICES;return t||(t=r.__AMP_SERVICES={}),t}(r)[t];return n.obj||(D(n.ctor),D(n.context),n.obj=new n.ctor(n.context),D(n.obj),n.context=null,n.resolve&&n.resolve(n.obj)),n.obj}var L,C="amp-embedly-key",H=function(r){n(e,r);var t=u(e);function e(r){return t.call(this,r)}var o=e.prototype;return o.buildCallback=function(){U(this.element.getAttribute("value"),"The value attribute is required for <%s>",C,this.element)},o.isLayoutSupported=function(r){return"nodisplay"===r},e}(r.BaseElement),B=["Webkit","webkit","Moz","moz","ms","O","o"];function X(r,t,n,e,o){var i=function(r,t,n){if(t.startsWith("--"))return t;L||(L=s());var e=L[t];if(!e||n){if(e=t,void 0===r[t]){var o=function(r){return r.charAt(0).toUpperCase()+r.slice(1)}(t),i=function(r,t){for(var n=0;n<B.length;n++){var e=B[n]+t;if(void 0!==r[e])return e}return""}(r,o);void 0!==r[i]&&(e=i)}n||(L[t]=e)}return e}(r.style,t,o);if(i){var u,a=e?n+e:n;r.style.setProperty((u=i.replace(/[A-Z]/g,(function(r){return"-"+r.toLowerCase()})),B.some((function(r){return u.startsWith(r+"-")}))?"-".concat(u):u),a)}}var Z=function(){function r(){}return r.generate=function(r){return function(r){for(var t=r.length,n=5381,e=0;e<t;e++)n=33*n^r.charCodeAt(e);return String(n>>>0)}(function(r){for(var t=[],n=0;1==(null==(i=r)?void 0:i.nodeType)&&n<25;){var e="";r.id&&(e="/".concat(r.id));var o=r.nodeName.toLowerCase();t.push("".concat(o).concat(e).concat(W(r))),n++,r=r.parentElement}var i;return t.join()}(r))},r}();function W(r){for(var t=r.nodeName,n=0,e=0,o=r.previousElementSibling;o&&e<25&&n<100;)o.nodeName==t&&e++,n++,o=o.previousElementSibling;return e<25&&n<100?".".concat(e):""}function K(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.push.apply(n,e)}return n}function Q(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){T(r,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))}))}return r}var Y="__AMP__EXPERIMENT_TOGGLES";function rr(r){var t,n,e,o,i;if(r[Y])return r[Y];r[Y]=s();var u=r[Y];v(u);var f=Q(Q({},null!==(t=r.AMP_CONFIG)&&void 0!==t?t:{}),null!==(n=r.AMP_EXP)&&void 0!==n?n:p((null===(e=r.__AMP_EXP)||void 0===e?void 0:e.textContent)||"{}"));for(var l in f){var m=f[l];"number"==typeof m&&m>=0&&m<=1&&(u[l]=Math.random()<m)}var d=null===(o=r.AMP_CONFIG)||void 0===o?void 0:o["allow-doc-opt-in"];if(a(d)&&d.length){var h=r.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(h)for(var b,y,g=c((null===(b=h.getAttribute("content"))||void 0===b?void 0:b.split(","))||[],!0);!(y=g()).done;){var w=y.value;d.includes(w)&&(u[w]=!0)}}Object.assign(u,function(r){var t,n="";try{var e;"localStorage"in r&&(n=null!==(e=r.localStorage.getItem("amp-experiment-toggles"))&&void 0!==e?e:"")}catch(r){z().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}for(var o,i=(null===(t=n)||void 0===t?void 0:t.split(/\s*,\s*/g))||[],u=s(),a=c(i,!0);!(o=a()).done;){var f=o.value;f&&("-"==f[0]?u[f.substr(1)]=!1:u[f]=!0)}return u}(r));var j=null===(i=r.AMP_CONFIG)||void 0===i?void 0:i["allow-url-opt-in"];if(a(j)&&j.length)for(var O,S=E(r.location.originalHash||r.location.hash),R=c(j,!0);!(O=R()).done;){var x=O.value,A=S["e-".concat(x)];"1"==A&&(u[x]=!0),"0"==A&&(u[x]=!1)}return u}var tr,nr,er=function(){function r(r){this.St=r,this.It=0,this.Ct=0,this.Ot=s()}var t=r.prototype;return t.has=function(r){return!!this.Ot[r]},t.get=function(r){var t=this.Ot[r];if(t)return t.access=++this.Ct,t.payload},t.put=function(r,t){this.has(r)||this.It++,this.Ot[r]={payload:t,access:this.Ct},this.Rt()},t.Rt=function(){if(!(this.It<=this.St)){var r,t=this.Ot,n=this.Ct+1;for(var e in t){var o=t[e].access;o<n&&(n=o,r=e)}void 0!==r&&(delete t[r],this.It--)}},r}();function or(r,t){return tr||(tr=self.document.createElement("a"),nr=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new er(100))),function(r,t,n){if(n&&n.has(t))return n.get(t);r.href=t,r.protocol||(r.href=r.href);var e,o={href:r.href,protocol:r.protocol,host:r.host,hostname:r.hostname,port:"0"==r.port?"":r.port,pathname:r.pathname,search:r.search,hash:r.hash,origin:null};"/"!==o.pathname[0]&&(o.pathname="/"+o.pathname),("http:"==o.protocol&&80==o.port||"https:"==o.protocol&&443==o.port)&&(o.port="",o.host=o.hostname),e=r.origin&&"null"!=r.origin?r.origin:"data:"!=o.protocol&&o.host?o.protocol+"//"+o.host:o.href,o.origin=e;var i=o;return n&&n.put(t,i),i}(tr,r,t?null:nr)}function ir(r){return"https:"==(r=function(r){return"string"==typeof r?or(r):r}(r)).protocol||"localhost"==r.hostname||"127.0.0.1"==r.hostname||(n=".localhost",(e=(t=r.hostname).length-n.length)>=0&&t.indexOf(n,e)==e);var t,n,e}new Set(["c","v","a","ad"]);var ur={};function ar(r,t,n,e){var o=n||t.getAttribute("type");U(o,"Attribute type required for <amp-ad>: %s",t);var i=function(r){for(var t=0,n=r;n&&n!=n.parent;n=n.parent)t++;return String(t)+"-"+lr(r)}(r),u={};return function(r,t){var n=r.dataset;for(var e in n)e.startsWith("vars")||(t[e]=n[e]);var o=r.getAttribute("json");if(o){var i=m(o);if(void 0===i)throw $().createError("Error parsing JSON in json attribute in element %s",r);for(var u in i)t[u]=i[u]}}(t,u),u=function(r,t,n,e){var o=Date.now(),i=t.getAttribute("width"),u=t.getAttribute("height");(e=e||{}).width=d(i),e.height=d(u),t.getAttribute("title")&&(e.title=t.getAttribute("title"));var a=r.location.href;"about:srcdoc"==a&&(a=r.parent.location.href);var f,c,l,s,v=G(t),p=q(t,"documentInfo").get(),m=(s=t,q(s,"viewer")).getUnconfirmedReferrerUrl(),h=function(r){for(var t=r.ownerDocument.body,n=0,e=0,o=r;o&&o!=t;o=o.offsetParent)n+=o.offsetLeft,e+=o.offsetTop;var i=r.offsetHeight;return function(r,t,n,e){return{left:r,top:t,width:n,height:e,bottom:t+e,right:r+n,x:r,y:t}}(n,e,r.offsetWidth,i)}(t);e._context={"ampcontextVersion":"2203281422000","ampcontextFilepath":"".concat(w.thirdParty,"/").concat("2203281422000","/ampcontext-v0.js"),"sourceUrl":p.sourceUrl,"referrer":m,"canonicalUrl":p.canonicalUrl,"pageViewId":p.pageViewId,"location":{"href":a},"startTime":o,"tagName":t.tagName,"mode":{localDev:!1,development:x(l).development,esm:x(l).esm,test:!1,rtvVersion:x(l).rtvVersion},"canary":(f=r,!(null===(c=f.AMP_CONFIG)||void 0===c||!c.canary)),"hidden":!v.isVisible(),"initialLayoutRect":h?{"left":h.left,"top":h.top,"width":h.width,"height":h.height}:null,"domFingerprint":Z.generate(t),"experimentToggles":rr(r),"sentinel":n};var b=t.getAttribute("src");return b&&(e.src=b),e}(r,t,i,u),u.type=o,Object.assign(u._context,e),u}function fr(r){return"".concat(w.thirdParty,"/").concat("2203281422000","/vendor/").concat(r).concat(".js")}function cr(r,t,n){return function(r,t,n){var e=t.getMetaByName("amp-3p-iframe-src");if(!e)return null;var o=function(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"source";return U(null!=r,"%s %s must be available",t,n),U(ir(r)||/^\/\//.test(r),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',t,n,r),r}(e,'meta[name="amp-3p-iframe-src"]');U(-1==o.indexOf("?"),"3p iframe url must not include query string %s in element %s.",o,e);var i=or(o);return U("localhost"==i.hostname&&!n||i.origin!=or(r.location.href).origin,"3p iframe url must not be on the same origin as the current document %s (%s) in element %s. See https://github.com/ampproject/amphtml/blob/main/docs/spec/amp-iframe-origin-policy.md for details.",o,i.origin,e),"".concat(o,"?").concat("2203281422000")}(r,t,n)||function(r,t){return r.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN=r.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN||"d-"+lr(r),"https://"+r.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN+".".concat(w.thirdPartyFrameHost,"/").concat("2203281422000","/")+"".concat("frame",".html")}(r)}function lr(r){var t;if(r.crypto&&r.crypto.getRandomValues){var n=new Uint32Array(2);r.crypto.getRandomValues(n),t=String(n[0])+n[1]}else t=String(r.Math.random()).substr(2)+"0";return t}function sr(r){if(r.sandbox&&r.sandbox.supports){for(var t=["allow-top-navigation-by-user-activation","allow-popups-to-escape-sandbox"],n=0;n<t.length;n++){var e=t[n];if(!r.sandbox.supports(e))return void z().info("3p-frame","Iframe doesn't support %s",e)}r.sandbox=t.join(" ")+" "+["allow-forms","allow-modals","allow-pointer-lock","allow-popups","allow-same-origin","allow-scripts"].join(" ")}}function vr(r){return"string"==typeof r&&r.startsWith("amp-")&&-1!=r.indexOf("{")}function pr(r){return r.data}var mr="unlisten";function dr(r,t,n){var e=function(r,t){var n=r.listeningFors;return!n&&t&&(n=r.listeningFors=Object.create(null)),n||null}(r,n);if(!e)return e;var o=e[t];return!o&&n&&(o=e[t]=[]),o||null}function hr(r,t){for(var n=t;n&&n!=n.parent;n=n.parent)if(n==r)return!0;return!1}function br(r){for(var t={"sentinel":mr},n=r.length-1;n>=0;n--){var e=r[n];if(!e.frame.contentWindow){r.splice(n,1);var o=e.events;for(var i in o)o[i].splice(0,1/0).forEach((function(r){r(t)}))}}}var yr="amp-embedly-card",gr=function(r){n(e,r);var t=u(e);function e(r){var n;return(n=t.call(this,r)).tb=null,n.EI=null,n}var o=e.prototype;return o.buildCallback=function(){U(this.element.getAttribute("data-url"),"The data-url attribute is required for <%s> %s",yr,this.element);var r=document.querySelector(C);r&&(this.EI=r.getAttribute("value"))},o.layoutCallback=function(){var r=this;this.EI&&this.element.setAttribute("data-card-key",this.EI);var t=function(r,t,n,e){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.allowFullscreen,u=void 0!==i&&i,a=o.initialIntersection;D(void 0===t.isConnected||!0===t.isConnected);var f=ar(r,t,n,e);a&&(f._context.initialIntersection=a);var c=r.document.createElement("iframe");ur[f.type]||(ur[f.type]=0),ur[f.type]+=1;var l=t.getAmpDoc(),s=cr(r,l),v=or(s).hostname,p=JSON.stringify({"host":v,"bootstrap":fr(f.type),"type":f.type,"count":ur[f.type],"attributes":f});return c.src=s,c.ampLocation=or(s),c.name=p,f.width&&(c.width=f.width),f.height&&(c.height=f.height),f.title&&(c.title=f.title),u&&c.setAttribute("allowfullscreen","true"),c.setAttribute("scrolling","no"),X(c,"border","none"),c.onload=function(){this.readyState="complete"},c.setAttribute("allow","sync-xhr 'none';"),["facebook"].includes(n)||sr(c),c.setAttribute("data-amp-3p-sentinel",f._context.sentinel),c}(this.win,this.element,"embedly");return t.title=this.element.title||"Embedly card",function(r,t,n,e,o,i){D(r.src),D(!r.parentNode),D(n);var u=r.ownerDocument.defaultView;!function(r){r.listeningFors||r.addEventListener("message",(function(t){if(pr(t)){var n=function(r){return"string"==typeof r&&(r="{"==r.charAt(0)?m(r,(function(r){z().warn("IFRAME-HELPER","Postmessage could not be parsed. Is it in a valid JSON format?",r)}))||null:vr(r)?function(r){if(!vr(r))return null;var t=r.indexOf("{");return v(-1!=t),m(r.substr(t),(function(t){!function(r){var t=P.apply(null,arguments);setTimeout((function(){throw k(t),t}))}(new Error("MESSAGING: Failed to parse message: ".concat(r,"\n").concat(t.message)))}))}(r):null),r}(pr(t));if(n&&n.sentinel){var e=function(r,t,n,e){var o,i=dr(r,t);if(!i)return i;for(var u=0;u<i.length;u++){var a=i[u],f=a.frame.contentWindow;if(f){if(e==f||hr(f,e)){o=a;break}}else setTimeout(br,0,i)}return o?o.events:null}(r,n.sentinel,t.origin,t.source);if(e){var o=e[n.type];if(o){o=o.slice();for(var i=0;i<o.length;i++)(0,o[i])(n,t.source,t.origin,t)}}}}}))}(u);var a,f=function(r,t,n){for(var e,o=function(r,t){return r.getAttribute("data-amp-3p-sentinel")}(t),i=dr(r,o,!0),u=0;u<i.length;u++){var a=i[u];if(a.frame===t){e=a;break}}return e||(e={frame:t,events:Object.create(null)},i.push(e)),e.events}(u,r),c=or(r.src).origin,l=f["embed-size"]||(f["embed-size"]=[]),s=function(t,e,o,i){if("amp"==t.sentinel){if(e!=r.contentWindow)return;if(c!=o)return}e==r.contentWindow&&(t.sentinel!=mr?n(t,e,o,i):a())};l.push(s),a=function(){if(s){var r=l.indexOf(s);r>-1&&l.splice(r,1),s=null,l=null,n=null}}}(t,0,(function(t){r.forceChangeHeight(t.height)})),t.classList.add("i-amphtml-fill-content"),this.getVsync().mutate((function(){r.element.appendChild(t)})),this.tb=t,this.loadPromise(t)},o.unlayoutCallback=function(){var r,t;return this.tb&&(null===(t=(r=this.tb).parentElement)||void 0===t||t.removeChild(r),this.tb=null),!0},o.isLayoutSupported=function(r){return"responsive"==r},o.preconnectCallback=function(r){var t;(t=this.win,V(t,"preconnect")).url(this.getAmpDoc(),"https://cdn.embedly.com",r)},e}(r.BaseElement);r.registerElement(yr,gr),r.registerElement(C,H)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-embedly-card-0.1.js.map