;
(self.AMP=self.AMP||[]).push({m:0,v:"2203281422000",n:"amp-experiment",ev:"1.0",l:!1,f:function(t,n){!function(){function n(t,r){return(n=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,r)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}var o=Array.isArray;function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function a(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return u(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var e=0;return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c=Object.prototype,f=c.hasOwnProperty,s=c.toString;function l(t){return"[object Object]"===s.call(t)}function v(t){var n=Object.create(null);return t&&Object.assign(n,t),n}function h(t,n){return f.call(t,n)}function p(t,n,r,e,i,o,u,a,c,f,s){return t}function m(t){return JSON.parse(t)}function d(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function b(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,e)}return r}function y(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?b(Object(r),!0).forEach((function(n){d(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}var g=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function w(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return decodeURIComponent(t)}catch(t){return n}}function j(t){var n=Object.getOwnPropertyDescriptor(t,"message");if(null!=n&&n.writable)return t;var r=t.message,e=t.stack,i=new Error(r);for(var o in t)i[o]=t[o];return i.stack=e,i}function x(t){for(var n,r=null,e="",i=a(arguments,!0);!(n=i()).done;){var o=n.value;o instanceof Error&&!r?r=j(o):(e&&(e+=" "),e+=o)}return r?e&&(r.message=e+": "+r.message):r=new Error(e),r}function O(t){var n,r;null===(n=(r=self).__AMP_REPORT_ERROR)||void 0===n||n.call(r,t)}var S=self.AMP_CONFIG||{},P=("string"==typeof S.thirdPartyFrameRegex?new RegExp(S.thirdPartyFrameRegex):S.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,A=("string"==typeof S.cdnProxyRegex?new RegExp(S.cdnProxyRegex):S.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function E(t){if(!self.document||!self.document.head)return null;if(self.location&&A.test(self.location.origin))return null;var n=self.document.head.querySelector('meta[name="'.concat(t,'"]'));return n&&n.getAttribute("content")||null}var M={thirdParty:S.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:S.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:P,cdn:S.cdnUrl||E("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:A,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:S.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:S.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:S.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:S.geoApiUrl||E("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var R,N=self.__AMP_LOG;function I(t,n){throw new Error("failed to call initLogConstructor")}function J(t){return N.user||(N.user=T()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(N.user.win,t)?N.userForEmbed||(N.userForEmbed=T()):N.user}function T(t){return I()}function k(t,n,r,e,i,o,u,a,c,f,s){return t}function U(t,n,r,e,i,o,u,a,c,f,s){return J().assert(t,n,r,e,i,o,u,a,c,f,s)}function C(){return R||(R=Promise.resolve(void 0))}var z=function(){var t=this;this.promise=new Promise((function(n,r){t.resolve=n,t.reject=r}))};function _(t,n){return W(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function D(t,n){return W(Q(L(t)),n)}function F(t,n){return function(t,n){var r=$(t,n);if(r)return r;var e,i,o,u,a=Y(t);return a[n]=(i=(e=new z).promise,o=e.reject,u=e.resolve,i.catch((function(){})),{obj:null,promise:i,resolve:u,reject:o,context:null,ctor:null}),a[n].promise}(Q(t),n)}function G(t,n){return $(Q(t),n)}function L(t){return t.nodeType?(r=t,n=(r.ownerDocument||r).defaultView,_(n,"ampdoc")).getAmpDoc(t):t;var n,r}function Q(t){var n=L(t);return n.isSingleDoc()?n.win:n}function W(t,n){k(B(t,n));var r=Y(t)[n];return r.obj||(k(r.ctor),k(r.context),r.obj=new r.ctor(r.context),k(r.obj),r.context=null,r.resolve&&r.resolve(r.obj)),r.obj}function $(t,n){var r=Y(t)[n];return r?r.promise?r.promise:(W(t,n),r.promise=Promise.resolve(r.obj)):null}function Y(t){var n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}function B(t,n){var r=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!r||!r.ctor)}var H="__AMP__EXPERIMENT_TOGGLES";var K=function(t){return _(t,"crypto")};function V(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++){var e=t.charCodeAt(r);p(e<=255),n[r]=e}return n}function q(t){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}var X,Z,tt=function(){function t(t){this.St=t,this.It=0,this.Ct=0,this.Ot=v()}var n=t.prototype;return n.has=function(t){return!!this.Ot[t]},n.get=function(t){var n=this.Ot[t];if(n)return n.access=++this.Ct,n.payload},n.put=function(t,n){this.has(t)||this.It++,this.Ot[t]={payload:n,access:this.Ct},this.Rt()},n.Rt=function(){if(!(this.It<=this.St)){var t,n=this.Ot,r=this.Ct+1;for(var e in n){var i=n[e].access;i<r&&(r=i,t=e)}void 0!==t&&(delete n[t],this.It--)}},t}(),nt=new Set(["c","v","a","ad"]),rt=function(t){return"string"==typeof t?et(t):t};function et(t,n){return X||(X=self.document.createElement("a"),Z=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new tt(100))),function(t,n,r){if(r&&r.has(n))return r.get(n);t.href=n,t.protocol||(t.href=t.href);var e,i={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash,origin:null};"/"!==i.pathname[0]&&(i.pathname="/"+i.pathname),("http:"==i.protocol&&80==i.port||"https:"==i.protocol&&443==i.port)&&(i.port="",i.host=i.hostname),e=t.origin&&"null"!=t.origin?t.origin:"data:"!=i.protocol&&i.host?i.protocol+"//"+i.host:i.href,i.origin=e;var o=i;return r&&r.put(n,o),o}(X,t,n?null:Z)}function it(t){return"https:"==(t=rt(t)).protocol||"localhost"==t.hostname||"127.0.0.1"==t.hostname||(r=".localhost",(e=(n=t.hostname).length-r.length)>=0&&n.indexOf(r,e)==e);var n,r,e}var ot="OriginExperiments",ut={"alg":"RS256","e":"AQAB","ext":!0,"key_ops":["verify"],"kty":"RSA","n":"uAGSMYKze8Fit508UaGHz1eZowfX4YsA0lmyi-65xQfjF7nMo61c4Iz4erdqgRp-ov662yVPquhPmTxgB-nzNcTPrj15Jo05Js78Q9hS2hrPIjKMlzcKSYQN_08QieWKOSmVbLSv_-4n9Ms5ta8nRs4pwc_2nX5n7m5B5GH4VerGbqIWIn9FRNYMShBRQ9TCHpb6BIUTwUn6iwmJLenq0A1xhGrQ9rswGC1QJhjotkeReKXZDLLWaFr0uRw-IyvRa5RiiEGntgOvcbvamM5TnbKavc2rxvg2TWTCNQnb7lWSAzldJA_yAOYet_MjnHMyj2srUdbQSDCk8kPWWuafiQ"},at=function(){function t(t){var n,r;this.qi=t,this.vP=K(t.win),this.pi=(n=t.getHeadNode(),B(r=Q(L(n)),"url")?W(r,"url"):null),this.hP=new ct(this.vP,this.pi),this.pP=null}var n=t.prototype;return n.getExperiments=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ut;return this.vP.isPkcsAvailable()?(this.pP&&!t||(this.pP=this.mP(n)),this.pP):(J().error(ot,"Crypto is unavailable."),Promise.resolve([]))},n.mP=function(t){var n=this,r=this.qi.getHeadNode().querySelectorAll('meta[name="amp-experiment-token"]');if(0==r.length)return C();var e=this.qi.win;return K(e).importPkcsKey(t).then((function(t){for(var i=[],o=0;o<r.length;o++){var u=r[o],a=u.getAttribute("content");if(a){var c=n.hP.verifyToken(a,e.location,t).catch((function(t){J().error(ot,"Failed to verify experiment token:",t)}));i.push(c)}else J().error(ot,"Missing content for experiment token: ",u)}return Promise.all(i)}))},t}(),ct=function(){function t(t,n){this.vP=t,this.pi=n}var n=t.prototype;return n.generateKeys=function(){var t=y({modulusLength:2048,publicExponent:Uint8Array.of(1,0,1)},this.vP.pkcsAlgo);return this.vP.subtle.generateKey(t,!0,["sign","verify"])},n.generateToken=function(t,n,r){var e=this,i=V(JSON.stringify(n)),o=this.dP(t,i);return this.bP(o,r).then((function(t){return e.yP(o,new Uint8Array(t))}))},n.verifyToken=function(t,n,r){var e=this;return new Promise((function(i){var o=0,u=V(atob(t)),a=u[o];if(0!==a)throw new Error("Unrecognized token version: ".concat(a));o+=1;var c=new DataView(u.buffer).getUint32(o);if(o+=4,c>u.length-o)throw new Error("Unexpected config length: ".concat(c));var f=u.subarray(o,o+c);o+=c;var s=u.subarray(0,o),l=u.subarray(o);i(e.gP(l,s,r).then((function(t){if(!t)throw new Error("Failed to verify token signature.");var r=m(q(f)),i=e.pi.parse(r.origin).origin,o=et(function(t){if(!function(t){return M.cdnProxyRegex.test(rt(t).origin)}(t=rt(t)))return t.href;var n=t.pathname.split("/"),r=n[1];U(nt.has(r),"Unknown path prefix in url %s",t.href);var e=n[2],i="s"==e?"https://"+decodeURIComponent(n[3]):"http://"+decodeURIComponent(e);return U(i.indexOf(".")>0,"Expected a . in origin %s",i),n.splice(1,"s"==e?3:2),i+n.join("/")+function(t,n){if(!t||"?"==t)return"";var r=new RegExp("[?&]".concat("(amp_(js[^&=]*|gsa|r|kit)|usqp)","\\b[^&]*"),"g"),e=t.replace(r,"").replace(/^[?&]/,"");return e?"?"+e:""}(t.search)+(t.hash||"")}(n)).origin;if(i!==o)throw new Error("Config origin (".concat(i,") does not match ")+"window (".concat(o,")."));var u=r.experiment;if(r.expiration>=Date.now())return u;throw new Error('Experiment "'.concat(u,'" has expired.'))})))}))},n.dP=function(t,n){var r=new Uint8Array(n.length+5);return r[0]=t,new DataView(r.buffer).setUint32(1,n.length,!1),r.set(n,5),r},n.yP=function(t,n){var r=q(t)+q(n);return btoa(r)},n.bP=function(t,n){return this.vP.subtle.sign(this.vP.pkcsAlgo,n,t)},n.gP=function(t,n,r){return this.vP.verifyPkcs(r,t,n)},t}(),ft=["attributes","characterData","childList"];function st(t){var n=JSON.stringify(t);U(void 0!==t.value&&"string"==typeof t.value,"Mutation %s must have a value.",n),U(void 0!==t.attributeName&&"string"==typeof t.attributeName,"Mutation %s must have a attributeName.",n)}var lt,vt=function(){function t(t,n){this.wP=t,this.Ar=n,st(this.wP)}var n=t.prototype;return n.parseAndValidate=function(){return!this.wP.value.match(/(^|\\W)i-amphtml-/)},n.mutate=function(){var t=this;this.Ar.forEach((function(n){n.setAttribute(t.wP.attributeName,t.wP.value)}))},n.toString=function(){return JSON.stringify(this.wP)},t}(),ht=["Webkit","webkit","Moz","moz","ms","O","o"];function pt(t,n,r,e,i){var o=function(t,n,r){if(n.startsWith("--"))return n;lt||(lt=v());var e=lt[n];if(!e||r){if(e=n,void 0===t[n]){var i=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),o=function(t,n){for(var r=0;r<ht.length;r++){var e=ht[r]+n;if(void 0!==t[e])return e}return""}(t,i);void 0!==t[o]&&(e=o)}r||(lt[n]=e)}return e}(t.style,n,i);if(o){var u,a=e?r+e:r;t.style.setProperty((u=o.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()})),ht.some((function(t){return u.startsWith(t+"-")}))?"-".concat(u):u),a)}}var mt=/\S/,dt=/.*/,bt={"color":dt,"background-color":dt,"visibility":/^hidden$/,"display":/^none$/,"position":/^(static|relative|absolute|initial|inherit)$/,"font-size":dt,"background-image":dt,"border-width":dt,"border-style":dt,"border-color":dt},yt={"width":dt,"height":dt},gt=function(){function t(t,n){this.wP=t,this.Ar=n,this.jP={},this.xP=!1,st(this.wP)}var n=t.prototype;return n.parseAndValidate=function(){var t,n=this.wP.value;if(n.match(/(!\s*important|<)/))return!1;for(var r=0;r<this.Ar.length;r++)if(t=void 0,(t=this.Ar[r].tagName).startsWith("AMP-")&&"AMP-STICKY-AD-TOP-PADDING"!=t&&"AMP-BODY"!=t){this.xP=!0;break}for(var e=n.split(";"),i=0;i<e.length;i++)if(mt.test(e[i])){var o=e[i].split(":");if(2!=o.length)return!1;var u=o[0].trim(),a=o[1].trim();if(!this.OP(u,a))return J().error("amp-experiment/style","Unsupported style mutation property: %s, value: %s",u,a),!1;this.jP[u]=a}return!0},n.mutate=function(){var t=this;this.Ar.forEach((function(n){var r;!function(t,n){for(var r in n)pt(t,r,n[r])}(n,(r=t.jP,"display"in r&&function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];var i=x.apply(null,r);i.name=t||i.name,O(i)}("STYLE","`display` style detected. You must use toggle instead."),r))}))},n.OP=function(t,n){return!(this.xP||!h(yt,t)||!n.match(yt[t]))||!!h(bt,t)&&!!n.match(bt[t])},n.toString=function(){return JSON.stringify(this.wP)},t}(),wt=["AMP-IMG","AMP-IFRAME","A"],jt=function(){function t(t,n){this.wP=t,this.Ar=n,st(this.wP)}var n=t.prototype;return n.parseAndValidate=function(){for(var t=0;t<this.Ar.length;t++){var n=this.Ar[t];if(wt.indexOf(n.tagName)<0)return!1}try{!function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"source";U(null!=t,"%s %s must be available",n,r),U(it(t)||/^\/\//.test(t),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',n,r,t)}(this.wP.value,this.wP.target,"attributes mutation")}catch(t){return J().error("amp-experiment attribute-mutation-default-url",t.message),!1}return!0},n.mutate=function(){var t=this;this.Ar.forEach((function(n){var r=t.wP.attributeName,e=t.wP.value;if(n.setAttribute(r,e),"function"==typeof n.mutatedAttributesCallback){var i=v();i[r]=e,n.mutatedAttributesCallback(i)}}))},n.toString=function(){return JSON.stringify(this.wP)},t}(),xt=function(){function t(t,n){this.wP=t,this.Ar=n,function(t){var n=JSON.stringify(t);U(void 0!==t.value&&"string"==typeof t.value,"Mutation %s must have a value.",n)}(this.wP)}var n=t.prototype;return n.parseAndValidate=function(){return!0},n.mutate=function(){var t=this;this.Ar.forEach((function(n){n.textContent=t.wP.value}))},n.toString=function(){return JSON.stringify(this.wP)},t}(),Ot="amp-experiment apply-experiment";var St=/^[\w-]+$/,Pt=function(){function t(t){this.ampdoc=t,this.SP=new z}var n=t.prototype;return n.init=function(t){var n=this;t.then((function(t){return n.SP.resolve(t)}))},n.getVariants=function(){return this.SP.promise},n.whenReady=function(){return this.getVariants()},t}();function At(t,n,r,e){Et(r),function(t,n){var r=n.variants;U(l(r)&&Object.keys(r).length>0,"Missing variants object from experiment."),n.group&&Et(n.group);var e=0;for(var i in r)if(h(r,i)){Et(i);var o=r[i];Mt(o,t,i),e+=o.weight}U(e.toFixed(6)<=100,"Total percentage is bigger than 100: "+e)}(r,e);var i=t.getParam("amp-x-"+r);if(i&&h(e.variants,i))return Promise.resolve(i);var o,u=!1!==e.sticky,a=e.cidScope||"amp-experiment",c=Promise.resolve(!0);return u&&e.consentNotificationId&&(c=(o=t.getHeadNode(),function(t,n,r,e){return function(t,n,r,e){var i=G(t,n);if(i)return i;var o=L(t);return o.whenExtensionsKnown().then((function(){var t=o.getExtensionVersion(r);return t?_(o.win,"extensions").waitForExtension(r,t):null})).then((function(r){return r?e?G(t,n):F(t,n):null}))}(t,n,r,e).then((function(t){return function(t,n,r){return U(t,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.",n,r,r,r)}(t,n,r)}))}(o,"userNotificationManager","amp-user-notification")).then((function(t){return t.getNotification(e.consentNotificationId)})).then((function(t){return U(t,"Notification not found: "+"".concat(e.consentNotificationId)),t.isDismissed()}))),c.then((function(n){if(!n)return null;var i=e.group||r;return function(t,n,r){if(!r)return Promise.resolve(100*t.win.Math.random());var e,i=(e=t,F(e,"cid")).then((function(t){return t.get({scope:r,createCookieIfNotPresent:!0},C())}));return Promise.all([i,K(t.win)]).then((function(t){return t[1].uniform(n+":"+t[0])})).then((function(t){return 100*t}))}(t,i,u?a:null).then((function(t){for(var n=0,r=e.variants,i=Object.keys(r).sort(),o=0;o<i.length;o++)if(t<(n+=r[i[o]].weight))return i[o];return null}))}))}function Et(t){U(St.test(t),"Invalid name: %s. Allowed chars are [a-zA-Z0-9-_].",t)}function Mt(t,n,r){U(l(t),"".concat(n,".variants.").concat(r," must be an object.")),U(void 0!==t.weight&&"number"==typeof t.weight,"".concat(n,".variants.").concat(r," must have a number weight."));var e=t.weight;U(e>0&&e<100,"Invalid weight percentage %s."+" ".concat(n,".variants.").concat(r)+" Has to be greater than 0 and less than 100",e),U(t.mutations&&o(t.mutations),"".concat(n,".variants.").concat(r," must have a mutations array."))}var Rt="amp-experiment",Nt=function(t){!function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&n(t,r)}(f,t);var e,u,c=(e=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=r(e);if(u){var o=r(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return i(this,t)});function f(){return c.apply(this,arguments)}f.prerenderAllowed=function(){return!0};var s=f.prototype;return s.isLayoutSupported=function(t){return"nodisplay"==t||"container"==t},s.isBuildRenderBlocking=function(){return!0},s.buildCallback=function(){var t=this,n=[F(this.getAmpDoc(),"variant"),this.PP()];return Promise.all(n).then((function(n){var r=n[0],e=n[1],i={};try{if(i=t._S(),!e)return J().error(Rt,"Experiment amp-experiment-1.0 is not enabled."),void r.init(Promise.resolve(t.AP(i)));var o=t.getAmpDoc();if(D(o,"viewer"),null!=o.getParam("amp-x-disable-all-experiments"))return void r.init(Promise.resolve(t.AP(i)));var u=Object.create(null),a=Object.keys(i).map((function(t){return At(o,0,t,i[t]).then((function(n){u[t]=n}))}));return Promise.all(a).then((function(){var n=function(t,n,r){var e=function(t,n){var r=[];for(var e in n){var i=n[e];if(i){var o=t[e].variants[i];r=r.concat(o.mutations)}}return r}(n,r);return t.whenReady().then((function(){var n=[],r=0;if(e.forEach((function(e){!function(t){U(l(t),"Mutation %s must be an object.",JSON.stringify(t)),U(void 0!==t.type&&"string"==typeof t.type,"Mutation %s must have a type.",JSON.stringify(t)),U(ft.indexOf(t.type)>=0,"Mutation %s must have a valid type.",JSON.stringify(t)),U(void 0!==t.target&&"string"==typeof t.target,"Mutation %s must have a target.",JSON.stringify(t))}(e);var i=function(t,n){var r=n.target;U(!r.match(/(^|\\W)i-amphtml-/),"target %s cannot select i-amphtml-",r);var e,i=t.querySelectorAll(r);return U(i.length>0,"No element on the document matches the selector, %s .",n.target),(e=i)?Array.prototype.slice.call(e):[]}(t.win.document,e);r+=i.length,n.push({mutationRecord:e,elements:i})})),r>70){var i="Max number of mutations for the total "+"applied experiments exceeded: ".concat(r," > ")+70;throw J().error(Ot,i),new Error(i)}var o=function(t){var n=[];return t.forEach((function(t){var r=t.elements,e=t.mutationRecord,i=void 0;if("characterData"===e.type)i=new xt(e,r);else if("attributes"===e.type)if("style"===e.attributeName)i=new gt(e,r);else if("href"===e.attributeName||"src"===e.attributeName)i=new jt(e,r);else{if("class"!==e.attributeName)throw new Error("Mutation ".concat(JSON.stringify(e)," has an unsupported attributeName."));i=new vt(e,r)}else J().error(Ot,"childList mutations not supported in the current experiment state."),i={parseAndValidate:function(){return!0},mutate:function(){}};n.push(i)})),n}(n);o.forEach((function(t){U(t.parseAndValidate(),"Mutation %s has an an unsupported value.",t.toString())})),o.forEach((function(t){t.mutate()}))}))}(t.getAmpDoc(),i,u).then((function(){return u}));return r.init(n),n})).catch((function(n){throw r.init(Promise.resolve(t.AP(i))),n}))}catch(t){throw r.init(Promise.resolve({})),t}}))},s._S=function(){var t=this.element.children;return U(1==t.length&&"SCRIPT"==t[0].tagName&&"APPLICATION/JSON"==t[0].getAttribute("type").toUpperCase(),'<amp-experiment> should contain exactly one <script type="application/json"> child.'),k(m(t[0].textContent))},s.AP=function(t){var n=Object.create(null);return Object.keys(t).map((function(t){n[t]=null})),n},s.PP=function(){return t=this.win,n="amp-experiment-1.0",r=function(t){var n,r,e,i,u;if(t[H])return t[H];t[H]=v();var c=t[H];p(c);var f=y(y({},null!==(n=t.AMP_CONFIG)&&void 0!==n?n:{}),null!==(r=t.AMP_EXP)&&void 0!==r?r:m((null===(e=t.__AMP_EXP)||void 0===e?void 0:e.textContent)||"{}"));for(var s in f){var l=f[s];"number"==typeof l&&l>=0&&l<=1&&(c[s]=Math.random()<l)}var h=null===(i=t.AMP_CONFIG)||void 0===i?void 0:i["allow-doc-opt-in"];if(o(h)&&h.length){var d=t.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(d)for(var b,j,x=a((null===(b=d.getAttribute("content"))||void 0===b?void 0:b.split(","))||[],!0);!(j=x()).done;){var O=j.value;h.includes(O)&&(c[O]=!0)}}Object.assign(c,function(t){var n,r="";try{var e;"localStorage"in t&&(r=null!==(e=t.localStorage.getItem("amp-experiment-toggles"))&&void 0!==e?e:"")}catch(t){(N.dev||(N.dev=I())).warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}for(var i,o=(null===(n=r)||void 0===n?void 0:n.split(/\s*,\s*/g))||[],u=v(),c=a(o,!0);!(i=c()).done;){var f=i.value;f&&("-"==f[0]?u[f.substr(1)]=!1:u[f]=!0)}return u}(t));var S=null===(u=t.AMP_CONFIG)||void 0===u?void 0:u["allow-url-opt-in"];if(o(S)&&S.length)for(var P,A=function(t){var n,r=v();if(!t)return r;for(;n=g.exec(t);){var e=w(n[1],n[1]),i=n[2]?w(n[2].replace(/\+/g," "),n[2]):"";r[e]=i}return r}(t.location.originalHash||t.location.hash),E=a(S,!0);!(P=E()).done;){var M=P.value,R=A["e-".concat(M)];"1"==R&&(c[M]=!0),"0"==R&&(c[M]=!1)}return c}(t),r[n]?Promise.resolve(!0):(e=this.getAmpDoc(),i="origin-experiments",u=at,function(t,n,r,e,i,o){var u=Y(t),a=u[r];a||(a=u[r]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),a.ctor||(a.ctor=e,a.context=n,a.sharedInstance=!1,a.resolve&&W(t,r))}(Q(c=L(e)),c,i,u),(f=this.element,D(f,"origin-experiments")).getExperiments().then((function(t){return t&&t.includes("amp-experiment-1.0")})));var t,n,r,e,i,u,c,f},f}(t.BaseElement);t.registerServiceForDoc("variant",Pt),t.registerElement(Rt,Nt)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-experiment-1.0.js.map