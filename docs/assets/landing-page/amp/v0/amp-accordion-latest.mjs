;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-accordion",ev:"0.1",l:!0,f:function(t,n){(()=>{var{isArray:n}=Array;function e(t){return"string"==typeof t}function i(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function r(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return i(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var{hasOwnProperty:s,toString:o}=Object.prototype;function a(t,n,e,i,r,s,o,a,c,h,l){return t}var c="ArrowUp";function h(t,n,e,i){return r=>l.solveYValueFromXValue(r,0,0,t,n,e,i,1,1)}var l=class{static solveYValueFromXValue(t,n,e,i,r,s,o,a,c){return l.yr(l.Ir(t,n,i,s,a),e,r,o,c)}static Ir(t,n,e,i,r){const s=1e-6;let o=(t-n)/(r-n);if(o<=0)return 0;if(o>=1)return 1;let a=0,c=1,h=0;for(let u=0;u<8;u++){h=l.Mr(o,n,e,i,r);const u=(l.Mr(o+s,n,e,i,r)-h)/s;if(Math.abs(h-t)<s)return o;if(Math.abs(u)<s)break;h<t?a=o:c=o,o-=(h-t)/u}for(let u=0;Math.abs(h-t)>s&&u<8;u++)h<t?(a=o,o=(o+c)/2):(c=o,o=(o+a)/2),h=l.Mr(o,n,e,i,r);return o}static Mr(t,n,e,i,r){if(0==t)return n;if(1==t)return r;let s=l.Rr(n,e,t),o=l.Rr(e,i,t);const a=l.Rr(i,r,t);return s=l.Rr(s,o,t),o=l.Rr(o,a,t),l.Rr(s,o,t)}static yr(t,n,e,i,r){if(0==t)return n;if(1==t)return r;let s=l.Rr(n,e,t),o=l.Rr(e,i,t);const a=l.Rr(i,r,t);return s=l.Rr(s,o,t),o=l.Rr(o,a,t),l.Rr(s,o,t)}static Rr(t,n,e){return t+e*(n-t)}},u={LINEAR:t=>t,EASE:t=>l.solveYValueFromXValue(t,0,0,.25,.1,.25,1,1,1),EASE_IN:t=>l.solveYValueFromXValue(t,0,0,.42,0,1,1,1,1),EASE_OUT:t=>l.solveYValueFromXValue(t,0,0,0,0,.58,1,1,1),EASE_IN_OUT:t=>l.solveYValueFromXValue(t,0,0,.42,0,.58,1,1,1)},d={"linear":u.LINEAR,"ease":u.EASE,"ease-in":u.EASE_IN,"ease-out":u.EASE_OUT,"ease-in-out":u.EASE_IN_OUT};function f(t){if(!t)return null;if(e(t)){if(-1!=(t=t).indexOf("cubic-bezier")){const n=t.match(/cubic-bezier\((.+)\)/);if(n){const t=n[1].split(",").map(parseFloat);if(4==t.length){for(let n=0;n<4;n++)if(isNaN(t[n]))return null;return h(t[0],t[1],t[2],t[3])}}return null}return d[t]}return t}var p,m={bubbles:!0,cancelable:!0};function _(t){const n=Object.getOwnPropertyDescriptor(t,"message");if(null!=n&&n.writable)return t;const{message:e,stack:i}=t,r=new Error(e);for(const n in t)r[n]=t[n];return r.stack=i,r}function A(t){let n=null,e="";for(var i,s=r(arguments,!0);!(i=s()).done;){const t=i.value;t instanceof Error&&!n?n=_(t):(e&&(e+=" "),e+=t)}return n?e&&(n.message=e+": "+n.message):n=new Error(e),n}function v(t,...n){const e=A.apply(null,n);e.name=t||e.name,function(t){var n,e;null===(n=(e=self).__AMP_REPORT_ERROR)||void 0===n||n.call(e,t)}(e)}var b=["Webkit","webkit","Moz","moz","ms","O","o"];function g(t){const n=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return b.some((t=>n.startsWith(t+"-")))?`-${n}`:n}function x(t,n,e){if(E(n))return n;p||(p=Object.create(null));let i=p[n];if(!i||e){if(i=n,void 0===t[n]){const e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),r=function(t,n){for(let e=0;e<b.length;e++){const i=b[e]+n;if(void 0!==t[i])return i}return""}(t,e);void 0!==t[r]&&(i=r)}e||(p[n]=i)}return i}function P(t,n,e,i,r){const s=x(t.style,n,r);if(!s)return;const o=i?e+i:e;t.style.setProperty(g(s),o)}function y(t,n){for(const e in n)P(t,e,n[e])}function E(t){return t.startsWith("--")}function w(t,n){return(e,i)=>{for(const s in n)P(t,("display"===(r=s)&&v("STYLE","`display` style detected. You must use toggle instead."),r),n[s](e,i));var r}}function M(t,n){return e=>t+(n-t)*e}function T(t){return n=>`${t(n)}px`}var I=self.AMP_CONFIG||{},S=("string"==typeof I.thirdPartyFrameRegex?new RegExp(I.thirdPartyFrameRegex):I.thirdPartyFrameRegex,("string"==typeof I.cdnProxyRegex?new RegExp(I.cdnProxyRegex):I.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function R(t){if(!self.document||!self.document.head)return null;if(self.location&&S.test(self.location.origin))return null;const n=self.document.head.querySelector(`meta[name="${t}"]`);return n&&n.getAttribute("content")||null}I.thirdPartyUrl,I.thirdPartyFrameHost,I.cdnUrl||R("runtime-host"),I.errorReportingUrl,I.betaErrorReportingUrl,I.localDev,I.geoApiUrl||R("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var V=self.__AMP_LOG;function k(t,n){throw new Error("failed to call initLogConstructor")}function O(t){return V.user||(V.user=j()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(V.user.win,t)?V.userForEmbed||(V.userForEmbed=j()):V.user}function j(t){return k()}function $(){return V.dev||(V.dev=k())}function F(t,n,e,i,r,s,o,a,c,h,l){return t}function N(t,n,e,i,r,s,o,a,c,h,l){return O().assert(t,n,e,i,r,s,o,a,c,h,l)}function C(t,n){return H(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function D(t,n){const e=function(t){const n=z(t);return n.isSingleDoc()?n.win:n}(z(t));return L(e,n)?H(e,n):null}function z(t){return t.nodeType?(n=t,e=(n.ownerDocument||n).defaultView,C(e,"ampdoc")).getAmpDoc(t):t;var n,e}function H(t,n){F(L(t,n));const e=function(t){let n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}(t)[n];return e.obj||(F(e.ctor),F(e.context),e.obj=new e.ctor(e.context),F(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}function L(t,n){const e=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!e||!e.ctor)}var U="Animation",Y=function(){},X=class{static animate(t,n,e,i){return new X(t).setCurve(i).add(0,n,1).start(e)}constructor(t,n){this.wr=t,this.br=n||C(self,"vsync"),this.Vr=null,this.Sr=[]}setCurve(t){return t&&(this.Vr=f(t)),this}add(t,n,e,i){return this.Sr.push({delay:t,func:n,duration:e,curve:f(i)}),this}start(t){return new J(this.br,this.wr,this.Sr,this.Vr,t)}},J=class{constructor(t,n,e,i,r){this.br=t,this.wr=n,this.Sr=[];for(let t=0;t<e.length;t++){const n=e[t];this.Sr.push({delay:n.delay,func:n.func,duration:n.duration,curve:n.curve||i,started:!1,completed:!1})}this.Or=r,this.hr=Date.now(),this.Re=!0,this.mi={};const s=new class{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}};this.Cr=s.promise,this.Xs=s.resolve,this.kr=s.reject,this.Nr=this.br.createAnimTask(this.wr,{mutate:this.Dr.bind(this)}),this.br.canAnimate(this.wr)?this.Nr(this.mi):this.Lr(!1,0)}then(t,n){return t||n?this.Cr.then(t,n):this.Cr}thenAlways(t){const n=t||Y;return this.then(n,n)}halt(t){this.Lr(!1,t||0)}Lr(t,n){if(this.Re){if(this.Re=!1,0!=n){this.Sr.length>1&&this.Sr.sort(((t,n)=>t.delay+t.duration-(n.delay+n.duration)));try{if(n>0)for(let t=0;t<this.Sr.length;t++)this.Sr[t].func(1,!0);else for(let t=this.Sr.length-1;t>=0;t--)this.Sr[t].func(0,!1)}catch(n){$().error(U,"completion failed: "+n,n),t=!1}}t?this.Xs():this.kr()}}Dr(t){if(!this.Re)return;const n=Date.now(),e=Math.min((n-this.hr)/this.Or,1);for(let t=0;t<this.Sr.length;t++){const n=this.Sr[t];!n.started&&e>=n.delay&&(n.started=!0)}for(let t=0;t<this.Sr.length;t++){const n=this.Sr[t];n.started&&!n.completed&&this.Ur(n,e)}1==e?this.Lr(!0,0):this.br.canAnimate(this.wr)?this.Nr(this.mi):this.Lr(!1,0)}Ur(t,n){let e,i;if(t.duration>0){if(e=Math.min((n-t.delay)/t.duration,1),i=e,t.curve&&1!=i)try{i=t.curve(e)}catch(t){return $().error(U,"step curve failed: "+t,t),void this.Lr(!1,0)}}else e=1,i=1;1==e&&(t.completed=!0);try{t.func(i,t.completed)}catch(t){return $().error(U,"step mutate failed: "+t,t),void this.Lr(!1,0)}}};new Set(["c","v","a","ad"]);var K="amp-accordion",Z=h(.47,0,.745,.715),W=h(.39,.575,.565,1),q=class extends t.BaseElement{static prerenderAllowed(){return!0}constructor(t){super(t),this.Xat=[],this.Zat=null,this.Qat=null,this.tct=!1,this.ret=null,this.fc=null,this.wC=t.id?t.id:Math.floor(100*Math.random())}isLayoutSupported(t){return"container"==t}buildCallback(){this.fc=D(this.element,"action"),this.tct=this.element.hasAttribute("disable-session-states"),this.Zat=this.nct(),this.Qat=this.ect(),this.ret=function(t,n){const i=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling)!(function(t){let n;var i;return e(t)?n=t:1==(null==(i=t)?void 0:i.nodeType)&&(n=t.tagName),!!n&&n.toLowerCase().startsWith("i-")}(r=n)||r.nodeType===Node.ELEMENT_NODE&&(r.hasAttribute("placeholder")||r.hasAttribute("fallback")||r.hasAttribute("overflow")))&&i.push(n);var r;return i}(this.element),this.ret.forEach(((t,n)=>{N("section"==t.tagName.toLowerCase(),"Sections should be enclosed in a <section> tag, See https://github.com/ampproject/amphtml/blob/main/extensions/amp-accordion/amp-accordion.md. Found in: %s",this.element);const e=t.children;N(2==e.length,"Each section must have exactly two children. See https://github.com/ampproject/amphtml/blob/main/extensions/amp-accordion/amp-accordion.md. Found in: %s",this.element);const{0:i,1:r}=e;r.classList.add("i-amphtml-accordion-content");let s=r.getAttribute("id");s||(s=this.wC+"_AMP_content_"+n,r.setAttribute("id",s));let o=i.getAttribute("id");o||(o=this.wC+"_AMP_header_"+n,i.setAttribute("id",o)),this.registerAction("toggle",(t=>this._K(t))),this.registerAction("expand",(t=>this._K(t))),this.registerAction("collapse",(t=>this._K(t))),this.fc.addToAllowlist(K,["toggle","expand","collapse"],["email"]),new this.win.MutationObserver((t=>{this.ict(t,2)})).observe(t,{attributes:!0,attributeFilter:["data-expand"]}),this.Qat[s]?t.setAttribute("expanded",""):!1===this.Qat[s]&&t.removeAttribute("expanded"),this.mutateElement((()=>{})),N(!t.hasAttribute("[expanded]")&&!t.hasAttribute("data-amp-bind-expanded"),'The "expanded" attribute cannot be used with amp-bind in version 0.1 of amp-accordion. Please bind to [data-expand] instead. Found in: %s',this.element);const a=t.hasAttribute("expanded");i.classList.add("i-amphtml-accordion-header"),i.hasAttribute("role")||i.setAttribute("role","button"),i.setAttribute("aria-controls",s),i.setAttribute("aria-expanded",String(a)),i.hasAttribute("tabindex")||i.setAttribute("tabindex",0),this.Xat.push(i),r.setAttribute("aria-labelledby",o),r.hasAttribute("role")||r.setAttribute("role","region"),N(0==this.fc.hasAction(i,"tap",t),"amp-accordion headings should not have tap actions registered."),i.addEventListener("click",this.kO.bind(this)),i.addEventListener("keydown",this.yO.bind(this))}))}_K(t){const{args:n,method:e,trust:i}=t;let r;if("expand"===e?r=!0:"collapse"===e&&(r=!1),n){const t=n.section;let e=this.getAmpDoc().getElementById(t);e=O().assertElement(e),N(e,"No element found with id: %s",t),this.Sx(e,i,r)}else for(let t=0;t<this.ret.length;t++)this.Sx(this.ret[t],i,r)}nct(){return`amp-${this.element.id||this.element.getResourceId()}-${function(t){const n=t.indexOf("#");return-1==n?t:t.substring(0,n)}(this.win.location.href)}`}ect(){if(this.tct)return{};try{const n=this.win.sessionStorage.getItem(this.Zat);return n?F((t=n,JSON.parse(t))):{}}catch(t){return{}}var t}rct(){if(this.tct)return;const t=JSON.stringify(this.Qat);try{this.win.sessionStorage.setItem(this.Zat,t)}catch(t){}}aO(t,n,e){const i=function(t,n,e,i){const r={detail:{}};return Object.assign(r,void 0),new t.CustomEvent(n,r)}(this.win,`accordionSection.${t}`);this.fc.trigger(n,t,i,e),function(t,n,e,i){a(t.ownerDocument);const r=t.ownerDocument.createEvent("Event");r.data={};const{bubbles:s,cancelable:o}=m;r.initEvent(n,s,o),t.dispatchEvent(r)}(this.element,t)}Sx(t,n,e){const i=t.children,r=i[0],s=i[1].getAttribute("id"),o=t.hasAttribute("expanded"),a=null==e?!t.hasAttribute("expanded"):e;a&&t.hasAttribute("expanded")||!a&&!t.hasAttribute("expanded")||(this.element.hasAttribute("animate")?a?(r.setAttribute("aria-expanded","true"),this.sct(t,n),this.element.hasAttribute("expand-single-section")&&this.ret.forEach((e=>{e!=t&&(this.oct(e,n),e.children[0].setAttribute("aria-expanded","false"))}))):(r.setAttribute("aria-expanded","false"),this.oct(t,n)):this.mutateElement((()=>{a?(this.aO("expand",t,n),t.setAttribute("expanded",""),r.setAttribute("aria-expanded","true"),this.element.hasAttribute("expand-single-section")&&this.ret.forEach((e=>{e!=t&&(e.hasAttribute("expanded")&&(this.aO("collapse",e,n),e.removeAttribute("expanded")),e.children[0].setAttribute("aria-expanded","false"))}))):(this.aO("collapse",t,n),t.removeAttribute("expanded"),r.setAttribute("aria-expanded","false"))}),t),this.Qat[s]=!o,this.rct())}sct(t,n){let e,i,r,s,o;const a=t.children[1];return this.measureMutateElement((()=>{e=t.offsetWidth,o=function(t,n,e){const i=x(t.style,"width",void 0);if(i)return E(i)?t.style.getPropertyValue(i):t.style[i]}(a)}),(()=>{!function(t,n){const{style:e}=t;for(const t in n)e.setProperty(g(x(e,t)),String(n[t]),"important")}(a,{"position":"fixed","width":`${e}px`,"opacity":"0"}),t.hasAttribute("expanded")||t.setAttribute("expanded","")})).then((()=>this.measureMutateElement((()=>{i=t.offsetHeight,r=a.offsetHeight;const n=this.getViewport().getHeight();s=this.D6(Math.abs(r),n)}),(()=>{y(t,{"overflow":"hidden","height":`${i}px`}),y(a,{"position":"","opacity":"","width":o})})))).then((()=>{const e=new X(this.element);return e.setCurve(Z),e.add(0,w(t,{"height":T(M(i,i+r))}),1),e.add(0,w(a,{"opacity":M(0,1)}),1),e.start(s).thenAlways((()=>{this.mutateElement((()=>{this.aO("expand",t,n),y(t,{"overflow":"","height":""}),y(a,{"opacity":""})}))}))}))}oct(t,n){let e,i,r;const s=t.firstElementChild;return this.measureMutateElement((()=>{e=t.offsetHeight,i=s.offsetHeight;const n=this.getViewport().getSize().height;r=this.D6(Math.abs(e),n)}),(()=>{y(t,{"overflow":"hidden"})})).then((()=>X.animate(t,w(t,{"height":T(M(e,i))}),r,W).thenAlways((()=>this.mutateElement((()=>{t.hasAttribute("expanded")&&(this.aO("collapse",t,n),t.removeAttribute("expanded")),y(t,{"height":"","overflow":""})}))))))}D6(t,n,e=200,i=500){return r=Math.abs(t)/n*i,a((s=e)<=(o=i)),Math.min(Math.max(r,s),o);var r,s,o}act(t){t.preventDefault();const n=t.currentTarget.parentElement;this.Sx(n,3)}kO(t){this.BC(t)&&this.act(t)}BC(t){const n=t.target,e=t.currentTarget,i=!!function(t,n,e){let i;for(i=t;i&&i!==e;i=i.parentElement)if("A"==i.tagName)return i;return null}(n,0,e),r=this.fc.hasAction(n,"tap",e);return!i&&!r}yO(t){if(t.defaultPrevented)return;const{key:n}=t;switch(n){case c:case"ArrowDown":return void this.CO(t);case"Enter":case" ":return void(t.target==t.currentTarget&&this.act(t))}}CO(t){const n=t.currentTarget,e=this.Xat.indexOf(n);if(-1!==e){t.preventDefault();let n=(e+(t.key==c?-1:1))%this.Xat.length;n<0&&(n+=this.Xat.length),function(t){try{t.focus()}catch(t){}}(this.Xat[n])}}ict(t,n){t.forEach((t=>{const e=t.target,i=e.hasAttribute("data-expand");e.hasAttribute("expanded")!==i&&this.Sx(e,n,i)}))}getActionServiceForTesting(){return this.fc}};t.registerElement(K,q,"amp-accordion>section>:last-child{display:none!important}amp-accordion>section[expanded]>:last-child{display:block!important}.i-amphtml-accordion-content,.i-amphtml-accordion-header{margin:0}.i-amphtml-accordion-header{cursor:pointer;background-color:#efefef;padding-right:20px;border:1px solid #dfdfdf}amp-accordion>section:not([expanded]) .i-amphtml-media-component,amp-accordion>section:not([expanded]) .i-amphtml-media-component *{display:none!important;visibility:hidden!important}\n/*# sourceURL=/extensions/amp-accordion/0.1/amp-accordion.css*/")})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-accordion-0.1.mjs.map