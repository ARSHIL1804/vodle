;
(self.AMP=self.AMP||[]).push({m:0,v:"2203281422000",n:"amp-mraid",ev:"0.1",l:!0,f:function(t,n){!function(){Array.isArray;var n=Object.prototype;n.hasOwnProperty,n.toString;var r=self.AMP_CONFIG||{},i=("string"==typeof r.thirdPartyFrameRegex?new RegExp(r.thirdPartyFrameRegex):r.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,e=("string"==typeof r.cdnProxyRegex?new RegExp(r.cdnProxyRegex):r.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function o(t){if(!self.document||!self.document.head)return null;if(self.location&&e.test(self.location.origin))return null;var n=self.document.head.querySelector('meta[name="'.concat(t,'"]'));return n&&n.getAttribute("content")||null}var u={thirdParty:r.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:r.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:i,cdn:r.cdnUrl||o("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:e,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:r.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:r.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:r.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:r.geoApiUrl||o("amp-geo-api")},s=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function c(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return decodeURIComponent(t)}catch(t){return n}}function a(t){var n=(t||self).location;return function(t){var n,r=Object.create(null);if(!t)return r;for(;n=s.exec(t);){var i=c(n[1],n[1]),e=n[2]?c(n[2].replace(/\+/g," "),n[2]):"";r[i]=e}return r}(n.originalHash||n.hash)}var l="";function f(t){var n;return l||(l=(null===(n=t.AMP_CONFIG)||void 0===n?void 0:n.v)||"01".concat("2203281422000")),l}function h(t,n){var r=n||a(t);return["1","actions","amp","amp4ads","amp4email"].includes(r.development)||!!t.AMP_DEV_MODE}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var v=self.__AMP_LOG;function p(){return v.dev||(v.dev=function(t,n){throw new Error("failed to call initLogConstructor")}())}function m(t,n,r,i,e,o,u,s,c,a,l){return t}var d=function(){var t=this;this.promise=new Promise((function(n,r){t.resolve=n,t.reject=r}))};function g(t,n,r,i){var e=j(t),o=w(e);!function(t,n,r,i,e,o){var u=P(t),s=u[r];s||(s=u[r]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),s.ctor||(s.ctor=i,s.context=n,s.sharedInstance=!1,s.resolve&&y(t,r))}(o,e,n,r),i&&y(o,n)}function b(t,n,r){!function(t,n,r){var i=P(t),e=i[n];e?e.reject&&e.reject(r):(i[n]=R(),i[n].reject(r))}(w(j(t)),n,r)}function x(t,n){return function(t,n){var r=function(t,n){var r=P(t)[n];return r?r.promise?r.promise:(y(t,n),r.promise=Promise.resolve(r.obj)):null}(t,n);if(r)return r;var i=P(t);return i[n]=R(),i[n].promise}(w(t),n)}function j(t){return t.nodeType?(r=t,n=(r.ownerDocument||r).defaultView,function(t,n){return y(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),"ampdoc")}(n)).getAmpDoc(t):t;var n,r}function w(t){var n=j(t);return n.isSingleDoc()?n.win:n}function y(t,n){m(function(t,n){var r=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!r||!r.ctor)}(t,n));var r=P(t)[n];return r.obj||(m(r.ctor),m(r.context),r.obj=new r.ctor(r.context),m(r.obj),r.context=null,r.resolve&&r.resolve(r.obj)),r.obj}function P(t){var n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}function R(){var t=new d,n=t.promise,r=t.reject,i=t.resolve;return n.catch((function(){})),{obj:null,promise:n,resolve:i,reject:r,context:null,ctor:null}}var k="host-visibility",E="host-fullscreen",$="host-exit",z=function(){function t(){}return t.isAvailable=function(t){return!!(n=t,j(n)).getHeadNode().querySelector("script[host-service]");var n},t.visibilityForDoc=function(t){return x(t,k)},t.installVisibilityServiceForDoc=function(t,n){g(t,k,n,!0)},t.rejectVisibilityServiceForDoc=function(t,n){b(t,k,n)},t.fullscreenForDoc=function(t){return x(t,E)},t.installFullscreenServiceForDoc=function(t,n){g(t,E,n,!0)},t.rejectFullscreenServiceForDoc=function(t,n){b(t,E,n)},t.exitForDoc=function(t){return x(t,$)},t.installExitServiceForDoc=function(t,n){g(t,$,n,!0)},t.rejectExitServiceForDoc=function(t,n){b(t,$,n)},t}(),A=function(){function t(t){this.F4=t,this.H4=!1}var n=t.prototype;return n.onVisibilityChange=function(t){this.F4.addEventListener("exposureChange",(function(n,r,i){var e,o,u,s;t({visibleRect:(e=r&&r.x?r.x:0,o=r&&r.y?r.y:0,u=r&&r.width?r.width:0,s=r&&r.height?r.height:0,{left:e,top:o,width:u,height:s,bottom:o+s,right:e+u,x:e,y:o}),visibleRatio:n/100})}))},n.enterFullscreenOverlay=function(t){return this.H4?Promise.resolve(!1):(this.F4.expand(),this.H4=!0,Promise.resolve(!0))},n.exitFullscreenOverlay=function(t){return this.H4?(this.F4.close(),this.H4=!1,Promise.resolve(!0)):Promise.resolve(!1)},n.openUrl=function(t){return this.F4.open(t),Promise.resolve(!0)},t}(),C="amp-mraid",F=function(){function t(t){var n=this;this.qi=t,this.V4=!1,this.F4=null,this.Z4=!0;var r,i=this.qi.getHeadNode().querySelectorAll('script[host-service="amp-mraid"]');if(i.length>1)p().error(C,"Multiple amp-mraid scripts.");else if(i.length<1)p().error(C,"Missing amp-mraid scripts.");else{if(null!=i[0].getAttribute("no-fallback")&&(this.Z4=!1),"inabox"!==(r=self,r.__AMP_MODE?r.__AMP_MODE:r.__AMP_MODE=function(t){return{localDev:!1,development:h(t,a(t)),esm:!1,test:!1,rtvVersion:f(t)}}(r)).runtime)return p().fine(C,"Only supported with Inabox"),void this.q4();var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","".concat(u.cdn,"/mraid.js")),e.addEventListener("load",(function(){n.J4()})),e.addEventListener("error",(function(){n.V4||n.q4()})),document.getElementsByTagName("head").item(0).appendChild(e)}}var n=t.prototype;return n.K4=function(){var t=new A(this.F4);this.F4.addEventListener?z.installVisibilityServiceForDoc(this.qi,(function(){return t})):z.rejectVisibilityServiceForDoc(this.qi,{fallback:!1}),this.F4.expand&&this.F4.close?z.installFullscreenServiceForDoc(this.qi,(function(){return t})):z.rejectFullscreenServiceForDoc(this.qi,{fallback:!1}),this.F4.open?z.installExitServiceForDoc(this.qi,(function(){return t})):z.rejectExitServiceForDoc(this.qi,{fallback:!0}),this.V4=!0},n.J4=function(){var t=this,n=window.mraid;n&&n.getState?(this.F4=n,"loading"===n.getState()?n.addEventListener("ready",(function(){t.K4()})):this.K4()):this.q4()},n.q4=function(){z.rejectVisibilityServiceForDoc(this.qi,{fallback:this.Z4}),z.rejectExitServiceForDoc(this.qi,{fallback:!0}),z.rejectFullscreenServiceForDoc(this.qi,{fallback:this.Z4})},t}();t.registerServiceForDoc(C,F)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-mraid-0.1.js.map