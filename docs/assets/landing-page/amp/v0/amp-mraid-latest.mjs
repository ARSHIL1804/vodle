;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-mraid",ev:"0.1",l:!0,f:function(t,n){(()=>{var{hasOwnProperty:n,toString:i}=Object.prototype;var r=self.AMP_CONFIG||{},e=("string"==typeof r.thirdPartyFrameRegex?new RegExp(r.thirdPartyFrameRegex):r.thirdPartyFrameRegex,("string"==typeof r.cdnProxyRegex?new RegExp(r.cdnProxyRegex):r.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function s(t){if(!self.document||!self.document.head)return null;if(self.location&&e.test(self.location.origin))return null;const n=self.document.head.querySelector(`meta[name="${t}"]`);return n&&n.getAttribute("content")||null}r.thirdPartyUrl,r.thirdPartyFrameHost;var o=r.cdnUrl||s("runtime-host")||"https://cdn.ampproject.org",c=(r.errorReportingUrl,r.betaErrorReportingUrl,r.localDev,r.geoApiUrl||s("amp-geo-api"),/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g);function l(t,n=""){try{return decodeURIComponent(t)}catch(t){return n}}function u(t){const{location:n}=t||self;return function(t){const n=Object.create(null);if(!t)return n;let i;for(;i=c.exec(t);){const t=l(i[1],i[1]),r=i[2]?l(i[2].replace(/\+/g," "),i[2]):"";n[t]=r}return n}(n.originalHash||n.hash)}var a="";function h(t){var n;return a||(a=(null===(n=t.AMP_CONFIG)||void 0===n?void 0:n.v)||"012203281422000"),a}function f(t,n){const i=n||u(t);return["1","actions","amp","amp4ads","amp4email"].includes(i.development)||!!t.AMP_DEV_MODE}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var m=self.__AMP_LOG;function v(){return m.dev||(m.dev=function(t,n){throw new Error("failed to call initLogConstructor")}())}function p(t,n,i,r,e,s,o,c,l,u,a){return t}function d(t,n,i,r){const e=y(t),s=j(e);!function(t,n,i,r,e,s){const o=P(t);let c=o[i];c||(c=o[i]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),c.ctor||(c.ctor=r,c.context=n,c.sharedInstance=!1,c.resolve&&F(t,i))}(s,e,n,i),r&&F(s,n)}function b(t,n,i){!function(t,n,i){const r=P(t),e=r[n];e?e.reject&&e.reject(i):(r[n]=x(),r[n].reject(i))}(j(y(t)),n,i)}function g(t,n){return function(t,n){const i=function(t,n){const i=P(t)[n];return i?i.promise?i.promise:(F(t,n),i.promise=Promise.resolve(i.obj)):null}(t,n);if(i)return i;const r=P(t);return r[n]=x(),r[n].promise}(j(t),n)}function y(t){return t.nodeType?(n=t,i=(n.ownerDocument||n).defaultView,function(t,n){return F(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}(i,"ampdoc")).getAmpDoc(t):t;var n,i}function j(t){const n=y(t);return n.isSingleDoc()?n.win:n}function F(t,n){p(function(t,n){const i=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!i||!i.ctor)}(t,n));const i=P(t)[n];return i.obj||(p(i.ctor),p(i.context),i.obj=new i.ctor(i.context),p(i.obj),i.context=null,i.resolve&&i.resolve(i.obj)),i.obj}function P(t){let n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}function x(){const t=new class{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}},{promise:n,reject:i,resolve:r}=t;return n.catch((()=>{})),{obj:null,promise:n,resolve:r,reject:i,context:null,ctor:null}}var w=t=>y(t),D="host-visibility",_="host-fullscreen",E="host-exit",R=class{static isAvailable(t){return!!w(t).getHeadNode().querySelector("script[host-service]")}static visibilityForDoc(t){return g(t,D)}static installVisibilityServiceForDoc(t,n){d(t,D,n,!0)}static rejectVisibilityServiceForDoc(t,n){b(t,D,n)}static fullscreenForDoc(t){return g(t,_)}static installFullscreenServiceForDoc(t,n){d(t,_,n,!0)}static rejectFullscreenServiceForDoc(t,n){b(t,_,n)}static exitForDoc(t){return g(t,E)}static installExitServiceForDoc(t,n){d(t,E,n,!0)}static rejectExitServiceForDoc(t,n){b(t,E,n)}},A="amp-mraid";t.registerServiceForDoc(A,class{constructor(t){this.Ci=t,this.t4=!1,this.n4=null,this.i4=!0;const n=this.Ci.getHeadNode().querySelectorAll('script[host-service="amp-mraid"]');if(n.length>1)return void v().error(A,"Multiple amp-mraid scripts.");if(n.length<1)return void v().error(A,"Missing amp-mraid scripts.");if(null!=n[0].getAttribute("no-fallback")&&(this.i4=!1),"inabox"!==function(t){const n=self;return n.__AMP_MODE?n.__AMP_MODE:n.__AMP_MODE=function(t){return{localDev:!1,development:f(t,u(t)),esm:!0,test:!1,rtvVersion:h(t)}}(n)}().runtime)return void this.r4();const i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",`${o}/mraid.js`),i.addEventListener("load",(()=>{this.e4()})),i.addEventListener("error",(()=>{this.t4||this.r4()})),document.getElementsByTagName("head").item(0).appendChild(i)}s4(){const t=new class{constructor(t){this.n4=t,this.o4=!1}onVisibilityChange(t){this.n4.addEventListener("exposureChange",((n,i,r)=>{var e,s,o,c;t({visibleRect:(e=i&&i.x?i.x:0,s=i&&i.y?i.y:0,o=i&&i.width?i.width:0,c=i&&i.height?i.height:0,{left:e,top:s,width:o,height:c,bottom:s+c,right:e+o,x:e,y:s}),visibleRatio:n/100})}))}enterFullscreenOverlay(t){return this.o4?Promise.resolve(!1):(this.n4.expand(),this.o4=!0,Promise.resolve(!0))}exitFullscreenOverlay(t){return this.o4?(this.n4.close(),this.o4=!1,Promise.resolve(!0)):Promise.resolve(!1)}openUrl(t){return this.n4.open(t),Promise.resolve(!0)}}(this.n4);this.n4.addEventListener?R.installVisibilityServiceForDoc(this.Ci,(()=>t)):R.rejectVisibilityServiceForDoc(this.Ci,{fallback:!1}),this.n4.expand&&this.n4.close?R.installFullscreenServiceForDoc(this.Ci,(()=>t)):R.rejectFullscreenServiceForDoc(this.Ci,{fallback:!1}),this.n4.open?R.installExitServiceForDoc(this.Ci,(()=>t)):R.rejectExitServiceForDoc(this.Ci,{fallback:!0}),this.t4=!0}e4(){const t=window.mraid;t&&t.getState?(this.n4=t,"loading"===t.getState()?t.addEventListener("ready",(()=>{this.s4()})):this.s4()):this.r4()}r4(){R.rejectVisibilityServiceForDoc(this.Ci,{fallback:this.i4}),R.rejectExitServiceForDoc(this.Ci,{fallback:!0}),R.rejectFullscreenServiceForDoc(this.Ci,{fallback:this.i4})}})})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-mraid-0.1.mjs.map