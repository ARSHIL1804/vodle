;
(self.AMP=self.AMP||[]).push({m:0,v:"2203281422000",n:"amp-access-fewcents",ev:"0.1",l:!1,f:function(t,n){!function(){Array.isArray;var n=Object.prototype;function e(t){var n=Object.create(null);return t&&Object.assign(n,t),n}function r(t,n){t.insertBefore(n,t.firstChild)}function i(t,n,e){return function(t,n){for(var e in n)t.setAttribute(e,n[e]);return t}(t.createElement(n),e)}n.hasOwnProperty,n.toString;var a=self.AMP_CONFIG||{},s=("string"==typeof a.thirdPartyFrameRegex?new RegExp(a.thirdPartyFrameRegex):a.thirdPartyFrameRegex,("string"==typeof a.cdnProxyRegex?new RegExp(a.cdnProxyRegex):a.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function o(t){if(!self.document||!self.document.head)return null;if(self.location&&s.test(self.location.origin))return null;var n=self.document.head.querySelector('meta[name="'.concat(t,'"]'));return n&&n.getAttribute("content")||null}function c(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}a.thirdPartyUrl,a.thirdPartyFrameHost,a.cdnUrl||o("runtime-host"),a.errorReportingUrl,a.betaErrorReportingUrl,a.localDev,a.geoApiUrl||o("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var f,u=self.__AMP_LOG;function l(t){return u.user||(u.user=h()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(u.user.win,t)?u.userForEmbed||(u.userForEmbed=h()):u.user}function h(t){return function(t,n){throw new Error("failed to call initLogConstructor")}()}function p(t,n,e,r,i,a,s,o,c,f,u){return t}var v=function(){var t=this;this.promise=new Promise((function(n,e){t.resolve=n,t.reject=e}))};function d(t,n){return w(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function m(t,n){return b(g(t),n)}function x(t){return t.nodeType?(e=t,n=(e.ownerDocument||e).defaultView,d(n,"ampdoc")).getAmpDoc(t):t;var n,e}function g(t){var n=x(t);return n.isSingleDoc()?n.win:n}function w(t,n){p(function(t,n){var e=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!e||!e.ctor)}(t,n));var e=y(t)[n];return e.obj||(p(e.ctor),p(e.context),e.obj=new e.ctor(e.context),p(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}function b(t,n){var e=y(t)[n];return e?e.promise?e.promise:(w(t,n),e.promise=Promise.resolve(e.obj)):null}function y(t){var n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}function R(t,n,e,r){return function(t,n,e,r){var i=m(t,n);if(i)return i;var a=x(t);return a.whenExtensionsKnown().then((function(){var t=a.getExtensionVersion(e);return t?d(a.win,"extensions").waitForExtension(e,t):null})).then((function(e){return e?r?m(t,n):function(t,n){return function(t,n){var e=b(t,n);if(e)return e;var r,i,a,s,o=y(t);return o[n]=(i=(r=new v).promise,a=r.reject,s=r.resolve,i.catch((function(){})),{obj:null,promise:i,resolve:s,reject:a,context:null,ctor:null}),o[n].promise}(g(t),n)}(t,n):null}))}(t,n,e,r).then((function(t){return function(t,n,e){return r=t,i=n,a=e,s=e,o=e,l().assert(r,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.",i,a,s,o,void 0,void 0,void 0,void 0,void 0);var r,i,a,s,o}(t,n,e)}))}var j,O={fcTitleText:"Instant Access With Fewcents.",fcPromptText:"I already bought this",fcButtonText:"Unlock",fcPoweredImageRef:"https://images.fewcents.co/paywall/powered-fewcents.png",fcTermsRef:"https://www.fewcents.co/terms",fcPrivacyRef:"https://www.fewcents.co/privacy",fcContactUsRef:"mailto:support@fewcents.co"};function k(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function E(t,n,e,r){return function(t,n,e,r){var i=t,a=e,s=function(t){try{return a(t)}catch(t){var n,e;throw null===(n=(e=self).__AMP_REPORT_ERROR)||void 0===n||n.call(e,t),t}},o=function(){if(void 0!==j)return j;j=!1;try{var t={get capture(){return j=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return j}(),c=!(null==r||!r.capture);return i.addEventListener(n,s,o?r:c),function(){null==i||i.removeEventListener(n,s,o?r:c),a=null,i=null,s=null}}(t,n,e,r)}var U,I,T=function(){function t(t){this.St=t,this.It=0,this.Ct=0,this.Ot=e()}var n=t.prototype;return n.has=function(t){return!!this.Ot[t]},n.get=function(t){var n=this.Ot[t];if(n)return n.access=++this.Ct,n.payload},n.put=function(t,n){this.has(t)||this.It++,this.Ot[t]={payload:n,access:this.Ct},this.Rt()},n.Rt=function(){if(!(this.It<=this.St)){var t,n=this.Ot,e=this.Ct+1;for(var r in n){var i=n[r].access;i<e&&(e=i,t=r)}void 0!==t&&(delete n[t],this.It--)}},t}();function z(t,n,e){if(n[e])return n[e];var r=t.querySelector("style[".concat(e,"], link[").concat(e,"]"));return r?(n[e]=r,r):null}function C(t,n){for(var e=t.styleSheets,r=0;r<e.length;r++)if(e[r].ownerNode==n)return!0;return!1}new Set(["c","v","a","ad"]);var _=function(){function t(t,n){this.ampdoc=t.ampdoc,this.oE=n,this.tat=null,this.nat=null,this.eat=this.oE.getAdapterConfig(),this.rat=this.iat(),this.aat=function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?k(Object(e),!0).forEach((function(n){c(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):k(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}({},O),this.sat=null,this.Sr=d(this.ampdoc.win,"xhr"),this.js=w(this.ampdoc.win,"timer"),this.Iu=function(t){return d(t,"vsync")}(this.ampdoc.win),this.oat=null,this.cat=null,function(t,n,i,a,s){var o=t.getHeadNode(),c=function(t,n,i,a){var s=t.__AMP_CSS_SM;s||(s=t.__AMP_CSS_SM=e());var o="amp-extension=".concat(a);if(o){var c=z(t,s,o);if(c)return"STYLE"==c.tagName&&c.textContent!==n&&(c.textContent=n),c}var f=(t.ownerDocument||t).createElement("style");f.textContent=n;return f.setAttribute("amp-extension",a),function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e){var i=e.nextSibling;t.insertBefore(n,i)}else r(t,n)}(t,f,z(t,s,"amp-runtime")),o&&(s[o]=f),f}(o,function(t,n){var e=t.__AMP_CSS_TR;return e?e(n):n}(o,"#amp-access-fewcents-dialog{padding:20px}.aaf-container{height:auto;width:70%;max-width:540px;-ms-flex-align:center;align-items:center;margin:20px auto auto;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding:5px 15px;background-color:#f5f5f5;border:0px;border-radius:5px;opacity:1;transition:opacity 0.5s ease 0s;font-family:Arial;font-weight:400;box-shadow:1px 2px 2px 2px grey;overflow:hidden}.aaf-headerText{font-size:17px;text-align:center;word-wrap:normal;overflow:hidden;margin-top:10px}.aaf-purchase-button{line-height:1.2;cursor:pointer;color:#fff;border:0;background:#08289a;width:100%;border-radius:5px;height:40px;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;font-size:16px;outline:none;margin:auto;padding:0px 25px;max-width:160px}.aaf-imageTag{max-height:30px}.aaf-already-bought{font-size:13px;font-weight:500;text-align:center;margin-top:4px;color:#08289a}.aaf-price-btn-div{display:-ms-flexbox;display:flex;place-content:center space-evenly;-ms-flex-align:center;align-items:center;margin:12px auto 0px;max-width:250px}.aaf-article-price{font-size:24px;font-weight:400;text-align:center;margin-right:10px;color:#000}.aaf-btn-div{line-height:1.2;margin-top:0.5 rem;text-align:center}.aaf-bottom-div{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.aaf-fewcents-image-tag{max-height:45px}.aaf-refRow{word-break:break-word}.aaf-refElements,.aaf-refRow{text-align:center;color:#a8a3a3}.aaf-refElements{padding:4px;font-size:11px;white-space:nowrap}.aaf-partition-bar{font-size:11px;margin:0px 4px}@media (max-width:786px){#amp-access-fewcents-dialog{width:350px}}\n/*# sourceURL=/extensions/amp-access-fewcents/0.1/amp-access-fewcents.css*/"),0,"amp-access-fewcents");if(i){var f=t.getRootNode();if(C(f,c))return c;var u=setInterval((function(){C(f,c)&&clearInterval(u)}),4)}}(this.ampdoc,0,(function(){}))}var n=t.prototype;return n.authorize=function(){var t=this;return this.fat().then((function(n){return t.uat(),{access:n.data.access,data:JSON.stringify(n)}}),(function(n){if(!n||!n.response)throw n;var e=n.response;if(402!==e.status)throw n;return e.json().catch((function(){throw n})).then((function(n){return t.lat(n),t.uat().then(t.hat.bind(t)),{access:!1,data:JSON.stringify(n)}}))})).catch((function(){return t.uat(),{access:!0}}))},n.iat=function(){var t=this.eat.accessKey,n=this.eat.articleIdentifier,e=this.eat.category,r=(U||(U=self.document.createElement("a"),I=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new T(100))),function(t,n,e){if(e&&e.has(n))return e.get(n);t.href=n,t.protocol||(t.href=t.href);var r,i={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash,origin:null};"/"!==i.pathname[0]&&(i.pathname="/"+i.pathname),("http:"==i.protocol&&80==i.port||"https:"==i.protocol&&443==i.port)&&(i.port="",i.host=i.hostname),r=t.origin&&"null"!=t.origin?t.origin:"data:"!=i.protocol&&i.host?i.protocol+"//"+i.host:i.href,i.origin=r;var a=i;return e&&e.put(n,a),a}(U,undefined,I)).hostname;return this.pat()+"v1/amp/authorizeBid?articleUrl=SOURCE_URL&ampReaderId=READER_ID&returnUrl=RETURN_URL&accessKey="+encodeURIComponent(t)+"&category="+encodeURIComponent(e)+"&articleIdentifier="+encodeURIComponent(n)+"&domain="+encodeURIComponent(r)},n.pat=function(){var t=this.eat.environment;return"development"===t?"https://api.hounds.fewcents.co/":"demo"===t?"https://api.demo.fewcents.co/":"https://api.fewcents.co/"},n.lat=function(t){var n,e,r,i=null==t||null===(n=t.data)||void 0===n?void 0:n.purchaseOptions;this.oat=null==i?void 0:i[0],this.cat=null==t||null===(e=t.data)||void 0===e?void 0:e.loginUrl;var a=null==t||null===(r=t.data)||void 0===r?void 0:r.bidId;a&&(this.sat=a)},n.fat=function(){var t=this,n=this.rat;return this.sat&&(n=n+"&bidId="+this.sat),this.oE.buildUrl(n,!1).then((function(n){return t.oE.getLoginUrl(n)})).then((function(n){return t.js.timeoutPromise(1e4,t.Sr.fetchJson(n,{})).then((function(t){return t.json()}))}))},n.uat=function(){var t=this;return this.vat?f||(f=Promise.resolve(void 0)):(this.dat&&(this.dat=null),this.mat&&(this.mat=null),this.Iu.mutatePromise((function(){t.vat=!0,t.tat=null,function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}(t.xat())})))},n.xat=function(){var t=this.eat.contentSelector,n=this.ampdoc.getElementById(t);return l().assertElement(n,"No element found with given id",t)},n.hat=function(){this.nat=this.xat(),this.tat=i(this.ampdoc.win.document,"div",{class:"aaf-container"}),this.gat(),this.wat(),this.bat();var t=i(this.ampdoc.win.document,"div",{class:"aaf-bottom-div"}),n=this.yat();t.appendChild(n);var e=i(this.ampdoc.win.document,"img",{class:"aaf-fewcents-image-tag",src:this.aat.fcPoweredImageRef});t.appendChild(e),this.tat.appendChild(t),this.nat.appendChild(this.tat),this.vat=!1},n.gat=function(){var t=i(this.ampdoc.win.document,"img",{class:"aaf-imageTag",src:this.eat.publisherLogoUrl});this.tat.appendChild(t);var n=i(this.ampdoc.win.document,"div",{class:"aaf-headerText"});n.textContent=this.aat.fcTitleText,this.tat.appendChild(n)},n.wat=function(){var t=this,n=i(this.ampdoc.win.document,"a",{class:"aaf-already-bought",href:this.cat,target:"_blank",rel:"noopener noreferrer"});n.textContent=this.aat.fcPromptText,this.mat=E(n,"click",(function(n){t.Rat(n)})),this.tat.appendChild(n)},n.bat=function(){var t,n,e=this,r=i(this.ampdoc.win.document,"div",{class:"aaf-price-btn-div"});this.tat.appendChild(r);var a=i(this.ampdoc.win.document,"div",{class:"aaf-article-price"});a.textContent=null===(t=this.oat)||void 0===t||null===(n=t.price)||void 0===n?void 0:n.price,r.appendChild(a);var s=i(this.ampdoc.win.document,"div",{class:"aaf-btn-div"}),o=i(this.ampdoc.win.document,"button",{class:"aaf-purchase-button",style:"background:".concat(this.eat.primaryColor)});o.textContent=this.aat.fcButtonText,this.dat=E(o,"click",(function(t){e.Rat(t)})),s.appendChild(o),r.appendChild(s)},n.yat=function(){var t=i(this.ampdoc.win.document,"div",{class:"aaf-refRow"}),n=i(this.ampdoc.win.document,"a",{class:"aaf-refElements",href:this.aat.fcTermsRef,target:"_blank",rel:"noopener noreferrer"});n.textContent="Terms",t.appendChild(n),this.jat(t);var e=i(this.ampdoc.win.document,"a",{class:"aaf-refElements",href:this.aat.fcPrivacyRef,target:"_blank",rel:"noopener noreferrer"});e.textContent="Privacy",t.appendChild(e),this.jat(t);var r=i(this.ampdoc.win.document,"a",{class:"aaf-refElements",href:this.aat.fcContactUsRef,target:"_blank",rel:"noopener noreferrer"});return r.textContent="Contact Us",t.appendChild(r),this.jat(t),t},n.jat=function(t){var n=i(this.ampdoc.win.document,"span",{class:"aaf-partition-bar"});n.textContent="|",t.appendChild(n)},n.Rat=function(t){var n=this;return t.preventDefault(),this.oE.buildUrl(this.cat,!1).then((function(t){n.oE.loginWithUrl(t)}))},t}();t.registerServiceForDoc("fewcents",(function(t){return(n=t.getHeadNode(),R(n,"access","amp-access")).then((function(t){var n=t.getVendorSource("fewcents"),e=new _(t,n);return n.getAdapter().registerVendor(e),e}));var n}))}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-access-fewcents-0.1.js.map