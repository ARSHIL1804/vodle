;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-playbuzz",ev:"0.1",l:!0,f:function(t,e){(()=>{var{isArray:e}=Array;function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var{hasOwnProperty:o,toString:i}=Object.prototype;function s(t){return(t.ownerDocument||t).defaultView}function a(t,e,n={}){const{needsRootBounds:r,rootMargin:o,threshold:i}=n,s=function(t){return t.parent&&t.parent!=t}(e)&&(r||o)?e.document:void 0;return new e.IntersectionObserver(t,{threshold:i,root:s,rootMargin:o})}var l=new WeakMap,u=new WeakMap;function c(t){const e=new Set;for(let n=t.length-1;n>=0;n--){const r=t[n],{target:o}=r;if(e.has(o))continue;e.add(o);const i=u.get(o);if(i)for(let t=0;t<i.length;t++)(0,i[t])(r)}}var f=self.AMP_CONFIG||{},h=("string"==typeof f.thirdPartyFrameRegex?new RegExp(f.thirdPartyFrameRegex):f.thirdPartyFrameRegex,("string"==typeof f.cdnProxyRegex?new RegExp(f.cdnProxyRegex):f.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function p(t){if(!self.document||!self.document.head)return null;if(self.location&&h.test(self.location.origin))return null;const e=self.document.head.querySelector(`meta[name="${t}"]`);return e&&e.getAttribute("content")||null}function d(t){const e=Object.getOwnPropertyDescriptor(t,"message");if(null!=e&&e.writable)return t;const{message:n,stack:r}=t,o=new Error(n);for(const e in t)o[e]=t[e];return o.stack=r,o}function m(t){let e=null,n="";for(var o,i=r(arguments,!0);!(o=i()).done;){const t=o.value;t instanceof Error&&!e?e=d(t):(n&&(n+=" "),n+=t)}return e?n&&(e.message=n+": "+e.message):e=new Error(n),e}function b(t){var e,n;null===(e=(n=self).__AMP_REPORT_ERROR)||void 0===e||e.call(n,t)}function g(t){const e=m.apply(null,arguments);setTimeout((()=>{throw b(e),e}))}f.thirdPartyUrl,f.thirdPartyFrameHost,f.cdnUrl||p("runtime-host"),f.errorReportingUrl,f.betaErrorReportingUrl,f.localDev,f.geoApiUrl||p("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var A=self.__AMP_LOG;function v(t){return function(t,e){throw new Error("failed to call initLogConstructor")}()}function w(t,e,n,r,o,i,s,a,l,u,c){return t}function y(t,e,n,r,o,i,s,a,l,u,c){return(A.user||(A.user=v()),void A.user.win?A.userForEmbed||(A.userForEmbed=v()):A.user).assert(t,e,n,r,o,i,s,a,l,u,c)}function x(t,e){return E(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),e)}function z(t,e){return E(function(t){const e=_(t);return e.isSingleDoc()?e.win:e}(_(t)),e)}function _(t){return t.nodeType?(e=s(t),x(e,"ampdoc")).getAmpDoc(t):t;var e}function E(t,e){w(function(t,e){const n=t.__AMP_SERVICES&&t.__AMP_SERVICES[e];return!(!n||!n.ctor)}(t,e));const n=function(t){let e=t.__AMP_SERVICES;return e||(e=t.__AMP_SERVICES={}),e}(t)[e];return n.obj||(w(n.ctor),w(n.context),n.obj=new n.ctor(n.context),w(n.obj),n.context=null,n.resolve&&n.resolve(n.obj)),n.obj}var I,U;function O(t,e){return U||(U=self.document.createElement("a")),function(t,e,n){return t.href="",new URL(e,t.href)}(U,t)}function R(t){const e=t.indexOf("#");return-1==e?t:t.substring(0,e)}function C(t){return function(e,n,r){const o=t.createElement(e);return o.className=n,function(t,e){(e=e?Array.isArray(e)?e:[e]:[]).forEach((e=>t.appendChild(e)))}(o,r),o}}new Set(["c","v","a","ad"]);var P=class extends t.BaseElement{constructor(t){super(t),this.Mv=null,this.q3=null,this.tq=300,this.slt=!1,this.llt=!1,this.ult=!1,this.clt=!1,this.Wc=!1,this.T_=[],this.flt="",this.ij=null}preconnectCallback(){var t;(t=this.win,x(t,"preconnect")).url(this.getAmpDoc(),this.flt)}renderOutsideViewport(){return!1}buildCallback(){const t=this.element,e=t.getAttribute("src"),n=t.getAttribute("data-item");var r;y(e||n,"Either src or data-item attribute is required for <amp-playbuzz> %s",this.element),e&&(y(/^https?\:/i.test(r=e),'URL must start with "http://" or "https://". Invalid value: %s',r),O(r).href);const o=parseInt(t.getAttribute("height"),10);this.flt=function(t,e){var n;return e?"//app.ex.co/stories/item/"+e:R((n=O(t)).href).replace(n.protocol,"").replace(/(www\.)?playbuzz\.com/,"app.ex.co/stories")}(e,n),this.tq=isNaN(o)?this.tq:o,this.slt="true"===t.getAttribute("data-item-info"),this.llt="true"===t.getAttribute("data-share-buttons"),this.ult="true"===t.getAttribute("data-comments")}isLayoutSupported(t){return"responsive"===t||"fixed-height"===t}createPlaceholderCallback(){const t=this.win.document.createElement("div");return this.element.hasAttribute("aria-label")?t.setAttribute("aria-label","Loading - "+this.element.getAttribute("aria-label")):t.setAttribute("aria-label","Loading interactive element"),t.setAttribute("placeholder",""),t.appendChild(this.hlt()),t}plt(t){const e=JSON.stringify(t);this.Mv.contentWindow.postMessage(e,"*")}dlt(){const t=C(this.element.ownerDocument),e=t("div","pb-overflow");e.setAttribute("overflow","");const n=t("button");n.textContent="Show More";const r=t("img","pb-arrow-down");return r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAQCAYAAAAMJL+VAAAAm0lEQVR4AZ3ORxXCABBF0VGBAfYooaOEXp2kxwOKwg4D9E/vLS9zzt/eN3Y7V/3DEvNUtqznqXXYzALV7elcTQ7TZatMEV+9B2N9MBqPn+tpnpbXCMWfIoFKx0BymH5GOH7d1E6Iq9XfCMfnFqlgh+MRhJvxCMZJhOMosuH4l8hhy3eE4zzCcR7hOI9wHEYoDiIA5xcqb7FyBm4P6hrNHZK+MqYAAAAASUVORK5CYII=",n.appendChild(r),e.appendChild(n),e}layoutCallback(){this.ij=function(t,e,n){const r=s(t);let o=l.get(r);o||l.set(r,o=a(c,r));let i=u.get(t);return i||(i=[],u.set(t,i)),i.push(e),o.observe(t),()=>{!function(t,e){const n=u.get(t);if(!n)return;if(!function(t,e){const n=t.indexOf(e);return-1!=n&&(t.splice(n,1),!0)}(n,e))return;if(n.length)return;const r=s(t),o=l.get(r);null==o||o.unobserve(t),u.delete(t)}(t,e)}}(this.element,(({isIntersecting:t})=>this.Wc=t));const t=this.element.ownerDocument.createElement("iframe");return this.Mv=t,t.setAttribute("scrolling","no"),t.setAttribute("frameborder","0"),t.setAttribute("allowtransparency","true"),t.setAttribute("allowfullscreen","true"),t.src=this.mlt(),this.blt("resize_height",function(t,e,n){let r;return function(){const e=arguments;clearTimeout(r),r=setTimeout((()=>{r=null,t.apply(this,e)}),100)}}(this.glt.bind(this))),this.element.appendChild(this.dlt()),t.classList.add("i-amphtml-fill-content"),this.element.appendChild(t),this.q3=this.loadPromise(t).then((()=>{this.clt=!0,this.attemptChangeHeight(this.tq).catch((()=>{}));const t=this.getViewport().onChanged(this.Alt.bind(this));this.T_.push(t)}))}hlt(){const t=C(this.element.ownerDocument),e=t("img","pb_feed_anim_mask");return e.src="data:image/png;base64,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",t("div","pb_feed_placeholder_container",t("div","pb_feed_placeholder_inner",t("div","pb_feed_placeholder_content",t("div","pb_feed_placeholder_preloader",e))))}glt(t){isNaN(t)||t===this.tq||(this.tq=t,this.clt&&this.attemptChangeHeight(this.tq).catch((()=>{})))}blt(t,e){const n=function(t,e,n,r){let o=t,i=n,s=t=>{try{return i(t)}catch(t){var e,n;throw null===(e=(n=self).__AMP_REPORT_ERROR)||void 0===e||e.call(n,t),t}};const a=function(){if(void 0!==I)return I;I=!1;try{const t={get capture(){return I=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return I}();return o.addEventListener(e,s,!!a&&r),()=>{null==o||o.removeEventListener(e,s,!!a&&r),i=null,o=null,s=null}}(this.win,"message",(n=>function(t,e,n,r){t.contentWindow===e.source&&function(t,e,n){const r=function(t){if("object"==typeof t)return t;const e="error parsing json message from playbuzz item: "+t;try{if("string"==typeof t)return n=t,JSON.parse(n)}catch(t){return g("amp-playbuzz",e,t),{}}var n;return g("amp-playbuzz",e,t),{}}(function(t){return t.data}(t));r[e]&&n(r[e])}(e,n,r)}(this.Mv,n,t,e)),void 0);this.T_.push(n)}mlt(){const{canonicalUrl:t}=z(this.element,"documentInfo").get(),n=O(t);var r;return(r={itemUrl:this.flt,relativeUrl:O(this.flt).pathname,displayItemInfo:this.slt,displayShareBar:this.llt,displayComments:this.ult,parentUrl:R(n.href),parentHost:n.host}).itemUrl+"?"+function(t){const n=[];for(const s in t){let a=t[s];if(null!=a){a=e(i=a)?i:[i];for(let t=0;t<a.length;t++)n.push((r=s,o=a[t],`${encodeURIComponent(r)}=${encodeURIComponent(o)}`))}}var r,o,i;return n.join("&")}({"feed":!0,"implementation":"amp","src":r.itemUrl,"embedBy":"00000000-0000-0000-0000-000000000000","game":r.relativeUrl,"comments":void 0,"useComments":r.displayComments,"gameInfo":r.displayItemInfo,"useShares":r.displayShareBar,"socialReferrer":!1,"height":"auto","parentUrl":r.parentUrl,"parentHost":r.parentHost})}Alt(t){if(!this.Wc)return;const e={"event":"scroll","windowHeight":t.height,"scroll":t.top,"offsetTop":this.getLayoutBox().top};this.plt(e)}unlayoutOnPause(){return!0}unlayoutCallback(){var t,e,n;return null===(t=this.ij)||void 0===t||t.call(this),this.ij=null,this.T_.forEach((t=>t())),this.T_.length=0,this.Mv&&(null===(n=(e=this.Mv).parentElement)||void 0===n||n.removeChild(e),this.Mv=null,this.q3=null),!0}};t.registerElement("amp-playbuzz",P,".pb-overflow[overflow]{width:100%;height:150px;position:absolute;bottom:0;text-align:center;background:linear-gradient(180deg,hsla(0,0%,100%,0) 0%,#fff 75%)}.pb-overflow button{width:140px;height:37px;position:absolute;bottom:0;left:50%;margin-left:-70px;border-radius:4px;background-color:#fff;border:1px solid #009cff;color:#009cff;font-weight:700;font-family:Helvetica,Roboto,Arial,sans-serif;cursor:pointer}.pb-arrow-down{height:8px;margin-left:10px}.pb_feed_placeholder_container{width:100%;height:100%}.pb_feed_placeholder_container{direction:ltr}.pb_feed_placeholder_inner{position:relative;width:100%;height:100%;margin:auto}.pb_feed_placeholder_content{width:100%;height:100%;background-color:#f2f2f2;border-radius:5px}.pb_feed_placeholder_preloader{position:absolute;top:47%;left:50%;width:29px;height:38px;margin-top:-36px;margin-left:-15px;overflow:hidden;box-sizing:border-box}@media screen and (max-width:568px){.pb_feed_placeholder_preloader{top:46%}}@media screen and (min-width:569px) and (max-width:992px){.pb_feed_placeholder_preloader{top:48%}}.pb_feed_anim_mask{position:absolute;width:30px;top:0;left:0}.pb_feed_loading_text{position:absolute;font-family:arial;font-size:11px;color:#aaa;text-align:center;width:100%;top:51%;direction:ltr}\n/*# sourceURL=/extensions/amp-playbuzz/0.1/amp-playbuzz.css*/")})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-playbuzz-0.1.mjs.map