;
!function(n){var t=self.BENTO=self.BENTO||{};(t.bento=t.bento||[]).push((function(n){"use strict";function t(n,e){return(t=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,e)}function e(n){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function r(n){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function o(n,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function i(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function a(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function l(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?a(Object(e),!0).forEach((function(t){i(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function u(n,t){if(null==n)return{};var e,r,o={},i=Object.keys(n);for(r=0;r<i.length;r++)e=i[r],t.indexOf(e)>=0||(o[e]=n[e]);return o}function c(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function f(n,t){if(n){if("string"==typeof n)return c(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?c(n,t):void 0}}function s(n,t){var e="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(e)return(e=e.call(n)).next.bind(e);if(Array.isArray(n)||(e=f(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Array.isArray;var d=Object.prototype;function v(n){var t=Object.getOwnPropertyDescriptor(n,"message");if(null!=t&&t.writable)return n;var e=n.message,r=n.stack,o=new Error(e);for(var i in n)o[i]=n[i];return o.stack=r,o}function m(n){for(var t,e=null,r="",o=s(arguments,!0);!(t=o()).done;){var i=t.value;i instanceof Error&&!e?e=v(i):(r&&(r+=" "),r+=i)}return e?r&&(e.message=r+": "+e.message):e=new Error(r),e}function p(n){var t,e;null===(t=(e=self).__AMP_REPORT_ERROR)||void 0===t||t.call(e,n)}function b(n,t){try{return function(n){return JSON.parse(n)}(n)}catch(n){return null==t||t(n),null}}d.hasOwnProperty,d.toString;var h;var y="unload",g=(i(h={},"auto",0),i(h,"lazy",1),i(h,"eager",2),i(h,y,3),"loading"),w="complete",j=["allow","allowFullScreen","iframeStyle","name","title","matchesMessagingOrigin","messageHandler","ready","loading","onReadyState","sandbox","src"],S=function(){return!1},O=(0,n.forwardRef)((function(t,e){var r=t.allow,o=t.allowFullScreen,i=t.iframeStyle,a=t.name,c=t.title,f=t.matchesMessagingOrigin,s=void 0===f?S:f,d=t.messageHandler,v=t.ready,m=void 0===v||v,p=t.loading,b=t.onReadyState,h=t.sandbox,O=t.src,x=u(t,j),E=(0,n.useAmpContext)().playable,R=(0,n.useLoading)(p),A=R!==y,F=(0,n.useRef)(!1),I=(0,n.useValueRef)(b),M=(0,n.useCallback)((function(n){if(n!==F.current){F.current=n;var t=I.current;null==t||t(n?w:g)}}),[I]),z=(0,n.useRef)(null);return(0,n.useImperativeHandle)(e,(function(){return{get readyState(){return F.current?w:g},get node(){return z.current}}}),[]),(0,n.useLayoutEffect)((function(){A||M(!1)}),[A,M]),(0,n.useEffect)((function(){var n=z.current;!E&&n&&(function(n){return!(!n||"about:blank"==n||n.includes("#"))}(n.src)?n.src=n.src:n.parentNode.insertBefore(n,n.nextSibling))}),[E]),(0,n.useLayoutEffect)((function(){var n=z.current;if(n&&A){var t=function(n){var t=z.current;t&&n.source==t.contentWindow&&s(n.origin)&&d(n)},e=n.ownerDocument.defaultView;return e.addEventListener("message",t),function(){return e.removeEventListener("message",t)}}}),[s,d,A,m]),(0,n.createElement)(n.ContainWrapper,l(l({},x),{},{layout:!0,size:!0,paint:!0}),A&&m&&(0,n.createElement)("iframe",{allow:r,allowFullScreen:o,frameBorder:"0",loading:R,name:a,onLoad:function(){return M(!0)},part:"iframe",ref:z,sandbox:h,scrolling:"no",src:O,style:l(l({},i),{},{width:"100%",height:"100%",contentVisibility:"auto"}),title:c}))}));O.displayName="IframeEmbed";var x=self.AMP_CONFIG||{},E=("string"==typeof x.thirdPartyFrameRegex?new RegExp(x.thirdPartyFrameRegex):x.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,R=("string"==typeof x.cdnProxyRegex?new RegExp(x.cdnProxyRegex):x.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function A(n){if(!self.document||!self.document.head)return null;if(self.location&&R.test(self.location.origin))return null;var t=self.document.head.querySelector('meta[name="'.concat(n,'"]'));return t&&t.getAttribute("content")||null}var F={thirdParty:x.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:x.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:E,cdn:x.cdnUrl||A("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:R,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:x.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:x.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:x.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:x.geoApiUrl||A("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var I,M,z=function(){function n(n){this.St=n,this.It=0,this.Ct=0,this.Ot=Object.create(null)}var t=n.prototype;return t.has=function(n){return!!this.Ot[n]},t.get=function(n){var t=this.Ot[n];if(t)return t.access=++this.Ct,t.payload},t.put=function(n,t){this.has(n)||this.It++,this.Ot[n]={payload:t,access:this.Ct},this.Rt()},t.Rt=function(){if(!(this.It<=this.St)){var n,t=this.Ot,e=this.Ct+1;for(var r in t){var o=t[r].access;o<e&&(e=o,n=r)}void 0!==n&&(delete t[n],this.It--)}},n}();function H(n){return"".concat(F.thirdParty,"/").concat("2203281422000","/vendor/").concat(n).concat(".js")}function P(n){var t;if(n.crypto&&n.crypto.getRandomValues){var e=new Uint32Array(2);n.crypto.getRandomValues(e),t=String(e[0])+e[1]}else t=String(n.Math.random()).substr(2)+"0";return t}new Set(["c","v","a","ad"]);var $=["allow","excludeSandbox","name","messageHandler","options","sandbox","src","type","title"],B={},T="sync-xhr 'none'",k=["allow-top-navigation-by-user-activation","allow-popups-to-escape-sandbox"].join(" ")+" "+["allow-forms","allow-modals","allow-pointer-lock","allow-popups","allow-same-origin","allow-scripts"].join(" "),L=(0,n.forwardRef)((function(t,e){var r,o,i=t.allow,a=void 0===i?T:i,c=t.excludeSandbox,s=t.name,d=t.messageHandler,v=t.options,m=t.sandbox,p=void 0===m?k:m,b=t.src,h=t.type,y=t.title,g=void 0===y?h:y,w=u(t,$);if("number"!=typeof o&&(o=0),o+T.length>(r=a).length||-1===r.indexOf("sync-xhr 'none'",o))throw new Error("'allow' prop must contain \"".concat(T,'". Found "').concat(a,'".'));var j,S,x=(0,n.useRef)(null),E=(0,n.useRef)(null),R=(0,n.useMemo)((function(){var n;return B[h]||(B[h]=(n=0,function(){return String(++n)})),B[h]()}),[h]),A=(j=(0,n.useState)({name:s,src:b}),S=2,function(n){if(Array.isArray(n))return n}(j)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,o,i=[],a=!0,l=!1;try{for(e=e.call(n);!(a=(r=e.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(n){l=!0,o=n}finally{try{a||null==e.return||e.return()}finally{if(l)throw o}}return i}}(j,S)||f(j,S)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),L=A[0],N=A[1],D=L.name,G=L.src,J=(0,n.useRef)(null);return(0,n.useLayoutEffect)((function(){var n,t,e,r,o,i,a,u=null===(n=x.current)||void 0===n||null===(t=n.ownerDocument)||void 0===t?void 0:t.defaultView,c=null!=b?b:u?(o=r||"frame",(e=u).__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN=e.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN||"d-"+P(e),"https://"+e.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN+".".concat(F.thirdPartyFrameHost,"/").concat("2203281422000","/")+"".concat(o,".html")):"about:blank";if(s)N({name:s,src:c});else if(u){J.current||(J.current=function(n){for(var t=0,e=n;e&&e!=e.parent;e=e.parent)t++;return String(t)+"-"+P(n)}(u));var f=Object.assign({"location":{"href":u.location.href},"sentinel":J.current}),d=l({"title":g,"type":h,"_context":f},v);N({name:JSON.stringify({"host":(i=c,I||(I=self.document.createElement("a"),M=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new z(100))),function(n,t,e){if(e&&e.has(t))return e.get(t);n.href=t,n.protocol||(n.href=n.href);var r,o={href:n.href,protocol:n.protocol,host:n.host,hostname:n.hostname,port:"0"==n.port?"":n.port,pathname:n.pathname,search:n.search,hash:n.hash,origin:null};"/"!==o.pathname[0]&&(o.pathname="/"+o.pathname),("http:"==o.protocol&&80==o.port||"https:"==o.protocol&&443==o.port)&&(o.port="",o.host=o.hostname),r=n.origin&&"null"!=n.origin?n.origin:"data:"!=o.protocol&&o.host?o.protocol+"//"+o.host:o.href,o.origin=r;var i=o;return e&&e.put(t,i),i}(I,i,a?null:M)).hostname,"bootstrap":H(h),"type":h,"count":R,"attributes":d}),src:c})}}),[R,s,v,b,g,h]),(0,n.useEffect)((function(){var n,t=null===(n=E.current)||void 0===n?void 0:n.node;t&&t.parentNode.insertBefore(t,t.nextSibling)}),[D]),(0,n.useImperativeHandle)(e,(function(){return{get readyState(){var n;return null===(n=E.current)||void 0===n?void 0:n.readyState},get node(){var n;return null===(n=E.current)||void 0===n?void 0:n.node}}}),[]),(0,n.createElement)(O,l(l({},w),{},{allow:a,contentRef:x,messageHandler:d,name:D,ref:E,ready:!!D,sandbox:c?void 0:p,src:G,title:g}))}));L.displayName="ProxyIframeEmbed";var N=["formula","inline","onLoad","title"],D=function(){return!0},G=(0,n.forwardRef)((function(t,e){var r=t.formula,o=t.inline,i=void 0!==o&&o,a=t.onLoad,c=t.title,f=void 0===c?"MathML formula":c,s=u(t,N),d=(0,n.useValueRef)(a),v=(0,n.useCallback)((function(n){var t,e;"embed-size"==(null!==(t=b(n.data))&&void 0!==t?t:function(n){if(!function(n){return"string"==typeof n&&n.startsWith("amp-")&&-1!=n.indexOf("{")}(n))return null;var t=n.indexOf("{");return b(n.substr(t),(function(t){!function(n){var t=m.apply(null,arguments);setTimeout((function(){throw p(t),t}))}(new Error("MESSAGING: Failed to parse message: ".concat(n,"\n").concat(t.message)))}))}(n.data)).type&&(null===(e=d.current)||void 0===e||e.call(d))}),[d]),h=(0,n.useMemo)((function(){return{formula:r}}),[r]);return t.formula||(console.warn("formula is required for <BentoMathml>"),0)?(0,n.createElement)(L,l({class:i?"inline-91960b0":"",allowFullscreen:!0,ref:e,type:"mathml",title:f,options:h,matchesMessagingOrigin:D,messageHandler:v},s)):null}));G.displayName="BentoMathml";var J=function(n){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&t(n,e)}(l,n);var r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}(),function(){var n,t=e(r);if(i){var a=e(this).constructor;n=Reflect.construct(t,arguments,a)}else n=t.apply(this,arguments);return o(this,n)});function l(){return a.apply(this,arguments)}return l}(n.PreactBaseElement);J.Component=G,J.props={"inline":{attr:"inline",type:"boolean",default:!1},"formula":{attr:"data-formula"},"title":{attr:"title"}},J.layoutSizeDefined=!0,J.usesShadowDom=!0,J.shadowCss=".inline-91960b0{display:inline-block;vertical-align:middle}",(0,n.defineBentoElement)("bento-mathml",J,undefined)}))}();
//# sourceMappingURL=bento-mathml-1.0.js.map