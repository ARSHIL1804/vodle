;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-story-captions",ev:"0.1",l:!0,f:function(t,s){(()=>{function s(t){return t?Array.prototype.slice.call(t):[]}var n,{hasOwnProperty:i,toString:e}=Object.prototype,r=self.AMP_CONFIG||{},l=("string"==typeof r.thirdPartyFrameRegex?new RegExp(r.thirdPartyFrameRegex):r.thirdPartyFrameRegex,("string"==typeof r.cdnProxyRegex?new RegExp(r.cdnProxyRegex):r.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function o(t){if(!self.document||!self.document.head)return null;if(self.location&&l.test(self.location.origin))return null;const s=self.document.head.querySelector(`meta[name="${t}"]`);return s&&s.getAttribute("content")||null}function u(t,s,i,e){return function(t,s,i,e){let r=t,l=i,o=t=>{try{return l(t)}catch(t){var s,n;throw null===(s=(n=self).__AMP_REPORT_ERROR)||void 0===s||s.call(n,t),t}};const u=function(){if(void 0!==n)return n;n=!1;try{const t={get capture(){return n=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return n}(),h=!(null==e||!e.capture);return r.addEventListener(s,o,u?e:h),()=>{null==r||r.removeEventListener(s,o,u?e:h),l=null,r=null,o=null}}(t,s,i,e)}r.thirdPartyUrl,r.thirdPartyFrameHost,r.cdnUrl||o("runtime-host"),r.errorReportingUrl,r.betaErrorReportingUrl,r.localDev,r.geoApiUrl||o("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var h=class extends t.BaseElement{constructor(t){super(t),this.cf=null,this.BP=null,this.Qft=null,this.Xft=[]}buildCallback(){this.cf=this.element.ownerDocument.createElement("div"),this.element.appendChild(this.cf)}isLayoutSupported(t){return function(t){return"fixed"==t||"fixed-height"==t||"responsive"==t||"fill"==t||"flex-item"==t||"fluid"==t||"intrinsic"==t}(t)||"container"===t}setVideoElement(t){this.Qft&&this.Qft(),this.BP=t,this.udt(),this.Qft=u(t.textTracks,"change",(()=>{this.udt()}))}udt(){for(;this.Xft.length;)this.Xft.pop().dispose();s(this.BP.textTracks).forEach((t=>{"showing"!==t.mode&&"hidden"!==t.mode||(t.mode="hidden",this.Xft.push(new class{constructor(t,s,n){this.BP=t,this.fdt=s,this.yf=n.ownerDocument.createElement("div"),n.appendChild(this.yf),this.ydt=[],this.Co(),this.vdt=u(s,"cuechange",(()=>{this.Co()})),this.gdt=u(t,"timeupdate",(()=>{this.Yht()}))}dispose(){var t,s;this.vdt(),this.gdt(),null===(s=(t=this.yf).parentElement)||void 0===s||s.removeChild(t),this.BP=null,this.fdt=null}Co(){!function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}(this.yf),this.ydt.length=0,s(this.fdt.activeCues).forEach((t=>{const n=this.yf.ownerDocument.createElement("div"),i=t.getCueAsHTML();let e=this.yf.ownerDocument.createElement("span");n.appendChild(e);const r=[];s(i.childNodes).forEach((t=>{if("timestamp"===t.target){const s=function(t){const s=/^(?:(\d{2,}):)?(\d{2}):(\d{2})\.(\d{3})$/.exec(t);return s?3600*(s[1]?parseInt(s[1],10):0)+60*parseInt(s[2],10)+parseInt(s[3],10)+parseInt(s[4],10)/1e3:null}(t.data);null!==s&&(r.push(s),e=this.yf.ownerDocument.createElement("span"),n.appendChild(e))}else e.appendChild(t)})),this.ydt.push(r),this.yf.appendChild(n)})),this.Yht()}Yht(){const t=this.BP.currentTime;s(this.yf.childNodes).forEach(((n,i)=>{s(n.childNodes).forEach(((s,n)=>{n>0&&s.classList.toggle("amp-story-captions-future",this.ydt[i][n-1]>t)}))}))}}(this.BP,t,this.cf)))}))}};t.registerElement("amp-story-captions",h,"amp-story-captions{white-space:pre-wrap}.amp-story-captions-future{color:gray}\n/*# sourceURL=/extensions/amp-story-captions/0.1/amp-story-captions.css*/")})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-story-captions-0.1.mjs.map