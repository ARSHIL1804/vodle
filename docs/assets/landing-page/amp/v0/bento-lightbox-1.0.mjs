;
var{isArray:t}=Array;function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function e(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var{hasOwnProperty:i,toString:o}=Object.prototype;function r(t,n,e){const i=t.hasAttribute(n),o=void 0!==e?e:!i;return o!==i&&(o?t.setAttribute(n,""):t.removeAttribute(n)),o}function s(t){const n=Object.getOwnPropertyDescriptor(t,"message");if(null!=n&&n.writable)return t;const{message:e,stack:i}=t,o=new Error(e);for(const n in t)o[n]=t[n];return o.stack=i,o}function a(t){let n=null,i="";for(var o,r=e(arguments,!0);!(o=r()).done;){const t=o.value;t instanceof Error&&!n?n=s(t):(i&&(i+=" "),i+=t)}return n?i&&(n.message=i+": "+n.message):n=new Error(i),n}function l(t){var n,e;null===(n=(e=self).__AMP_REPORT_ERROR)||void 0===n||n.call(e,t)}function c(t,...n){try{return t.apply(null,n)}catch(t){!function(t){const n=a.apply(null,arguments);setTimeout((()=>{throw l(n),n}))}(t)}}var f,u=t=>t.unmount();function b(t,n,e,i){if(n&&t.classList.contains("i-amphtml-element")){const n=t;if(c(i,n),!e){const t=n.getPlaceholder();return void(t&&b(t,!0,!1,i))}}const o=t.getElementsByClassName("i-amphtml-element");let r=null;for(let t=0;t<o.length;t++){const n=o[t];if(e)c(i,n);else{r=r||[];let t=!1;for(let e=0;e<r.length;e++)if(r[e].contains(n)){t=!0;break}t||(r.push(n),c(i,n))}}}var p=["Webkit","webkit","Moz","moz","ms","O","o"];function v(t,n,e,i,o){const r=function(t,n,e){if(n.startsWith("--"))return n;f||(f=Object.create(null));let i=f[n];if(!i||e){if(i=n,void 0===t[n]){const e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),o=function(t,n){for(let e=0;e<p.length;e++){const i=p[e]+n;if(void 0!==t[i])return i}return""}(t,e);void 0!==t[o]&&(i=o)}e||(f[n]=i)}return i}(t.style,n,o);if(!r)return;const s=i?e+i:e;t.style.setProperty(function(t){const n=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return p.some((t=>n.startsWith(t+"-")))?`-${n}`:n}(r),s)}function d(t,n){void 0===n&&(n=t.hasAttribute("hidden")),n?t.removeAttribute("hidden"):t.setAttribute("hidden","")}import{PreactBaseElement as m}from"../bento.mjs";function h(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function y(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,i)}return e}import{createElement as O}from"../bento.mjs";import{useImperativeHandle as j,useLayoutEffect as g,useRef as w,useState as A}from"../bento.mjs";import{forwardRef as C}from"../bento.mjs";import{ContainWrapper as x,useValueRef as k}from"../bento.mjs";var B=["animation","children","closeButtonAs","onAfterClose","onAfterOpen","onBeforeOpen"],z={"fade-in":[{opacity:0,visibility:"visible"},{opacity:1,visibility:"visible"}],"fly-in-top":[{opacity:0,transform:"translate(0,-100%)",visibility:"visible"},{opacity:1,transform:"translate(0, 0)",visibility:"visible"}],"fly-in-bottom":[{opacity:0,transform:"translate(0, 100%)",visibility:"visible"},{opacity:1,transform:"translate(0, 0)",visibility:"visible"}]},E={"part":"scroller"},S=C((function(t,n){let{animation:e="fade-in",children:i,closeButtonAs:o,onAfterClose:r,onAfterOpen:s,onBeforeOpen:a}=t,l=function(t,n){if(null==t)return{};var e,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)e=r[i],n.indexOf(e)>=0||(o[e]=t[e]);return o}(t,B);const[c,f]=A(!1),[u,b]=A(!1),p=w(),d=k(e),m=k(a),C=k(r),S=k(s);return j(n,(()=>({open:()=>{var t;null===(t=m.current)||void 0===t||t.call(m),f(!0),b(!0)},close:()=>b(!1)})),[m]),g((()=>{const t=p.current;if(!t)return;let n;if(v(t,"visibility",u?"hidden":"visible"),u){const e=()=>{var n;v(t,"opacity",1),v(t,"visibility","visible"),function(t){try{t.focus()}catch(t){}}(t),null===(n=S.current)||void 0===n||n.call(S)};if(!t.animate)return void e();n=t.animate(z[d.current],{duration:200,fill:"both",easing:"ease-in"}),n.onfinish=e}else{const e=()=>{v(t,"opacity",0),v(t,"visibility","hidden"),C.current&&C.current(),n=null,f(!1)};if(!t.animate)return void e();n=t.animate(z[d.current],{duration:200,direction:"reverse",fill:"both",easing:"ease-in"}),n.onfinish=e}return()=>{n&&n.cancel()}}),[u,d,C,S]),c&&O(x,function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?y(Object(e),!0).forEach((function(n){h(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):y(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}({ref:p,size:!0,layout:!0,paint:!0,part:"lightbox",contentClassName:"content-213f9e3",wrapperClassName:"wrapper-213f9e3",contentProps:E,role:"dialog",tabindex:"0",onKeyDown:t=>{"Escape"===t.key&&b(!1)}},l),O(I,{as:o,onClick:()=>b(!1)}),i)}));function I({onClick:t,as:n=M}){return O(n,{"aria-label":"Close the modal",onClick:t})}function M({"aria-label":t,onClick:n}){return O("button",{"aria-label":t,class:"close-button-213f9e3",onClick:n,tabindex:-1})}S.displayName="Lightbox";var N=class extends m{constructor(t){super(t),this.s$=!1}init(){return{"onBeforeOpen":()=>this.beforeOpen(),"onAfterOpen":()=>this.afterOpen(),"onAfterClose":()=>this.afterClose()}}beforeOpen(){this.s$=!0,r(this.element,"open",!0),d(this.element,!0),this.triggerEvent(this.element,"open")}afterOpen(){}afterClose(){this.s$=!1,r(this.element,"open",!1),d(this.element,!1),this.triggerEvent(this.element,"close"),function(n,e=!0){!function(n,e,i,o){const r=t(s=n)?s:[s];var s;for(let t=0;t<r.length;t++)b(r[t],e,!0,o)}(n,e,0,u)}(this.element,!1)}mutationObserverCallback(){const t=this.element.hasAttribute("open");t!==this.s$&&(this.s$=t,t?this.api().open():this.api().close())}};N.Component=S,N.props={"animation":{attr:"animation",media:!0,default:"fade-in"},"closeButtonAs":{selector:'[slot="close-button"]',single:!0,as:!0},"children":{passthrough:!0}},N.usesShadowDom=!0,N.shadowCss=".close-button-213f9e3{top:0;left:0;width:2px;border:none;height:2px;margin:0;display:block;opacity:0;padding:0;overflow:hidden;position:fixed;visibility:visible}.wrapper-213f9e3{top:0;left:0;color:#fff;right:0;width:100%;bottom:0;height:100%;z-index:1000;position:fixed;box-sizing:border-box;background-color:rgba(0,0,0,0.9)}.content-213f9e3{overflow:auto!important;-ms-scroll-chaining:none!important;overscroll-behavior:none!important}";import{defineBentoElement as P}from"../bento.mjs";P("bento-lightbox",N,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-lightbox-1.0.mjs.map