;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-apester-media",ev:"0.1",l:!0,f:function(t,n){(()=>{var{isArray:n}=Array;function e(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function i(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var{hasOwnProperty:r,toString:o}=Object.prototype;function s(t,n){return r.call(t,n)}function a(t,n){if("."==n)return t;let e=t;for(var r,o=i(n.split("."),!0);!(r=o()).done;){const t=r.value;if(!(t&&e&&void 0!==e[t]&&"object"==typeof e&&s(e,t))){e=void 0;break}e=e[t]}return e}function l(t,n){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null==n||n(t),null}}function c(t){return(t.ownerDocument||t).defaultView}function u(t){var n;null===(n=t.parentElement)||void 0===n||n.removeChild(t)}function p(t,n,e){return function(t,n){for(const e in n)t.setAttribute(e,n[e]);return t}(t.createElement(n),e)}function h(t){const n=parseFloat(t);return"number"==typeof(e=n)&&isFinite(e)?n:void 0;var e}function f(t,n,e={}){const{needsRootBounds:i,rootMargin:r,threshold:o}=e,s=function(t){return t.parent&&t.parent!=t}(n)&&(i||r)?n.document:void 0;return new n.IntersectionObserver(t,{threshold:o,root:s,rootMargin:r})}var d,m=new WeakMap,v=new WeakMap;function b(t){const n=new Set;for(let e=t.length-1;e>=0;e--){const i=t[e],{target:r}=i;if(n.has(r))continue;n.add(r);const o=v.get(r);if(o)for(let t=0;t<o.length;t++)(0,o[t])(i)}}function g(t){const n=Object.getOwnPropertyDescriptor(t,"message");if(null!=n&&n.writable)return t;const{message:e,stack:i}=t,r=new Error(e);for(const n in t)r[n]=t[n];return r.stack=i,r}function w(t){let n=null,e="";for(var r,o=i(arguments,!0);!(r=o()).done;){const t=r.value;t instanceof Error&&!n?n=g(t):(e&&(e+=" "),e+=t)}return n?e&&(n.message=e+": "+n.message):n=new Error(e),n}function y(t){var n,e;null===(n=(e=self).__AMP_REPORT_ERROR)||void 0===n||n.call(e,t)}var k=["Webkit","webkit","Moz","moz","ms","O","o"];function _(t,n,e,i,r){const o=function(t,n,e){if(n.startsWith("--"))return n;d||(d=Object.create(null));let i=d[n];if(!i||e){if(i=n,void 0===t[n]){const e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),r=function(t,n){for(let e=0;e<k.length;e++){const i=k[e]+n;if(void 0!==t[i])return i}return""}(t,e);void 0!==t[r]&&(i=r)}e||(d[n]=i)}return i}(t.style,n,r);if(!o)return;const s=i?e+i:e;t.style.setProperty(function(t){const n=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return k.some((t=>n.startsWith(t+"-")))?`-${n}`:n}(o),s)}function x(t,n){for(const e in n)_(t,e,n[e])}function A(t){return`${t}px`}var P=self.AMP_CONFIG||{},$=("string"==typeof P.thirdPartyFrameRegex?new RegExp(P.thirdPartyFrameRegex):P.thirdPartyFrameRegex,("string"==typeof P.cdnProxyRegex?new RegExp(P.cdnProxyRegex):P.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function I(t){if(!self.document||!self.document.head)return null;if(self.location&&$.test(self.location.origin))return null;const n=self.document.head.querySelector(`meta[name="${t}"]`);return n&&n.getAttribute("content")||null}P.thirdPartyUrl,P.thirdPartyFrameHost,P.cdnUrl||I("runtime-host"),P.errorReportingUrl,P.betaErrorReportingUrl,P.localDev,P.geoApiUrl||I("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var M,E=self.__AMP_LOG;function O(t,n){throw new Error("failed to call initLogConstructor")}function R(t){return E.user||(E.user=z()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(E.user.win,t)?E.userForEmbed||(E.userForEmbed=z()):E.user}function z(t){return O()}function j(){return E.dev||(E.dev=O())}function S(t,n,e,i,r,o,s,a,l,c,u){return t}function T(t,n){return q(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function C(t,n){return q(D(V(t)),n)}function L(t,n){return function(t,n){const e=F(t,n);if(e)return e;const i=N(t);return i[n]=function(){const t=new class{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}},{promise:n,reject:e,resolve:i}=t;return n.catch((()=>{})),{obj:null,promise:n,resolve:i,reject:e,context:null,ctor:null}}(),i[n].promise}(D(t),n)}function U(t,n){return F(D(t),n)}function V(t){return t.nodeType?(n=c(t),T(n,"ampdoc")).getAmpDoc(t):t;var n}function D(t){const n=V(t);return n.isSingleDoc()?n.win:n}function q(t,n){S(function(t,n){const e=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!e||!e.ctor)}(t,n));const e=N(t)[n];return e.obj||(S(e.ctor),S(e.context),e.obj=new e.ctor(e.context),S(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}function F(t,n){const e=N(t)[n];return e?e.promise?e.promise:(q(t,n),e.promise=Promise.resolve(e.obj)):null}function N(t){let n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}var W,J,B=t=>C(t,"documentInfo").get(),G=t=>T(t,"extensions"),Z=t=>C(t,"mutator"),H=t=>function(t,n,e,i){const r=U(t,n);if(r)return r;const o=V(t);return o.whenExtensionsKnown().then((()=>{const t=o.getExtensionVersion(e);return t?T(o.win,"extensions").waitForExtension(e,t):null})).then((e=>e?i?U(t,n):L(t,n):null))}(t,"consentPolicyManager","amp-consent");function X(t){return"string"==typeof t&&t.startsWith("amp-")&&-1!=t.indexOf("{")}function K(t){return t.data}function Q(t,e){return function(t,n,e){if(!n)return t;const i=t.split("#",2),r=i[0].split("?",2);let o=r[0]+(r[1]?`?${r[1]}&${n}`:`?${n}`);return o+=i[1]?`#${i[1]}`:"",o}(t,function(t){const e=[];for(const s in t){let a=t[s];if(null!=a){a=n(o=a)?o:[o];for(let t=0;t<a.length;t++)e.push((i=s,r=a[t],`${encodeURIComponent(i)}=${encodeURIComponent(r)}`))}}var i,r,o;return e.join("&")}(e))}new Set(["c","v","a","ad"]);var Y="unlisten";function tt(t,n,e){const i=function(t,n){let{listeningFors:e}=t;return!e&&n&&(e=t.listeningFors=Object.create(null)),e||null}(t,e);if(!i)return i;let r=i[n];return!r&&e&&(r=i[n]=[]),r||null}function nt(t,n){for(let e=n;e&&e!=e.parent;e=e.parent)if(e==t)return!0;return!1}function et(t){const n={"sentinel":Y};for(let e=t.length-1;e>=0;e--){const i=t[e];if(!i.frame.contentWindow){t.splice(e,1);const{events:r}=i;for(const t in r)r[t].splice(0,1/0).forEach((t=>{t(n)}))}}}function it(t,n,e,i,r,o){S(t.src),S(!t.parentNode),S(e);const s=t.ownerDocument.defaultView;!function(t){t.listeningFors||t.addEventListener("message",(function(n){if(!K(n))return;const e=function(t){return"string"==typeof t&&(t="{"==t.charAt(0)?l(t,(t=>{}))||null:X(t)?function(t){if(!X(t))return null;const n=t.indexOf("{");return l(t.substr(n),(n=>{!function(t){const n=w.apply(null,arguments);setTimeout((()=>{throw y(n),n}))}(new Error(`MESSAGING: Failed to parse message: ${t}\n${n.message}`))}))}(t):null),t}(K(n));if(!e||!e.sentinel)return;const i=function(t,n,e,i){const r=tt(t,n);if(!r)return r;let o;for(let t=0;t<r.length;t++){const n=r[t],{contentWindow:e}=n.frame;if(e){if(i==e||nt(e,i)){o=n;break}}else setTimeout(et,0,r)}return o?o.events:null}(t,e.sentinel,n.origin,n.source);if(!i)return;let r=i[e.type];if(r){r=r.slice();for(let t=0;t<r.length;t++)(0,r[t])(e,n.source,n.origin,n)}}))}(s);const a=function(t,n,e){const i=tt(t,rt(n,e),!0);let r;for(let t=0;t<i.length;t++){const e=i[t];if(e.frame===n){r=e;break}}return r||(r={frame:n,events:Object.create(null)},i.push(r)),r.events}(s,t,i),c=(u=t.src,J||(J=self.document.createElement("a")),function(t,n,e){return t.href="",new URL(n,t.href)}(J,u)).origin;var u;let p,h=a[n]||(a[n]=[]),f=function(n,i,s,a){if("amp"==n.sentinel){if(i!=t.contentWindow)return;const n="null"==s&&o;if(c!=s&&!n)return}(r||i==t.contentWindow)&&(n.sentinel!=Y?e(n,i,s,a):p())};return h.push(f),p=function(){if(f){const t=h.indexOf(f);t>-1&&h.splice(t,1),f=null,h=null,e=null}}}function rt(t,n){return n?t.getAttribute("data-amp-3p-sentinel"):"amp"}var ot=[0,.05,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95,1];function st(t){return{"time":t.time,"rootBounds":t.rootBounds,"boundingClientRect":t.boundingClientRect,"intersectionRect":t.intersectionRect,"intersectionRatio":t.intersectionRatio}}function at(t){const n=t.clientWidth;return{width:n,height:Math.ceil(.6*n)}}Date.now();var lt="amp-apester-media";var ct=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig");function ut(){const t=!!navigator.userAgent.match(ct);return function(){const t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}()?"mobile"+(t?"-webview":""):"desktop"}function pt(t,n){const e=function(t){const n=t&&t.getAttribute("data-apester-tags");return n&&n.split(",").map((t=>t.trim()))||[]}(n)||[],i=function(t){return(t.getMetaByName("keywords")||"").split(",").map((t=>t.trim())).filter(Boolean)}(t);return e.concat(i.length?i:(r=t.getRootNode(),((o=r.querySelectorAll('script[type="application/ld+json"]'))?Array.prototype.slice.call(o):[]).map((t=>{return t&&"SCRIPT"==(n=t).tagName&&"APPLICATION/LD+JSON"==(null===(e=n.getAttribute("type"))||void 0===e?void 0:e.toUpperCase())&&l(t.textContent)||{};var n,e})).map((t=>t&&t.headline)).filter((t=>"string"==typeof t)).map((t=>t.trim().split(" ").filter((t=>t.length>2)))).reduce(((t,n)=>t.concat(n)),[]).slice(0,5)||[])).map((t=>t.toLowerCase().trim())).filter(((t,n,e)=>e.indexOf(t)===n));var r,o}function ht(t,n,e,i,r){const o=function(e,r,o,s){let a=e,l=e=>{const r=i.contentWindow===e.source;K(e).type===t&&r&&n(K(e))},c=t=>{try{return l(t)}catch(t){var n,e;throw null===(n=(e=self).__AMP_REPORT_ERROR)||void 0===n||n.call(e,t),t}};const u=function(){if(void 0!==W)return W;W=!1;try{const t={get capture(){return W=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return W}();return a.addEventListener(r,c,!!u&&s),()=>{null==a||a.removeEventListener(r,c,!!u&&s),l=null,a=null,c=null}}(e,"message",0,void 0);r.push(o)}var ft="amp-apester-media",dt={"type":"has_bottom_ad","adHeight":50},mt=class extends t.BaseElement{constructor(t){super(t),this.w9="https://renderer.apester.com",this.y9="https://display.apester.com",this.k9="https://static.qmerce.com",this.I9="https://static.apester.com/js/assets/loader_100x100.gif",this.yx=!1,this.Mv=null,this.wv=null,this.M9=null,this.E9=null,this.O9=!1,this.R9=!1,this.z9=null,this.j9={},this.Qv=null,this.T_=[],this.Sv=null,this.ij=null}preconnectCallback(t){const n=T(this.win,"preconnect");n.url(this.getAmpDoc(),this.y9,t),n.url(this.getAmpDoc(),this.w9,t),n.url(this.getAmpDoc(),this.k9,t)}isLayoutSupported(t){return function(t){return"fixed"==t||"fixed-height"==t||"responsive"==t||"fill"==t||"flex-item"==t||"fluid"==t||"intrinsic"==t}(t)}sj(t){t&&!this.yx&&this.Mv&&this.Mv.contentWindow&&(this.yx=!0,this.Mv.contentWindow.postMessage("interaction seen","*"))}buildCallback(){const t=this.element.getAttribute("width"),n=this.element.getAttribute("height");var e,i,r,o,s,a,l,c,u,p,f;this.M9=h(t),this.E9=h(n),this.O9=this.element.hasAttribute("data-apester-channel-token"),this.z9=(e=this.element.getAttribute("data-apester-media-id")||this.element.getAttribute("data-apester-channel-token"),i="Either the data-apester-media-id or the data-apester-channel-token attributes must be specified for <amp-apester-media> %s",r=this.element,R().assert(e,i,r,o,s,a,l,c,u,p,f)),this.j9={playlist:this.O9,idOrToken:this.z9,inative:"true"===this.element.getAttribute("data-apester-inative"),fallback:this.element.getAttribute("data-apester-fallback"),distributionChannelId:this.element.getAttribute("data-apester-channel-id"),renderer:!0,tags:pt(this.getAmpDoc(),this.element)}}S9(){const{distributionChannelId:t,fallback:n,idOrToken:e,inative:i,playlist:r,tags:o}=this.j9,s=encodeURIComponent(this.z9);let a="";const l={renderer:!1};return l.platform=ut(),i?e?a=`/inatives/${e}`:t&&(a=`/channels/${t}/inatives`):r&&o?(a=`/tokens/${s}/interactions/random`,l.tags=o,l.fallback=!!n):a=r?`/tokens/${s}/interactions/random`:`/interactions/${s}/display`,Q(`${this.y9}${a}`,l)}T9(){const t=this.S9();return(n=this.win,T(n,"xhr")).fetchJson(t,{}).then((t=>200===t.status?t.json():t));var n}C9(t,n){const e={};return e.channelId=this.j9.distributionChannelId,e.type=this.j9.playlist?"playlist":"editorial",e.platform=ut(),e.cannonicalUrl=B(this.element).canonicalUrl,e.sdk="amp",Q(`${this.w9}/${n?"v2":"interaction"}/${encodeURIComponent(t)}`,e)}L9(t){const n=this.element.ownerDocument.createElement("iframe");return n.setAttribute("frameborder","0"),n.setAttribute("allowtransparency","true"),n.setAttribute("scrolling","no"),n.src=t,n.name=this.win.location.href,n.height=this.E9,n.width=this.M9,n.classList.add("amp-apester-iframe"),n.classList.add("i-amphtml-fill-content"),n}U9(){const t=this.element.ownerDocument.createElement("img");return t.setAttribute("loading","lazy"),t.setAttribute("src",this.I9),x(t,{"width":A(100),"height":A(100)}),t}V9(){const t=this.element.ownerDocument.createElement("div");t.setAttribute("overflow",""),t.className="amp-apester-overflow";const n=this.element.ownerDocument.createElement("button");return n.textContent="Full Size",t.appendChild(n),t}layoutCallback(){this.element.classList.add("amp-apester-container");const t=T(this.win,"vsync");return this.T9().then((n=>{if(!n||204===n.status)return this.unlayoutCallback();const e=n.payload,i=this.j9.playlist?e[Math.floor(Math.random()*e.length)]:e,r=i.interactionId,o=i.usePlayer,s=this.C9(r,o),l=this.L9(s);return this.Sv=new class{constructor(t,n){this.Nv=t,this.Gv=null,this.$v=new class{constructor(t,n,e,i){this.Mv=t,this.Dv=e,this.Fv=[],this.Wv=it(this.Mv,n,((t,n,e)=>{this.Fv.some((t=>t.win==n))||this.Fv.push({win:n,origin:e}),i(t,n,e)}),this.Dv,this.Dv)}send(t,n){(function(t,n){const e=[];let i=0;for(let n=0;n<t.length;n++){const r=t[n];r.win.parent?(i<n&&(t[i]=r),i++):e.push(r)}i<t.length&&(t.length=i)})(this.Fv),function(t,n,e,i,r){if(!t.contentWindow)return;i.type=e,i.sentinel=rt(t,r);let o=i;r&&(o="amp-"+JSON.stringify(i));for(let t=0;t<n.length;t++){const e=n[t];e.win.postMessage(o,e.origin)}}(this.Mv,this.Fv,t,n,this.Dv)}destroy(){this.Wv(),this.Fv.length=0}}(n,"send-intersections",!1,(()=>{this.Uv()})),this.Gv=new IntersectionObserver((t=>{this.$v.send("intersection",{"changes":t.map(st)})}),{threshold:ot})}Uv(){this.Gv.observe(this.Nv.element)}destroy(){this.Gv.disconnect(),this.Gv=null,this.$v.destroy(),this.$v=null}}(this,l),this.Qv=r,this.Mv=l,this.D9(),t.mutatePromise((()=>{const t=this.V9();this.element.appendChild(t),this.element.appendChild(l),function(t,n){const e=t.campaignData;e&&!e.disabledAmpCompanionAds?function(t){const n=function(t,n="default"){return H(t).then((t=>t?t.whenPolicyResolved(n):null))}(t).catch((t=>(j().error(lt,"Error determining consent state",t),4))),e=function(t,n="default"){return H(t).then((t=>t?t.getConsentStringInfo(n):null))}(t,"default").catch((t=>{j().error(lt,"Error determining consent string",t)})),i=Promise.all([n,e]);return Promise.race([i,new Promise((t=>{setTimeout((()=>{t([4,void 0])}),3e3)}))]).then((t=>{const n=t[0],e=t[1];switch(n){case 1:return{"gdpr":1,"user_consent":1,"gdprString":e};case 2:case 4:return{"gdpr":1,"user_consent":0,"gdprString":e};default:return{}}}))}(n).then((e=>{(function(t,n){const e=a(t,"campaignData.companionOptions");if(!e)return;const i=a(e,"enabled"),r=a(e,"settings");if(i&&r&&"gdt"===r.bannerAdProvider){const t=r.slot,e=6e4===r.options.autoRefreshTime?60:30,i=[[300,250]];!function(t,n,e,i){const r=Math.max.apply(null,n.map((t=>t[0]))),o=Math.max.apply(null,n.map((t=>t[1]))),s=n.map((t=>t.join("x"))).join(),a=p(e.ownerDocument,"amp-ad",{"width":`${r}`,"height":"0","type":"doubleclick","layout":"fixed","data-slot":`${t}`,"data-multi-size-validation":"false","data-multi-size":s,"data-enable-refresh":`${i}`});a.classList.add("i-amphtml-amp-apester-companion"),e.parentNode.insertBefore(a,e.nextSibling),Z(e).requestChangeSize(a,o,void 0)}(t,r.bannerSizes||i,n,e)}})(t,n),function(t,n,e){const i=a(t,"campaignData.companionCampaignOptions"),r=a(t,"campaignData.companionOptions.video"),o=(s=r)?s.companion.enabled?"above":s.companion_below.enabled?"below":s.floating.enabled?"floating":null:null;var s;if(r&&r.enabled&&o&&"floating"!==o)switch(r.provider){case"sr":{const s=null==i?void 0:i.companionCampaignId,{videoTag:a}=r;if(!s||!a)return;const l=function(t,n,e,i){const r=t.interactionId,o=t.publisherId,s=t.publisher,a={"param1":r,"param2":o,"param6":n,"page_url":B(e).canonicalUrl};return i.gdpr&&(a.gdpr=i.gdpr,a.user_consent=i.user_consent,a.param4=i.gdprString),s&&s.groupId&&(a.param7=`apester.com:${s.groupId}`,a.schain=`1.0,1!apester.com,${s.groupId},1,,,,`),a}(t,s,n,e);!function(t,n,e,i){const r=at(i),o=p(i.ownerDocument,"amp-ad",{"width":r.width,"height":r.height,"type":"blade","layout":"fixed","data-blade_player_type":"bladex","servingDomain":"ssr.streamrail.net","data-blade_macros":JSON.stringify(e),"data-blade_player_id":t,"data-blade_api_key":"5857d2ee263dc90002000001","data-enable-refresh":"30"});o.classList.add("i-amphtml-amp-apester-companion");const s="below"===n?i.nextSibling:i;i.parentNode.insertBefore(o,s),Z(i).requestChangeSize(o,r.height)}(a,o,l,n);break}case"aniview":{const{playerOptions:t={}}=r;if(!t.aniviewChannelId)return;!function(t,n,e,i){const r=at(e),o=p(e.ownerDocument,"amp-ad",{"width":r.width,"height":r.height,"type":"aniview","data-publisherid":"5fabb425e5d4cb4bbc0ca7e4","data-channelid":t.aniviewChannelId,"data-enable-refresh":"30"});i.gdpr&&(o["data-av_gdpr"]=i.gdpr,o["data-av_consent"]=i.user_consent),o.classList.add("i-amphtml-amp-apester-companion");const s="below"===n?e.nextSibling:e;e.parentNode.insertBefore(o,s),Z(e).requestChangeSize(o,r.height)}(t,o,n,e);break}}}(t,n,e),function(t,n){const e=a(t,"campaignData.bottomAdOptions");e&&a(e,"enabled")&&"gpt"===e.videoPlayer&&function(t,n,e){const i=n[0][0],r=n[0][1],o=p(e.ownerDocument,"amp-ad",{"width":`${i}`,"height":`${r}`,"type":"doubleclick","layout":"fixed","data-slot":`${t}`,"data-multi-size-validation":"false","data-enable-refresh":"30"});o.classList.add("i-amphtml-amp-apester-bottom-ad"),e.appendChild(o),Z(e).requestChangeSize(o,r)}(e.tag,[[300,50]],n)}(t,n)})):M||(M=Promise.resolve(void 0))}(i,this.element)})).then((()=>this.loadPromise(l))).then((()=>t.mutatePromise((()=>{var t,n,e;if(this.Mv){this.Mv.classList.add("i-amphtml-apester-iframe-ready");const t=i.campaignData;if(t){const n=t.bottomAdOptions;if(null!=n&&n.enabled){this.R9=!0;const t=this.getAmpDoc();G(this.win).installExtensionForDoc(t,"amp-ad"),this.Mv.contentWindow.postMessage(dt,"*")}this.Mv.contentWindow.postMessage({type:"campaigns",data:t},"*")}}const r=null!==(t=null==i||null===(n=i.data)||void 0===n||null===(e=n.size)||void 0===e?void 0:e.height)&&void 0!==t?t:0;r!=this.E9&&(this.E9=r,this.O9?this.attemptChangeHeight(r):this.forceChangeHeight(r))})))).then((()=>{this.ij=function(t,n,e){const i=c(t);let r=m.get(i);r||m.set(i,r=f(b,i));let o=v.get(t);return o||(o=[],v.set(t,o)),o.push(n),r.observe(t),()=>{!function(t,n){const e=v.get(t);if(!e)return;if(!function(t,n){const e=t.indexOf(n);return-1!=e&&(t.splice(e,1),!0)}(e,n))return;if(e.length)return;const i=c(t),r=m.get(i);null==r||r.unobserve(t),v.delete(t)}(t,n)}}(this.element,(({isIntersecting:t})=>this.sj(t)))}))})).catch((t=>{R().error(ft,"Display",t)}))}createPlaceholderCallback(){const t=this.element.ownerDocument.createElement("div"),n=this.U9();return this.element.hasAttribute("aria-label")?t.setAttribute("aria-label","Loading - "+this.element.getAttribute("aria-label")):t.setAttribute("aria-label","Loading Apester Media"),t.setAttribute("placeholder",""),t.className="amp-apester-loader",x(n,{position:"relative",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),t.appendChild(n),this.wv=t,t}unlayoutOnPause(){return!0}unlayoutCallback(){var t;return null===(t=this.ij)||void 0===t||t.call(this),this.ij=null,this.Mv&&(this.Sv.destroy(),this.Sv=null,this.T_.forEach((t=>t())),u(this.Mv),this.Mv=null),this.wv&&(u(this.wv),this.wv=null),!1}D9(){ht("fullscreen_on",(t=>{this.Qv===t.id&&this.element.classList.add("amp-apester-fullscreen")}),this.win,this.Mv,this.T_),ht("fullscreen_off",(t=>{this.Qv===t.id&&this.element.classList.remove("amp-apester-fullscreen")}),this.win,this.Mv,this.T_),ht("apester_resize_unit",(t=>{this.Qv===t.id&&t.height&&(this.attemptChangeHeight(t.height),this.R9&&this.Mv.contentWindow.postMessage(dt,"*"))}),this.win,this.Mv,this.T_)}};t.registerElement(ft,mt,".amp-apester-iframe{transition:opacity 0.4s;opacity:0}.i-amphtml-apester-iframe-ready{transition:opacity 1s ease-out;opacity:1!important}.amp-apester-loader{height:100%;width:100%;background-color:#fff}.amp-apester-container{max-width:700px;margin:0 auto;display:block;position:relative;width:100%}.amp-apester-overflow{position:absolute;margin:auto;top:50%;left:50%;transform:translate(-50%,-50%)}.amp-apester-overflow button{border:none;background:#fff;cursor:pointer;padding:25px 80px;text-transform:uppercase;letter-spacing:1px;font-weight:700;outline:none;position:relative}.amp-apester-fullscreen{background:rgba(34,36,38,0.97)!important;position:fixed!important;width:100vw!important;height:100vh!important;z-index:2147483646!important;top:0;zoom:1;-webkit-overflow-scrolling:touch!important}.i-amphtml-amp-apester-companion{display:block;margin:10px auto}.i-amphtml-amp-apester-bottom-ad{display:block!important;position:absolute!important;bottom:0!important;left:50%!important;transform:translateX(-50%)!important;margin:0!important}\n/*# sourceURL=/extensions/amp-apester-media/0.1/amp-apester-media.css*/")})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-apester-media-0.1.mjs.map