;
function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){e(r,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}))}return r}function n(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}var{isArray:o}=Array;function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var{hasOwnProperty:i,toString:s}=Object.prototype;function u(e){const t=Object.getOwnPropertyDescriptor(e,"message");if(null!=t&&t.writable)return e;const{message:r,stack:n}=e,o=new Error(r);for(const t in e)o[t]=e[t];return o.stack=n,o}function m(e){let t=null,r="";for(var n,o=l(arguments,!0);!(n=o()).done;){const e=n.value;e instanceof Error&&!t?t=u(e):(r&&(r+=" "),r+=e)}return t?r&&(t.message=r+": "+t.message):t=new Error(r),t}function c(e){var t,r;null===(t=(r=self).__AMP_REPORT_ERROR)||void 0===t||t.call(r,e)}import{createElement as d}from"../bento.mjs";import{useCallback as f,useMemo as b,useState as p}from"../bento.mjs";import{forwardRef as v}from"../bento.mjs";import{createElement as y}from"../bento.mjs";import{useEffect as g,useImperativeHandle as w,useLayoutEffect as j,useMemo as S,useRef as O,useState as h}from"../bento.mjs";import{forwardRef as x}from"../bento.mjs";import{createElement as E}from"../bento.mjs";import{useCallback as R,useEffect as A,useImperativeHandle as $,useLayoutEffect as H,useRef as I}from"../bento.mjs";import{forwardRef as L}from"../bento.mjs";import{ContainWrapper as z,useValueRef as C}from"../bento.mjs";import{useAmpContext as F,useLoading as M}from"../bento.mjs";var P=["allow","allowFullScreen","iframeStyle","name","title","matchesMessagingOrigin","messageHandler","ready","loading","onReadyState","sandbox","src"],T=()=>!1,k=L((function(e,t){let{allow:o,allowFullScreen:a,iframeStyle:l,name:i,title:s,matchesMessagingOrigin:u=T,messageHandler:m,ready:c=!0,loading:d,onReadyState:f,sandbox:b,src:p}=e,v=n(e,P);const{playable:y}=F(),g=M(d),w="unload"!==g,j=I(!1),S=C(f),O=R((e=>{if(e!==j.current){j.current=e;const t=S.current;null==t||t(e?"complete":"loading")}}),[S]),h=I(null);return $(t,(()=>({get readyState(){return j.current?"complete":"loading"},get node(){return h.current}})),[]),H((()=>{w||O(!1)}),[w,O]),A((()=>{const e=h.current;if(!y&&e){const{src:t}=e;(e=>!(!e||"about:blank"==e||e.includes("#")))(t)?e.src=e.src:e.parentNode.insertBefore(e,e.nextSibling)}}),[y]),H((()=>{const e=h.current;if(!e||!w)return;const t=e=>{const t=h.current;t&&e.source==t.contentWindow&&u(e.origin)&&m(e)},{defaultView:r}=e.ownerDocument;return r.addEventListener("message",t),()=>r.removeEventListener("message",t)}),[u,m,w,c]),E(z,r(r({},v),{},{layout:!0,size:!0,paint:!0}),w&&c&&E("iframe",{allow:o,allowFullScreen:a,frameBorder:"0",loading:g,name:i,onLoad:()=>O(!0),part:"iframe",ref:h,sandbox:b,scrolling:"no",src:p,style:r(r({},l),{},{width:"100%",height:"100%",contentVisibility:"auto"}),title:s}))}));k.displayName="IframeEmbed";var q=self.AMP_CONFIG||{},N=("string"==typeof q.thirdPartyFrameRegex?new RegExp(q.thirdPartyFrameRegex):q.thirdPartyFrameRegex,("string"==typeof q.cdnProxyRegex?new RegExp(q.cdnProxyRegex):q.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function U(e){if(!self.document||!self.document.head)return null;if(self.location&&N.test(self.location.origin))return null;const t=self.document.head.querySelector(`meta[name="${e}"]`);return t&&t.getAttribute("content")||null}var B,G=q.thirdPartyUrl||"https://3p.ampproject.net",J=q.thirdPartyFrameHost||"ampproject.net";function V(e){return`${G}/2203281422000/vendor/${e}.mjs`}function _(e){let t;if(e.crypto&&e.crypto.getRandomValues){const r=new Uint32Array(2);e.crypto.getRandomValues(r),t=String(r[0])+r[1]}else t=String(e.Math.random()).substr(2)+"0";return t}q.cdnUrl||U("runtime-host"),q.errorReportingUrl,q.betaErrorReportingUrl,q.localDev,q.geoApiUrl||U("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG,new Set(["c","v","a","ad"]);var Z=["allow","excludeSandbox","name","messageHandler","options","sandbox","src","type","title"],D={},K="sync-xhr 'none'",Q=["allow-top-navigation-by-user-activation","allow-popups-to-escape-sandbox"].join(" ")+" "+["allow-forms","allow-modals","allow-pointer-lock","allow-popups","allow-same-origin","allow-scripts"].join(" "),W=x((function(e,t){let{allow:o=K,excludeSandbox:a,name:l,messageHandler:i,options:s,sandbox:u=Q,src:m,type:c,title:d=c}=e,f=n(e,Z);if(b=o,"number"!=typeof v&&(v=0),v+(p=K).length>b.length||-1===b.indexOf(p,v))throw new Error(`'allow' prop must contain "${K}". Found "${o}".`);var b,p,v;const x=O(null),E=O(null),R=S((()=>(D[c]||(D[c]=function(){let e=0;return()=>String(++e)}()),D[c]())),[c]),[A,$]=h({name:l,src:m}),{name:H,src:I}=A,L=O(null);return j((()=>{var e,t;const n=null===(e=x.current)||void 0===e||null===(t=e.ownerDocument)||void 0===t?void 0:t.defaultView,o=null!=m?m:n?((a=n).__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN=a.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN||"d-"+_(a),"https://"+a.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN+`.${J}/2203281422000/frame.html`):"about:blank";var a;if(l)return void $({name:l,src:o});if(!n)return;L.current||(L.current=function(e){let t=0;for(let r=e;r&&r!=r.parent;r=r.parent)t++;return String(t)+"-"+_(e)}(n));const i=Object.assign({"location":{"href":n.location.href},"sentinel":L.current}),u=r({"title":d,"type":c,"_context":i},s);var f;$({name:JSON.stringify({"host":(f=o,B||(B=self.document.createElement("a")),function(e,t,r){return e.href="",new URL(t,e.href)}(B,f)).hostname,"bootstrap":V(c),"type":c,"count":R,"attributes":u}),src:o})}),[R,l,s,m,d,c]),g((()=>{var e;const t=null===(e=E.current)||void 0===e?void 0:e.node;t&&t.parentNode.insertBefore(t,t.nextSibling)}),[H]),w(t,(()=>({get readyState(){var e;return null===(e=E.current)||void 0===e?void 0:e.readyState},get node(){var e;return null===(e=E.current)||void 0===e?void 0:e.node}})),[]),y(k,r(r({},f),{},{allow:o,contentRef:x,messageHandler:i,name:H,ref:E,ready:!!H,sandbox:a?void 0:u,src:I,title:d}))}));W.displayName="ProxyIframeEmbed";var X=["embedCreated","embedLive","embedParent","embedType","requestResize","src","style","title","uuid"],Y=()=>!0,ee=v((function(e,t){let{embedCreated:o,embedLive:a,embedParent:l,embedType:i,requestResize:s,src:u,style:v,title:y="Reddit",uuid:g}=e,w=n(e,X);const[j,S]=p("100%"),O=f((e=>{const t=function(e){if(!function(e){return"string"==typeof e&&e.startsWith("amp-")&&-1!=e.indexOf("{")}(e))return null;const t=e.indexOf("{");return function(e,t){try{return function(e){return JSON.parse(e)}(e)}catch(e){return null==t||t(e),null}}(e.substr(t),(t=>{!function(e){const t=m.apply(null,arguments);setTimeout((()=>{throw c(t),t}))}(new Error(`MESSAGING: Failed to parse message: ${e}\n${t.message}`))}))}(e.data);if("embed-size"==t.type){const e=t.height;s?(s(e),S("100%")):S(e)}}),[s]),h=b((()=>({embedCreated:o,embedLive:a,embedParent:l,embedType:i,requestResize:s,src:u,title:y,uuid:g})),[o,a,l,i,s,u,y,g]);return d(W,r(r({ref:t,title:y},w),{},{options:h,type:"reddit",matchesMessagingOrigin:Y,messageHandler:O,style:j?r(r({},v),{},{height:j}):v}))}));ee.displayName="BentoReddit";import{PreactBaseElement as te}from"../bento.mjs";var re=class extends te{};re.Component=ee,re.props={"src":{attr:"data-src"},"embedType":{attr:"data-embedtype"},"uuid":{attr:"data-uuid"},"embedCreated":{attr:"data-embedcreated"},"embedParent":{attr:"data-embedparent"},"embedLive":{attr:"data-embedlive"},"title":{attr:"title"}},re.layoutSizeDefined=!0,re.usesShadowDom=!0;import{defineBentoElement as ne}from"../bento.mjs";ne("bento-reddit",re,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-reddit-1.0.mjs.map