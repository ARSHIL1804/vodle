;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-skimlinks",ev:"0.1",l:!0,f:function(t,n){(()=>{var n="load-start";function i(t){let n=!1,i=null,r=t;return(...t)=>(n||(i=r.apply(self,t),n=!0,r=null),i)}var{isArray:r}=Array;function s(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}var{hasOwnProperty:e,toString:o}=Object.prototype;function c(t){return(t.ownerDocument||t).defaultView}function u(t,n,i){return function(t,n){for(const i in n)t.setAttribute(i,n[i]);return t}(t.createElement(n),i)}var h=self.AMP_CONFIG||{},a=("string"==typeof h.thirdPartyFrameRegex?new RegExp(h.thirdPartyFrameRegex):h.thirdPartyFrameRegex,("string"==typeof h.cdnProxyRegex?new RegExp(h.cdnProxyRegex):h.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function l(t){if(!self.document||!self.document.head)return null;if(self.location&&a.test(self.location.origin))return null;const n=self.document.head.querySelector(`meta[name="${t}"]`);return n&&n.getAttribute("content")||null}h.thirdPartyUrl,h.thirdPartyFrameHost,h.cdnUrl||l("runtime-host"),h.errorReportingUrl,h.betaErrorReportingUrl,h.localDev,h.geoApiUrl||l("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var f,d=self.__AMP_LOG;function p(t){return function(t,n){throw new Error("failed to call initLogConstructor")}()}function m(t,n,i,r,s,e,o,c,u,h,a){return t}function _(t,n,i,r,s,e,o,c,u,h,a){return(d.user||(d.user=p()),void d.user.win?d.userForEmbed||(d.userForEmbed=p()):d.user).assert(t,n,i,r,s,e,o,c,u,h,a)}function A(){return f||(f=Promise.resolve(void 0))}function g(t,n){return w(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function k(t,n){return w(v(T(t)),n)}function P(t,n){return function(t,n){const i=b(t,n);if(i)return i;const r=R(t);return r[n]=function(){const t=new class{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}},{promise:n,reject:i,resolve:r}=t;return n.catch((()=>{})),{obj:null,promise:n,resolve:r,reject:i,context:null,ctor:null}}(),r[n].promise}(v(t),n)}function I(t,n){return b(v(t),n)}function T(t){return t.nodeType?(n=c(t),g(n,"ampdoc")).getAmpDoc(t):t;var n}function v(t){const n=T(t);return n.isSingleDoc()?n.win:n}function w(t,n){m(function(t,n){const i=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!i||!i.ctor)}(t,n));const i=R(t)[n];return i.obj||(m(i.ctor),m(i.context),i.obj=new i.ctor(i.context),m(i.obj),i.context=null,i.resolve&&i.resolve(i.obj)),i.obj}function b(t,n){const i=R(t)[n];return i?i.promise?i.promise:(w(t,n),i.promise=Promise.resolve(i.obj)):null}function R(t){let n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}var E,M=t=>T(t),y=t=>function(t,n,i,r){const s=I(t,n);if(s)return s;const e=T(t);return e.whenExtensionsKnown().then((()=>{const t=e.getExtensionVersion(i);return t?g(e.win,"extensions").waitForExtension(i,t):null})).then((i=>i?r?I(t,n):P(t,n):null))}(t,"amp-analytics-instrumentation","amp-analytics"),V=t=>k(t,"documentInfo").get(),U=t=>g(t,"extensions"),O=class{constructor(t,n){this.syncResponse=t,this.asyncResponse=n}};function j(){let t="";for(let n=0;n<8;n++)t+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return t}function $(t){const{hostname:n}=function(t,n){return E||(E=self.document.createElement("a")),function(t,n,i){return t.href="",new URL(n,t.href)}(E,t)}(t);return n.replace(/^www\./,"")}function S(t){return t?t.hostname.replace(/^www\./,""):""}function x(t,n){const{excludedDomains:i}=n;return i&&-1!==i.indexOf(t)}function L(t,n){return x(S(t),n)}new Set(["c","v","a","ad"]);var N="affiliate",C="ignore",D="unknown",q="data-skimlinks-custom-tracking-id",z="amp@1.0.3",J="amp-skimlinks",F="https://t.skimresources.com/api",B={pageTrackingUrl:`${F}/track.php?data=\${data}`,linksTrackingUrl:`${F}/link?data=\${data}`,nonAffiliateTrackingUrl:`${F}/?call=track&rnd=\${rnd}&data=\${data}`,beaconUrl:"https://r.skimresources.com/api"},G=["facebook.com","go.redirectingat.com","go.skimresources.com","instagram.com","twitter.com","youtube.com"],W="PAGE_SCANNED",Z="CLICK",H="data-link-rewriter-original-url";function K(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function Q(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),i.push.apply(i,r)}return i}function X(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Q(Object(i),!0).forEach((function(n){K(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Q(Object(i)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))}))}return t}var Y,tt=["Webkit","webkit","Moz","moz","ms","O","o"];function nt(t,n,i,r,s){const e=function(t,n,i){if(n.startsWith("--"))return n;Y||(Y=Object.create(null));let r=Y[n];if(!r||i){if(r=n,void 0===t[n]){const i=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),s=function(t,n){for(let i=0;i<tt.length;i++){const r=tt[i]+n;if(void 0!==t[r])return r}return""}(t,i);void 0!==t[s]&&(r=s)}i||(Y[n]=r)}return r}(t.style,n,s);if(!e)return;const o=r?i+r:i;t.style.setProperty(function(t){const n=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return tt.some((t=>n.startsWith(t+"-")))?`-${n}`:n}(e),o)}var it=!1,rt=/nochunking=1/.test(self.location.hash),st=A();var et="not_run",ot=class{constructor(t){this.state=et,this.Yi=t}Ji(t){if("run"!=this.state){this.state="run";try{this.Yi(t)}catch(t){throw this.Qi(t),t}}}Xi(){return this.Yi.displayName||this.Yi.name}Qi(t){}Zi(){return!1}ts(){return!1}},ct=class extends ot{constructor(t,n,i){super(t),this.ss=i}Qi(t){var n;m((n=self.document).defaultView),it||(it=!0,function(t){!function(t,n){for(const i in n)nt(t,i,n[i])}(t.body,{opacity:1,visibility:"visible","animation":"none"})}(n))}Zi(){return this.es()}ts(){return this.ss.ns}es(){return this.ss.ampdoc.isVisible()}},ut=class{constructor(t){var n;this.ampdoc=t,this.i=t.win,this.rs=new class{constructor(){this.qi=[]}peek(){const t=this.length;return t?this.qi[t-1].item:null}enqueue(t,n){if(isNaN(n))throw new Error("Priority must not be NaN.");const i=this.Wi(n);this.qi.splice(i,0,{item:t,priority:n})}Wi(t){let n=-1,i=0,r=this.length;for(;i<=r&&(n=Math.floor((i+r)/2),n!==this.length);)if(this.qi[n].priority<t)i=n+1;else{if(!(n>0&&this.qi[n-1].priority>=t))break;r=n-1}return n}forEach(t){let n=this.length;for(;n--;)t(this.qi[n].item)}dequeue(){const t=this.qi.pop();return t?t.item:null}get length(){return this.qi.length}},this.hs=this.os.bind(this),this.us=0,this.ls=!(!this.i.navigator.scheduling||!this.i.navigator.scheduling.isInputPending),this.cs=!1,this.Ki=this.i.document.documentElement.hasAttribute("i-amphtml-no-boilerplate"),this.i.addEventListener("message",(t=>{"amp-macro-task"==t.data&&this.os(null)})),this.ns=!1,(n=t,P(n,"viewer")).then((()=>{this.ns=!0})),t.onVisibilityChanged((()=>{t.isVisible()&&this.ds()}))}run(t,n){const i=new ot(t);this.fs(i,n)}runForStartup(t){const n=new ct(t,this.i,this);this.fs(n,Number.POSITIVE_INFINITY)}fs(t,n){this.rs.enqueue(t,n),this.ds()}ps(t){let n=this.rs.peek();for(;n&&n.state!==et;)this.rs.dequeue(),n=this.rs.peek();return n&&t&&this.rs.dequeue(),n}os(t){const n=this.ps(!0);if(!n)return this.cs=!1,this.us=0,!1;let i;try{i=Date.now(),n.Ji(t)}finally{st.then().then().then().then().then().then().then().then().then((()=>{this.cs=!1,this.us+=Date.now()-i,this.ds()}))}return!0}_s(t){if(this.Ki&&(this.ls?this.i.navigator.scheduling.isInputPending():this.us>5))return this.us=0,void this.As();st.then((()=>{this.hs(t)}))}ds(){if(this.cs)return;const t=this.ps();return t?t.Zi()?(this.cs=!0,void this._s(null)):void(t.ts()&&this.i.requestIdleCallback?function(t,n,i,r){const s=Date.now();t.requestIdleCallback((function n(i){if(i.timeRemaining()<15){const e=2e3-(Date.now()-s);e<=0||i.didTimeout?r(i):t.requestIdleCallback(n,{timeout:e})}else r(i)}),{timeout:2e3})}(this.i,0,0,this.hs):this.As()):void 0}As(){this.i.postMessage("amp-macro-task","*")}};function ht(t,n){_(t,`<amp-skimlinks> Invalid option => ${n}`)}function at(t,n){let i=[].concat(n).concat(G);const r=t.getAttribute("excluded-domains");return r&&(i=i.concat(r.trim().split(/\s+/).map((t=>t.replace(/^www\./,""))))),i}function lt(t){const n=t.getAttribute("publisher-code");return ht(n,'"publisher-code" is required.'),n}function ft(t){const n=t.getAttribute("tracking");return!n||(ht("true"===n||"false"===n,'"tracking" possible values are "true" or "false".'),"true"===n)}function dt(t){const n=t.getAttribute("custom-tracking-id");return n&&ht(n.length<=50,'"custom-tracking-id" should be <=50 characters and only contain upper and lowercase characters, numbers, underscores and pipes.'),n}function pt(t){return t.getAttribute("link-selector")||null}function mt(t){const n=[];return t.canonicalUrl&&n.push($(t.canonicalUrl)),t.sourceUrl&&n.push($(t.sourceUrl)),n}function _t(t){let n=t.getAttribute("custom-redirect-domain");return n?(n=n.replace(/^\/\/|^https?:\/\/|\/$/g,""),`http://${n}`):"https://go.skimresources.com"}function At(t){try{const n=function(t){const n=(r=t,/^[\w-]+$/.test("script"),"> script",r.querySelectorAll(function(t,n){return t.replace(/^|,/g,"$&:scope ")}("> script"))),{length:i}=n;var r;if(1!==i)throw new Error(`Found ${i} <script> children. Expected 1.`);const s=n[0];if(!function(t){var n;return"SCRIPT"==t.tagName&&"APPLICATION/JSON"==(null===(n=t.getAttribute("type"))||void 0===n?void 0:n.toUpperCase())}(s))throw new Error('<script> child must have type="application/json"');try{var e;return o=null!==(e=s.textContent)&&void 0!==e?e:"",JSON.parse(o)}catch(t){throw new Error("Failed to parse <script> contents. Is it valid JSON?")}var o}(t);return{pageTrackingUrl:n.pageTrackingUrl||B.pageTrackingUrl,linksTrackingUrl:n.linksTrackingUrl||B.linksTrackingUrl,nonAffiliateTrackingUrl:n.nonAffiliateTrackingUrl||B.nonAffiliateTrackingUrl,beaconUrl:n.beaconUrl||B.beaconUrl}}catch(t){return B}}var gt="page-impressions",kt="link-impressions",Pt="non-affiliate-click",It=class extends t.BaseElement{constructor(t){super(t),this.eR=null,this.hO=null,this.Ak=null,this.Ue=null,this.Ik=null,this.Tk={},this.Rk=null,this.Ek=null,this.Mk=null,this.Vk=null,this.cO=null}buildCallback(){var t,n;return this.eR=g(this.win,"xhr"),this.hO=this.getAmpDoc(),this.Ak=V(this.hO),this.Ue=k(this.hO,"viewer"),this.Ik=new class{constructor(t){this.Ec=t.getRootNode(),this.Uk=this.Ok(t),this.$k=[],this.Sk(this.Ec),(t=>k(t,"navigation"))(t).registerAnchorMutator(this.maybeRewriteLink.bind(this),0)}registerLinkRewriter(t,n,i){const r=new class{constructor(t,n,i,r){this.events=new class{constructor(){this.Tt=null}add(t){return this.Tt||(this.Tt=[]),this.Tt.push(t),()=>{this.remove(t)}}remove(t){this.Tt&&function(t,n){const i=t.indexOf(n);-1!=i&&t.splice(i,1)}(this.Tt,t)}removeAll(){this.Tt&&(this.Tt.length=0)}fire(t){if(this.Tt)for(var n,i=function(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return s(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(t,n):void 0}}(t))||t&&"number"==typeof t.length){i&&(t=i);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.Tt.slice());!(n=i()).done;)(0,n.value)(t)}getHandlerCount(){var t,n;return null!==(t=null===(n=this.Tt)||void 0===n?void 0:n.length)&&void 0!==t?t:0}},this.id=n,this.Ec=t,this.xk=i,this.Lk=r.linkSelector||"a",this.Nk=300,this.Ck=new class{constructor(){this.Dk=[],this.Jk=[]}updateLinkList(t){this.Jk=t.map(this.getReplacementUrlForAnchor.bind(this)),this.Dk=t}updateReplacementUrls(t){t.forEach((t=>{const{anchor:n,replacementUrl:i}=t,r=this.Dk.indexOf(n);-1!==r&&(this.Jk[r]=i)}))}getReplacementUrlForAnchor(t){const n=this.Dk.indexOf(t);return-1!==n?this.Jk[n]:null}isInCache(t){return-1!==this.Dk.indexOf(t)}getAnchorReplacementList(){return this.Dk.map((t=>({anchor:t,replacementUrl:this.getReplacementUrlForAnchor(t)})))}}}getReplacementUrl(t){return this.isWatchingLink(t)?this.Ck.getReplacementUrlForAnchor(t):null}getAnchorReplacementList(){return this.Ck.getAnchorReplacementList()}isWatchingLink(t){return this.Ck.isInCache(t)}rewriteAnchorUrl(t){const n=this.getReplacementUrl(t);return!(!n||n===t.href||(t.setAttribute(H,t.href),t.href=n,setTimeout((()=>{t.href=t.getAttribute(H),t.removeAttribute(H)}),this.Nk),0))}onDomUpdated(){return new Promise((t=>{!function(t,n,i){if(rt)return void st.then(n);const r=function(t){return function(t,n,i,r){const s=T(t);!function(t,n,i,r,s,e){const o=R(t);let c=o[i];c||(c=o[i]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),c.ctor||(c.ctor=r,c.context=n,c.sharedInstance=!1,c.resolve&&w(t,i))}(v(s),s,n,i)}(t,"chunk",ut),k(t,"chunk")}(t);r.run(n,i)}(this.Ec.nodeType==Node.DOCUMENT_NODE?this.Ec.documentElement:this.Ec,(()=>this.Fk().then((()=>{this.events.fire({type:W}),t()}))),10)}))}Fk(){const t=this.Bk(),n=this.Gk(t);if(this.Ck.updateLinkList(t),!n.length)return A();this.Ck.updateReplacementUrls(n.map((t=>({anchor:t,replacementUrl:null}))));const i=this.xk(n);return _(i instanceof O,'Invalid response from provided "resolveUnknownLinks" function."resolveUnknownLinks" should return an instance of TwoStepsResponse'),i.syncResponse&&this.Ck.updateReplacementUrls(i.syncResponse),i.asyncResponse?i.asyncResponse.then((t=>{this.Ck.updateReplacementUrls(t)})):A()}Gk(t){const n=[];return t.forEach((t=>{this.isWatchingLink(t)||n.push(t)})),n}Bk(){const t=this.Ec.querySelectorAll(this.Lk);return[].slice.call(t)}}(this.Ec,t,n,i);return this.Wk(this.$k,r,this.Uk),r.onDomUpdated(),r}maybeRewriteLink(t,n){const i=this.Zk(t);if(i.length){let r=null;for(let n=0;n<i.length;n++)if(i[n].rewriteAnchorUrl(t)){r=i[n];break}const s={linkRewriterId:r?r.id:null,anchor:t,clickType:n.type};i.forEach((t=>{const n={type:Z,eventData:s};t.events.fire(n)}))}}Ok(t){const n=t.getMetaByName("amp-link-rewriter-priorities");return n?n.trim().split(/\s+/):[]}Sk(t){t.addEventListener("amp:dom-update",this.Hk.bind(this))}Hk(){this.$k.forEach((t=>{t.onDomUpdated()}))}Kk(t){const n=t.hasAttribute("data-link-rewriters")?t.getAttribute("data-link-rewriters").trim():null;return n?n.split(/\s+/):[]}Wk(t,n,i){return t.push(n),t.sort(((t,n)=>{const r=i.indexOf(t.id),s=i.indexOf(n.id);return-1===r&&-1===s?0:-1===r?1:-1===s?-1:r>s?1:-1})),t}Zk(t){const n=this.Kk(t);return this.$k.reduce(((i,r)=>(r.isWatchingLink(t)&&this.Wk(i,r,n),i)),[])}}(this.hO),this.Tk=(t=this.element,n=this.Ak,{pubcode:lt(t),excludedDomains:at(t,mt(n)),tracking:ft(t),customTrackingId:dt(t),linkSelector:pt(t),waypointBaseUrl:_t(t),config:At(t)}),this.hO.waitForBodyOpen().then((()=>this.Ue.getReferrerUrl())).then((t=>{this.cO=t,this.Qk()}))}Qk(){this.Rk=this.Xk(),this.Mk=new class{constructor(t,n,i,r){this.h_=i,this.Yk=r,this.NV=V(t).canonicalUrl,this.qV=`${(new Date).getTimezoneOffset()}`,this.Tk=n}getAffiliateUrl(t){if(!t)return null;const{customTrackingId:n,guid:i,pageImpressionId:s,pubcode:e}=this.h_.getTrackingInfo(),o=t.getAttribute(q)||n,c={"id":e,"url":t.href,"sref":this.NV,"pref":this.Yk,"xguid":i,"xuuid":s,"xtz":this.qV,"xs":"1","jv":z};return o&&(c.xcust=o),function(t,n,i){if(!n)return t;const r=t.split("#",2),s=r[0].split("?",2);let e=s[0]+(s[1]?`?${s[1]}&${n}`:`?${n}`);return e+=r[1]?`#${r[1]}`:"",e}(this.Tk.waypointBaseUrl,function(t){const n=[];for(const o in t){let c=t[o];if(null!=c){c=r(e=c)?e:[e];for(let t=0;t<c.length;t++)n.push((i=o,s=c[t],`${encodeURIComponent(i)}=${encodeURIComponent(s)}`))}}var i,s,e;return n.join("&")}(c))}}(this.hO,this.Tk,this.Rk,this.cO),this.Ek=new class{constructor(t,n,i){this.eR=t,this.Tk=n,this.Mk=i,this.JV={},this.firstRequest=null}fetchDomainResolverApi(t){const n={"pubcode":this.Tk.pubcode,"page":"","domains":t};let{beaconUrl:i}=this.Tk.config;return i=`${i}?data=${JSON.stringify(n)}`,this.eR.fetchJson(i,{method:"GET",ampCors:!1,credentials:"include"}).then((t=>t.json()))}resolveUnknownAnchors(t){const n=this.FV(t);let i=null;const r=this.WV(t);if(r.length){this.ZV(r);const n=this.Gk(t,r);i=this.KV(n,r)}return new O(n,i)}FV(t){return t.map((t=>{let n=null;const i=this.QV(this.tU(t));return(i===N||i===D)&&(n=this.Mk.getAffiliateUrl(t)),{anchor:t,replacementUrl:n}}))}QV(t){return x(t,this.Tk)?C:this.JV[t]||D}WV(t){return t.reduce(((t,n)=>{const i=this.tU(n),r=this.JV[i],s=x(i,this.Tk),e=-1!==t.indexOf(i);return r||s||e||t.push(i),t}),[])}ZV(t){t.forEach((t=>{this.JV[t]||(x(t,this.Tk)&&(this.JV[t]=C),this.JV[t]=D)}))}Gk(t,n){return t.filter((t=>{const i=this.tU(t);return-1!==n.indexOf(i)}))}KV(t,n){const i=this.fetchDomainResolverApi(n);return this.firstRequest||(this.firstRequest=i),i.then((i=>{const r=i.merchant_domains||[];return this.nU(n,r),this.FV(t)}))}nU(t,n){t.forEach((t=>{const i=-1!==n.indexOf(t);this.JV[t]=i?N:"non-affiliate"}))}tU(t){return S(t)}}(this.eR,this.Tk,this.Mk),this.Vk=this.iU()}rU(t){this.Rk.setTrackingInfo({guid:t.guid}),this.hO.whenFirstVisible().then((()=>{this.Rk.sendImpressionTracking(this.Vk.getAnchorReplacementList())}))}sU(){return(this.Ek.firstRequest||this.Ek.fetchDomainResolverApi([])).then(this.rU.bind(this))}iU(){const t={linkSelector:this.Tk.linkSelector},n=this.Ik.registerLinkRewriter(J,(t=>this.Ek.resolveUnknownAnchors(t)),t),r={[W]:i(this.sU.bind(this)),[Z]:this.vR.bind(this)};return n.events.add((t=>{const n=r[t.type];n&&n(t.eventData)})),n}Xk(){return this.signals().signal(n),new class{constructor(t,n,i){this.h_=n.tracking,this.eU={customTrackingId:n.customTrackingId,guid:null,pageImpressionId:j(),pageUrl:"CANONICAL_URL",pubcode:n.pubcode,referrer:i,timezone:"TIMEZONE"},this.Tk=n,this.oU=this.cU(t)}getTrackingInfo(){return this.eU}setTrackingInfo(t){Object.assign(this.eU,t)}sendImpressionTracking(t){if(!this.h_)return;const{guid:n,pageImpressionId:i,pageUrl:r,pubcode:s,timezone:e}=this.eU,o={"pub":s,"pag":r,"guid":n,"uuid":i,"tz":e,"jv":z},{numberAffiliateLinks:c,urls:u}=this.uU(t);this.hU(o,c),this.aU(o,c,u)}sendNaClickTracking(t){if(!this.h_||L(t,this.Tk))return;const{customTrackingId:n,pageImpressionId:i,pageUrl:r,pubcode:s,referrer:e,timezone:o}=this.eU,c={"pubcode":s,"referrer":r,"pref":e,"site":"false","url":t.href,"custom":t.getAttribute(q)||n,"xtz":o,"uuid":i,"product":"1","jv":z};this.oU.trigger(Pt,{"data":JSON.stringify(c),"rnd":"RANDOM"})}hU(t,n){const{customTrackingId:i,referrer:r}=this.eU,s=X({"slc":n,"jsl":0,"pref":r,"uc":i,"t":1},t);this.oU.trigger(gt,{"data":JSON.stringify(s)})}aU(t,n,i){if(0===n)return;const r=X({"dl":i,"hae":n?1:0,"typ":"l"},t);this.oU.trigger(kt,{"data":JSON.stringify(r)})}cU(t){const i=new class{constructor(t){this.qt=t,this.lU={"requests":{},"triggers":{}}}setTransportConfig(t){this.lU.transport=t}setExtraUrlParams(t){this.lU.extraUrlParams=t}track(t,n){n=r(n)?n:[n],m(!this.lU.triggers[t]);const i=[];for(let r=0;r<n.length;r++){const s=`${t}-request-${r}`;this.lU.requests[s]=n[r],i.push(s)}return this.lU.triggers[t]={"on":t,"request":i},this}build(){m(this.lU);const t=new class{constructor(t,i){m(i.triggers),this.ci=t.getResourceId(),this.qt=t,this.lU=i;for(const t in i.triggers){const n=i.triggers[t].on;m(n);const r=this.fU(n);i.triggers[t].on=r}this.qt.signals().whenSignal(n).then((()=>{!function(t,n,i=!1,r=!1){const s=t.ownerDocument,e=u(s,"amp-analytics",{"sandbox":"true","trigger":r?"":"immediate"}),o=u(s,"script",{"type":"application/json"});if(o.textContent=JSON.stringify(n),e.appendChild(o),e.CONFIG=n,i){const n=U(c(t)),i=M(t);n.installExtensionForDoc(i,"amp-analytics")}else y(t).then((t=>{m(t)}));t.appendChild(e)}(this.qt,i,!0)}))}trigger(t,n){m(this.lU.triggers[t]),function(t,n,i={},r=!0){y(t).then((s=>{s&&s.triggerEventForTarget(t,n,i,r)}))}(this.qt,this.fU(t),n,!1)}fU(t){return`sandbox-${this.ci}-${t}`}}(this.qt,this.lU);return this.lU=null,t}}(t),{linksTrackingUrl:s,nonAffiliateTrackingUrl:e,pageTrackingUrl:o}=this.Tk.config;return i.track(gt,o),i.track(kt,s),i.track(Pt,e),i.setTransportConfig({"beacon":!0,"image":!0,"xhrpost":!1}),i.build()}uU(t){let n=0;const i={};return t.forEach((t=>{const{anchor:r,replacementUrl:s}=t,e=L(r,this.Tk);Boolean(s)&&!e&&(i[r.href]=i[r.href]||{"ae":1,"count":0},i[r.href].count+=1,n+=1)})),{numberAffiliateLinks:n,urls:i}}}(this.element,this.Tk,this.cO)}vR(t){t.linkRewriterId!==J&&"contextmenu"!==t.clickType&&this.Rk.sendNaClickTracking(t.anchor)}isLayoutSupported(){return!0}};t.registerElement("amp-skimlinks",It)})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-skimlinks-0.1.mjs.map