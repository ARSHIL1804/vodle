;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-story-auto-analytics",ev:"0.1",l:!0,f:function(t,e){(()=>{var e,{hasOwnProperty:n,toString:r}=Object.prototype;function s(t,e,n,r,s,o,a,i,l,c,u){return t}function o(t){return function(t,e){s(1===e.length),t.innerHTML=e[0];const n=t.firstElementChild;return s(n),s(!n.nextElementSibling),t.removeChild(n),n}(e,t)}var a=self.AMP_CONFIG||{},i=("string"==typeof a.thirdPartyFrameRegex?new RegExp(a.thirdPartyFrameRegex):a.thirdPartyFrameRegex,("string"==typeof a.cdnProxyRegex?new RegExp(a.cdnProxyRegex):a.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function l(t){if(!self.document||!self.document.head)return null;if(self.location&&i.test(self.location.origin))return null;const e=self.document.head.querySelector(`meta[name="${t}"]`);return e&&e.getAttribute("content")||null}function c(t,e,n,r,s,o,a,i,l,c,u){return t}function u(t,e){return function(t,e){c(function(t,e){const n=t.__AMP_SERVICES&&t.__AMP_SERVICES[e];return!(!n||!n.ctor)}(t,e));const n=function(t){let e=t.__AMP_SERVICES;return e||(e=t.__AMP_SERVICES={}),e}(t)[e];return n.obj||(c(n.ctor),c(n.context),n.obj=new n.ctor(n.context),c(n.obj),n.context=null,n.resolve&&n.resolve(n.obj)),n.obj}(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),e)}a.thirdPartyUrl,a.thirdPartyFrameHost,a.cdnUrl||l("runtime-host"),a.errorReportingUrl,a.betaErrorReportingUrl,a.localDev,a.geoApiUrl||l("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var p=t=>u(t,"extensions"),f=["<amp-analytics data-credentials=include type=gtag><script type=application/json><\/script></amp-analytics>"],y=class extends t.BaseElement{constructor(t){super(t)}buildCallback(){p(this.win).installExtensionForDoc(this.getAmpDoc(),"amp-analytics");const t=function(t){const n=t.ownerDocument||t;return e&&e.ownerDocument===n||(e=n.createElement("div")),o}(this.element)(f),n=t.querySelector("script"),r={"vars":{"gtag_id":s=c(this.element.getAttribute("gtag-id")),"config":{[s]:{"groups":"default"}}},"triggers":{"storyPageCount":{"on":"story-content-loaded","vars":{"event_name":"custom","event_action":"story_page_count","event_category":"${title}","event_label":"${storyPageCount}","send_to":[s]},"storySpec":{"repeat":!1}},"storyEnd":{"on":"story-last-page-visible","vars":{"event_name":"custom","event_action":"story_complete","event_category":"${title}","event_label":"${title}","send_to":[s]},"storySpec":{"repeat":!1}},"storyPageIndex":{"on":"story-page-visible","vars":{"event_name":"custom","event_action":"story_pages_viewed","event_category":"${title}","event_label":"${storyPageIndex}","send_to":[s]},"storySpec":{"repeat":!1}}}};var s;n.textContent=JSON.stringify(r),this.element.appendChild(t)}isLayoutSupported(t){return!0}};t.registerElement("amp-story-auto-analytics",y)})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-story-auto-analytics-0.1.mjs.map