;
(self.AMP=self.AMP||[]).push({m:0,v:"2203281422000",n:"amp-o2-player",ev:"0.1",l:!0,f:function(n,t){!function(){function t(n,r){return(t=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,r)}function r(n){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function i(n,t){if(t&&("object"===e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function u(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function o(n,t){var r="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=function(n,t){if(n){if("string"==typeof n)return u(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(n,t):void 0}}(n))||t&&n&&"number"==typeof n.length){r&&(n=r);var e=0;return function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Array.isArray;var a=Object.prototype;function f(n){var t=Object.getOwnPropertyDescriptor(n,"message");if(null!=t&&t.writable)return n;var r=n.message,e=n.stack,i=new Error(r);for(var u in n)i[u]=n[u];return i.stack=e,i}function c(n){for(var t,r=null,e="",i=o(arguments,!0);!(t=i()).done;){var u=t.value;u instanceof Error&&!r?r=f(u):(e&&(e+=" "),e+=u)}return r?e&&(r.message=e+": "+r.message):r=new Error(e),r}function s(n){var t,r;null===(t=(r=self).__AMP_REPORT_ERROR)||void 0===t||t.call(r,n)}function l(n){var t=c.apply(null,arguments);setTimeout((function(){throw s(t),t}))}function v(n){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];return n.apply(null,r)}catch(n){l(n)}}function h(n,t){try{return function(n){return JSON.parse(n)}(n)}catch(n){return null==t||t(n),null}}function p(n){return"string"==typeof n&&n.startsWith("amp-")&&-1!=n.indexOf("{")}a.hasOwnProperty,a.toString;var d={"getPropertyPriority":function(){return""},"getPropertyValue":function(){return""}};function m(n){return(n.ownerDocument||n).defaultView}var b=/vertical/,y=new WeakMap,w=new WeakMap,g=new WeakMap;function S(n){var t=y.get(n);return t||(t=new n.ResizeObserver(j),y.set(n,t)),t}function j(n){for(var t=new Set,r=n.length-1;r>=0;r--){var e=n[r],i=e.target;if(!t.has(i)){t.add(i);var u=w.get(i);if(u){g.set(i,e);for(var o=0;o<u.length;o++){var a=u[o],f=a.callback;E(a.type,f,e)}}}}}function E(n,t,r){if(0==n){var e=r.contentRect,i=e.height;v(t,{width:e.width,height:i})}else if(1==n){var u,o=r.borderBoxSize;if(o)u=o.length>0?o[0]:{inlineSize:0,blockSize:0};else{var a,f,c=r.target,s=m(c),l=b.test(function(n,t){return n.getComputedStyle(t)||d}(s,c).writingMode),h=c,p=h.offsetHeight,y=h.offsetWidth;l?(f=y,a=p):(a=y,f=p),u={inlineSize:a,blockSize:f}}v(t,u)}}var O=function(){function n(n){this.Gn=n,this.Zn=!1,this.Un=!1,this.Jn=this.Jn.bind(this)}var t=n.prototype;return t.updatePlaying=function(n){n!==this.Zn&&(this.Zn=n,n?(this.Un=!1,function(n,t,r){var e=n.ownerDocument.defaultView;if(e){var i=w.get(n);if(i||(i=[],w.set(n,i),S(e).observe(n)),!i.some((function(n){return n.callback===r&&1===n.type}))){i.push({type:1,callback:r});var u=g.get(n);u&&setTimeout((function(){return E(1,r,u)}))}}}(this.Gn,0,this.Jn)):function(n,t){!function(n,t,r){var e=w.get(n);if(e&&(function(n,t){for(var e=[],i=0,u=0;u<n.length;u++){var o=n[u];(a=o).callback===r&&1===a.type?e.push(o):(i<u&&(n[i]=o),i++)}var a;i<n.length&&(n.length=i)}(e),0==e.length)){w.delete(n),g.delete(n);var i=n.ownerDocument.defaultView;i&&S(i).unobserve(n)}}(n,0,t)}(this.Gn,this.Jn))},t.Jn=function(n){var t=n.blockSize,r=n.inlineSize>0&&t>0;if(r!==this.Un){this.Un=r;var e=this.Gn;r||e.pause()}},n}(),R=self.AMP_CONFIG||{},A=("string"==typeof R.thirdPartyFrameRegex?new RegExp(R.thirdPartyFrameRegex):R.thirdPartyFrameRegex,("string"==typeof R.cdnProxyRegex?new RegExp(R.cdnProxyRegex):R.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function k(n){if(!self.document||!self.document.head)return null;if(self.location&&A.test(self.location.origin))return null;var t=self.document.head.querySelector('meta[name="'.concat(n,'"]'));return t&&t.getAttribute("content")||null}R.thirdPartyUrl,R.thirdPartyFrameHost,R.cdnUrl||k("runtime-host"),R.errorReportingUrl,R.betaErrorReportingUrl,R.localDev,R.geoApiUrl||k("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var I=self.__AMP_LOG;function P(n,t){throw new Error("failed to call initLogConstructor")}function x(n){return P()}function M(n,t,r,e,i,u,o,a,f,c,s){return n}function C(n,t,r,e,i,u,o,a,f,c,s){return(I.user||(I.user=x()),void I.user.win?I.userForEmbed||(I.userForEmbed=x()):I.user).assert(n,t,r,e,i,u,o,a,f,c,s)}var T=function(){var n=this;this.promise=new Promise((function(t,r){n.resolve=t,n.reject=r}))};function z(n,t){return F(n=function(n){return n.__AMP_TOP||(n.__AMP_TOP=n)}(n),t)}function U(n,t){return J(N(n),t)}function q(n){return n.nodeType?(t=m(n),z(t,"ampdoc")).getAmpDoc(n):n;var t}function N(n){var t=q(n);return t.isSingleDoc()?t.win:t}function F(n,t){M(function(n,t){var r=n.__AMP_SERVICES&&n.__AMP_SERVICES[t];return!(!r||!r.ctor)}(n,t));var r=W(n)[t];return r.obj||(M(r.ctor),M(r.context),r.obj=new r.ctor(r.context),M(r.obj),r.context=null,r.resolve&&r.resolve(r.obj)),r.obj}function J(n,t){var r=W(n)[t];return r?r.promise?r.promise:(F(n,t),r.promise=Promise.resolve(r.obj)):null}function W(n){var t=n.__AMP_SERVICES;return t||(t=n.__AMP_SERVICES={}),t}var _=function(n){return function(n,t,r,e){var i=U(n,t);if(i)return i;var u=q(n);return u.whenExtensionsKnown().then((function(){var n=u.getExtensionVersion(r);return n?z(u.win,"extensions").waitForExtension(r,n):null})).then((function(r){return r?function(n,t){return function(n,t){var r=J(n,t);if(r)return r;var e,i,u,o,a=W(n);return a[t]=(i=(e=new T).promise,u=e.reject,o=e.resolve,i.catch((function(){})),{obj:null,promise:i,resolve:o,reject:u,context:null,ctor:null}),a[t].promise}(N(n),t)}(n,t):null}))}(n,"consentPolicyManager","amp-consent")};function B(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return _(n).then((function(n){return n?n.whenPolicyResolved(t):null}))}function D(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return _(n).then((function(n){return n?n.getConsentStringInfo(t):null}))}function G(n){return n.data}var L,$,H=function(){function n(n){this.St=n,this.It=0,this.Ct=0,this.Ot=Object.create(null)}var t=n.prototype;return t.has=function(n){return!!this.Ot[n]},t.get=function(n){var t=this.Ot[n];if(t)return t.access=++this.Ct,t.payload},t.put=function(n,t){this.has(n)||this.It++,this.Ot[n]={payload:t,access:this.Ct},this.Rt()},t.Rt=function(){if(!(this.It<=this.St)){var n,t=this.Ot,r=this.Ct+1;for(var e in t){var i=t[e].access;i<r&&(r=i,n=e)}void 0!==n&&(delete t[n],this.It--)}},n}();new Set(["c","v","a","ad"]);var V="unlisten";function Z(n,t,r){var e=function(n,t){var r=n.listeningFors;return!r&&t&&(r=n.listeningFors=Object.create(null)),r||null}(n,r);if(!e)return e;var i=e[t];return!i&&r&&(i=e[t]=[]),i||null}function K(n,t){for(var r=t;r&&r!=r.parent;r=r.parent)if(r==n)return!0;return!1}function Q(n){for(var t={"sentinel":V},r=n.length-1;r>=0;r--){var e=n[r];if(!e.frame.contentWindow){n.splice(r,1);var i=e.events;for(var u in i)i[u].splice(0,1/0).forEach((function(n){n(t)}))}}}function X(n,t,r,e,i,u){M(n.src),M(!n.parentNode),M(r);var o=n.ownerDocument.defaultView;!function(n){n.listeningFors||n.addEventListener("message",(function(t){if(G(t)){var r=function(n){return"string"==typeof n&&(n="{"==n.charAt(0)?h(n,(function(n){(I.dev||(I.dev=P())).warn("IFRAME-HELPER","Postmessage could not be parsed. Is it in a valid JSON format?",n)}))||null:p(n)?function(n){if(!p(n))return null;var t=n.indexOf("{");return h(n.substr(t),(function(t){l(new Error("MESSAGING: Failed to parse message: ".concat(n,"\n").concat(t.message)))}))}(n):null),n}(G(t));if(r&&r.sentinel){var e=function(n,t,r,e){var i,u=Z(n,t);if(!u)return u;for(var o=0;o<u.length;o++){var a=u[o],f=a.frame.contentWindow;if(f){if(e==f||K(f,e)){i=a;break}}else setTimeout(Q,0,u)}return i?i.events:null}(n,r.sentinel,t.origin,t.source);if(e){var i=e[r.type];if(i){i=i.slice();for(var u=0;u<i.length;u++)(0,i[u])(r,t.source,t.origin,t)}}}}}))}(o);var a,f,c=function(n,t,r){for(var e,i=function(n,t){return t?n.getAttribute("data-amp-3p-sentinel"):"amp"}(t,r),u=Z(n,i,!0),o=0;o<u.length;o++){var a=u[o];if(a.frame===t){e=a;break}}return e||(e={frame:t,events:Object.create(null)},u.push(e)),e.events}(o,n,e),s=(f=n.src,L||(L=self.document.createElement("a"),$=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new H(100))),function(n,t,r){if(r&&r.has(t))return r.get(t);n.href=t,n.protocol||(n.href=n.href);var e,i={href:n.href,protocol:n.protocol,host:n.host,hostname:n.hostname,port:"0"==n.port?"":n.port,pathname:n.pathname,search:n.search,hash:n.hash,origin:null};"/"!==i.pathname[0]&&(i.pathname="/"+i.pathname),("http:"==i.protocol&&80==i.port||"https:"==i.protocol&&443==i.port)&&(i.port="",i.host=i.hostname),e=n.origin&&"null"!=n.origin?n.origin:"data:"!=i.protocol&&i.host?i.protocol+"//"+i.host:i.href,i.origin=e;var u=i;return r&&r.put(t,u),u}(L,f,$)).origin,v=c[t]||(c[t]=[]),d=function(t,e,o,f){if("amp"==t.sentinel){if(e!=n.contentWindow)return;if(s!=o&&("null"!=o||!u))return}(i||e==n.contentWindow)&&(t.sentinel!=V?r(t,e,o,f):a())};return v.push(d),a=function(){if(d){var n=v.indexOf(d);n>-1&&v.splice(n,1),d=null,v=null,r=null}}}var Y=function(n){!function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&t(n,r)}(a,n);var e,u,o=(e=a,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}(),function(){var n,t=r(e);if(u){var o=r(this).constructor;n=Reflect.construct(t,arguments,o)}else n=t.apply(this,arguments);return i(this,n)});function a(n){var t;return(t=o.call(this,n)).tb=null,t.zS="",t.US="",t.FS="",t.lk="",t.Gt=new O(t.element),t}var f=a.prototype;return f.preconnectCallback=function(n){var t;(t=this.win,z(t,"preconnect")).url(this.getAmpDoc(),this.FS,n)},f.isLayoutSupported=function(n){return function(n){return"fixed"==n||"fixed-height"==n||"responsive"==n||"fill"==n||"flex-item"==n||"fluid"==n||"intrinsic"==n}(n)},f.buildCallback=function(){this.element.classList.add("i-amphtml-media-component"),this.zS=C(this.element.getAttribute("data-pid"),"data-pid attribute is required for <amp-o2-player> %s",this.element),this.US=C(this.element.getAttribute("data-bcid"),"data-bcid attribute is required for <amp-o2-player> %s",this.element);var n=this.element.getAttribute("data-bid"),t=this.element.getAttribute("data-vid"),r=this.element.getAttribute("data-macros"),e=this.element.getAttribute("data-env");this.FS="https://delivery."+("stage"!=e?"":"dev.")+"vidible.tv";var i="".concat(this.FS,"/htmlembed/"),u=[];i+="pid="+encodeURIComponent(this.zS)+"/"+encodeURIComponent(this.US)+".html",n&&u.push("bid="+encodeURIComponent(n)),t&&u.push("vid="+encodeURIComponent(t)),r&&u.push(r),u.length>0&&(i+="?"+u.join("&")),this.lk=i},f.layoutCallback=function(){var n=this;C(this.zS,"data-pid attribute is required for <amp-o2-player> %s",this.element),C(this.US,"data-bcid attribute is required for <amp-o2-player> %s",this.element);var t=this.element.ownerDocument.createElement("iframe");return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.src=this.lk,this.tb=t,t.classList.add("i-amphtml-fill-content"),X(t,"send-consent-data",(function(t,r,e){n.Lb(r,e)})),this.Gt.updatePlaying(!0),this.element.appendChild(t),this.loadPromise(t)},f.unlayoutCallback=function(){var n=this.tb;return n&&(this.element.removeChild(n),this.tb=null),this.Gt.updatePlaying(!1),!0},f.Lb=function(t,r){var e=this,i=n.prototype.getConsentPolicy.call(this)||"default",u=this.JS(i),o=this.WS(i);Promise.all([o,u]).then((function(n){var i;switch(n[0]){case 1:i={"gdprApplies":!0,"user_consent":1,"gdprString":n[1]};break;case 2:case 4:i={"gdprApplies":!0,"user_consent":0,"gdprString":n[1]};break;default:i={"gdprApplies":!1}}e.Db(t,r,{"sentinel":"amp","type":"consent-data","consentData":i})}))},f.Db=function(n,t,r){n.postMessage(r,t)},f.JS=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return D(this.element,n)},f.WS=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return B(this.element,n)},f.pauseCallback=function(){this.tb&&this.tb.contentWindow&&this.tb.contentWindow.postMessage(JSON.stringify({"method":"pause","value":this.FS}),"*")},a}(n.BaseElement);n.registerElement("amp-o2-player",Y)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-o2-player-0.1.js.map