;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-next-page",ev:"1.0",l:!0,f:function(t,e){(()=>{function e(t){return t?Array.prototype.slice.call(t):[]}var{isArray:i}=Array;function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var{hasOwnProperty:s,toString:r}=Object.prototype;function o(t){const e=Object.create(null);return t&&Object.assign(e,t),e}function h(t,e){return s.call(t,e)}function a(t,e,i,n,s,r,o,h,a,c,u){return t}function c(t,e){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null==e||e(t),null}}function u(t){return(t.ownerDocument||t).defaultView}function l(t,e){return t.replace(/^|,/g,`$&${e} `)}function p(t){return CSS.escape(t)}function f(t){a(/^[\w-]+$/.test(t))}function m(t,e){return t.querySelector(l(e,":scope"))}function d(t,e){return f(e),m(t,`> [${e}]`)}function g(t,e){return f(e),i=`> ${e}`,t.querySelectorAll(l(i,":scope"));var i}function v(t){var e;null===(e=t.parentElement)||void 0===e||e.removeChild(t)}function P(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function b(t,e){t.insertBefore(e,t.firstChild)}function _(t){if(Node.prototype.getRootNode)return t.getRootNode();let e;for(e=t;e.parentNode&&(!(i=e)||"I-AMPHTML-SHADOW-ROOT"!=i.tagName&&(11!=i.nodeType||"[object ShadowRoot]"!==Object.prototype.toString.call(i)));e=e.parentNode);var i;return e}function x(t,e){const{length:i}=t;for(let n=0;n<i;n++)e(t[n],n)}var w=self.AMP_CONFIG||{},A=("string"==typeof w.thirdPartyFrameRegex?new RegExp(w.thirdPartyFrameRegex):w.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,y=("string"==typeof w.cdnProxyRegex?new RegExp(w.cdnProxyRegex):w.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function R(t){if(!self.document||!self.document.head)return null;if(self.location&&y.test(self.location.origin))return null;const e=self.document.head.querySelector(`meta[name="${t}"]`);return e&&e.getAttribute("content")||null}var E={thirdParty:w.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:w.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:A,cdn:w.cdnUrl||R("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:y,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:w.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:w.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:w.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:w.geoApiUrl||R("amp-geo-api")};function S(t){if(!t)return null;const e=t.match(/^(.*)\/(.*)-([0-9.]+|latest)(\.max)?\.(?:js|mjs)$/i),i=e?e[2]:void 0,n=e?e[3]:void 0;return i&&n?{extensionId:i,extensionVersion:n}:null}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var I,T=self.__AMP_LOG;function M(t,e){throw new Error("failed to call initLogConstructor")}function V(t){return T.user||(T.user=k()),function(t,e){return e&&e.ownerDocument.defaultView!=t}(T.user.win,t)?T.userForEmbed||(T.userForEmbed=k()):T.user}function k(t){return M()}function O(){return T.dev||(T.dev=M())}function $(t,e,i,n,s,r,o,h,a,c,u){return t}function j(t,e,i,n,s,r,o,h,a,c,u){return V().assert(t,e,i,n,s,r,o,h,a,c,u)}function N(){return I||(I=Promise.resolve(void 0))}function C(t,e){return B(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),e)}function L(t,e){return B(H(F(t)),e)}function D(t,e){const i=H(F(t));return K(i,e)?B(i,e):null}function U(t,e){return function(t,e){const i=q(t,e);if(i)return i;const n=W(t);return n[e]=function(){const t=new class{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}},{promise:e,reject:i,resolve:n}=t;return e.catch((()=>{})),{obj:null,promise:e,resolve:n,reject:i,context:null,ctor:null}}(),n[e].promise}(H(t),e)}function z(t,e){return q(H(t),e)}function F(t){return t.nodeType?(e=u(t),C(e,"ampdoc")).getAmpDoc(t):t;var e}function H(t){const e=F(t);return e.isSingleDoc()?e.win:e}function B(t,e){$(K(t,e));const i=W(t)[e];return i.obj||($(i.ctor),$(i.context),i.obj=new i.ctor(i.context),$(i.obj),i.context=null,i.resolve&&i.resolve(i.obj)),i.obj}function q(t,e){const i=W(t)[e];return i?i.promise?i.promise:(B(t,e),i.promise=Promise.resolve(i.obj)):null}function W(t){let e=t.__AMP_SERVICES;return e||(e=t.__AMP_SERVICES={}),e}function Z(t){return"function"==typeof t.dispose}function J(t,e){if(Z(e))try{(function(t){return $(Z(t)),t})(e).dispose()}catch(e){O().error("SERVICE","failed to dispose service",t,e)}}function K(t,e){const i=t.__AMP_SERVICES&&t.__AMP_SERVICES[e];return!(!i||!i.ctor)}function Y(t,e,i,n){const s=z(t,e);if(s)return s;const r=F(t);return r.whenExtensionsKnown().then((()=>{const t=r.getExtensionVersion(i);return t?C(r.win,"extensions").waitForExtension(i,t):null})).then((i=>i?n?z(t,e):U(t,e):null))}var Q,G,X=t=>C(t,"ampdoc"),tt=t=>function(t,e,i){const n=D(t,e);return n?Promise.resolve(n):Y(t,e,i)}(t,"bind","amp-bind"),et=t=>C(t,"extensions"),it=t=>L(t,"mutator"),nt=t=>L(t,"viewer"),st=t=>C(t,"vsync"),rt=t=>L(t,"viewport"),ot=t=>C(t,"xhr"),ht="prerender",at="visible",ct="hidden";function ut(t){const e=t.ownerDocument||t;return Q&&Q.ownerDocument===e||(Q=e.createElement("div")),lt}function lt(t){return function(t,e){a(1===e.length),t.innerHTML=e[0];const i=t.firstElementChild;return a(i),a(!i.nextElementSibling),t.removeChild(i),i}(Q,t)}var pt=["Webkit","webkit","Moz","moz","ms","O","o"];function ft(t,e,i,n,s){const r=function(t,e,i){if(e.startsWith("--"))return e;G||(G=o());let n=G[e];if(!n||i){if(n=e,void 0===t[e]){const i=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(e),s=function(t,e){for(let i=0;i<pt.length;i++){const n=pt[i]+e;if(void 0!==t[n])return n}return""}(t,i);void 0!==t[s]&&(n=s)}i||(G[e]=n)}return n}(t.style,e,s);if(!r)return;const h=n?i+n:i;t.style.setProperty(function(t){const e=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return pt.some((t=>e.startsWith(t+"-")))?`-${e}`:e}(r),h)}function mt(t,e){void 0===e&&(e=t.hasAttribute("hidden")),e?t.removeAttribute("hidden"):t.setAttribute("hidden","")}function dt(t,e,i={},n=!0){var s;(s=t,Y(s,"amp-analytics-instrumentation","amp-analytics")).then((s=>{s&&s.triggerEventForTarget(t,e,i,n)}))}var gt={INSIDE:"inside",TOP:"top",BOTTOM:"bottom"};function vt(t,e){return!(!t||!e)&&t.left==e.left&&t.top==e.top&&t.width==e.width&&t.height==e.height}function Pt(t){!function(t,e,i,n){const s=F(t),r=H(s);!function(t,e,i,n,s,r){const o=W(t);let h=o[i];h||(h=o[i]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),h.ctor||(h.ctor=n,h.context=e,h.sharedInstance=!1,h.resolve&&B(t,i))}(r,s,e,class{constructor(t){this.Ci=t,this.i=t.win,this.tx=[],this.br=st(this.i),this.bn=rt(t),this.T_=[],this.nx=!1,this.sx=!1,this.ix=!1,this.ox=function(t,e,i){let n=0,s=0,r=null;function o(){n=0;const h=i-(t.Date.now()-s);var a;h>0?n=t.setTimeout(o,h):(a=r,r=null,e.apply(null,a))}return function(...e){s=t.Date.now(),r=e,n||(n=t.setTimeout(o,i))}}(this.i,(()=>{this.nx=!1}),500)}observe(t,e,i){const n=new class{constructor(t,e,i,n){this.element=e,this.Te=n,this.fidelity=i,this.turn=0==i?Math.floor(4*Math.random()):0,this.ux=null,this.bn=rt(t)}Pe(t){const e=this.ux;if(e&&vt(e.positionRect,t.positionRect)&&vt(e.viewportRect,t.viewportRect))return;$(t.positionRect);const i=t.positionRect;var n,s;t.relativePos=(n=i,s=t.viewportRect,n.top<s.top?gt.TOP:n.bottom>s.bottom?gt.BOTTOM:gt.INSIDE),function(t,e){return t.top<=e.bottom&&e.top<=t.bottom&&t.left<=e.right&&e.left<=t.right}(i,t.viewportRect)?(this.ux=t,this.Te(t)):this.ux&&(this.ux=null,t.positionRect=null,this.Te(t))}update(t){if(!t){if(0!=this.turn)return void this.turn--;0==this.fidelity&&(this.turn=4)}const e=this.bn.getSize(),i={left:0,top:0,width:n=e.width,height:s=e.height,bottom:0+s,right:0+n,x:0,y:0};var n,s;this.bn.getClientRectAsync(this.element).then((t=>{this.Pe({positionRect:t,viewportRect:i,relativePos:null})}))}}(this.Ci,t,e,i);return this.tx.push(n),this.ix||this.lx(),n.update(),()=>{for(let t=0;t<this.tx.length;t++)if(this.tx[t]==n)return void this.hx(t)}}unobserve(t){for(let e=0;e<this.tx.length;e++)if(this.tx[e].element==t)return void this.hx(e);O().error("POSITION_OBSERVER","cannot unobserve unobserved element")}hx(t){this.tx.splice(t,1),0==this.tx.length&&this.vx()}lx(){this.ix=!0,this.T_.push(this.bn.onScroll((()=>{this.mx()}))),this.T_.push(this.bn.onResize((()=>{this.bx()})))}vx(){for(this.ix=!1;this.T_.length;)this.T_.pop()()}updateAllEntries(t){for(let e=0;e<this.tx.length;e++)this.tx[e].update(t)}mx(){this.ox(),this.nx=!0,this.sx||this.gx()}bx(){this.updateAllEntries(!0)}gx(){this.updateAllEntries(),this.sx=!0,this.nx?this.br.measure((()=>{this.gx()})):this.sx=!1}})}(t,"position-observer")}var bt,_t=class{constructor(t,e){this.ki=t,this.tpt=null,this.ept=null,this.callback=e}get top(){return this.tpt}get bottom(){return this.ept}observe(t,e){const i=t.ownerDocument.createElement("div");i.classList.add("i-amphtml-next-page-document-top-sentinel");const n=t.ownerDocument.createElement("div");n.classList.add("i-amphtml-next-page-document-bottom-sentinel"),e.insertBefore(i,t),e.insertBefore(n,t.nextSibling),this.ki.getPositionObserver().observe(i,0,(t=>this.ipt(t))),this.ki.getPositionObserver().observe(n,0,(t=>this.npt(t)))}ipt(t){this.tpt=t.relativePos,this.ki.updateRelativePos(this)}npt(t){this.ept=t.relativePos,this.ki.updateRelativePos(this)}usesSentinel(){return!0}},xt=class extends _t{constructor(t,e,i){super(t,e),this.spt=i}usesSentinel(){return!1}get nextPageEl(){return this.spt}},wt="amp-next-page-hidden",At=class{constructor(t,e){this.E_=t,this.yk=e.title,this.ni=e.url,this.rpt=e.url,this.ZD=e.image,this.opt=null,this.cf=null,this.mz=null,this.mi=1,this.D=ht,this.hpt=2}get url(){return this.ni}set url(t){this.ni=t}get initialUrl(){return this.rpt}get image(){return this.ZD}get title(){return this.yk}get relativePos(){return this.hpt}get document(){if(this.opt)return this.opt.ampdoc.getRootNode()}get container(){return this.cf}get shadowDoc(){return this.opt}set relativePos(t){this.hpt=t}is(t){return this.mi===t}isLoaded(){return 3===this.mi||5===this.mi||6===this.mi}isVisible(){return this.isLoaded()&&this.D===at}setVisibility(t){this.isLoaded()&&t!=this.D&&(this.is(6)&&t===at&&this.resume(),this.D=t,this.opt&&(this.opt.setVisibilityState(t),this.opt.ampdoc.getBody().classList.toggle("amp-next-page-visible",this.isVisible()),this.opt.ampdoc.getBody().classList.toggle(wt,!this.isVisible())))}pause(){return this.opt?this.opt.close().then((()=>this.E_.closeDocument(this).then((()=>{this.opt=null,this.D=ct,this.mi=6})))):N()}resume(){return this.apt()}fetch(){return 5===this.mi||2===this.mi||3===this.mi||4===this.mi?N():(this.mi=2,this.E_.fetchPageDocument(this).then((t=>(this.mi=3,this.mz=t,this.cf=this.E_.createDocumentContainerForPage(this),this.apt()))).catch((()=>{this.mi=4})))}apt(){return this.E_.attachDocumentToPage(this,$(this.mz),this.is(6)).then((t=>{t?(this.mi=5,this.opt=t,this.is(6)||this.E_.setLastFetchedPage(this)):this.mi=4}))}},yt=class extends At{constructor(t,e,i,n,s){super(t,e),this.mi=i,this.D=n,this.Ao=s}get document(){return this.Ao}},Rt=new Set(["c","v","a","ad"]),Et=t=>"string"==typeof t?St(t):t;function St(t,e){return bt||(bt=self.document.createElement("a")),function(t,e,i){return t.href="",new URL(e,t.href)}(bt,t)}function It(t){if(!function(t){return E.cdnProxyRegex.test(Et(t).origin)}(t=Et(t)))return t.href;const e=t.pathname.split("/"),i=e[1];j(Rt.has(i),"Unknown path prefix in url %s",t.href);const n=e[2],s="s"==n?"https://"+decodeURIComponent(e[3]):"http://"+decodeURIComponent(n);return j(s.indexOf(".")>0,"Expected a . in origin %s",s),e.splice(1,"s"==n?3:2),s+e.join("/")+function(t,e){if(!t||"?"==t)return"";const i=new RegExp("[?&](amp_(js[^&=]*|gsa|r|kit)|usqp)\\b[^&]*","g"),n=t.replace(i,"").replace(/^[?&]/,"");return n?"?"+n:""}(t.search)+(t.hash||"")}function Tt(t){return St(It(t)).origin}function Mt(t,e){const i=St(t),{origin:n}=St(e),s=Tt(e);return j(i.origin===n||i.origin===s,"Invalid page URL supplied to amp-next-page, pages must be from the same origin as the current document"),i}var Vt='.i-amphtml-next-page-document{overflow:hidden}.i-amphtml-next-page-document:not(.amp-next-page-visible) [i-amphtml-fixedid]{display:none}.i-amphtml-next-page-document.amp-next-page-visible{opacity:1;overflow:visible}.i-amphtml-next-page-document:after,.i-amphtml-next-page-document:before{content:" ";display:table}.i-amphtml-next-page-placeholder{background:#eee}.amp-next-page-separator{border-bottom:1px solid rgba(0,0,0,0.12)}.amp-next-page-links{border-top:1px solid rgba(0,0,0,0.1);margin-top:16px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.amp-next-page-link{border-bottom:1px solid rgba(0,0,0,0.1);display:block;overflow:auto;padding:10px 0;text-decoration:none}.amp-next-page-image{width:72px;height:72px;float:left;margin:0 10px;background-size:cover;background-position:50%}.amp-next-page-text{position:relative;margin:5px 30px 5px 0;color:#3c4043;font-size:17px}\n/*# sourceURL=/extensions/amp-next-page/1.0/amp-next-page.css*/',kt={NONE:0,OPT_IN:1,ALL:2};function Ot(t,e,i={}){const{expr:s=".",urlReplacement:r=kt.NONE,refresh:o=!1,xssiPrefix:a,url:c=e.getAttribute("src")}=i;!function(t,e,i="source"){var n;j(null!=t,"%s %s must be available",e,i),j("https:"==(n=Et(n=t)).protocol||"localhost"==n.hostname||"127.0.0.1"==n.hostname||function(t,e){const i=t.length-e.length;return i>=0&&t.indexOf(e,i)==i}(n.hostname,".localhost")||/^\/\//.test(t),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',e,i,t)}(c,e);const u=C(t.win,"batched-xhr");return function(t,e,i,n){const s=(t=>D(t,"url-replace"))(t);return(i>=kt.OPT_IN?s.expandUrlAsync(e):Promise.resolve(e)).then((e=>{if(i===kt.OPT_IN){const e=s.collectDisallowedVarsSync(t);if(e.length>0)throw V().createError(`URL variable substitutions in CORS fetches from dynamic URLs (e.g. via amp-bind) require opt-in. Please add data-amp-replace="${e.join(" ")}" to the <${t.tagName}> element. See https://bit.ly/amp-var-subs.`)}const r={};return t.hasAttribute("credentials")&&(r.credentials=t.getAttribute("credentials")),n&&(r.cache="reload"),{"xhrUrl":e,"fetchOpt":r}}))}(e,c,r,o).then((t=>u.fetchJson(t.xhrUrl,t.fetchOpt))).then((e=>ot(t.win).xssiJson(e,a))).then((t=>{if(null==t)throw new Error("Response is undefined.");return function(t,e){if("."==e)return t;let i=t;for(var s,r=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}(t))||t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e.split("."));!(s=r()).done;){const t=s.value;if(!(t&&i&&void 0!==i[t]&&"object"==typeof i&&h(i,t))){i=void 0;break}i=i[t]}return i}(t,s||".")})).catch((t=>{throw V().createError("failed fetching JSON data",t)}))}var $t,jt,Nt="render-start",Ct="none";function Lt(){return void 0===jt&&(jt=Ut()!=Ct&&(Dt(Element.prototype.attachShadow)||Dt(Element.prototype.createShadowRoot))),jt}function Dt(t){return!!t&&-1!=t.toString().indexOf("[native code]")}function Ut(t){return void 0===$t&&(e=t||Element,$t=e.prototype.attachShadow?"v1":e.prototype.createShadowRoot?"v0":Ct),$t;var e}var zt={strictStyling:!1,scopeRules:function(t,e,i){var n="";return t&&Array.prototype.forEach.call(t,(function(t){if(t.selectorText&&t.style&&void 0!==t.style.cssText)n+=this.scopeSelector(t.selectorText,e,this.strictStyling,i)+" {\n\t",n+=this.propertiesFromRule(t)+"\n}\n\n";else if(t.type===CSSRule.MEDIA_RULE)n+="@media "+t.media.mediaText+" {\n",n+=this.scopeRules(t.cssRules,e),n+="\n}\n\n";else try{t.cssText&&(n+=t.cssText+"\n\n")}catch(e){t.type===CSSRule.KEYFRAMES_RULE&&t.cssRules&&(n+=this.ieSafeCssTextFromKeyFrameRule(t))}}),this),n},ieSafeCssTextFromKeyFrameRule:function(t){var e="@keyframes "+t.name+" {";return Array.prototype.forEach.call(t.cssRules,(function(t){e+=" "+t.keyText+" {"+t.style.cssText+"}"})),e+=" }"},scopeSelector:function(t,e,i,n){var s=[];return t.split(",").forEach((function(t){t=t.trim(),n&&(t=n(t)),this.selectorNeedsScoping(t,e)&&(t=i&&!t.match(qt)?this.applyStrictSelectorScope(t,e):this.applySelectorScope(t,e)),s.push(t)}),this),s.join(", ")},selectorNeedsScoping:function(t,e){if(Array.isArray(e))return!0;var i=this.makeScopeMatcher(e);return!t.match(i)},makeScopeMatcher:function(t){return t=t.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+t+")"+Bt,"m")},applySelectorScope:function(t,e){return Array.isArray(e)?this.applySelectorScopeList(t,e):this.applySimpleSelectorScope(t,e)},applySelectorScopeList:function(t,e){for(var i,n=[],s=0;i=e[s];s++)n.push(this.applySimpleSelectorScope(t,i));return n.join(", ")},applySimpleSelectorScope:function(t,e){return t.match(Wt)?(t=t.replace(qt,e)).replace(Wt,e+" "):e+" "+t},applyStrictSelectorScope:function(t,e){e=e.replace(/\[is=([^\]]*)\]/g,"$1");var i=[" ",">","+","~"],n=t,s="["+e+"]";return i.forEach((function(t){var e=n.split(t);n=e.map((function(t){var e=t.trim().replace(Wt,"");return e&&i.indexOf(e)<0&&e.indexOf(s)<0&&(t=e.replace(/([^:]*)(:*)(.*)/,"$1"+s+"$2$3")),t})).join(t)})),n},propertiesFromRule:function(t){var e=t.style.cssText;t.style.content&&!t.style.content.match(/['"]+|attr/)&&(e=e.replace(/content:[^;]*;/g,"content: '"+t.style.content+"';"));var i=t.style;for(var n in i)"initial"===i[n]&&(e+=n+": initial; ");return e}},Ft="-shadowcsshost",Ht=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",Bt=(new RegExp("("+Ft+Ht,"gim"),new RegExp("(-shadowcsscontext"+Ht,"gim"),"([>\\s~+[.,{:][\\s\\S]*)?$"),qt=Ft+"-no-combinator",Wt=new RegExp(Ft,"gim");function Zt(t,e,i,n,s){const r=t.getHeadNode(),h=function(t,e,i,n){let s=t.__AMP_CSS_SM;s||(s=t.__AMP_CSS_SM=o());const r=!i&&n&&"amp-custom"!=n&&"amp-keyframes"!=n,h=i?"amp-runtime":r?`amp-extension=${n}`:null;if(h){const i=Jt(t,s,h);if(i)return"STYLE"==i.tagName&&i.textContent!==e&&(i.textContent=e),i}const a=(t.ownerDocument||t).createElement("style");a.textContent=e;let c=null;return i?a.setAttribute("amp-runtime",""):r?(a.setAttribute("amp-extension",n||""),c=Jt(t,s,"amp-runtime")):(n&&a.setAttribute(n,""),c=t.lastChild),function(t,e,i=null){if(!i)return void b(t,e);const n=i.nextSibling;t.insertBefore(e,n)}(t,a,c),h&&(s[h]=a),a}(r,function(t,e){const i=t.__AMP_CSS_TR;return i?i(e):e}(r,e),n||!1,s||null);if(i){const e=t.getRootNode();if(Kt(e,h))return i(h),h;const n=setInterval((()=>{Kt(e,h)&&(clearInterval(n),i(h))}),4)}return h}function Jt(t,e,i){if(e[i])return e[i];const n=t.querySelector(`style[${i}], link[${i}]`);return n?(e[i]=n,n):null}function Kt(t,e){const i=t.styleSheets;for(let t=0;t<i.length;t++)if(i[t].ownerNode==e)return!0;return!1}function Yt(t){x(g(t,"noscript"),(t=>{v(t)}))}new RegExp("-shadowcsscontext","gim");var Qt,Gt=/[^\.\-\_0-9a-zA-Z]/,Xt=/[^\-\_0-9a-zA-Z]/;function te(t,e,i){const n=t.ownerDocument;let s;if(Lt())s=n.importNode(e,i);else{s=n.createElement("amp-body"),function(t,e){const{style:i}=t;a(!0),a(!i.display),i.display="block"}(s);for(let t=0;t<e.attributes.length;t++)s.setAttribute(e.attributes[0].name,e.attributes[0].value);if(i)for(let t=e.firstChild;t;t=t.nextSibling)s.appendChild(n.importNode(t,!0))}ft(s,"position","relative");const r=t.body;return r&&t.removeChild(r),t.appendChild(s),Object.defineProperty(t,"body",{configurable:!0,value:s}),s}function ee(t){return t.replace(/(html|body)/g,ie)}function ie(t,e,i,n){const s=n.charAt(i-1),r=n.charAt(i+t.length);return s&&!Gt.test(s)||r&&!Xt.test(r)?t:"amp-"+t}function ne(t,e){const i=t.createElement("style");i.textContent=e;try{return(t.head||t.documentElement).appendChild(i),i.sheet?i.sheet.cssRules:null}finally{i.parentNode&&i.parentNode.removeChild(i)}}function se(t){return function(t){return void 0===Qt&&(Qt=function(t){return!(!t.document.implementation||"function"!=typeof t.document.implementation.createHTMLDocument||(e=t,C(e,"platform")).isFirefox());var e}(t)),Qt}(t)?new class{constructor(t){this._a=t.document.implementation.createHTMLDocument(""),this._a.open(),this.br=st(t),this.Aa=this.ga.bind(this),this.Pa=null,this.va=null,this.Ea=null,this.Ta=!1,this.ya=N(),this.Ia=!1,this.Ma=null}onBody(t){this.Pa=t}onBodyChunk(t){this.va=t}onEnd(t){this.Ea=t}write(t){if(this.Ia)throw new Error("closed already");return t&&this._a.write(t),this.ds(),this.ya}close(){return this._a.close(),this.Ia=!0,this.ds(),this.ya}abort(t){throw new Error("Not implemented")}releaseLock(){throw new Error("Not implemented")}get closed(){throw new Error("Not implemented")}get desiredSize(){throw new Error("Not implemented")}get ready(){throw new Error("Not implemented")}ds(){a(this.Pa&&this.va&&this.Ea),this.Ta||(this.Ta=!0,this.br.mutate(this.Aa))}ga(){if(this.Ta=!1,!this.Ma&&this._a.body&&(this.Ma=this.Pa(this._a)),this.Ma){const t=this._a.body,e=a(this.Ma);let i=0;for(Yt(t);t.firstChild;)i++,e.appendChild(t.firstChild);i>0&&this.va()}this.Ia&&this.Ea()}}(t):new class{constructor(t){this.Ra=[],this.br=st(t),this.Pa=null,this.va=null,this.Ea=null,this.ya=N(),this.Ia=!1}onBody(t){this.Pa=t}onBodyChunk(t){this.va=t}onEnd(t){this.Ea=t}write(t){if(a(this.Pa&&this.va&&this.Ea),this.Ia)throw new Error("closed already");return t&&this.Ra.push(t),this.ya}close(){return a(this.Pa&&this.va&&this.Ea),this.Ia=!0,this.br.mutate((()=>this.Lr())),this.ya}abort(t){throw new Error("Not implemented")}releaseLock(){throw new Error("Not implemented")}get closed(){throw new Error("Not implemented")}get desiredSize(){throw new Error("Not implemented")}get ready(){throw new Error("Not implemented")}Lr(){const t=this.Ra.join(""),e=(new DOMParser).parseFromString(t,"text/html");if(e.body){const t=e.body,i=this.Pa(e);let n=0;for(Yt(t);t.firstChild;)n++,i.appendChild(t.firstChild);n>0&&this.va()}this.Ea()}}(t)}var re="multidoc-manager",oe=['<div class=amp-next-page-separator aria-label="Next article separator" tabindex=0></div>'],he=['<div class=amp-next-page-links aria-label="Read more articles"></div>'],ae=["<a class=amp-next-page-link><img ref=image class=amp-next-page-image> <span ref=title class=amp-next-page-text></span></a>"],ce="amp-next-page",ue="i-amphtml-next-page-shadow-root",le="i-amphtml-next-page-placeholder",pe=()=>N(),fe=class extends t.BaseElement{constructor(t){super(t),this.cpt=null}isLayoutSupported(t){return"container"===t}buildCallback(){return this.cpt=L(this.element,"next-page"),this.cpt.build(this.element)}};t.registerServiceForDoc("next-page",class{constructor(t){this.Ci=t,this.i=t.win,this.am=this.i.document,this.bn=rt(t),this.Ue=nt(t),this.wn=it(t),this.tg=L(t,"templates"),this.MU=null,this.upt=null,this.lpt=pe,this.ppt=!1,this.fpt=null,this.mpt=null,this.dpt=null,this.OU=null,this.gn=null,this.oR=null,this.N0,this.gpt=null,this.vpt=null,this.Ppt=null,this.bpt={},this._pt=!1,this.xpt=1/0,this.wpt=null,this.li=null,this.ei=new Promise((t=>{this.li=t}))}isBuilt(){return!!this.N0}build(n){if(this.isBuilt())return N();this.Ci.getBody().lastElementChild,this.mpt=n,this.wpt=this.Apt().getAttribute("src"),this._pt=this.Apt().hasAttribute("deep-parsing")?"false"!==this.Apt().getAttribute("deep-parsing"):!this.wpt,this.xpt=this.Apt().hasAttribute("max-pages")?parseInt(this.Apt().getAttribute("max-pages"),10):1/0,this.MU=this.ypt(n),this.upt=this.Rpt(n),this.vpt=this.createHostPage(),this.Ppt=this.vpt,this.toggleHiddenAndReplaceableElements(this.am),b(this.mpt,this.upt),this.gn=L(this.Ci,"history"),this.oR=(t=>L(t,"navigation"))(this.Ci),this.OU=new class{constructor(t,e,i,n){this.win=t,this.Dh=e,this.Xc=i,this.Ee=n,this.ca=[]}aa(n,s,o,h){o=o||Object.create(null),this.da(),ft(n,"visibility","hidden");const a=function(t){const i=u(t),n=t.shadowRoot||t.__AMP_SHADOW_ROOT;if(n)return n.innerHTML="",n;let s;const r=Ut();if("v1"==r?(s=t.attachShadow({mode:"open"}),s.styleSheets||Object.defineProperty(s,"styleSheets",{get:function(){const t=[];return x(s.childNodes,(e=>{"STYLE"===e.tagName&&t.push(e.sheet)})),t}})):s="v0"==r?t.createShadowRoot():function(t){const i=t.ownerDocument;t.classList.add("i-amphtml-shadow-host-polyfill");const n=i.createElement("style");n.textContent=".i-amphtml-shadow-host-polyfill>:not(i-amphtml-shadow-root){display:none!important}",t.appendChild(n);const s=i.createElement("i-amphtml-shadow-root");return t.appendChild(s),t.__AMP_SHADOW_ROOT=s,Object.defineProperty(t,"shadowRoot",{enumerable:!0,configurable:!0,value:s}),s.host=t,s.getElementById=function(t){const e=p(t);return s.querySelector(`#${e}`)},Object.defineProperty(s,"styleSheets",{get:()=>i.styleSheets?e(i.styleSheets).filter((t=>s.contains(t.ownerNode))):[]}),s}(t),!Lt()){const t=`i-amphtml-sd-${i.Math.floor(1e4*i.Math.random())}`;s.id=t,s.host.classList.add(t),o=t=>function(t,e){return function(t,e){const i=$(t.id),n=t.ownerDocument;let s=null;try{s=ne(n.implementation.createHTMLDocument(""),e)}catch(t){}if(!s)try{s=ne(n,e)}catch(t){}if(!s)return e;const{scopeRules:r}=zt;return r.call(zt,s,`.${i}`,ee)}(t,e)}(s,t),s.__AMP_CSS_TR=o}var o;return s}(n);a.AMP&&this.fa(a);const c={};a.AMP=c,c.url=s;const{origin:l}=St(s),f=this.Dh.installShadowDoc(s,a,{params:o});c.ampdoc=f,Zt(f,t.combinedCss,null,!0),t.installAmpdocServices(f);const m=nt(f);let d;return c.setVisibilityState=function(t){f.overrideVisibilityState(t)},c.postMessage=m.receiveMessage.bind(m),c.onMessage=function(t){d=t},m.setMessageDeliverer(((t,e,i)=>{var n;return"broadcast"==t?(this.pa(e,a),i?N():void 0):null===(n=d)||void 0===n?void 0:n(t,e,i)}),l),c.close=()=>this.fa(a),c.getState=t=>tt(a).then((e=>e?e.getState(t):Promise.reject("amp-bind is not available in this document"))),c.setState=t=>tt(a).then((e=>{return e?"string"==typeof t?e.setStateWithExpression(t,{}):(n=t,"[object Object]"===r.call(n)||i(t)?e.setStateWithObject(t):Promise.reject("Invalid state")):Promise.reject("amp-bind is not available in this document");var n})),h(c,a,f).then((()=>{f.setReady(),f.signals().signal(Nt),ft(n,"visibility","visible")})),this.ca.includes(a)||this.ca.push(a),c}attachShadowDoc(t,e,i,n){return V().assertString(i),this.aa(t,i,n,((i,n,s)=>{if(this.ma(s,n,e),e.body){const t=te(n,e.body,!0);t.classList.add("amp-shadow"),s.setBody(t)}return setTimeout((()=>{s.signals().signal(Nt),ft(t,"visibility","visible")}),50),N()}))}attachShadowDocAsStream(t,e,i){return V().assertString(e),this.aa(t,e,i,((e,i,n)=>{let s=!1;const r=se(this.win);return e.writer=r,r.onBody((t=>{this.ma(n,i,t);const e=te(i,t.body,!1);return e.classList.add("amp-shadow"),n.setBody(e),e})),r.onBodyChunk((()=>{s||(s=!0,setTimeout((()=>{n.signals().signal(Nt),ft(t,"visibility","visible")}),50))})),new Promise((t=>{r.onEnd((()=>{t(),e.writer=null}))}))}))}ma(t,e,i){if(i.head){e.AMP.head=i.head;const n={},s=g(this.win.document.head,"link");for(let t=0;t<s.length;t++){const e=s[t].getAttribute("href");e&&(n[e]=!0)}for(let s=i.head.firstElementChild;s;s=s.nextElementSibling){const{tagName:i}=s,r=s.getAttribute("name"),o=s.getAttribute("rel");switch(i){case"TITLE":e.AMP.title=s.textContent;break;case"META":s.hasAttribute("charset")||"viewport"==r||r&&t.setMetaByName(r,s.getAttribute("content")||"");break;case"LINK":const i=s.getAttribute("href");if("canonical"==o)e.AMP.canonicalUrl=i;else if("stylesheet"==o)if(n[i])Zt(t,`@import "${i}"`,null,!1);else{n[i]=!0;const t=this.win.document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",i),this.win.document.head.appendChild(t)}break;case"STYLE":s.hasAttribute("amp-boilerplate")||(s.hasAttribute("amp-custom")?Zt(t,s.textContent,null,!1,"amp-custom"):s.hasAttribute("amp-keyframes")&&Zt(t,s.textContent,null,!1,"amp-keyframes"));break;case"SCRIPT":if(s.hasAttribute("src")){const e=s.getAttribute("src"),i=S(e),n=s.getAttribute("custom-element"),r=s.getAttribute("custom-template"),o=n||r;i&&(o?this.Xc.installExtensionForDoc(t,o,i.extensionVersion):s.hasAttribute("data-amp-report-test")||V().error(re,"- unknown script: ",s,e))}else-1==(s.getAttribute("type")||"application/javascript").indexOf("javascript")?e.appendChild(this.win.document.importNode(s,!0)):s.hasAttribute("amp-onerror")||V().error(re,"- unallowed inline javascript: ",s);break;case"NOSCRIPT":break;default:V().error(re,"- UNKNOWN head element:",s)}}}t.setExtensionsKnown()}pa(t,e){this.da(),this.ca.forEach((i=>{if(i==e)return;const n=nt(i.AMP.ampdoc);this.Ee.delay((()=>{n.receiveMessage("broadcast",t,!1)}),0)}))}fa(t){this.wa(t);const e=t.AMP;delete t.AMP;const{ampdoc:i}=e;return i.overrideVisibilityState("inactive"),function(t){!function(t){const e=W(t);for(const t in e){if(!Object.prototype.hasOwnProperty.call(e,t))continue;const i=e[t];i.sharedInstance||(i.obj?J(t,i.obj):i.promise&&i.promise.then((e=>J(t,e))))}}(t)}(i),this.Ee.timeoutPromise(15,new this.win.Promise((t=>{z(i,"resources").then((e=>{e?e.onNextPass(t):t()}))})),"Timeout reached waiting for visibility state change callback").catch((t=>{}))}wa(t){const e=this.ca.indexOf(t);-1!=e&&this.ca.splice(e,1)}ba(t){this.Ee.delay((()=>{this.fa(t)}),0)}da(){this.ca.forEach((t=>{t.host&&function(t){const e=t.isConnected;if(void 0!==e)return e;let i=t;for(;i=_(i),i.host;)i=i.host;return i.nodeType===Node.DOCUMENT_NODE}(t.host)||(this.wa(t),this.ba(t))}))}}(this.i,X(this.i),et(this.i),B(this.i,"timer")),this.dpt=new class{constructor(t){this.Ci=t,this.__=[],this.Tx=0,this.cH=-1,this.Ept=null,this.bn=rt(t),this.Spt=0,this.Ipt=!1,this.wn=it(t);const e=function(t,e,i){let n=0,s=null;function r(i){s=null,n=t.setTimeout(o,200),e.apply(null,i)}function o(){n=0,s&&r(s)}return function(...t){n?s=t:r(t)}}(t.win,this.gH.bind(this));this.bn.onScroll(e.bind(this)),this.bn.onResize(e.bind(this)),this.gH()}get mutator(){return this.wn}gH(){this.Ipt||(this.Ipt=!0,this.wn.measureElement((()=>{this.Spt=this.bn.getHeight();const t=this.bn.getScrollTop(),e=t-this.Tx;if(Math.abs(e)<20)return;const i=e>0?-1:1;this.__.forEach((t=>{t.usesSentinel()&&this.Ept===i||this.updateRelativePos(t)})),this.Tx=t,this.Ept=this.cH,this.cH=i})).then((()=>{this.Ipt=!1})))}isScrollingUp(){return 1===this.cH}isScrollingDown(){return-1===this.cH}observe(t,e,i){const n=new _t(this,i);this.__.push(n),n.observe(t,e)}observeHost(t,e){const i=new xt(this,e,t);this.__.push(i)}getPositionObserver(){return Pt(this.Ci),(t=>L(t,"position-observer"))(this.Ci.getHeadNode())}updateRelativePos(t){const e=t.usesSentinel()?this.getRelativePosFromSentinel(t):this.getRelativePosFromScroll(t);e&&t.callback($(e))}getRelativePosFromScroll(t){const{Tx:e,Spt:i}=this,{top:n}=t.nextPageEl.getLayoutBox();return e<n-i?5:e<n&&n<=i&&e<=0?1:e<n?this.isScrollingDown()?3:4:2}getRelativePosFromSentinel(t){const{bottom:e,top:i}=t,{BOTTOM:n,INSIDE:s,TOP:r}=gt;return i||e?i===s&&e===s?1:i&&i!==r||e&&e!==n?(i&&i!==r||e!==r)&&(i!==n||e&&e!==n)?!(i!==r&&i!==s||e&&e!==n)==!!this.isScrollingUp()?3:4:2:5:null}}(this.Ci),this.ei.then((()=>{this.dpt.observeHost(this.Apt(),(t=>{this.vpt.relativePos=t,this.updateVisibility()}))})),this.N0||(this.N0=[this.vpt],this.setLastFetchedPage(this.vpt));const s=()=>{this.lpt(),this.li()};return this.Tpt().then((()=>this.Mpt())).then(s,s),this.Apt().classList.add("i-amphtml-next-page"),this.ei}Tpt(){return new Promise((t=>{if(0!=this.bn.getScrollTop())return t();const e=this.bn.onScroll((()=>{t(),e()}))}))}Apt(){return this.mpt}maybeFetchNext(t=!1){const e=this.N0.filter((t=>!t.is(1))).length>this.xpt,i=this.N0.some((t=>t.is(2))),n=this.Vpt()>3&&!t;if(this.ppt||i||n||e)return N();const s=this.N0.length,r=this.N0[this.kpt(this.gpt)+1];return r?r.fetch().then((()=>{r.is(4)&&this.setLastFetchedPage(r)})).then((()=>this.lpt()),(t=>this.lpt().then((()=>{throw t})))):this.Opt().then((t=>this.$pt(t))).then((()=>this.N0.length<=s?(this.ppt=!0,this.lpt()):this.maybeFetchNext(!0)))}updateVisibility(){this.N0.forEach(((t,e)=>{2===t.relativePos?t.isVisible()&&t.setVisibility(ct):3!==t.relativePos&&(t.isVisible()||t.setVisibility(at),this.jpt(e),this.Npt(e))})),this.N0.some((t=>t.isVisible()))||this.vpt.setVisibility(at),this.N0.filter((t=>t.isVisible())).forEach((t=>this.toggleHiddenAndReplaceableElements($(t.document))));const t=function(t,e){for(let e=0;e<t.length;e++)if(t[e].isVisible())return e;return-1}(this.N0),e=this.N0[t]||null;e&&this.Ppt!==e&&this.setTitlePage(e),this.maybeFetchNext()}jpt(t,e){const i=void 0===e?5:e;this.dpt.isScrollingDown()&&this.vpt.isVisible()&&this.vpt.setVisibility(ct);const n=this.dpt.isScrollingDown()?this.N0.slice(1,t).reverse():this.N0.slice(t+1);return Promise.all(n.filter((t=>2===t.relativePos)).map(((t,e)=>{if(t.isVisible()&&t.setVisibility(ct),e>=i)return t.pause()})))}Npt(t,e){const i=void 0===e?5:e,n=this.N0.slice(1).slice(Math.max(0,t-i-1),Math.min(this.N0.length,t+i+1)).filter((t=>t.is(6)));return Promise.all(n.map((t=>t.resume())))}setLastFetchedPage(t){this.gpt=t}setTitlePage(t=this.vpt){if(!t)return;const{title:e,url:i}=t;this.am.title=e,this.gn.replace({title:e,url:i}),this.Ppt=t,dt(this.Apt(),"amp-next-page-scroll",{"title":e,"url":i},!1)}createHostPage(){const{location:t,title:e}=this.am,{href:i}=t,n=function(t){const e=t.querySelector('script[type="application/ld+json"]');if(!e)return;const i=c(e.textContent);return i&&i.image?"string"==typeof i.image?i.image:i.image["@list"]&&"string"==typeof i.image["@list"][0]?i.image["@list"][0]:"string"==typeof i.image.url?i.image.url:"string"==typeof i.image[0]?i.image[0]:void 0:void 0}(this.am)||function(t){const e=t.querySelector('meta[property="og:image"]');return e?e.getAttribute("content"):void 0}(this.am)||function(t){const e=t.querySelector('link[rel="shortcut icon"]')||t.querySelector('link[rel="icon"]');return e?e.getAttribute("href"):void 0}(this.am)||"";return new yt(this,{url:i,title:e||"",image:n},5,at,this.am)}createDocumentContainerForPage(t){const e=this.am.createElement("div");e.classList.add("i-amphtml-next-page-document-container"),this.mpt.insertBefore(e,this.upt);const i=this.am.createElement("div");return i.classList.add(ue),e.appendChild(i),this.dpt.observe(i,e,(e=>{t.relativePos=e,this.updateVisibility()})),e}Cpt(){return this.Ue.hasCapability("cid")?"cid":null}attachDocumentToPage(t,e,i=!1){if(this.Vpt()<1&&!i)return Promise.resolve(null);const n=t.container;let s=m(n,`> .${p(ue)}`);if(!s){$(t.is(6));const e=m(n,`> .${p(le)}`);s=this.am.createElement("div"),s.classList.add(ue),n.replaceChild(s,e)}this.sanitizeDoc(e);try{const i=this.OU.attachShadowDoc(s,e,t.url,{visibilityState:ht,cap:this.Cpt()}),r=this.Ue.maybeGetMessageDeliverer();r&&i.onMessage(((t,e,i)=>{if("documentHeight"!==t&&"scroll"!==t&&"viewport"!==t)return r(t,e,i)}));const o=$(i.ampdoc);Zt(o,Vt,null,!1,ce),o.getBody().classList.add("i-amphtml-next-page-document");const h=this.MU.cloneNode(!0);return b(n,h),this.Lpt(h,t).then((()=>i))}catch(t){return O().error(ce,"failed to attach shadow document for page",t),Promise.resolve(null)}}closeDocument(t){if(t.is(6))return N();const e=t.container,i=m(e,`> .${p(ue)}`),n=this.am.createElement("div");n.classList.add(le);let s=0,r=0;return this.wn.measureMutateElement(i,(()=>{s=i.offsetHeight,r=i.offsetWidth}),(()=>{!function(t,e){for(const i in e)ft(t,i,e[i])}(n,{"height":`${s}px`,"width":`${r}px`}),e.replaceChild(n,i)}))}sanitizeDoc(t){e(t.querySelectorAll("amp-next-page")).forEach((t=>{if(this._pt){const e=this.Dpt(t);this.Upt(e)}v(t)})),t.body.classList.add(wt),this.toggleHiddenAndReplaceableElements(t,!1)}toggleHiddenAndReplaceableElements(t,i=!0){t!==this.vpt.document&&e(t.querySelectorAll("[next-page-hide]")).forEach((t=>mt(t,!1))),i&&e(t.querySelectorAll("*:not(amp-next-page) [next-page-replace]")).forEach((t=>{let e=t.getAttribute("next-page-replace");e||(e=String(Date.now()+Math.floor(100*Math.random())),t.setAttribute("next-page-replace",e)),this.bpt[e]&&this.bpt[e]!==t&&mt(this.bpt[e],!1),this.bpt[e]=t,mt(t,!0)}))}Vpt(){return Math.round((this.bn.getScrollHeight()-this.bn.getScrollTop()-this.bn.getHeight())/this.bn.getHeight())}kpt(t){return this.N0.indexOf(t)}fetchPageDocument(t){return ot(this.i).fetch(t.url,{ampCors:!1}).then((e=>(Mt(e.url,this.Ci.getUrl()),t.url=e.url,e.text()))).then((t=>{const e=this.am.implementation.createHTMLDocument("");return e.open(),e.write(t),e.close(),e})).catch((e=>{throw V().error(ce,"failed to fetch %s",t.url,e),e}))}Mpt(){const t=this.Dpt(this.Apt());return t.length?this.Upt(t):(j(this.wpt,"%s should contain a <script> child or a URL specified in [src]",ce),this.Opt().then((t=>0===t.length?N():this.Upt(t))))}$pt(t){return!t.length||this.ppt||t.forEach((t=>{try{if(function(t,e){V().assertString(t.url,"page url must be a string");const i=It(e),{origin:n}=St(e);var s,r;t.url=(s=t.url,r=Et(r=i),new URL(s,r.href).toString());const o=Mt(t.url,e);V().assertString(t.image,"page image must be a string"),V().assertString(t.title,"page title must be a string");const h=Tt(e);h!==n&&o.origin===h&&(t.url=`${n}/c/`+("https:"===o.protocol?"s/":"")+encodeURIComponent(o.host)+o.pathname+(o.search||"")+(o.hash||""))}(t,this.Ci.getUrl()),this.N0.some((e=>e.initialUrl==t.url)))return;this.N0.push(new At(this,t))}catch(t){V().error(ce,"Failed to queue page due to error:",t)}})),N()}Upt(t){return this.$pt(t).then((()=>this.maybeFetchNext()))}Dpt(t){const e=g(t,"SCRIPT");if(!e.length)return[];j(1===e.length,`${ce} should contain at most one <script> child`);const i=e[0];j(function(t){var e;return"SCRIPT"==t.tagName&&"APPLICATION/JSON"==(null===(e=t.getAttribute("type"))||void 0===e?void 0:e.toUpperCase())}(i),`${ce} page list should be inside a <script> tag with type="application/json"`);const n=c(i.textContent,(t=>{V().error(ce,"failed to parse inline page list",t)})),s=V().assertArray(n,`${ce} Page list expected an array, found: ${typeof n}`);return v(i),s}Opt(){return this.wpt?(this.fpt||(this.fpt=Ot(this.Ci,this.Apt(),{urlReplacement:kt.ALL,xssiPrefix:this.Apt().getAttribute("xssi-prefix")||void 0}).then((t=>(this.wpt=t.next||null,this.wpt&&this.Apt().setAttribute("src",this.wpt),t.pages||[]))).catch((t=>(V().error(ce,"error fetching page list from remote server",t),this.wpt=null,[])))),this.fpt):Promise.resolve([])}ypt(t){const e=d(t,"separator");return e?(v(e),e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e):this.zpt()}zpt(){return ut(this.Apt())(oe)}Lpt(t,e){if(!this.tg.hasTemplate(t))return N();const i={title:e.title,url:e.url,image:e.image};return this.tg.findAndRenderTemplate(t,i).then((e=>this.wn.mutateElement(t,(()=>{P(t),t.appendChild(e)}))))}Rpt(t){const e=d(t,"recommendation-box");return e?(this.lpt=this.tg.hasTemplate(e)?()=>this.Fpt():pe,e):(this.lpt=()=>this.Hpt(),this.Bpt())}Bpt(){return ut(this.Apt())(he)}Fpt(){const t=this.upt;$(this.tg.hasTemplate(t));const e=this.tg.maybeFindTemplate(t),i={pages:(this.N0||[]).filter((t=>!t.isLoaded()&&!t.is(2))).map((t=>({title:t.title,url:t.url,image:t.image})))};return this.tg.findAndRenderTemplate(t,i).then((i=>this.wn.mutateElement(t,(()=>{P(t),t.appendChild(e),t.appendChild(i)}))))}Hpt(){const t=this.upt,e={pages:(this.N0||[]).filter((t=>!t.isLoaded()&&!t.is(2))).map((t=>({title:t.title,url:t.url,image:t.image})))},i=ut(this.Apt()),n=e.pages.map((t=>{const e=i(ae),{image:n,title:s}=function(t){const e=t.querySelectorAll("[ref]"),i=o();for(let t=0;t<e.length;t++){const n=e[t],s=n.getAttribute("ref");a(s),n.removeAttribute("ref"),a(void 0===i[s]),i[s]=n}return i}(e);return n.src=t.image,s.textContent=t.title,e.href=t.url,e.addEventListener("click",(e=>{dt(this.Apt(),"amp-next-page-click",{"title":t.title,"url":t.url},!1),this.oR.navigateToAmpUrl(t.url,"content-discovery")&&e.preventDefault()})),e}));return this.wn.mutateElement(t,(()=>{P(t),n.forEach((e=>t.appendChild(e)))}))}}),t.registerElement("amp-next-page",fe,Vt)})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
/**
* @license
* Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
* Use of this source code is governed by a BSD-style
* license that can be found in the LICENSE file or at
* https://developers.google.com/open-source/licenses/bsd
*/}});
//# sourceMappingURL=amp-next-page-1.0.mjs.map