{"version":3,"file":"amp-story-subscriptions-0.1.mjs","mappings":"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","names":["obj","key","value","Object","defineProperty","enumerable","configurable","writable","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","target","i","arguments","length","source","ownKeys","forEach","getOwnPropertyDescriptors","defineProperties","isArray","Array","hasOwnProperty","hasOwn_","toString","toString_","prototype","parent","child","appendChild","maybeNode","nodeType","self","document","createTextNode","String","tag","props","children","_objectSpread2","xmlns","element","createElementNS","createElement","name","setAttribute","eventName","toLowerCase","substring","addEventListener","env","AMP_CONFIG","cdnProxyRegex","RegExp","head","location","test","origin","metaEl","querySelector","getAttribute","scriptUrl","matches","match","extensionId","undefined","extensionVersion","shouldBeTrueish","opt_message","opt_1","opt_2","opt_3","opt_4","opt_5","opt_6","opt_7","opt_8","opt_9","win","id","getServicePromiseOrNullInternal","holder","devAssert","service","__AMP_SERVICES","ctor","isServiceRegistered","s","getServices","context","resolve","promise","getServiceInternal","Promise","services","extension","version","opt_element","getServicePromiseOrNull","doc","callback","checkFunc","observer","node","ownerDocument","defaultView","MutationObserver","disconnect","observe","childList","waitForChild","documentElement","body","waitForBodyOpen","then","extensions","__AMP_TOP","getTopWindow","getService","list","querySelectorAll","scripts","script","urlParts","parseExtensionUrl","src","extensionScriptsInNode","some","extensionScriptInNode","waitForExtension","ext","cached","deferred","constructor","this","res","rej","reject","catch","emptyServiceHolderWithPromise","getServicePromiseInternal","getServicePromise","getElementServicePromiseOrNull","getMetaUrl","__AMP_LOG","user","dev","userForEmbed","AmpStorySubscriptions","AMP","BaseElement","super","storeService_","buildCallback","dialogEl","getElementServiceIfAvailable","storeService","initializeListeners_","isLayoutSupported","layout","subscribe","isDialogVisible","onSubscriptionStateChange_","mutateElement","classList","toggle","registerElement"],"sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2203281422000/","sources":["node_modules/@babel/runtime/helpers/esm/defineProperty.js","node_modules/@babel/runtime/helpers/esm/objectSpread2.js","src/core/types/array.js","src/core/types/object/index.js","src/core/dom/jsx/index.ts","src/config.js","src/service/extension-script.js","src/utils/log.js","src/service-helpers.js","src/element-service.js","src/core/dom/index.js","src/core/window/index.js","src/core/data-structures/promise.js","src/service/index.js","extensions/amp-story-subscriptions/0.1/amp-story-subscriptions.js","src/core/dom/layout/index.js","extensions/amp-story/1.0/amp-story-store-service.js","build/amp-story-subscriptions-0.1.css.js"]}
