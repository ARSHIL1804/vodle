;
import{PreactBaseElement as e}from"../bento.mjs";function t(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},{isArray:c}=Array,{hasOwnProperty:f,toString:d}=Object.prototype;function m(e){const t=Object.getOwnPropertyDescriptor(e,"message");if(null!=t&&t.writable)return e;const{message:n,stack:o}=e,r=new Error(n);for(const t in e)r[t]=e[t];return r.stack=o,r}function p(e){let t=null,n="";for(var o,r=s(arguments,!0);!(o=r()).done;){const e=o.value;e instanceof Error&&!t?t=m(e):(n&&(n+=" "),n+=e)}return t?n&&(t.message=n+": "+t.message):t=new Error(n),t}function b(e){const t=p.apply(null,arguments);return t.expected=!0,t}function y(e,...t){var n,o,r;n=b.apply(null,t),null===(o=(r=self).__AMP_REPORT_ERROR)||void 0===o||o.call(r,n)}import{Fragment as v,createElement as g}from"../bento.mjs";import{useCallback as h,useEffect as w,useImperativeHandle as j,useLayoutEffect as k,useMemo as O,useRef as S,useState as x}from"../bento.mjs";import{forwardRef as q}from"../bento.mjs";import{ContainWrapper as C,useValueRef as I}from"../bento.mjs";import{useAmpContext as R,useLoading as E}from"../bento.mjs";import{useCallback as M,useLayoutEffect as P}from"../bento.mjs";import{useAmpContext as N}from"../bento.mjs";function $(e,t){try{return function(e){return JSON.parse(e)}(e)}catch(e){return null==t||t(e),null}}var L={bubbles:!0,cancelable:!0},A=self.AMP_CONFIG||{},T=("string"==typeof A.thirdPartyFrameRegex?new RegExp(A.thirdPartyFrameRegex):A.thirdPartyFrameRegex,("string"==typeof A.cdnProxyRegex?new RegExp(A.cdnProxyRegex):A.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function V(e){if(!self.document||!self.document.head)return null;if(self.location&&T.test(self.location.origin))return null;const t=self.document.head.querySelector(`meta[name="${e}"]`);return t&&t.getAttribute("content")||null}A.thirdPartyUrl,A.thirdPartyFrameHost,A.cdnUrl||V("runtime-host"),A.errorReportingUrl,A.betaErrorReportingUrl,A.localDev,A.geoApiUrl||V("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var F={"title":"","artist":"","album":"","artwork":[{"src":""}]};function U(e){const t=e.querySelector('script[type="application/ld+json"]');if(!t)return;const n=$(t.textContent);return n&&n.image?"string"==typeof n.image?n.image:n.image["@list"]&&"string"==typeof n.image["@list"][0]?n.image["@list"][0]:"string"==typeof n.image.url?n.image.url:"string"==typeof n.image[0]?n.image[0]:void 0:void 0}function z(e){const t=e.querySelector('meta[property="og:image"]');return t?t.getAttribute("content"):void 0}function J(e){const t=e.querySelector('link[rel="shortcut icon"]')||e.querySelector('link[rel="icon"]');return t?t.getAttribute("href"):void 0}function Y({displayIcon:e,displayOverlay:t,metadata:n,onOverlayClick:o,pause:r,play:a,playing:l,wrapperRef:i}){const{playable:s}=R();return w((()=>{if(!s)return void r();const e=new IntersectionObserver((e=>{e[e.length-1].isIntersecting?a().catch((()=>{})):r()}),{threshold:.5});return e.observe(i.current),()=>{e.disconnect()}}),[i,a,r,s]),g(v,null,e&&g("div",{class:"eq-9e7199f"+(l?" eq-playing-9e7199f":"")},g(B,null)),t&&g("button",{"aria-label":n&&n.title||"Unmute video",tabindex:"0",class:"autoplay-mask-button-9e7199f fill-content-overlay-fc551a7",onClick:o}))}var B=function(e){let t=!1,n=null,o=()=>[1,2,3,4].map((e=>g("div",{class:"eq-col-9e7199f",key:e})));return(...e)=>(t||(n=o.apply(self,e),t=!0,o=null),n)}(),H=q((function(e,n){let r="class",{autoplay:a=!1,component:i="video",controls:s=!1,loading:c,loop:f=!1,mediasession:d=!0,noaudio:m=!1,onPlayingState:p,onReadyState:b,poster:v,sources:q,src:M,style:$,[r]:L}=e,A=t(e,["autoplay","component","controls","loading","loop","mediasession","noaudio","onPlayingState","onReadyState","poster","sources","src","style",r].map(o));!function(){const{notify:e}=N();P((()=>{e&&e()}))}();const{playable:T}=R(),V=E(c),B="unload"!==V,[H,W]=x(a),[Z,_]=x(!1),[D,G]=x(null),[K,Q]=x(!a),X=S(null),ee=S(null),te=O((()=>new u),[]),ne=S("loading"),oe=I(b),re=h(((e,t)=>{if(e!==ne.current){ne.current=e;const n=oe.current;n&&n(e,t)}}),[oe]),ae=I(p),le=h((e=>{_(e);const t=ae.current;t&&t(e)}),[ae]);k((()=>{B||le(!1)}),[B,le]);const ie=h((()=>te.promise.then((()=>function(e,t){const n=(o=()=>e.play(!1),new Promise((e=>{e(o())})));var o;return n.catch((e=>{y(0,e)})),n}(ee.current)))),[te]),se=h((()=>{te.promise.then((()=>{var e;return null===(e=ee.current)||void 0===e?void 0:e.pause()}))}),[te]),ue=h((()=>te.promise.then((()=>ee.current.requestFullscreen()))),[te]),ce=h((()=>{W(!1),Q(!0)}),[]);return k((()=>{var e;const t=null===(e=ee.current)||void 0===e?void 0:e.readyState;null!=t&&re(t>0?"complete":"loading")}),[re]),k((()=>(d&&Z&&D&&function(e,t,n,o){const{navigator:r}=e;"mediaSession"in r&&e.MediaMetadata&&(r.mediaSession.metadata=new e.MediaMetadata(F),r.mediaSession.metadata=new e.MediaMetadata(t),r.mediaSession.setActionHandler("play",n),r.mediaSession.setActionHandler("pause",o))}(window,D,ie,se),()=>{})),[d,Z,D,ie,se]),w((()=>{T||se()}),[T,se]),j(n,(()=>({get readyState(){return ne.current},play:ie,pause:se,requestFullscreen:ue,get currentTime(){return ee.current?ee.current.currentTime:0},get duration(){return ee.current?ee.current.duration:NaN},get autoplay(){return a},get controls(){return s},get loop(){return f},userInteracted:ce,mute:()=>W(!0),unmute:()=>{K&&W(!1)}})),[ie,se,ue,ce,K,a,s,f]),g(C,{contentRef:X,class:L,style:$,size:!0,layout:!0,paint:!0},B&&g(i,l(l({},A),{},{ref:ee,loading:V,muted:H,loop:f,controls:s&&(!a||K),onCanPlay:()=>{te.resolve(),re("complete")},onLoadedMetadata:()=>{d&&te.promise.then((()=>{var e,t;G((e=ee.current,l({"title":(t=A).title||t["aria-label"]||document.title,"artist":t.artist||"","album":t.album||"","artwork":[{"src":t.artwork||t.poster||U(document)||z(document)||J(document)||""}]},e&&e.getMetadata?e.getMetadata():Object.create(null))))})),re("complete")},onPlaying:()=>le(!0),onPause:()=>le(!1),onEnded:()=>le(!1),onError:e=>{re("error",e),te.reject(e)},class:"fill-stretch-fc551a7",src:M,poster:v}),q),a&&!K&&g(Y,{metadata:D,playing:Z,displayIcon:!m&&H,wrapperRef:X,play:ie,pause:se,displayOverlay:s,onOverlayClick:ce}))}));H.displayName="VideoWrapper";var W=class extends e{};function Z(e,t){var n;null==e||null===(n=e.contentWindow)||void 0===n||n.postMessage(t,"*")}W.Component=H,W.loadable=!0,W.layoutSizeDefined=!0,W.staticProps,W.props={"album":{attr:"album"},"alt":{attr:"alt"},"artist":{attr:"artist"},"artwork":{attr:"artwork"},"attribution":{attr:"attribution"},"autoplay":{attr:"autoplay",type:"boolean"},"controls":{attr:"controls",type:"boolean"},"controlslist":{attr:"controlslist"},"crossorigin":{attr:"crossorigin"},"disableremoteplayback":{attr:"disableremoteplayback"},"loop":{attr:"loop",type:"boolean"},"noaudio":{attr:"noaudio",type:"boolean"},"poster":{attr:"poster"},"sources":{selector:"source",single:!1,clone:!0},"src":{attr:"src"},"title":{attr:"title"},"dock":{attr:"dock",media:!0},"rotate-to-fullscreen":{attr:"rotate-to-fullscreen",type:"boolean",media:!0}},W.shadowCss='.fill-stretch-fc551a7{width:100%;height:100%;position:relative}.fill-content-overlay-fc551a7{top:0;left:0;right:0;bottom:0;position:absolute}.autoplay-mask-button-9e7199f{width:100%;border:none;display:block;-webkit-appearance:none;appearance:none;background:transparent}.eq-9e7199f{right:7px;width:20px;bottom:7px;height:12px;display:-ms-flexbox;display:flex;opacity:0.8;z-index:1;overflow:hidden;position:absolute;-ms-flex-align:end;align-items:flex-end;pointer-events:none!important}.eq-playing-9e7199f>div:after,.eq-playing-9e7199f>div:before{animation-play-state:running}.eq-col-9e7199f{-ms-flex:1;flex:1;height:100%;position:relative;margin-right:1px}.eq-col-9e7199f:after,.eq-col-9e7199f:before{width:100%;height:100%;content:"";position:absolute;animation:keyframes-eq-animation-9e7199f 0s linear infinite alternate;will-change:transform;background-color:#fafafa;animation-play-state:paused}.eq-col-9e7199f:nth-child(4):before{animation-duration:0.4s}.eq-col-9e7199f:nth-child(4):after{animation-duration:0.25s}.eq-col-9e7199f:nth-child(3):before{animation-duration:0.3s}.eq-col-9e7199f:nth-child(3):after{animation-duration:0.35s}.eq-col-9e7199f:nth-child(2):before{animation-duration:0.5s}.eq-col-9e7199f:nth-child(2):after{animation-duration:0.4s}.eq-col-9e7199f:first-child:before{animation-duration:0.3s}.eq-col-9e7199f:first-child:after{animation-duration:0.45s}@keyframes keyframes-eq-animation-9e7199f{0%{transform:translateY(100%)}to{transform:translateY(0)}}',W.usesShadowDom=!0,new Set(["c","v","a","ad"]);var _=()=>/^(https?:)?\/\/((player|www)\.)?vimeo.com(?=$|\/)/,D={"play":"playing","pause":"pause","ended":"ended","volumechange":null};function G(e,t=""){return JSON.stringify({"method":e,"value":t})}import{createElement as K}from"../bento.mjs";import{useCallback as Q,useImperativeHandle as X,useLayoutEffect as ee,useMemo as te,useRef as ne}from"../bento.mjs";import{forwardRef as oe}from"../bento.mjs";var re=["loading","unloadOnPause","sandbox","muted","controls","origin","onCanPlay","onMessage","playerStateRef","makeMethodMessage","makeFullscreenMessage","onIframeLoad"],ae=["allow-scripts","allow-same-origin","allow-popups","allow-popups-to-escape-sandbox","allow-top-navigation-by-user-activation"].join(" ");function le(e,t,n){e&&e.contentWindow&&t.then((()=>{e.contentWindow.postMessage(n(),"*")}))}var ie=oe((function(e,n){let{loading:o,unloadOnPause:r=!1,sandbox:a=ae,muted:i=!1,controls:s=!1,origin:c,onCanPlay:f,onMessage:d,playerStateRef:m,makeMethodMessage:p,makeFullscreenMessage:b,onIframeLoad:y}=e,v=t(e,re);const g=ne(null),h=te((()=>new u),[]),w=ne(p),j=Q((e=>{le(null==g?void 0:g.current,h.promise,(()=>w.current(e)))}),[h.promise]),k=ne(b),O=Q((()=>le(null==g?void 0:g.current,h.promise,k.current)),[h.promise]);X(n,(()=>({get currentTime(){var e,t;return null!==(e=null==m||null===(t=m.current)||void 0===t?void 0:t.currentTime)&&void 0!==e?e:NaN},get duration(){var e,t;return null!==(e=null==m||null===(t=m.current)||void 0===t?void 0:t.duration)&&void 0!==e?e:NaN},requestFullscreen:()=>{if(!k.current)return h.promise.then((()=>{g.current.requestFullscreen()}));O()},play:()=>j("play"),pause:()=>{if(r){const e=g.current;e&&(e.src=e.src)}else j("pause")}})),[m,j,O,h.promise,r]);const S=function(e){const t=ne(null);return t.current=e,t}(d);return ee((()=>{if(!g.current)return;function e(e){S.current&&(c&&!c.test(e.origin)||e.source!=g.current.contentWindow||S.current({currentTarget:g.current,target:g.current,data:e.data}))}const{defaultView:t}=g.current.ownerDocument;return t.addEventListener("message",e),()=>t.removeEventListener("message",e)}),[c,S]),ee((()=>{j(i?"mute":"unmute")}),[i,j]),ee((()=>{j(s?"showControls":"hideControls")}),[s,j]),K("iframe",l(l({},v),{},{ref:g,allowfullscreen:!0,frameborder:"0",sandbox:a,loading:o,onCanPlay:()=>{f&&h.promise.then(f),h.resolve()},onLoad:e=>{null==y||y(e)}}))}));ie.displayName="VideoIframeInternal";var se=oe((function(e,t){return K(H,l(l({ref:t},e),{},{component:ie}))}));se.displayName="VideoIframe";import{createElement as ue}from"../bento.mjs";import{useCallback as ce,useMemo as fe,useRef as de}from"../bento.mjs";import{forwardRef as me}from"../bento.mjs";import{useValueRef as pe}from"../bento.mjs";var be=["autoplay","doNotTrack","onLoad","videoid"];function ye(e,t){!function(e,t,n,o){e.ownerDocument;const r=e.ownerDocument.createEvent("Event");r.data={};const{bubbles:a,cancelable:l}={bubbles:!0,cancelable:!1}||L;r.initEvent(t,a,l),e.dispatchEvent(r)}(e,t)}function ve(e){return"mute"===e?G("setVolume","0"):"unmute"===e?G("setVolume","1"):G(e)}var ge=me((function(e,n){let{autoplay:o=!1,doNotTrack:r=!1,onLoad:a,videoid:i}=e,s=t(e,be);const u=fe(_,[]),f=fe((()=>function(e,t,n){return function(e,t,n){if(!t)return e;const o=e.split("#",2),r=o[0].split("?",2);let a=r[0]+(r[1]?`?${r[1]}&${t}`:`?${t}`);return a+=o[1]?`#${o[1]}`:"",a}(`https://player.vimeo.com/video/${encodeURIComponent(e)}`,function(e){const t=[];for(const a in e){let l=e[a];if(null!=l){l=c(r=l)?r:[r];for(let e=0;e<l.length;e++)t.push((n=a,o=l[e],`${encodeURIComponent(n)}=${encodeURIComponent(o)}`))}}var n,o,r;return t.join("&")}({"dnt":n?"1":void 0,"muted":t?"1":void 0}))}(i,o,r)),[i,r,o]),m=de(null),p=pe(a),b=ce((e=>{m.current!==e&&(m.current=e,ye(e,"canplay"),function(e){Object.keys(D).forEach((t=>{Z(e,G("addEventListener",t))}))}(e))}),[]),y=ce((e=>{const{currentTarget:t}=e,n=(r=o=e.data,"[object Object]"===d.call(r)?o:$(o));var o,r;if(!n)return;const a=n.event;var l;if("ready"!=a&&"ping"!=n.method){if(D[a])return ye(t,D[a]),void(null===(l=p.current)||void 0===l||l.call(p))}else b(t)}),[b,p]),v=ce((e=>{Z(e.currentTarget,G("ping"))}),[]);return ue(se,l(l({ref:n},s),{},{origin:u,autoplay:o,src:f,onMessage:y,makeMethodMessage:ve,onIframeLoad:v,controls:!0}))}));ge.displayName="BentoVimeo";var he=class extends W{};he.Component=ge,he.props={"autoplay":{attr:"autoplay",type:"boolean"},"controls":{attr:"controls",type:"boolean"},"videoid":{attr:"data-videoid"},"doNotTrack":{attr:"do-not-track"},"loading":{attr:"data-loading"}},he.layoutSizeDefined=!0,he.usesShadowDom=!0,he.loadable=!0;import{defineBentoElement as we}from"../bento.mjs";we("bento-vimeo",he,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-vimeo-1.0.mjs.map