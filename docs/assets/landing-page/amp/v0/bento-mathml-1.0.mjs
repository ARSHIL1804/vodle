;
import{PreactBaseElement as e}from"../bento.mjs";function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?n(Object(o),!0).forEach((function(n){t(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}var{isArray:a}=Array;function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var{hasOwnProperty:s,toString:u}=Object.prototype;function m(e){const t=Object.getOwnPropertyDescriptor(e,"message");if(null!=t&&t.writable)return e;const{message:n,stack:r}=e,o=new Error(n);for(const t in e)o[t]=e[t];return o.stack=r,o}function c(e){let t=null,n="";for(var r,o=i(arguments,!0);!(r=o()).done;){const e=r.value;e instanceof Error&&!t?t=m(e):(n&&(n+=" "),n+=e)}return t?n&&(t.message=n+": "+t.message):t=new Error(n),t}function f(e){var t,n;null===(t=(n=self).__AMP_REPORT_ERROR)||void 0===t||t.call(n,e)}function d(e,t){try{return function(e){return JSON.parse(e)}(e)}catch(e){return null==t||t(e),null}}import{createElement as b}from"../bento.mjs";import{useCallback as p,useMemo as v}from"../bento.mjs";import{forwardRef as g}from"../bento.mjs";import{useValueRef as y}from"../bento.mjs";import{createElement as w}from"../bento.mjs";import{useEffect as j,useImperativeHandle as h,useLayoutEffect as S,useMemo as O,useRef as x,useState as E}from"../bento.mjs";import{forwardRef as A}from"../bento.mjs";import{createElement as M}from"../bento.mjs";import{useCallback as R,useEffect as $,useImperativeHandle as F,useLayoutEffect as H,useRef as I}from"../bento.mjs";import{forwardRef as k}from"../bento.mjs";import{ContainWrapper as L,useValueRef as z}from"../bento.mjs";import{useAmpContext as B,useLoading as N}from"../bento.mjs";var U=["allow","allowFullScreen","iframeStyle","name","title","matchesMessagingOrigin","messageHandler","ready","loading","onReadyState","sandbox","src"],V=()=>!1,C=k((function(e,t){let{allow:n,allowFullScreen:a,iframeStyle:l,name:i,title:s,matchesMessagingOrigin:u=V,messageHandler:m,ready:c=!0,loading:f,onReadyState:d,sandbox:b,src:p}=e,v=o(e,U);const{playable:g}=B(),y=N(f),w="unload"!==y,j=I(!1),h=z(d),S=R((e=>{if(e!==j.current){j.current=e;const t=h.current;null==t||t(e?"complete":"loading")}}),[h]),O=I(null);return F(t,(()=>({get readyState(){return j.current?"complete":"loading"},get node(){return O.current}})),[]),H((()=>{w||S(!1)}),[w,S]),$((()=>{const e=O.current;if(!g&&e){const{src:t}=e;(e=>!(!e||"about:blank"==e||e.includes("#")))(t)?e.src=e.src:e.parentNode.insertBefore(e,e.nextSibling)}}),[g]),H((()=>{const e=O.current;if(!e||!w)return;const t=e=>{const t=O.current;t&&e.source==t.contentWindow&&u(e.origin)&&m(e)},{defaultView:n}=e.ownerDocument;return n.addEventListener("message",t),()=>n.removeEventListener("message",t)}),[u,m,w,c]),M(L,r(r({},v),{},{layout:!0,size:!0,paint:!0}),w&&c&&M("iframe",{allow:n,allowFullScreen:a,frameBorder:"0",loading:y,name:i,onLoad:()=>S(!0),part:"iframe",ref:O,sandbox:b,scrolling:"no",src:p,style:r(r({},l),{},{width:"100%",height:"100%",contentVisibility:"auto"}),title:s}))}));C.displayName="IframeEmbed";var G=self.AMP_CONFIG||{},J=("string"==typeof G.thirdPartyFrameRegex?new RegExp(G.thirdPartyFrameRegex):G.thirdPartyFrameRegex,("string"==typeof G.cdnProxyRegex?new RegExp(G.cdnProxyRegex):G.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function P(e){if(!self.document||!self.document.head)return null;if(self.location&&J.test(self.location.origin))return null;const t=self.document.head.querySelector(`meta[name="${e}"]`);return t&&t.getAttribute("content")||null}var T,_=G.thirdPartyUrl||"https://3p.ampproject.net",q=G.thirdPartyFrameHost||"ampproject.net";function Z(e){return`${_}/2203281422000/vendor/${e}.mjs`}function D(e){let t;if(e.crypto&&e.crypto.getRandomValues){const n=new Uint32Array(2);e.crypto.getRandomValues(n),t=String(n[0])+n[1]}else t=String(e.Math.random()).substr(2)+"0";return t}G.cdnUrl||P("runtime-host"),G.errorReportingUrl,G.betaErrorReportingUrl,G.localDev,G.geoApiUrl||P("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG,new Set(["c","v","a","ad"]);var K=["allow","excludeSandbox","name","messageHandler","options","sandbox","src","type","title"],Q={},W="sync-xhr 'none'",X=["allow-top-navigation-by-user-activation","allow-popups-to-escape-sandbox"].join(" ")+" "+["allow-forms","allow-modals","allow-pointer-lock","allow-popups","allow-same-origin","allow-scripts"].join(" "),Y=A((function(e,t){let{allow:n=W,excludeSandbox:a,name:l,messageHandler:i,options:s,sandbox:u=X,src:m,type:c,title:f=c}=e,d=o(e,K);if(b=n,"number"!=typeof v&&(v=0),v+(p=W).length>b.length||-1===b.indexOf(p,v))throw new Error(`'allow' prop must contain "${W}". Found "${n}".`);var b,p,v;const g=x(null),y=x(null),A=O((()=>(Q[c]||(Q[c]=function(){let e=0;return()=>String(++e)}()),Q[c]())),[c]),[M,R]=E({name:l,src:m}),{name:$,src:F}=M,H=x(null);return S((()=>{var e,t;const n=null===(e=g.current)||void 0===e||null===(t=e.ownerDocument)||void 0===t?void 0:t.defaultView,o=null!=m?m:n?((a=n).__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN=a.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN||"d-"+D(a),"https://"+a.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN+`.${q}/2203281422000/frame.html`):"about:blank";var a;if(l)return void R({name:l,src:o});if(!n)return;H.current||(H.current=function(e){let t=0;for(let n=e;n&&n!=n.parent;n=n.parent)t++;return String(t)+"-"+D(e)}(n));const i=Object.assign({"location":{"href":n.location.href},"sentinel":H.current}),u=r({"title":f,"type":c,"_context":i},s);var d;R({name:JSON.stringify({"host":(d=o,T||(T=self.document.createElement("a")),function(e,t,n){return e.href="",new URL(t,e.href)}(T,d)).hostname,"bootstrap":Z(c),"type":c,"count":A,"attributes":u}),src:o})}),[A,l,s,m,f,c]),j((()=>{var e;const t=null===(e=y.current)||void 0===e?void 0:e.node;t&&t.parentNode.insertBefore(t,t.nextSibling)}),[$]),h(t,(()=>({get readyState(){var e;return null===(e=y.current)||void 0===e?void 0:e.readyState},get node(){var e;return null===(e=y.current)||void 0===e?void 0:e.node}})),[]),w(C,r(r({},d),{},{allow:n,contentRef:g,messageHandler:i,name:$,ref:y,ready:!!$,sandbox:a?void 0:u,src:F,title:f}))}));Y.displayName="ProxyIframeEmbed";var ee=["formula","inline","onLoad","title"],te=()=>!0,ne=g((function(e,t){const{formula:n,inline:a=!1,onLoad:l,title:i="MathML formula"}=e,s=o(e,ee),u=y(l),m=p((e=>{var t,n;"embed-size"==(null!==(t=d(e.data))&&void 0!==t?t:function(e){if(!function(e){return"string"==typeof e&&e.startsWith("amp-")&&-1!=e.indexOf("{")}(e))return null;const t=e.indexOf("{");return d(e.substr(t),(t=>{!function(e){const t=c.apply(null,arguments);setTimeout((()=>{throw f(t),t}))}(new Error(`MESSAGING: Failed to parse message: ${e}\n${t.message}`))}))}(e.data)).type&&(null===(n=u.current)||void 0===n||n.call(u))}),[u]),g=v((()=>({formula:n})),[n]);return function({formula:e}){return!!e||(console.warn("formula is required for <BentoMathml>"),!1)}(e)?b(Y,r({class:a?"inline-91960b0":"",allowFullscreen:!0,ref:t,type:"mathml",title:i,options:g,matchesMessagingOrigin:te,messageHandler:m},s)):null}));ne.displayName="BentoMathml";var re=class extends e{};re.Component=ne,re.props={"inline":{attr:"inline",type:"boolean",default:!1},"formula":{attr:"data-formula"},"title":{attr:"title"}},re.layoutSizeDefined=!0,re.usesShadowDom=!0,re.shadowCss=".inline-91960b0{display:inline-block;vertical-align:middle}";import{defineBentoElement as oe}from"../bento.mjs";oe("bento-mathml",re,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-mathml-1.0.mjs.map