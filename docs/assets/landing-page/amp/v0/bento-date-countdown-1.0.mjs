;
var t={};!function(t){var n=Object.prototype.toString,e=Array.isArray||function(t){return"[object Array]"===n.call(t)};function r(t){return"function"==typeof t}function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(t,n){return null!=t&&"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,n)}var s=RegExp.prototype.test,u=/\S/,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},f=/\s*/,c=/\s+/,l=/\s*=/,m=/\s*\}/,h=/#|\^|\/|>|\{|&|=|!/;function d(t){this.string=t,this.tail=t,this.pos=0}function v(t,n){this.view=t,this.cache={".":this.view},this.parent=n}function b(){this.cache={}}d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(t){var n=this.tail.match(t);if(!n||0!==n.index)return"";var e=n[0];return this.tail=this.tail.substring(e.length),this.pos+=e.length,e},d.prototype.scanUntil=function(t){var n,e=this.tail.search(t);switch(e){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,e),this.tail=this.tail.substring(e)}return this.pos+=n.length,n},v.prototype.push=function(t){return new v(t,this)},v.prototype.lookup=function(t){var n,e=this.cache;if(e.hasOwnProperty(t))n=e[t];else{for(var i,s,u=this,a=!1;u;){if(t.indexOf(".")>0)for(n=u.view,i=t.split("."),s=0;null!=n&&s<i.length;){if(!o(n,i[s])){n=null;break}s===i.length-1&&(a=!0),n=n[i[s++]]}else o(u.view,t)?(n=u.view[t],a=!0):n=null;if(a)break;u=u.parent}e[t]=n}return r(n)&&(n=n.call(this.view)),n},b.prototype.clearCache=function(){this.cache={}},b.prototype.parse=function(n,r){var o=this.cache,a=o[n];return null==a&&(a=o[n]=function(n,r){if(!n)return[];var o,a,v,b,p=[],g=[],w=[],j=!1,y=!1;function O(){if(j&&!y)for(;w.length;)delete g[w.pop()];else w=[];j=!1,y=!1}!function(t){if("string"==typeof t&&(t=t.split(c,2)),!e(t)||2!==t.length)throw new Error("Invalid tags: "+t);o=new RegExp(i(t[0])+"\\s*"),a=new RegExp("\\s*"+i(t[1])),v=new RegExp("\\s*"+i("}"+t[1]))}(r||t.tags);for(var E,S,x,M,$,k,U=new d(n);!U.eos();){if(E=U.pos,x=U.scanUntil(o))for(var D=0,N=x.length;D<N;++D)b=M=x.charAt(D),function(t,n){return s.call(t,n)}(u,b)?y=!0:w.push(g.length),g.push(["text",M,E,E+1]),E+=1,"\n"===M&&O();if(!U.scan(o))break;if(j=!0,S=U.scan(h)||"name",U.scan(f),"="===S?(x=U.scanUntil(l),U.scan(l),U.scanUntil(a)):"{"===S?(x=U.scanUntil(v),U.scan(m),U.scanUntil(a),S="&"):x=U.scanUntil(a),!U.scan(a))throw new Error("Unclosed tag at "+U.pos);if($=[S,x,E,U.pos],g.push($),"#"===S||"^"===S)p.push($);else if("/"===S){if(!(k=p.pop()))throw new Error('Unopened section "'+x+'" at '+E);if(k[1]!==x)throw new Error('Unclosed section "'+k[1]+'" at '+E)}else"name"!==S&&"{"!==S&&"&"!==S||(y=!0)}if(k=p.pop())throw new Error('Unclosed section "'+k[1]+'" at '+U.pos);return function(t){for(var n,e=[],r=e,i=[],o=0,s=t.length;o<s;++o)switch((n=t[o])[0]){case"#":case"^":r.push(n),i.push(n),r=n[4]=[];break;case"/":i.pop()[5]=n[2],r=i.length>0?i[i.length-1][4]:e;break;default:r.push(n)}return e}(function(t){for(var n,e,r=[],i=0,o=t.length;i<o;++i)(n=t[i])&&("text"===n[0]&&e&&"text"===e[0]?(e[1]+=n[1],e[3]=n[3]):(r.push(n),e=n));return r}(g))}(n,r)),a},b.prototype.render=function(t,n,e){var r=this.parse(t),i=n instanceof v?n:new v(n);return this.renderTokens(r,i,e,t)},b.prototype.renderTokens=function(t,n,e,r){for(var i,o,s,u="",a=0,f=t.length;a<f;++a)s=void 0,"#"===(o=(i=t[a])[0])?s=this.renderSection(i,n,e,r):"^"===o?s=this.renderInverted(i,n,e,r):">"===o?s=this.renderPartial(i,n,e,r):"&"===o?s=this.unescapedValue(i,n):"name"===o?s=this.escapedValue(i,n):"text"===o&&(s=this.rawValue(i)),void 0!==s&&(u+=s);return u},b.prototype.renderSection=function(t,n,i,o){var s=this,u="",a=n.lookup(t[1]);if(a){if(e(a))for(var f=0,c=a.length;f<c;++f)u+=this.renderTokens(t[4],n.push(a[f]),i,o);else if("object"==typeof a||"string"==typeof a||"number"==typeof a)u+=this.renderTokens(t[4],n.push(a),i,o);else if(r(a)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(a=a.call(n.view,o.slice(t[3],t[5]),(function(t){return s.render(t,n,i)})))&&(u+=a)}else u+=this.renderTokens(t[4],n,i,o);return u}},b.prototype.renderInverted=function(t,n,r,i){var o=n.lookup(t[1]);if(!o||e(o)&&0===o.length)return this.renderTokens(t[4],n,r,i)},b.prototype.renderPartial=function(t,n,e){if(e){var i=r(e)?e(t[1]):e[t[1]];return null!=i?this.renderTokens(this.parse(i),n,e,i):void 0}},b.prototype.unescapedValue=function(n,e){var r=e.lookup(n[1]);if(null!=r)return t.sanitizeUnescaped?t.sanitizeUnescaped(r):r},b.prototype.escapedValue=function(n,e){var r=e.lookup(n[1]);if(null!=r)return t.escape(r)},b.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.2.0",t.tags=["{{","}}"];var p=new b;t.clearCache=function(){return p.clearCache()},t.parse=function(t,n){return p.parse(t,n)},t.render=function(t,n,r){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+(e(i=t)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)');var i;return p.render(t,n,r)},t.to_html=function(n,e,i,o){var s=t.render(n,e,i);if(!r(o))return s;o(s)},t.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,(function(t){return a[t]}))},t.sanitizeUnescaped=null,t.setUnescapedSanitizer=function(n){t.sanitizeUnescaped=n},t.Scanner=d,t.Context=v,t.Writer=b}(t);var n=t;function e(t,n){const e=[];let r=0;for(let i=0;i<t.length;i++){const o=t[i];n(o,i,t)?e.push(o):(r<i&&(t[r]=o),r++)}return r<t.length&&(t.length=r),e}var{hasOwnProperty:r,toString:i}=Object.prototype;function o(t){return 1==(null==(n=t)?void 0:n.nodeType)?(t=t).tagName.toLowerCase()+(t.id?`#${t.id}`:""):t;var n}function s(t,n,r,i,s,u,a,f,c,l,m){return function(t,n,r="Assertion failed",i){var s,u;if(n)return n;t&&-1==r.indexOf(t)&&(r+=t);let a=3;const f=r.split("%s");let c=f.shift();const l=[c];for(;f.length;){const t=arguments[a++],n=f.shift();c+=o(t)+n,l.push(t,n.trim())}const m=new Error(c);throw m.messageArray=e(l,(t=>""!==t)),null===(s=(u=self).__AMP_REPORT_ERROR)||void 0===s||s.call(u,m),m}("​​​",t,n,r,i,s,u,a,f,c,l,m)}import{defineBentoElement as u}from"../bento.mjs";function a(t){if(!t)return null;if("now"===t.toLowerCase())return Date.now();const n=Date.parse(t);return isNaN(n)?null:n}var f={"datetime":t=>{const n=a(t);return s(n,"Invalid date: %s",t),n},"end-date":t=>{const n=a(t);return s(n,"Invalid date: %s",t),n},"timeleft-ms":t=>Date.now()+Number(t),"timestamp-ms":t=>Number(t),"timestamp-seconds":t=>1e3*Number(t)};import{PreactBaseElement as c}from"../bento.mjs";function l(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function m(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function h(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?m(Object(e),!0).forEach((function(n){l(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):m(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}import{createElement as d}from"../bento.mjs";import{useEffect as v,useMemo as b,useRef as p,useState as g}from"../bento.mjs";import{Wrapper as w}from"../bento.mjs";import{useLayoutEffect as j,useState as y}from"../bento.mjs";import{useAmpContext as O}from"../bento.mjs";import{useCallback as E,useLayoutEffect as S}from"../bento.mjs";import{useAmpContext as x}from"../bento.mjs";function M(t){return $[t]}var $={"de":["Jahren","Monaten","Tagen","Stunden","Minuten","Sekunden"],"en":["Years","Months","Days","Hours","Minutes","Seconds"],"es":["años","meses","días","horas","minutos","segundos"],"fr":["ans","mois","jours","heures","minutes","secondes"],"id":["tahun","bulan","hari","jam","menit","detik"],"it":["anni","mesi","giorni","ore","minuti","secondi"],"ja":["年","ヶ月","日","時間","分","秒"],"ko":["년","달","일","시간","분","초"],"nl":["jaar","maanden","dagen","uur","minuten","seconden"],"pt":["anos","meses","dias","horas","minutos","segundos"],"ru":["год","месяц","день","час","минута","секунда"],"th":["ปี","เดือน","วัน","ชั่วโมง","นาที","วินาที"],"tr":["yıl","ay","gün","saat","dakika","saniye"],"vi":["năm","tháng","ngày","giờ","phút","giây"],"zh-cn":["年","月","天","小时","分钟","秒"],"zh-tw":["年","月","天","小時","分鐘","秒"]},k=["datetime","whenEnded","locale","biggestUnit","countUp","render"],U={DAYS:1,HOURS:2,MINUTES:3,SECONDS:4},D="en",N="stop",A="DAYS",I=!1,C=t=>`${t.days} ${t.dd}, ${t.hours} ${t.hh}, ${t.minutes} ${t.mm}, ${t.seconds} ${t.ss}`;function R(t){return t<-9||t>9?String(t):t>=-9&&t<0?"-0"+-t:"0"+t}function T(t){return t<0?t+1:t}var _=class extends c{};_.Component=function(t){let{datetime:n,whenEnded:e=N,locale:r=D,biggestUnit:i=A,countUp:o=I,render:s=C}=t,u=function(t,n){if(null==t)return{};var e,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e=o[r],n.indexOf(e)>=0||(i[e]=t[e]);return i}(t,k);!function(){const{notify:t}=x();S((()=>{t&&t()}))}();const{playable:f}=O(),c=b((()=>{return(t=n)?"number"==typeof t?t:"string"==typeof t?a(t):(t=t).getTime():null;var t}),[n]),l=b((()=>function(t){var n;void 0===M(t)&&(n=`Invalid locale ${t}, defaulting to ${D}. DateCountdown`,console.warn(n),t=D);const e=M(t);return{"years":e[0],"months":e[1],"days":e[2],"hours":e[3],"minutes":e[4],"seconds":e[5]}}(r)),[r]),[m,E]=g(c-Date.now()+1e3),$=b((()=>function(t,n,e,r){return h(h({},function(t,n,e){e&&(t*=-1);const r=U[n]==U.DAYS?T(Math.floor(t/864e5)):0,i=U[n]==U.HOURS?T(Math.floor(t/36e5)):U[n]<U.HOURS?T(Math.floor(t%864e5/36e5)):0,o=U[n]==U.MINUTES?T(Math.floor(t/6e4)):U[n]<U.MINUTES?T(Math.floor(t%36e5/6e4)):0,s=T(U[n]==U.SECONDS?Math.floor(t/1e3):Math.floor(t%6e4/1e3));return{"d":r,"dd":R(r),"h":i,"hh":R(i),"m":o,"mm":R(o),"s":s,"ss":R(s)}}(t,n,r)),e)}(m,i,l,o)),[m,i,l,o]),_=p(null);v((()=>{if(!f||!_.current)return;const t=_.current.ownerDocument.defaultView,n=t.setInterval((()=>{const r=c-Date.now()+1e3;E(r),e===N&&r<1e3&&t.clearInterval(n)}),1e3);return()=>t.clearInterval(n)}),[f,c,e]);const H=function(t,n){const[e,r]=y(null);return j((()=>{const e=t&&t(n)||null;if("function"==typeof(null==(i=e)?void 0:i.then)){let t=!1;return e.then((n=>{t||r(n)})),()=>{t=!0}}var i;r(e)}),[t,n]),e}(s,$),P=H&&"object"==typeof H&&"__html"in H;return d(w,h(h({},u),{},{ref:_,dangerouslySetInnerHTML:P?H:null}),P?null:H)},_.layoutSizeDefined=!0,_.lightDomTag="div",_.usesTemplate=!0,_.props={"datetime":{attrs:["end-date","timeleft-ms","timestamp-ms","timestamp-seconds","offset-seconds"],parseAttrs:function(t){return function(t,n){const e=function(t,n){const e=n.map((t=>f[t]));for(let r=0;r<n.length;++r){const i=t.getAttribute(n[r]);if(i)return e[r](i)}return null}(t,n);return s(e,"One of attributes [%s] is required",n.join(", ")),e+1e3*(Number(t.getAttribute("offset-seconds"))||0)}(t,["end-date","timeleft-ms","timestamp-ms","timestamp-seconds"])}},"whenEnded":{attr:"when-ended"},"locale":{attr:"locale"},"biggestUnit":{attr:"biggest-unit"},"countUp":{attr:"count-up",type:"boolean"}},u("bento-date-countdown",class extends _{checkPropsPostMutations(){const t=function(t,n="template"){if(t.hasAttribute(n)){const r=t.getAttribute(n);return Boolean(r)?t.ownerDocument.querySelector(`template#${e=r,CSS.escape(e)}`):null}var e;return t.querySelector("template")}(this.element);t&&this.mutateProps({"render":e=>({"__html":n.render(t.innerHTML,e)})})}},void 0);
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-date-countdown-1.0.mjs.map