;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-video-docking",ev:"0.1",l:!0,f:function(t,i){(()=>{function i(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}function o(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),o.push.apply(o,e)}return o}function e(t,i){(null==i||i>t.length)&&(i=t.length);for(var o=0,e=new Array(i);o<i;o++)e[o]=t[o];return e}function s(t,i){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(o)return(o=o.call(t)).next.bind(o);if(Array.isArray(t)||(o=function(t,i){if(t){if("string"==typeof t)return e(t,i);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,i):void 0}}(t))||i&&t&&"number"==typeof t.length){o&&(t=o);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,a,{isArray:h}=Array,{hasOwnProperty:d,toString:l}=Object.prototype;function c(t){const i=Object.create(null);return t&&Object.assign(i,t),i}function u(t,i,o,e,s,n,r,a,h,d,l){return t}function m(t,i){t.classList.add("i-amphtml-fill-content"),i&&t.classList.add("i-amphtml-replaced-content")}function p(t,i,o,e){return{left:t,top:i,width:o,height:e,bottom:i+e,right:t+o,x:t,y:i}}function v(t){const i=t.ownerDocument||t;return r&&r.ownerDocument===i||(r=i.createElement("div")),g}function g(t){return function(t,i){u(1===i.length),t.innerHTML=i[0];const o=t.firstElementChild;return u(o),u(!o.nextElementSibling),t.removeChild(o),o}(r,t)}function f(t){const i=t.querySelectorAll("[ref]"),o=c();for(let t=0;t<i.length;t++){const e=i[t],s=e.getAttribute("ref");u(s),e.removeAttribute("ref"),u(void 0===o[s]),o[s]=e}return o}function _(t){const i=Object.getOwnPropertyDescriptor(t,"message");if(null!=i&&i.writable)return t;const{message:o,stack:e}=t,s=new Error(o);for(const i in t)s[i]=t[i];return s.stack=e,s}function k(t){let i=null,o="";for(var e,n=s(arguments,!0);!(e=n()).done;){const t=e.value;t instanceof Error&&!i?i=_(t):(o&&(o+=" "),o+=t)}return i?o&&(i.message=o+": "+i.message):i=new Error(o),i}function A(t){const i=k.apply(null,arguments);return i.expected=!0,i}function P(t,...i){var o,e,s;o=A.apply(null,i),null===(e=(s=self).__AMP_REPORT_ERROR)||void 0===e||e.call(s,o)}var b=["Webkit","webkit","Moz","moz","ms","O","o"];function M(t){const i=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return b.some((t=>i.startsWith(t+"-")))?`-${i}`:i}function w(t,i,o){if(i.startsWith("--"))return i;a||(a=c());let e=a[i];if(!e||o){if(e=i,void 0===t[i]){const o=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(i),s=function(t,i){for(let o=0;o<b.length;o++){const e=b[o]+i;if(void 0!==t[e])return e}return""}(t,o);void 0!==t[s]&&(e=s)}o||(a[i]=e)}return e}function V(t,i){const{style:o}=t;for(const t in i)o.setProperty(M(w(o,t)),String(i[t]),"important")}function x(t,i,o,e,s){const n=w(t.style,i,s);if(!n)return;const r=e?o+e:o;t.style.setProperty(M(n),r)}function T(t,i){void 0===i&&(i=t.hasAttribute("hidden")),i?t.removeAttribute("hidden"):t.setAttribute("hidden","")}function y(t){return`${t}px`}function E(t,i){return"number"==typeof t?i(t):t}function R(t,i){return null==i?`translate(${E(t,y)})`:`translate(${E(t,y)}, ${E(i,y)})`}function I(t,i){for(let o=0;o<i.length;o++)x(t,i[o],null)}function z(t){return t.querySelector("video, iframe")}function H(t){let i=!1,o=null,e=t;return(...t)=>(i||(o=e.apply(self,t),i=!0,e=null),o)}var O=self.AMP_CONFIG||{},B=("string"==typeof O.thirdPartyFrameRegex?new RegExp(O.thirdPartyFrameRegex):O.thirdPartyFrameRegex,("string"==typeof O.cdnProxyRegex?new RegExp(O.cdnProxyRegex):O.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function j(t){if(!self.document||!self.document.head)return null;if(self.location&&B.test(self.location.origin))return null;const i=self.document.head.querySelector(`meta[name="${t}"]`);return i&&i.getAttribute("content")||null}O.thirdPartyUrl,O.thirdPartyFrameHost,O.cdnUrl||j("runtime-host"),O.errorReportingUrl,O.betaErrorReportingUrl,O.localDev,O.geoApiUrl||j("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var D=self.__AMP_LOG;function S(t){return D.user||(D.user=$()),function(t,i){return i&&i.ownerDocument.defaultView!=t}(D.user.win,t)?D.userForEmbed||(D.userForEmbed=$()):D.user}function $(t){return function(t,i){throw new Error("failed to call initLogConstructor")}()}function L(t,i,o,e,s,n,r,a,h,d,l){return t}function C(t,i,o,e,s,n,r,a,h,d,l){return S().assert(t,i,o,e,s,n,r,a,h,d,l)}function N(t,i){return F(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),i)}function W(t,i){return F(U(X(t)),i)}function X(t){return t.nodeType?(i=t,o=(i.ownerDocument||i).defaultView,N(o,"ampdoc")).getAmpDoc(t):t;var i,o}function U(t){const i=X(t);return i.isSingleDoc()?i.win:i}function F(t,i){L(Z(t,i));const o=function(t){let i=t.__AMP_SERVICES;return i||(i=t.__AMP_SERVICES={}),i}(t)[i];return o.obj||(L(o.ctor),L(o.context),o.obj=new o.ctor(o.context),L(o.obj),o.context=null,o.resolve&&o.resolve(o.obj)),o.obj}function Z(t,i){const o=t.__AMP_SERVICES&&t.__AMP_SERVICES[i];return!(!o||!o.ctor)}var Y,q=t=>function(t,i){const o=U(X(t));return Z(o,i)?F(o,i):null}(t,"action"),G=t=>N(t,"platform"),J=t=>F(t,"timer"),K=t=>W(t,"video-manager");function Q(t,i,o,e){let s=t,n=o,r=t=>{try{return n(t)}catch(t){var i,o;throw null===(i=(o=self).__AMP_REPORT_ERROR)||void 0===i||i.call(o,t),t}};const a=function(){if(void 0!==Y)return Y;Y=!1;try{const t={get capture(){return Y=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return Y}(),h=!(null==e||!e.capture);return s.addEventListener(i,r,a?e:h),()=>{null==s||s.removeEventListener(i,r,a?e:h),n=null,s=null,r=null}}function tt(t,i,o,e){const s={detail:o};return Object.assign(s,e),new t.CustomEvent(i,s)}function it(t,i,o,e){return Q(t,i,o,e)}function ot(t,i,o,e){let s=o;const n=Q(t,i,(t=>{try{s(t)}finally{s=null,n()}}),e);return n}function et(t,i,o){o=o.sort(((t,i)=>i.minWidth-t.minWidth));let e=-1;o.forEach((o=>{const{className:s,minWidth:n}=o;n<=i&&n>e?(t.classList.add(s),e=n):t.classList.remove(s)}))}var st="dock-dismiss-on-tap",nt="dock-scroll-back";function rt(t){const i=t.touches?t.touches[0]:t;return{x:"x"in i?i.x:i.clientX,y:"y"in i?i.y:i.clientY}}var at="dock",ht="registered",dt=["<div class=i-amphtml-video-docked-overlay hidden></div>"],lt=['<div class=amp-video-docked-controls hidden><div class="amp-video-docked-main-button-group amp-video-docked-control-set-playback"><div class=amp-video-docked-button-group><div role=button ref=playButton class=amp-video-docked-play></div><div role=button ref=pauseButton class=amp-video-docked-pause></div></div><div class=amp-video-docked-button-group><div role=button ref=muteButton class=amp-video-docked-mute></div><div role=button ref=unmuteButton class=amp-video-docked-unmute></div></div><div class=amp-video-docked-button-group><div role=button ref=fullscreenButton class=amp-video-docked-fullscreen></div></div></div><div class="amp-video-docked-main-button-group amp-video-docked-control-set-scroll-back" hidden><div class=amp-video-docked-button-group><div role=button ref=scrollBackButton class=amp-video-docked-scroll-back></div></div></div><div class=amp-video-docked-button-dismiss-group ref=dismissContainer><div role=button ref=dismissButton class=amp-video-docked-dismiss></div></div></div>'],ct="playback",ut="scroll-back",mt=[{className:"amp-small",minWidth:0},{className:"amp-large",minWidth:300}];function pt(t,i){T(t,!1),T(i,!0)}var vt="left",gt="right",ft="bottom";function _t(t,i,o,e){return e*(t-i-2*o)}function kt(t,i,o,e){return _t(t,i,o,e)}function At(t,i,o,e){return _t(t,i,o,-e)}var Pt=(t,i,o)=>{return(e=t)<0?e=0:e>1&&(e=1),(e-0)*(o-(s=i))/1+s;var e,s};function bt(t,i){const{height:o,width:e}=t,{height:s,left:n,top:r,width:a}=i;let h,d,l;return e/o>a/s?(l=a/e,d=r+s/2-o*l/2,h=n):(l=s/o,h=n+a/2-e*l/2,d=r),p(h,d,e*l,o*l)}function Mt(t,i,o,e,s,n,r){const a=i.width,h=Math.min(r,n*a),d=t.width/t.height,l=Math.max(s,a*e),c=l/d;return p(o==gt?i.right-h-l:i.left+h,h,l,c)}var wt=t=>t.width>0&&t.height>0,Vt=t=>({get:t,configurable:!1,enumerable:!0});function xt(t,i,o){if(i[o])return i[o];const e=t.querySelector(`style[${o}], link[${o}]`);return e?(i[o]=e,e):null}var Tt=["<div class=amp-video-docked-shadow hidden></div>"],yt=["<div class=amp-video-docked-placeholder-background><div class=amp-video-docked-placeholder-background-poster ref=poster></div><div class=amp-video-docked-placeholder-icon ref=icon></div></div>"],Et=.85,Rt=[{className:"amp-small",minWidth:0},{className:"amp-large",minWidth:420}],It="i-amphtml-video-docked",zt="slot",Ht=(t,i,o)=>`translate(${t}px, ${i}px) scale(${o})`;function Ot(t,i){let o=!1;return(...e)=>{o||(o=!0,t.requestAnimationFrame((()=>{i.apply(null,e),o=!1})))}}t.registerServiceForDoc("video-docking",class{constructor(t){this.Ci=t,this.E_=H((()=>K(t))),this.bn=W(t,"viewport"),this.If=function(t){const i=Vt((()=>t.getSize().width)),o=Vt((()=>t.getSize().height));return Object.defineProperties(p(0,0,0,0),{width:i,height:o,right:i,bottom:o})}(this.bn),this.tH=null,this.iH=null;const i=v(this.oH());this.eH=H((()=>this.zx((t=>t(Tt))(i)))),this.sH=H((()=>this.nH())),this.rH=H((()=>this.zx((t=>t(yt))(i)))),this.aH=H((()=>f(this.rH()))),this.hH=null,this.dH=null,this.lH=null,this.cH=null,this.Tx=this.bn.getScrollTop(),this.uH=!1,this.mH=0,this.pH=0,this.vH=0,this.Ni=[],this.Px=H((()=>{const t=this.Ci;this.bn.onScroll(Ot(t.win,(()=>this.gH()))),this.bn.onResize((()=>this.fH())),function(t,i,o,e,s){const n=t.getHeadNode();!function(t,i,o,e){let s=t.__AMP_CSS_SM;s||(s=t.__AMP_CSS_SM=c());const n=`amp-extension=${e}`;if(n){const o=xt(t,s,n);if(o)return"STYLE"==o.tagName&&o.textContent!==i&&(o.textContent=i),o}const r=(t.ownerDocument||t).createElement("style");r.textContent=i;let a=null;r.setAttribute("amp-extension",e),a=xt(t,s,"amp-runtime"),function(t,i,o=null){if(!o)return void function(t,i){t.insertBefore(i,t.firstChild)}(t,i);const e=o.nextSibling;t.insertBefore(i,e)}(t,r,a),n&&(s[n]=r)}(n,function(t,i){const o=t.__AMP_CSS_TR;return o?o(i):i}(n,'.amp-video-docked-controls{direction:ltr!important;opacity:0;pointer-events:none!important;transition:opacity 0.3s ease;height:120px}.amp-video-docked-main-button-group{height:40px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;margin:-20px 0 0 -60px}.amp-large>.amp-video-docked-main-button-group{margin-left:-70px}.amp-large>.amp-video-docked-main-button-group>.amp-video-docked-button-group{margin-right:10px}.amp-large>.amp-video-docked-control-set-scroll-back,.amp-small>.amp-video-docked-control-set-scroll-back{margin-left:-32px}.amp-large>.amp-video-docked-control-set-scroll-back>.amp-video-docked-button-group{margin-right:0}.amp-large>.amp-video-docked-button-dismiss-group{margin:6px 0 0 -6px}.amp-small>.amp-video-docked-button-dismiss-group,.amp-small>.amp-video-docked-button-dismiss-group>div[role=button]{min-width:32px;height:32px;border-radius:32px;background-size:20px 20px}.amp-small>.amp-video-docked-button-dismiss-group{margin-left:8px}.amp-video-docked-controls-shown{opacity:1;pointer-events:initial!important}.amp-video-docked-button-group{margin:0}.amp-video-docked-button-dismiss-group,.amp-video-docked-button-dismiss-group>div[role=button],.amp-video-docked-button-group,.amp-video-docked-button-group>div[role=button]{min-width:40px;height:40px;border-radius:40px}.amp-video-docked-button-dismiss-group:active,.amp-video-docked-button-group:active{background-color:hsla(0,0%,100%,0.7)}.amp-video-docked-button-dismiss-group>div[role=button],.amp-video-docked-button-group,.amp-video-docked-button-group>div[role=button],.amp-video-docked-controls,.i-amphtml-video-docked-overlay{-webkit-tap-highlight-color:rgba(0,0,0,0)!important}.amp-video-docked-button-dismiss-group>div[role=button],.amp-video-docked-button-group>div[role=button]{background-repeat:no-repeat;background-position:50%}.amp-video-docked-shadow{box-shadow:0px 0 20px 6px rgba(0,0,0,0.2);transition-property:transform,opacity!important}.amp-video-docked-controls-bg{background:hsla(0,0%,90%,0.6)}.amp-video-docked-mute{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')}.amp-video-docked-unmute{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M16.5 12A4.5 4.5 0 0 0 14 7.97v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.796 8.796 0 0 0 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06a8.99 8.99 0 0 0 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4 9.91 6.09 12 8.18V4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')}.amp-video-docked-pause{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')}.amp-video-docked-play{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M8 5v14l11-7z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')}.amp-video-docked-fullscreen{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>\')}.amp-video-docked-dismiss{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')}.amp-video-docked-scroll-back{background-size:50%}.amp-rtl .amp-video-docked-scroll-back,.amp-video-docked-scroll-back{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg width="40" height="40" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M-4-4h48v48H-4z"/><path d="M36 0c2.2 0 4 1.8 4 4v24c0 2.2-1.8 4-4 4H12c-2.2 0-4-1.8-4-4V4c0-2.2 1.8-4 4-4h24zM16 11.868l12.618 12.618 2.829-2.828L18.789 9H27V5H12v15h4v-8.132zM4 8H0v28c0 2.2 1.8 4 4 4h28v-4H4V8z" fill="%23000" fill-rule="nonzero"/></g></svg>\')}.amp-video-docked-control-set-scroll-back>.amp-video-docked-button-group,.amp-video-docked-control-set-scroll-back>.amp-video-docked-button-group>div[role=button]{min-width:64px;height:64px}.amp-video-docked-shadow,.i-amphtml-video-docked,.i-amphtml-video-docked-overlay{margin:0!important}.i-amphtml-video-docked{transition-property:transform!important}.amp-video-docked-controls,.amp-video-docked-shadow,.i-amphtml-video-docked,.i-amphtml-video-docked-overlay{position:fixed!important;top:0!important;left:0!important;right:auto!important;bottom:auto!important;padding:0!important;min-width:0!important;min-height:0!important;max-width:auto!important;max-height:auto!important;transform-origin:left top!important;will-change:width,height,transition,transform,opacity;transition:transform 0.05s}.i-amphtml-video-docked-overlay{opacity:0;transition:opacity 0.3s ease;contain:strict!important}.amp-video-docked-controls-bg{opacity:1}.i-amphtml-video-docked-overlay.amp-video-docked-almost-dismissed{opacity:1;background:hsla(0,0%,39%,0.1)}.i-amphtml-video-docked-shadow.amp-video-docked-almost-dismissed,.i-amphtml-video-docked.amp-video-docked-almost-dismissed{opacity:0.3}.amp-video-docked-button-dismiss-group{position:absolute;top:-40px}.amp-video-docked-placeholder-background{background:hsla(0,0%,78%,0.5);transition-property:opacity;overflow:hidden;pointer-events:none;z-index:0;opacity:0}.amp-video-docked-placeholder-icon{-webkit-mask-image:url(\'data:image/svg+xml;charset=utf-8,<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h48v48H0z"/><path d="M40 4H16c-2.2 0-4 1.8-4 4v24c0 2.2 1.8 4 4 4h24c2.2 0 4-1.8 4-4V8c0-2.2-1.8-4-4-4zM8 12H4v28c0 2.2 1.8 4 4 4h28v-4H8V12zm28 3.868L23.382 28.486l-2.828-2.828L33.212 13H25V9h15v15h-4v-8.132z" fill="%23000" fill-rule="nonzero"/></g></svg>\');mask-image:url(\'data:image/svg+xml;charset=utf-8,<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h48v48H0z"/><path d="M40 4H16c-2.2 0-4 1.8-4 4v24c0 2.2 1.8 4 4 4h24c2.2 0 4-1.8 4-4V8c0-2.2-1.8-4-4-4zM8 12H4v28c0 2.2 1.8 4 4 4h28v-4H8V12zm28 3.868L23.382 28.486l-2.828-2.828L33.212 13H25V9h15v15h-4v-8.132z" fill="%23000" fill-rule="nonzero"/></g></svg>\');-webkit-mask-size:48px 48px;mask-size:48px 48px;height:48px;width:48px;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-position:bottom left;mask-position:bottom left;background:hsla(0,0%,39%,0.8);transition-property:opacity,transform;will-change:opacity,transform;position:absolute;bottom:40px;left:40px}.amp-video-docked-placeholder-icon.amp-rtl{-webkit-mask-image:url(\'data:image/svg+xml;charset=utf-8,<svg width="40" height="40" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M-4-4h48v48H-4z"/><path d="M36 0c2.2 0 4 1.8 4 4v24c0 2.2-1.8 4-4 4H12c-2.2 0-4-1.8-4-4V4c0-2.2 1.8-4 4-4h24zM16 11.868l12.618 12.618 2.829-2.828L18.789 9H27V5H12v15h4v-8.132zM4 8H0v28c0 2.2 1.8 4 4 4h28v-4H4V8z" fill="%23000" fill-rule="nonzero"/></g></svg>\');mask-image:url(\'data:image/svg+xml;charset=utf-8,<svg width="40" height="40" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M-4-4h48v48H-4z"/><path d="M36 0c2.2 0 4 1.8 4 4v24c0 2.2-1.8 4-4 4H12c-2.2 0-4-1.8-4-4V4c0-2.2 1.8-4 4-4h24zM16 11.868l12.618 12.618 2.829-2.828L18.789 9H27V5H12v15h4v-8.132zM4 8H0v28c0 2.2 1.8 4 4 4h28v-4H4V8z" fill="%23000" fill-rule="nonzero"/></g></svg>\');left:auto;right:40px}.amp-video-docked-placeholder-icon.amp-small{-webkit-mask-size:32px 32px;mask-size:32px 32px;width:32px;height:32px;bottom:20px;left:20px}.amp-video-docked-placeholder-icon.amp-rtl.amp-small{left:auto;right:20px}.amp-video-docked-placeholder-background-poster{background-size:cover;background-repeat:no-repeat;filter:blur(20px);transform:scale(1.1);opacity:0.3}.amp-video-docked-controls{z-index:2147483646!important}.i-amphtml-video-docked-overlay{z-index:2147483645!important}.i-amphtml-video-docked{z-index:2147483644!important}.amp-video-docked-shadow{z-index:2147483643!important}\n/*# sourceURL=/extensions/amp-video-docking/0.1/amp-video-docking.css*/'),0,"amp-video-docking")}(t,0,null)})),this._H=H((()=>this.kH())),this.Gv=null,this.AH=!1,this.PH()}PH(){if(!this.bH())return;const t=this.Ci,i=`[${at,CSS.escape("dock")}]`,o=t.getRootNode().querySelectorAll(i);for(let t=0;t<o.length;t++){const i=o[t];i.signals&&i.signals().get(ht)&&this.registerElement(i)}it(t.getBody(),ht,(t=>{const i=t.target;i.hasAttribute(at)&&this.registerElement(i)}))}bH(){return!G(this.Ci.win).isIos()||!(t=this.Ci,W(t,"viewer")).isEmbedded();var t}kH(){const t=this.Ci.getRootNode(),i=t.querySelector("[dock]");C(i.signals().get(ht),"`dock` attribute can only be set on video components.");const o=i.getAttribute("dock").trim();if(""==o)return null;const e=t.querySelector(o);return e&&C("amp-layout"==e.tagName.toLowerCase(),"Dock slot must be an <amp-layout> element."),e}fH(){var t;this.If.width!==(null===(t=this.tH)||void 0===t?void 0:t.viewportRect.width)&&this.Ni.forEach((t=>this.MH(t)))}wH(){const t=this.VH();return t?t.getBoundingClientRect().top:0}register(t){this.Px(),this.Gv||(this.Gv=new IntersectionObserver((t=>{const i=[];for(let o=t.length-1;o>=0;o--){const{boundingClientRect:e,target:s}=t[o];i.indexOf(s)<0&&(s.getImpl().then((t=>{this.xH(t,e)})),i.push(s))}}),{threshold:[0,.1,.2,.8,.9,1]})),this.Gv.observe(t.element),this.Ni.push(t)}registerElement(t){t.getImpl().then((t=>this.register(t)))}gH(){const t=this.bn.getScrollTop();if(Math.abs(t-this.Tx)<5)return;const i=t>this.Tx?"top":ft;this.cH=i,this.Tx=t}oH(){const t=this.Ci.getRootNode();return t.ownerDocument||t}zx(t){return(this.oH().body||this.oH()).appendChild(t)}TH(t){const i=t=>this.r_(t);return it(t,"touchstart",i),it(t,"mousedown",i),t}nH(){const t=new class{constructor(t){this.Ci=t;const i=v(t.getBody());this.container=(t=>t(lt))(i),this.overlay=(t=>t(dt))(i);const o=f(this.container),e=t=>o[t];this.yH=e("dismissButton"),this.EH=e("playButton"),this.RH=e("pauseButton"),this.IH=e("muteButton"),this.zH=e("unmuteButton"),this.HH=e("fullscreenButton"),this.OH=e("scrollBackButton"),this.BH=e("dismissContainer"),this.jH=this.container.querySelectorAll(".amp-video-docked-main-button-group"),this.DH=!1,this.SH=!1,this.$H=H((()=>new class{constructor(t,i){this.Ee=J(t),this.Te=i,this.ci=null}trigger(t,...i){this.cancel(),this.ci=this.Ee.delay((()=>this.Te.apply(null,i)),t)}cancel(){null!==this.ci&&(this.Ee.cancel(this.ci),this.ci=null)}isWaiting(){return null!==this.ci}}(this.Ci.win,(()=>{this.hide(!0)})))),this.LH=[],this.CH=null,this.NH=null,this.WH=null,this.BP=null,this.XH(),this.UH()}disable(){this.DH=!0}enable(){this.DH=!1}setVideo(t,i){this.WH=i,this.BP!==t&&(this.BP=t,this.FH(t))}ZH(t){const i=`amp-video-docked-control-set-${t}`;!function(t,o){const{length:e}=t;for(let o=0;o<e;o++)T(s=t[o],s.classList.contains(i));var s}(this.jH)}FH(t){this.Wv();const i="click",{element:o}=t;this.LH.push(this.YH(this.yH,i,(()=>{this.qH(st)})),this.YH(this.EH,i,(()=>{!function(t,i){var o;(o=()=>t.play(!1),new Promise((t=>{t(o())}))).catch((t=>{P(0,t)}))}(t)})),this.YH(this.RH,i,(()=>{t.pause()})),this.YH(this.IH,i,(()=>{t.mute()})),this.YH(this.zH,i,(()=>{t.unmute()})),this.YH(this.HH,i,(()=>{t.fullscreenEnter()})),this.YH(this.OH,i,(()=>{this.qH(nt)})),it(this.container,"mouseup",(()=>this.hideOnTimeout(800))),it(o,"playing",(()=>this.GH())),it(o,"pause",(()=>this.JH())),it(o,"muted",(()=>this.KH())),it(o,"unmuted",(()=>this.QH())),it(o,"ad_start",(()=>this.ZH(ut))),it(o,"ad_end",(()=>this.ZH(ct))))}qH(t){this.container.dispatchEvent(tt(this.Ci.win,t,void 0))}GH(){const{RH:t,EH:i}=this;this.SH=!1,pt(i,t)}JH(){const{RH:t,EH:i}=this;this.SH=!0,pt(t,i)}KH(){const{IH:t,zH:i}=this;pt(t,i)}QH(){const{IH:t,zH:i}=this;pt(i,t)}YH(t,i,o){return it(t,i,(()=>{this.DH||o()}))}Wv(){for(;this.LH.length>0;)this.LH.pop().call()}hideOnTimeout(t=1200){this.$H().trigger(t)}UH(){const{overlay:t}=this,i=()=>this.tB();this.YH(t,"click",i),this.YH(t,"mouseover",i)}tB(){this.Ci.win.requestAnimationFrame((()=>{this.iB()}))}iB(){const t=K(this.Ci),i=L(this.BP),o=t.isRollingAd(i),e=t.isMuted(i),s="paused"!==t.getPlayingState(i),{container:n,overlay:r}=this;T(n,!0),n.classList.add("amp-video-docked-controls-shown"),r.classList.add("amp-video-docked-controls-bg"),this.ZH(o?ut:ct),T(this.EH,!s),T(this.RH,s),T(this.IH,!e),T(this.zH,e),this.oB(),this.hideOnTimeout()}positionOnVsync(t,i,o,e,s){this.WH=p(i,o,e*t,s*t);const{container:n}=this,r=t/2,a=i+e*r,h=o+s*r;et(n,t*e,mt),V(n,{"transform":R(a,h)});const d=e*r-4-40,l=-(s*r-4-40);V(this.BH,{"transform":R(d,l)})}XH(){it(this.Ci.getRootNode(),"mousedown",(t=>{this.eB(t.target)||this.hide(!0)}))}eB(t){return t==this.overlay||(".amp-video-docked-controls",!!((i=t).closest?i.closest(".amp-video-docked-controls"):function(t,i,o){let e;for(e=t;e&&void 0!==e;e=e.parentElement)if(i(e))return e;return null}(i,(t=>function(t,i){const o=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector;return!!o&&o.call(t,".amp-video-docked-controls")}(t)))));var i}hide(t,i){const o="amp-video-docked-controls-shown",{container:e,overlay:s}=this;e.classList.contains(o)&&(t&&this.SH||(i&&(T(e,!1),T(s,!1)),s.classList.remove("amp-video-docked-controls-bg"),e.classList.remove(o)))}oB(){this.CH||(this.CH=it(this.overlay,"mousemove",(()=>{this.tB()})),this.NH=it(this.overlay,"mouseout",(t=>{L(this.WH);const{x:i,y:o}=rt(t),{bottom:e,left:s,right:n,top:r}=this.WH;(i<s||i>n||o<r||o>e)&&(this.hide(!0),this.sB())})))}sB(){this.CH&&(this.CH(),this.CH=null),this.NH&&(this.NH(),this.NH=null)}reset(){const{container:t,overlay:i}=this,o=[i,t];T(i,!1),this.hide();for(let t=0;t<o.length;t++)I(o[t],["transform","transition","width","height"])}}(this.Ci),{container:i,overlay:o}=t;return it(i,st,(()=>{this.nB()})),it(i,nt,(()=>{this.rB()})),this.TH(i),this.TH(o),this.zx(i),this.zx(o),t}nB(){this.sH().hide(!1,!0),this.aB(this.hB())}hB(){return L(this.tH).video}dB(t,i){if(this.uH||!this.lB(t,i)||this.cB(t)||this.uB(t))return null;const{element:o}=t,e=function(t){let i=-1/0,o=1/0,e=-1/0,s=1/0;for(let t=0;t<arguments.length;t++){const n=arguments[t];if(n&&(i=Math.max(i,n.left),o=Math.min(o,n.left+n.width),e=Math.max(e,n.top),s=Math.min(s,n.top+n.height),o<i||s<e))return null}return o==1/0?null:p(i,e,o-i,s-e)}(i||o.getBoundingClientRect(),this.If);return e&&wt(e)?e.top>this.wH()?null:this.mB(t,i):null}pB(t){return(t=t.element||t).getBoundingClientRect()}MH(t){this.Lh((()=>{const i=this.dB(t);i?this.vB(t,i,1):this.gB(t)&&this.aB(t)}))}Lh(t){this.Ci.win.requestAnimationFrame(t)}xH(t,i){if(!this.AH)if("top"==this.cH){const o=this.dB(t,i);o&&this.fB(t,o,i)}else if(this.cH==ft){if(!this.tH)return;t===this.hB()&&this.es(t,Et,i)&&this.aB(t,!1,i)}}uB(t){return!this.tH&&!this.mf(t)}cB(t){return!!this.tH&&!this.gB(t)}lB(t,i){const{height:o,width:e}=i||t.element.getBoundingClientRect();return e/o<.98?(function(t){const i=t.tagName.toUpperCase();S().error(i,"Minimize-to-corner (`dock`) does not support portrait video.",t)}(t.element),!1):this.If.width>=320&&this.If.height>=o*Et}mf(t=null){const i=t||this.hB();return"playing_manual"==this.E_().getPlayingState(i)}fB(t,i,o){this._B(t)||this.tH||this.kB(t,i,o)}kB(t,i,o){return this.vB(t,i,.05,o,!0).then((()=>new Promise((e=>{this.Lh((()=>{this.vB(t,i,1,o).then(e)}))}))))}vB(t,i,o,e,s){const{element:n}=t;this.UA(n);const{relativeX:r,scale:a,x:h,y:d}=this.AB(t,i,o,e);t.hideControls();const l=this.PB(o);return this.bB(t,i,o),this.MB(t,h,d,a,o,l,r,e).then((()=>{s||this.sH().enable()}))}Pe(t,i){const o=i&&i.slot||this.VH()||this.hB().element,e=tt(this.Ci.win,t,{});q(o).trigger(o,t,e,1)}_B(t){return this.hH==t&&(this.es(t.element,.02)&&this.wB(),!0)}wB(){this.hH=null}PB(t){return this.tH?300*Math.abs(t-this.tH.step):0}VB(t,i,o){return!!this.dH&&this.dH.x==t&&this.dH.y==i&&this.dH.scale==o}MB(t,i,o,e,s,r,a,h,d="fixed"){if(this.VB(i,o,e))return n||(n=Promise.resolve(void 0));this.AH=!0;const{element:l}=t,c=h||t.element.getBoundingClientRect(),{height:u,width:p}=c;this.dH={x:i,y:o,scale:e};const v=s>0?"ease-out":"ease-in",g=z(l),f=this.eH(),{overlay:_}=this.sH(),k=this.rH(),A=this.aH().icon,P=void 0!==a,b=a==vt;P&&(et(A,p,Rt),A.classList.toggle("amp-rtl",b),this.sH().container.classList.toggle("amp-rtl",b));const M=this.xB(p,u),w=t=>V(t,{"opacity":s}),x=t=>V(t,{"transition-duration":`${r}ms`,"transition-timing-function":v}),E=A.classList.contains("amp-small"),R=(b?At:kt)(p,E?32:48,E?20:40,s);return t.mutateElement((()=>{g.classList.add(It),V(l,{"overflow":"visible"}),T(f,!0),T(_,!0),m(this.aH().poster),m(k),this.TB(t),l.appendChild(k),this.Lh((()=>{t.mutateElement((()=>{w(k),x(k),x(A),P&&V(A,{"transform":Ht(R,0,1)})}))}));let s=0,n=0,r=0,a=0;"absolute"===d&&(s=c.left,n=c.top,r=l.offsetLeft,a=l.offsetTop),this.yB(t).forEach((t=>{const h=Number(t!==g),l=h*a-n;V(t,{"position":d,"left":y(h*r-s),"top":y(l),"transform":Ht(i,o,e)}),x(t),(t=>{M&&V(t,{"width":y(p),"height":y(u),"min-width":y(p),"min-height":y(u)})})(t)})),w(f),this.sH().positionOnVsync(e,i,o,p,u)})),this.EB().promise(r).then((()=>{this.AH=!1}))}EB(){return J(this.Ci.win)}yB(t){return[z(t.element),this.eH(),this.sH().overlay]}TB(t){const i=this.aH().poster,o=function(t){const i=t.getAttribute("poster")||t.getAttribute("data-poster");if(i)return i;const o=("amp-img[placeholder],img[placeholder],[placeholder] amp-img",t.querySelector(function(t,i){return t.replace(/^|,/g,"$&:scope ")}("amp-img[placeholder],img[placeholder],[placeholder] amp-img")));return o?o.getAttribute("src"):void 0}(t.element);o?(T(i,!0),function(t,i){for(const o in i)x(t,o,i[o])}(i,{"background-image":`url(${o})`})):T(i,!1)}xB(t,i){const o=!this.lH||this.lH.width!=t||this.lH.height!=i;return o&&(this.lH={width:t,height:i}),o}gB(t){return!!this.tH&&this.tH.video==t}bB(t,e,s){const n=this.tH,r=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(o){i(t,o,s[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(s,i))}))}return t}({},this.If);var a,h;this.tH={video:t,target:e,step:s,viewportRect:r},n&&n.video==t&&(a=e.rect,h=n.target.rect,a&&h&&a.left==h.left&&a.top==h.top&&a.width==h.width&&a.height==h.height)||(this.sH().setVideo(t,e.rect),this.Pe("dock",e))}RB(t){const i=this.hB(),{target:o}=this.tH,{scale:e,x:s,y:n}=this.AB(i,o,1),r=this.IB(t),a=this.zB(r);this.vH=t-this.pH,this.pH=t,this.MB(i,s+t,n,e,1,0,a)}es(t,i=1,o){const e=o||this.pB(t);if(!wt(e))return 0;const s=Math.min(e.bottom,this.If.bottom)-Math.max(e.top,this.If.top);return Math.max(0,s/e.height)>i-.02}r_(t){if(!this.tH)return;if(this.HB(zt))return;if(this.AH)return;this.mH=0;const{x:i}=rt(t),{directionX:o}=this.tH.target,e=Ot(this.Ci.win,(t=>this.OB(t,o,i))),s=()=>this.BB(r),n=this.Ci.getRootNode(),r=[this.jB(),this.DB(),this.SB(),it(n,"touchmove",e),it(n,"mousemove",e),ot(n,"touchend",s),ot(n,"mouseup",s)]}HB(t){return!!this.tH&&this.tH.target.type===t}DB(){const t=this.oH().documentElement,i="i-amphtml-select-disabled";return t.classList.add(i),()=>t.classList.remove(i)}jB(){return this.bn.disableScroll(),this.bn.resetScroll.bind(this.bn)}OB(t,i,o){if(this.tH.target.directionX!==i)return;const e=rt(t).x-o;this.mH=e,e<=10||(t.preventDefault(),t.stopPropagation(),this.sH().hide(!1,!0),this.uH=!0,this.sH().disable(),this.RB(e))}SB(){const{win:t}=this.Ci;if(!G(t).isIos())return()=>{};const i=t=>t.preventDefault();return t.addEventListener("touchmove",i,{passive:!1}),()=>t.removeEventListener("touchmove",i)}BB(t){t.forEach((t=>t.call())),this.uH=!1,this.sH().enable(),Math.abs(this.vH)<40?this.$B(this.mH):this.LB(this.pH,Math.sign(this.vH)),this.vH=0,this.pH=0,this.mH=0}LB(t,i){L(1==Math.abs(i));const o=this.hB();if(o.pause(),this.es(o,.2))return void this.CB(o,t,i);const{target:e}=L(this.tH),{width:s,x:n,y:r}=e.rect,{scale:a}=this.AB(o,e,1),h=n+t,d=1==i?this.If.right:this.If.left-s,l=this.NB(d-h);this.WB(),o.showControls(),this.MB(o,d,r,a,0,l).then((()=>{this.XB(o)}))}CB(t,i,o){L(1==Math.abs(o));const{target:e}=L(this.tH),{width:s,x:n,y:r}=e.rect,{scale:a}=this.AB(t,e,1),h=this.If.width,d=n+i,l=1==o?kt(h,s,0,1):At(h,s,0,1),c=this.NB(l-d);this.WB(),this.MB(t,l,r,a,0,c).then((()=>{this.aB(t,!0),t.showControls()}))}NB(t){return Math.min(300,Math.abs(t)/2)}IB(t){const{step:i,target:o}=this.tH,e=this.hB(),{width:s}=e.element.getBoundingClientRect(),{scale:n,x:r}=this.AB(e,o,i);return r+t+s*n/2}$B(t){const i=this.hB(),{step:o}=this.tH,e=this.zB(t);this.iH=e;const s=this.mB(i);this.tH.target=s;const{scale:n,x:r,y:a}=this.AB(i,s,o);this.MB(i,r,a,n,o,200,e)}zB(t){return this.IB(t)>=this.If.width/2?gt:vt}AB(t,i,o,e){return function(t,i,o=1){const e=i.x<t.x?vt:gt;return{x:Pt(o,t.x,i.x),y:Pt(o,t.y,i.y),scale:Pt(o,t.width,i.width)/t.width,relativeX:e}}(e||this.pB(t),i.rect,o)}aB(t,i,o){const e=this.es(t,Et,o);e||(t.pause(),t.showControls()),i||this.WB();const{target:s}=L(this.tH),{relativeX:n,scale:r,x:a,y:h}=this.AB(t,s,0),d=e?this.PB(0):0;return this.MB(t,a,h,r,0,d,n,o,"absolute").then((()=>{t.showControls(),this.XB(t)}))}WB(){this.sH().disable(),this.sH().hide(!1,!0),this.Pe("undock")}XB(t){const{element:i}=t,o=z(i);return t.mutateElement((()=>{o.classList.remove(It);const t=this.eH(),i=this.aH().icon,e=this.rH();T(t,!1),this.sH().reset(),[o,t,e,i].forEach((t=>{I(t,["transform","transition","min-width","min-height","width","height","opacity","overflow","position","left","top"])})),this.dH=null,this.lH=null,this.tH=null}))}UA(t){const i=t.querySelector(".i-amphtml-android-poster-bug");var o,e;i&&(null===(e=(o=i).parentElement)||void 0===e||e.removeChild(o))}rB(){this.tH&&this.bn.animateScrollIntoView(this.hB().element,"center")}mB(t,i){const o=this.VH(),e=i||t.element.getBoundingClientRect();return o?{type:zt,rect:bt(e,o.getBoundingClientRect()),slot:o}:(null===this.iH&&(this.iH="rtl"==((s=this.oH()).body.getAttribute("dir")||s.documentElement.getAttribute("dir")||"ltr")?vt:gt),{type:"corner",rect:Mt(e,this.If,this.iH,.3,180,.04,30),directionX:this.iH});var s}VH(){const t=this._H();return t&&wt(t.getBoundingClientRect())?t:null}})})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-video-docking-0.1.mjs.map