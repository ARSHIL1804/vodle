;
import{PreactBaseElement as e}from"../bento.mjs";function n(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function t(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}var o,{hasOwnProperty:i,toString:l}=Object.prototype,s=["Webkit","webkit","Moz","moz","ms","O","o"];function c(e,n,t,r,i){const l=function(e,n,t){if(n.startsWith("--"))return n;o||(o=Object.create(null));let r=o[n];if(!r||t){if(r=n,void 0===e[n]){const t=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(n),o=function(e,n){for(let t=0;t<s.length;t++){const r=s[t]+n;if(void 0!==e[r])return r}return""}(e,t);void 0!==e[o]&&(r=o)}t||(o[n]=r)}return r}(e.style,n,i);if(!l)return;const c=r?t+r:t;e.style.setProperty(function(e){const n=e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()));return s.some((e=>n.startsWith(e+"-")))?`-${n}`:n}(l),c)}function u(e){return(e.ownerDocument||e).defaultView}import{createElement as a}from"../bento.mjs";import{useCallback as f,useEffect as m,useMemo as d,useRef as b}from"../bento.mjs";import{ContainWrapper as v}from"../bento.mjs";function p(e,n,t={}){const{needsRootBounds:r,rootMargin:o,threshold:i}=t,l=function(e){return e.parent&&e.parent!=e}(n)&&(r||o)?n.document:void 0;return new n.IntersectionObserver(e,{threshold:i,root:l,rootMargin:o})}var g=new WeakMap,j=new WeakMap;function w(e){const n=new Set;for(let t=e.length-1;t>=0;t--){const r=e[t],{target:o}=r;if(n.has(o))continue;n.add(o);const i=j.get(o);if(i)for(let e=0;e<i.length;e++)(0,i[e])(r)}}import{useCallback as y,useEffect as O,useRef as h,useState as R}from"../bento.mjs";import{useCallback as x,useLayoutEffect as P}from"../bento.mjs";import{useAmpContext as S}from"../bento.mjs";var z=self.AMP_CONFIG||{},q=("string"==typeof z.thirdPartyFrameRegex?new RegExp(z.thirdPartyFrameRegex):z.thirdPartyFrameRegex,("string"==typeof z.cdnProxyRegex?new RegExp(z.cdnProxyRegex):z.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function k(e){if(!self.document||!self.document.head)return null;if(self.location&&q.test(self.location.origin))return null;const n=self.document.head.querySelector(`meta[name="${e}"]`);return n&&n.getAttribute("content")||null}z.thirdPartyUrl,z.thirdPartyFrameHost,z.cdnUrl||k("runtime-host"),z.errorReportingUrl,z.betaErrorReportingUrl,z.localDev,z.geoApiUrl||k("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG,new Set(["c","v","a","ad"]);var F=[0,.05,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95,1];function M(e){return{"time":e.time,"rootBounds":e.rootBounds,"boundingClientRect":e.boundingClientRect,"intersectionRect":e.intersectionRect,"intersectionRatio":e.intersectionRatio}}Date.now();var E=["allowFullScreen","allowPaymentRequest","iframeStyle","onLoad","referrerPolicy","requestResize","sandbox","src","srcdoc"],A=()=>{},B=class extends e{};B.Component=function(e){let{allowFullScreen:n,allowPaymentRequest:t,iframeStyle:o,onLoad:i=A,referrerPolicy:l,requestResize:s,sandbox:O,src:R,srcdoc:P}=e,S=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,E);const z=b(),q=b(null),k=b(null),B=b(null),C=b(null),L=b(null),W=e=>{const n=z.current,t=L.current;n&&t&&function(e,n,t,r,o){!function(e,n,t,r,o){if(!e.contentWindow)return;r.type="intersection",r.sentinel="amp";let i=r;for(let e=0;e<n.length;e++){const t=n[e];t.win.postMessage(i,t.origin)}}(e,[{win:e.contentWindow,origin:r}],0,t)}(n,0,{"changes":e.map(M)},t)},$=f((e=>{var n;const t=z.current;if(!t)return;if(e.source!==t.contentWindow||"send-intersections"!==(null===(n=e.data)||void 0===n?void 0:n.type))return;L.current=e.origin;const r=u(t);C.current=new r.IntersectionObserver(W,{threshold:F}),C.current.observe(t)}),[]);m((()=>{const e=z.current;if(!e)return;const n=u(e);n.addEventListener("message",$);let t=C.current;return()=>{var r;null===(r=t)||void 0===r||r.unobserve(e),t=null,n.removeEventListener("message",$)}}),[$]);const I=f((()=>{var e,n;let t=Number(null===(e=q.current)||void 0===e?void 0:e.height),r=Number(null===(n=q.current)||void 0===n?void 0:n.width);if(q.current=null,!t&&!r)return void console.error("Ignoring resize request because width and height value is invalid");const o=z.current;t||(t=o.offsetHeight),r||(r=o.offsetWidth),s?s(t,r):!1===k.current&&((e,n)=>{const t=B.current;t&&(c(t,"width",n,"px"),c(t,"height",e,"px"))})(t,r)}),[s]),N=f((e=>{var n;"embed-size"===(null===(n=e.data)||void 0===n?void 0:n.type)&&(q.current=e.data,!1===k.current&&I())}),[I]);m((()=>{const e=z.current;if(!e)return;const n=u(e);return n?(n.addEventListener("message",N),()=>{n.removeEventListener("message",N)}):void 0}),[N]);const Z=function(e,n){const t=h(null);return y((r=>{const o=t.current;o&&(o(),t.current=null),r&&(t.current=function(e,n,t){const r=u(e);let o=g.get(r);o||g.set(r,o=p(w,r));let i=j.get(e);return i||(i=[],j.set(e,i)),i.push(n),o.observe(e),()=>{!function(e,n){const t=j.get(e);if(!t)return;if(!function(e,n){const t=e.indexOf(n);return-1!=t&&(e.splice(t,1),!0)}(t,n))return;if(t.length)return;const r=u(e),o=g.get(r);null==o||o.unobserve(e),j.delete(e)}(e,n)}}(r,e,n))}),[e,n])}(f((({isIntersecting:e})=>{e!==k.current&&(k.current=e,!e&&q.current&&I())}),[I])),D=d((()=>({src:R,srcdoc:P,sandbox:O,allowFullScreen:n,allowPaymentRequest:t,referrerPolicy:l,onLoad:i,frameBorder:"0"})),[R,P,O,n,t,l,i]);return a(v,r({contentAs:"iframe",contentProps:D,contentRef:(_=[z,Z],x((e=>{for(let r=0;r<_.length;r++)t=e,"function"==typeof(n=_[r])?n(t):n&&(n.current=t);var n,t}),_)),contentStyle:r({"box-sizing":"border-box"},o),ref:B,size:!0,layout:!0,paint:!0},S));var _},B.props={"src":{attr:"src"},"srcdoc":{attr:"srcdoc"},"sandbox":{attr:"sandbox"},"allowFullScreen":{attr:"allowfullscreen"},"allowPaymentRequest":{attr:"allowpaymentrequest"},"referrerPolicy":{attr:"referrerpolicy"}},B.layoutSizeDefined=!0,B.usesShadowDom=!0;import{defineBentoElement as C}from"../bento.mjs";C("bento-iframe",B,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-iframe-1.0.mjs.map