"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8592],{2122:(G,Z,a)=>{a.r(Z),a.d(Z,{AddoptionDialogPage:()=>c,AddoptionDialogPageModule:()=>S});var u=a(6362),t=a(587),m=a(8139),i=a(3926),h=a(1951),o=a(5568),r=a(8211),e=a(260),n=a(6301);const v=["focus_element"],b=function(d){return{language:d}};function s(d,C){if(1&d&&(e.TgZ(0,"small"),e._UZ(1,"p",5),e.ALo(2,"translate"),e.qZA()),2&d){const p=e.oxw(2);e.xp6(1),e.Q6J("innerHtml",e.xi3(2,1,"addoption.different-language",e.VKq(4,b,p.G.S.language_names[p.p.language])),e.oJD)}}function D(d,C){if(1&d&&(e._UZ(0,"div",21),e.ALo(1,"translate")),2&d){const p=e.oxw().$implicit;e.Q6J("innerHtml",e.lcZ(1,1,p.message),e.oJD)}}function f(d,C){if(1&d&&(e.ynx(0),e.YNc(1,D,2,3,"div",20),e.BQk()),2&d){const p=C.$implicit,A=e.oxw(2);e.xp6(1),e.Q6J("ngIf",A.formGroup.get("option_name").hasError(p.type)&&(A.formGroup.get("option_name").dirty||A.formGroup.get("option_name").touched))}}function y(d,C){if(1&d&&(e._UZ(0,"div",21),e.ALo(1,"translate")),2&d){const p=e.oxw().$implicit;e.Q6J("innerHtml",e.lcZ(1,1,p.message),e.oJD)}}function T(d,C){if(1&d&&(e.ynx(0),e.YNc(1,y,2,3,"div",20),e.BQk()),2&d){const p=C.$implicit,A=e.oxw(2);e.xp6(1),e.Q6J("ngIf",A.formGroup.get("option_desc").hasError(p.type)&&(A.formGroup.get("option_desc").dirty||A.formGroup.get("option_desc").touched))}}function g(d,C){if(1&d){const p=e.EpF();e.TgZ(0,"ion-button",22),e.NdJ("click",function(){e.CHM(p);const Q=e.oxw(2);return Q.G.open_url_in_new_tab(Q.formGroup.get("option_url").value)}),e._UZ(1,"ion-icon",23),e._uU(2,"\xa0 "),e._UZ(3,"span",5),e.ALo(4,"translate"),e.qZA()}2&d&&(e.xp6(3),e.Q6J("innerHtml",e.lcZ(4,1,"test"),e.oJD))}function J(d,C){if(1&d&&(e._UZ(0,"div",21),e.ALo(1,"translate")),2&d){const p=e.oxw().$implicit;e.Q6J("innerHtml",e.lcZ(1,1,p.message),e.oJD)}}function l(d,C){if(1&d&&(e.ynx(0),e.YNc(1,J,2,3,"div",20),e.BQk()),2&d){const p=C.$implicit,A=e.oxw(2);e.xp6(1),e.Q6J("ngIf",A.formGroup.get("option_url").hasError(p.type)&&(A.formGroup.get("option_url").dirty||A.formGroup.get("option_url").touched))}}const x=function(d){return{name:d}},_=function(){return[null,""]};function P(d,C){if(1&d){const p=e.EpF();e.TgZ(0,"ion-content")(1,"form",1)(2,"ion-list",2)(3,"ion-item",3)(4,"ion-col",4),e._UZ(5,"h1",5),e.ALo(6,"translate"),e._UZ(7,"p",5),e.ALo(8,"translate"),e.YNc(9,s,3,6,"small",0),e.qZA()(),e.TgZ(10,"ion-item")(11,"ion-label",6),e._UZ(12,"span",5),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"ion-input",7,8),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",9),e.YNc(18,f,2,1,"ng-container",10),e.qZA(),e.TgZ(19,"ion-item")(20,"ion-label",6),e._UZ(21,"span",5),e.ALo(22,"translate"),e.qZA(),e._UZ(23,"ion-textarea",11),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"div",9),e.YNc(26,T,2,1,"ng-container",10),e.qZA(),e.TgZ(27,"ion-item")(28,"ion-label",6),e._UZ(29,"span",5),e.ALo(30,"translate"),e.qZA(),e._UZ(31,"ion-input",12),e.ALo(32,"translate"),e.YNc(33,g,5,3,"ion-button",13),e.qZA(),e.TgZ(34,"div",9),e.YNc(35,l,2,1,"ng-container",10),e.qZA(),e.TgZ(36,"ion-item",14)(37,"ion-buttons",15)(38,"ion-button",16),e.NdJ("click",function(){return e.CHM(p),e.oxw().ClosePopover()}),e._UZ(39,"ion-icon",17),e._uU(40,"\xa0 "),e._UZ(41,"span",5),e.ALo(42,"translate"),e.qZA(),e._uU(43,"\xa0\xa0 "),e.TgZ(44,"ion-button",18),e.NdJ("click",function(){return e.CHM(p),e.oxw().OK_button_clicked()}),e._UZ(45,"ion-icon",19),e._uU(46,"\xa0 "),e._UZ(47,"span",5),e.ALo(48,"translate"),e.qZA()()(),e.TgZ(49,"ion-item",3),e._UZ(50,"small",5),e.ALo(51,"translate"),e.qZA()()()()}if(2&d){const p=e.oxw();e.xp6(1),e.Q6J("formGroup",p.formGroup),e.xp6(4),e.Q6J("innerHtml",e.lcZ(6,17,"addoption.header"),e.oJD),e.xp6(2),e.Q6J("innerHtml",e.lcZ(8,19,"addoption.intro"),e.oJD),e.xp6(2),e.Q6J("ngIf",!!p.p.language&&p.p.language!=p.G.S.language),e.xp6(3),e.Q6J("innerHtml",e.lcZ(13,21,"winner"==p.p.type?"draftpoll.option-name-label":"draftpoll.target-name-label"),e.oJD),e.xp6(2),e.Q6J("placeholder",e.lcZ(16,23,"winner"==p.p.type?"draftpoll.option-name-placeholder":"draftpoll.target-name-placeholder")),e.xp6(4),e.Q6J("ngForOf",p.validation_messages.option_name),e.xp6(3),e.Q6J("innerHtml",e.lcZ(22,25,"draftpoll.option-desc-label"),e.oJD),e.xp6(2),e.Q6J("placeholder",e.xi3(24,27,"draftpoll.option-desc-placeholder",e.VKq(41,x,p.formGroup.get("option_name").value))),e.xp6(3),e.Q6J("ngForOf",p.validation_messages.option_desc),e.xp6(3),e.Q6J("innerHtml",e.lcZ(30,30,"draftpoll.option-url-label"),e.oJD),e.xp6(2),e.Q6J("placeholder",e.xi3(32,32,"draftpoll.option-url-placeholder",e.VKq(43,x,p.formGroup.get("option_name").value))),e.xp6(2),e.Q6J("ngIf",p.formGroup.get("option_url").valid&&!e.DdM(45,_).includes(p.formGroup.get("option_url").value)),e.xp6(2),e.Q6J("ngForOf",p.validation_messages.option_url),e.xp6(6),e.Q6J("innerHtml",e.lcZ(42,35,"cancel"),e.oJD),e.xp6(6),e.Q6J("innerHtml",e.lcZ(48,37,"add"),e.oJD),e.xp6(3),e.Q6J("innerHtml",e.lcZ(51,39,"addoption.info"),e.oJD)}}let c=(()=>{class d{constructor(p,A,Q,M,U){this.formBuilder=p,this.popover=A,this.G=Q,this.translate=M,this.ref=U,this.ready=!1,this.validation_messages={option_name:[{type:"required",message:"validation.option-name-required"}],option_desc:[],option_url:[{type:"pattern",message:"validation.option-url-valid"}]}}ngOnInit(){}ionViewWillEnter(){this.p=this.parent.p,this.formGroup=this.formBuilder.group({}),this.formGroup.addControl("option_name",new t.NI("",t.kI.required)),this.formGroup.addControl("option_desc",new t.NI("")),this.formGroup.addControl("option_url",new t.NI("",t.kI.pattern(this.G.urlRegex))),this.ready=!0}ionViewDidEnter(){setTimeout(()=>this.focus_element.setFocus(),100)}OK_button_clicked(){const p=this.formGroup.get("option_name").value,A=this.formGroup.get("option_desc").value,Q=this.formGroup.get("option_url").value,M=new r.Wx(this.G,this.p,null,p,A,Q);o.s.schedule({notifications:[{title:this.translate.instant("addoption.notification-added-title"),body:p,id:0}]}).then(U=>{}).catch(U=>{}),"agreed"==this.parent.delegation_status&&this.G.Del.update_my_delegation(this.p.pid,M.oid,!0),this.parent.oidsorted.push(M.oid),this.parent.sortingcounter++,this.ref.detectChanges(),setTimeout(()=>{this.p.tally_all(),this.popover.dismiss()},200)}ClosePopover(){this.popover.dismiss()}}return d.\u0275fac=function(p){return new(p||d)(e.Y36(t.qu),e.Y36(i.Dh),e.Y36(n.U),e.Y36(m.sK),e.Y36(e.sBO))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-addoption-dialog"]],viewQuery:function(p,A){if(1&p&&e.Gf(v,5),2&p){let Q;e.iGM(Q=e.CRH())&&(A.focus_element=Q.first)}},inputs:{parent:"parent"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],["lines","full"],["lines","none"],[1,"ion-no-padding","ion-no-margin"],[3,"innerHtml"],["position","floating","color","primary"],["formControlName","option_name","autofocus","true","type","text","required","",2,"font-weight","bold","font-style","italic",3,"placeholder"],["focus_element",""],[1,"validation-errors"],[4,"ngFor","ngForOf"],["formControlName","option_desc","rows","1","auto-grow","","type","text",2,"font-style","italic",3,"placeholder"],["formControlName","option_url","type","text",2,"font-size","smaller",3,"placeholder"],["fill","clear","slot","end","class","skip-button","tabindex","-1",3,"click",4,"ngIf"],["lines","none",1,"ion-text-right"],["slot","end"],["shape","round",3,"click"],["name","arrow-back-outline"],["color","primary","shape","round","fill","solid",3,"click"],["name","checkmark"],["class","error-message",3,"innerHtml",4,"ngIf"],[1,"error-message",3,"innerHtml"],["fill","clear","slot","end","tabindex","-1",1,"skip-button",3,"click"],["name","open-outline"]],template:function(p,A){1&p&&e.YNc(0,P,52,46,"ion-content",0),2&p&&e.Q6J("ngIf",A.ready)},directives:[u.O5,i.W2,t._Y,t.JL,t.sg,i.q_,i.Ie,i.wI,i.Q$,i.pK,i.j9,t.JJ,t.u,t.Q7,u.sg,i.g2,i.YG,i.gu,i.Sm],pipes:[m.X$],styles:[""]}),d})();const w=[{path:"",component:c}];let E=(()=>{class d{}return d.\u0275fac=function(p){return new(p||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[[h.Bz.forChild(w)],h.Bz]}),d})(),S=(()=>{class d{}return d.\u0275fac=function(p){return new(p||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[[u.ez,t.u5,i.Pc,t.UX,E,m.aw.forChild()]]}),d})()},2459:(G,Z,a)=>{a.r(Z),a.d(Z,{DelegationDialogPage:()=>g,DelegationDialogPageModule:()=>x});var u=a(6362),t=a(587),m=a(8139),i=a(3926),h=a(1951),o=a(5099),r=a(8921),e=a(5568),n=a(260),v=a(6301);const b=["focus_element"];function s(_,P){if(1&_&&(n._UZ(0,"div",18),n.ALo(1,"translate")),2&_){const c=n.oxw().$implicit;n.Q6J("innerHtml",n.lcZ(1,1,c.message),n.oJD)}}function D(_,P){if(1&_&&(n.ynx(0),n.YNc(1,s,2,3,"div",17),n.BQk()),2&_){const c=P.$implicit,w=n.oxw(2);n.xp6(1),n.Q6J("ngIf",w.formGroup.get("delegate_nickname").hasError(c.type)&&(w.formGroup.get("delegate_nickname").dirty||w.formGroup.get("delegate_nickname").touched))}}function f(_,P){if(1&_){const c=n.EpF();n.ynx(0),n.TgZ(1,"ion-item",3)(2,"ion-col",4)(3,"small"),n._UZ(4,"p",5),n.ALo(5,"translate"),n.qZA()()(),n.TgZ(6,"ion-item",12)(7,"ion-button",13),n.NdJ("click",function(){return n.CHM(c),n.oxw(2).share_button_clicked()}),n._UZ(8,"span",5),n.ALo(9,"translate"),n._uU(10,"\xa0 "),n._UZ(11,"ion-icon",19),n.qZA()(),n.BQk()}if(2&_){const c=n.oxw(2);n.xp6(4),n.Q6J("innerHtml",n.lcZ(5,3,"delegation-request.request-options-with-share"),n.oJD),n.xp6(3),n.Q6J("disabled",!c.formGroup.valid),n.xp6(1),n.Q6J("innerHtml",n.lcZ(9,5,"inviteto.share"),n.oJD)}}function y(_,P){1&_&&(n.ynx(0),n.TgZ(1,"ion-item",3)(2,"ion-col",4)(3,"small"),n._UZ(4,"p",5),n.ALo(5,"translate"),n.qZA()()(),n.BQk()),2&_&&(n.xp6(4),n.Q6J("innerHtml",n.lcZ(5,1,"delegation-request.request-options-without-share"),n.oJD))}function T(_,P){if(1&_){const c=n.EpF();n.TgZ(0,"ion-content")(1,"form",1)(2,"ion-list",2)(3,"ion-item",3)(4,"ion-col",4),n._UZ(5,"h1",5),n.ALo(6,"translate"),n._UZ(7,"p",5),n.ALo(8,"translate"),n.qZA()(),n.TgZ(9,"ion-item"),n._UZ(10,"ion-label",6),n.ALo(11,"translate"),n.TgZ(12,"ion-input",7,8),n.NdJ("ionChange",function(){return n.CHM(c),n.oxw().delegate_nickname_changed()})("ionBlur",function(){return n.CHM(c),n.oxw().delegate_nickname_changed()}),n.ALo(14,"translate"),n.qZA()(),n.TgZ(15,"div",9),n.YNc(16,D,2,1,"ng-container",10),n.qZA(),n.TgZ(17,"ion-item")(18,"small"),n._UZ(19,"ion-label",6),n.ALo(20,"translate"),n.TgZ(21,"ion-input",11),n.NdJ("ionChange",function(){return n.CHM(c),n.oxw().from_changed()})("ionBlur",function(){return n.CHM(c),n.oxw().from_changed()}),n.ALo(22,"translate"),n.qZA()()(),n.YNc(23,f,12,7,"ng-container",0),n.YNc(24,y,6,3,"ng-container",0),n.TgZ(25,"ion-item",12)(26,"ion-button",13),n.NdJ("click",function(E){return n.CHM(c),n.oxw().email_button_clicked(E)}),n.TgZ(27,"a",14),n._UZ(28,"span",5),n.ALo(29,"translate"),n._uU(30,"\xa0 "),n._UZ(31,"ion-icon",15),n.qZA()()(),n.TgZ(32,"ion-item",12)(33,"ion-button",13),n.NdJ("click",function(){return n.CHM(c),n.oxw().copy_button_clicked()}),n._UZ(34,"span",5),n.ALo(35,"translate"),n._uU(36,"\xa0 "),n._UZ(37,"ion-icon",16),n.qZA()()()()()}if(2&_){const c=n.oxw();n.xp6(1),n.Q6J("formGroup",c.formGroup),n.xp6(4),n.Q6J("innerHtml",n.lcZ(6,15,"delegation-request.header"),n.oJD),n.xp6(2),n.Q6J("innerHtml",n.lcZ(8,17,"delegation-request.intro"),n.oJD),n.xp6(3),n.Q6J("innerHtml",n.lcZ(11,19,"delegation-request.nickname-label"),n.oJD),n.xp6(2),n.Q6J("placeholder",n.lcZ(14,21,"delegation-request.nickname-placeholder")),n.xp6(4),n.Q6J("ngForOf",c.validation_messages.delegate_nickname),n.xp6(3),n.Q6J("innerHtml",n.lcZ(20,23,"delegation-request.from-label"),n.oJD),n.xp6(2),n.Q6J("placeholder",n.lcZ(22,25,"delegation-request.from-placeholder")),n.xp6(2),n.Q6J("ngIf",c.can_share),n.xp6(1),n.Q6J("ngIf",!c.can_share),n.xp6(2),n.Q6J("disabled",!c.formGroup.valid),n.xp6(1),n.Q6J("href",c.mailto_url,n.LSH),n.xp6(1),n.Q6J("innerHtml",n.lcZ(29,27,"delegation-request.compose-email"),n.oJD),n.xp6(5),n.Q6J("disabled",!c.formGroup.valid),n.xp6(1),n.Q6J("innerHtml",n.lcZ(35,29,"delegation-request.copy-link"),n.oJD)}}let g=(()=>{class _{constructor(c,w,E,S){this.popover=c,this.formBuilder=w,this.translate=E,this.G=S,this.ready=!1,this.validation_messages={delegate_nickname:[{type:"required",message:"validation.delegate-nickname-required"}],from:[]}}ngOnInit(){}ionViewWillEnter(){this.can_use_web_share="function"==typeof navigator.share,this.can_share=o.dV.isNativePlatform()||this.can_use_web_share,this.formGroup=this.formBuilder.group({delegate_nickname:new t.NI("",t.kI.required),from:new t.NI(this.G.S.email)}),[this.p,this.did,this.request,this.private_key,this.agreement]=this.G.Del.prepare_delegation(this.parent.pid),this.message_title=this.translate.instant("delegation-request.message-subject",{due:this.G.D.format_date(this.p.due)}),this.update_request(),this.ready=!0}ionViewDidEnter(){setTimeout(()=>this.focus_element.setFocus(),100)}delegate_nickname_changed(){const c=this.formGroup.get("delegate_nickname").value;this.G.D.setp(this.p.pid,"del_nickname."+this.did,c),this.update_request()}from_changed(){const c=this.formGroup.get("from").value;this.G.D.setp(this.p.pid,"del_from."+this.did,c),this.set_delegation_link(c),this.update_request()}update_request(){this.G.L.entry("DelegationDialogPage.update_request"),this.mailto_url="mailto:"+encodeURIComponent(this.formGroup.get("delegate_nickname").value)+"?subject="+encodeURIComponent(this.message_title)+"&body="+encodeURIComponent(this.message_body)}ClosePopover(){this.popover.dismiss()}set_delegation_link(c){this.delegation_link=this.G.Del.get_delegation_link(this.parent.pid,this.did,c,this.private_key),this.message_body=this.translate.instant("delegation-request.message-body-greeting")+"\n\n"+this.translate.instant("delegation-request.message-body-before-title")+"\n\n"+String.fromCharCode(160).repeat(4)+this.p.title+".\n\n"+this.translate.instant("delegation-request.message-body-closes",{due:this.G.D.format_date(this.p.due)})+"\n\n"+this.translate.instant("delegation-request.message-body-explanation")+"\n\n"+this.translate.instant("delegation-request.message-body-before-link")+"\n\n"+String.fromCharCode(160).repeat(4)+this.delegation_link+"\n\n"+this.translate.instant("delegation-request.message-body-dont-share")+"\n\n"+this.translate.instant("delegation-request.message-body-regards")}share_button_clicked(){this.G.L.entry("DelegationDialogPage.share_button_clicked"),this.delegate_nickname_changed(),this.from_changed(),r.m.share({title:this.message_title,text:this.message_body,dialogTitle:"Share vodle delegation link"}).then(c=>{this.G.L.info("DelegationDialogPage.share_button_clicked succeeded",c),this.G.Del.after_request_was_sent(this.parent.pid,this.did,this.request,this.private_key,this.agreement),this.popover.dismiss()}).catch(c=>{this.G.L.error("DelegationDialogPage.share_button_clicked failed",c)})}copy_button_clicked(){this.G.L.entry("DelegationDialogPage.copy_button_clicked"),this.delegate_nickname_changed(),this.from_changed(),window.navigator.clipboard.writeText(this.delegation_link),this.G.Del.after_request_was_sent(this.parent.pid,this.did,this.request,this.private_key,this.agreement),e.s.schedule({notifications:[{title:this.translate.instant("delegation-request.notification-copied-link-title"),body:this.translate.instant("delegation-request.notification-copied-link-body",{nickname:this.formGroup.get("delegate_nickname").value}),id:null}]}).then(c=>{this.G.L.trace("DelegationDialogPage.copy_button_clicked localNotifications.schedule succeeded:",c)}).catch(c=>{this.G.L.warn("DelegationDialogPage.copy_button_clicked localNotifications.schedule failed:",c)}),this.parent.update_delegation_info(),this.popover.dismiss(),this.G.L.exit("DelegationDialogPage.copy_button_clicked")}email_button_clicked(c){this.G.L.entry("DelegationDialogPage.email_button_clicked"),this.delegate_nickname_changed(),this.from_changed(),this.G.Del.after_request_was_sent(this.parent.pid,this.did,this.request,this.private_key,this.agreement),this.parent.update_delegation_info(),this.popover.dismiss(),this.G.L.exit("DelegationDialogPage.email_button_clicked")}}return _.\u0275fac=function(c){return new(c||_)(n.Y36(i.Dh),n.Y36(t.qu),n.Y36(m.sK),n.Y36(v.U))},_.\u0275cmp=n.Xpm({type:_,selectors:[["app-delegation-dialog"]],viewQuery:function(c,w){if(1&c&&n.Gf(b,5),2&c){let E;n.iGM(E=n.CRH())&&(w.focus_element=E.first)}},inputs:{parent:"parent"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],["lines","full"],["lines","none"],[1,"ion-no-padding","ion-no-margin"],[3,"innerHtml"],["position","floating","color","primary",3,"innerHtml"],["formControlName","delegate_nickname","autofocus","true","debounce","100","type","text",3,"placeholder","ionChange","ionBlur"],["focus_element",""],[1,"validation-errors"],[4,"ngFor","ngForOf"],["formControlName","from","debounce","100","type","text",3,"placeholder","ionChange","ionBlur"],["lines","none","text-wrap","",1,"ion-text-end"],["color","primary","slot","end","shape","round",3,"disabled","click"],["target","_top",2,"color","inherit","text-decoration","inherit",3,"href"],["name","mail-open-outline"],["name","copy-outline"],["class","error-message",3,"innerHtml",4,"ngIf"],[1,"error-message",3,"innerHtml"],["name","share-social-outline"]],template:function(c,w){1&c&&n.YNc(0,T,38,31,"ion-content",0),2&c&&n.Q6J("ngIf",w.ready)},directives:[u.O5,i.W2,t._Y,t.JL,t.sg,i.q_,i.Ie,i.wI,i.Q$,i.pK,i.j9,t.JJ,t.u,u.sg,i.YG,i.gu],pipes:[m.X$],styles:[""]}),_})();const J=[{path:"",component:g}];let l=(()=>{class _{}return _.\u0275fac=function(c){return new(c||_)},_.\u0275mod=n.oAB({type:_}),_.\u0275inj=n.cJS({imports:[[h.Bz.forChild(J)],h.Bz]}),_})(),x=(()=>{class _{}return _.\u0275fac=function(c){return new(c||_)},_.\u0275mod=n.oAB({type:_}),_.\u0275inj=n.cJS({imports:[[u.ez,t.u5,i.Pc,t.UX,l,m.aw.forChild()]]}),_})()},3357:(G,Z,a)=>{a.r(Z),a.d(Z,{DraftpollKebapPage:()=>e,DraftpollKebapPageModule:()=>b});var u=a(6362),t=a(587),m=a(8139),i=a(3926),h=a(1951),o=a(260);function r(s,D){if(1&s&&o._UZ(0,"ion-select-option",10),2&s){const f=D.$implicit,y=o.oxw();o.Q6J("value",f)("innerHtml",y.JSON.parse(f).title,o.oJD)}}let e=(()=>{class s{constructor(f,y){this.popover=f,this.ref=y,this.JSON=JSON,this.examples=[]}ngOnInit(){}ionViewWillEnter(){}ClosePopover(){this.popover.dismiss()}send4review(){this.parent.send4review(),this.popover.dismiss()}import(){this.parent.import_csv_dialog(),this.popover.dismiss()}use_example_clicked(){this.parent.G.D.get_example_docs().then(f=>{this.examples=[];for(let y of f.rows)this.examples.push(JSON.stringify(y.doc));this.ref.detectChanges(),this.select_example.open(new MouseEvent("click"))}).catch(f=>{this.parent.G.L.error("DraftpollPage.use_example_clicked failed",f)})}use_example(){var f=this.select_example.value;"-"!=(f||"-")&&(this.parent.restart_with_data(f),this.popover.dismiss())}}return s.\u0275fac=function(f){return new(f||s)(o.Y36(i.Dh),o.Y36(o.sBO))},s.\u0275cmp=o.Xpm({type:s,selectors:[["app-draftpoll-kebap"]],viewQuery:function(f,y){if(1&f&&o.Gf(i.t9,5),2&f){let T;o.iGM(T=o.CRH())&&(y.select_example=T.first)}},inputs:{parent:"parent"},decls:25,vars:13,consts:[[3,"click"],["fill","clear","color","dark"],["name","share-social"],[3,"innerHtml"],["name","folder-open-outline"],["name","cloud-download-outline"],["interface","popover","display","none",2,"font-size","smaller",3,"ionChange"],["ionSelects","","select_example",""],["value","-",3,"innerHtml"],[3,"value","innerHtml",4,"ngFor","ngForOf"],[3,"value","innerHtml"]],template:function(f,y){1&f&&(o.TgZ(0,"ion-content")(1,"ion-item",0),o.NdJ("click",function(){return y.send4review()}),o.TgZ(2,"ion-button",1),o._UZ(3,"ion-icon",2),o._uU(4,"\xa0\xa0"),o._UZ(5,"span",3),o.ALo(6,"translate"),o.qZA()(),o.TgZ(7,"ion-item",0),o.NdJ("click",function(){return y.import()}),o.TgZ(8,"ion-button",1),o._UZ(9,"ion-icon",4),o._uU(10,"\xa0\xa0"),o._UZ(11,"span",3),o.ALo(12,"translate"),o.qZA()(),o.TgZ(13,"ion-item",0),o.NdJ("click",function(){return y.use_example_clicked()}),o.TgZ(14,"ion-button",1),o._UZ(15,"ion-icon",5),o._uU(16,"\xa0\xa0 "),o._UZ(17,"span",3),o.ALo(18,"translate"),o.qZA(),o.TgZ(19,"ion-select",6,7),o.NdJ("ionChange",function(){return y.use_example()}),o._UZ(22,"ion-select-option",8),o.ALo(23,"translate"),o.YNc(24,r,1,2,"ion-select-option",9),o.qZA()()()),2&f&&(o.xp6(5),o.Q6J("innerHtml",o.lcZ(6,5,"draftpoll.send-for-review"),o.oJD),o.xp6(6),o.Q6J("innerHtml",o.lcZ(12,7,"draftpoll.import-options-from-file"),o.oJD),o.xp6(6),o.Q6J("innerHtml",o.lcZ(18,9,"draftpoll.use-example-from-db"),o.oJD),o.xp6(5),o.Q6J("innerHtml",o.lcZ(23,11,"draftpoll.use-example-from-db-none"),o.oJD),o.xp6(2),o.Q6J("ngForOf",y.examples))},directives:[i.W2,i.Ie,i.YG,i.gu,i.t9,i.QI,i.n0,u.sg],pipes:[m.X$],styles:[""]}),s})();const n=[{path:"",component:e}];let v=(()=>{class s{}return s.\u0275fac=function(f){return new(f||s)},s.\u0275mod=o.oAB({type:s}),s.\u0275inj=o.cJS({imports:[[h.Bz.forChild(n)],h.Bz]}),s})(),b=(()=>{class s{}return s.\u0275fac=function(f){return new(f||s)},s.\u0275mod=o.oAB({type:s}),s.\u0275inj=o.cJS({imports:[[u.ez,t.u5,i.Pc,v,m.aw.forChild()]]}),s})()},2767:(G,Z,a)=>{a.d(Z,{K:()=>T});var u=a(587),t=a(260),m=a(6301),i=a(3926),h=a(6362),o=a(8139);function r(g,J){1&g&&(t._UZ(0,"ion-select-option",8),t.ALo(1,"translate")),2&g&&t.Q6J("innerHtml",t.lcZ(1,1,"select-server.same-as-personal"),t.oJD)}function e(g,J){if(1&g&&t._UZ(0,"ion-select-option",12),2&g){const l=t.oxw().$implicit,x=t.oxw(2);t.Q6J("value",l)("innerHtml",x.G.P.polls[l].title,t.oJD)}}function n(g,J){if(1&g&&(t.ynx(0),t.YNc(1,e,1,2,"ion-select-option",11),t.BQk()),2&g){const l=J.$implicit,x=t.oxw(2);t.xp6(1),t.Q6J("ngIf",l!=x.page_object.p.pid)}}function v(g,J){if(1&g){const l=t.EpF();t.ynx(0),t.TgZ(1,"ion-item"),t._UZ(2,"ion-label",1),t.ALo(3,"translate"),t.TgZ(4,"ion-select",9),t.NdJ("ionChange",function(){return t.CHM(l),t.oxw().set_db_from_pid()}),t.ALo(5,"translate"),t.ALo(6,"translate"),t.YNc(7,n,2,1,"ng-container",10),t.qZA()(),t.BQk()}if(2&g){const l=t.oxw();t.xp6(2),t.Q6J("innerHtml",t.lcZ(3,4,"settings"==l.page?"select-server.which-poll":"select-server.which-other-poll"),t.oJD),t.xp6(2),t.Q6J("cancelText",t.lcZ(5,6,"select-cancel"))("okText",t.lcZ(6,8,"OK")),t.xp6(3),t.Q6J("ngForOf",l.Object.keys(l.G.P.polls))}}function b(g,J){if(1&g&&(t._UZ(0,"div",20),t.ALo(1,"translate")),2&g){const l=t.oxw().$implicit;t.Q6J("innerHtml",t.lcZ(1,1,l.message),t.oJD)}}function s(g,J){if(1&g&&(t.ynx(0),t.YNc(1,b,2,3,"div",19),t.BQk()),2&g){const l=J.$implicit,x=t.oxw(2);t.xp6(1),t.Q6J("ngIf",x.selectServerFormGroup.get("db_custom_server_url").hasError(l.type)&&(x.selectServerFormGroup.get("db_custom_server_url").dirty||x.selectServerFormGroup.get("db_custom_server_url").touched))}}function D(g,J){if(1&g&&(t._UZ(0,"div",20),t.ALo(1,"translate")),2&g){const l=t.oxw().$implicit;t.Q6J("innerHtml",t.lcZ(1,1,l.message),t.oJD)}}function f(g,J){if(1&g&&(t.ynx(0),t.YNc(1,D,2,3,"div",19),t.BQk()),2&g){const l=J.$implicit,x=t.oxw(2);t.xp6(1),t.Q6J("ngIf",x.selectServerFormGroup.get("db_custom_password").hasError(l.type)&&(x.selectServerFormGroup.get("db_custom_password").dirty||x.selectServerFormGroup.get("db_custom_password").touched))}}function y(g,J){if(1&g){const l=t.EpF();t.ynx(0),t.TgZ(1,"ion-item"),t._UZ(2,"small",13),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-item"),t._UZ(5,"ion-label",1),t.ALo(6,"translate"),t.TgZ(7,"ion-input",14),t.NdJ("ionChange",function(){return t.CHM(l),t.oxw().set_db_custom_server_url()}),t.qZA()(),t.TgZ(8,"div",15),t.YNc(9,s,2,1,"ng-container",10),t.qZA(),t.TgZ(10,"ion-item"),t._UZ(11,"ion-label",1),t.ALo(12,"translate"),t.TgZ(13,"ion-input",16),t.NdJ("keydown.enter",function(){t.CHM(l);const _=t.oxw();return _.showing_db_custom_password=!_.selectServerFormGroup.get("db_custom_password").valid&&_.showing_db_custom_password,_.blur()})("keydown.tab",function(){t.CHM(l);const _=t.oxw();return _.showing_db_custom_password=!_.selectServerFormGroup.get("db_custom_password").valid&&_.showing_db_custom_password,_.blur()})("ionChange",function(){return t.CHM(l),t.oxw().set_db_custom_password()}),t.qZA(),t.TgZ(14,"ion-button",17),t.NdJ("click",function(){t.CHM(l);const _=t.oxw();return _.showing_db_custom_password=!_.showing_db_custom_password}),t._UZ(15,"ion-icon",18),t._uU(16,"\xa0"),t._UZ(17,"span",13),t.ALo(18,"translate"),t.qZA()(),t.TgZ(19,"div",15),t.YNc(20,f,2,1,"ng-container",10),t.qZA(),t.BQk()}if(2&g){const l=t.oxw();t.xp6(2),t.Q6J("innerHtml",t.lcZ(3,8,"select-server.please-enter-couchdb"),t.oJD),t.xp6(3),t.Q6J("innerHtml",t.lcZ(6,10,"db-server-url"),t.oJD),t.xp6(4),t.Q6J("ngForOf",l.validation_messages.db_custom_server_url),t.xp6(2),t.Q6J("innerHtml",t.lcZ(12,12,"db-pw"),t.oJD),t.xp6(2),t.Q6J("type",l.showing_db_custom_password?"text":"password"),t.xp6(2),t.Q6J("name",l.showing_db_custom_password?"eye-off-outline":"eye-outline"),t.xp6(2),t.Q6J("innerHtml",t.lcZ(18,14,l.showing_db_custom_password?"hide":"show"),t.oJD),t.xp6(3),t.Q6J("ngForOf",l.validation_messages.db_custom_password)}}let T=(()=>{class g{constructor(l,x){this.formBuilder=l,this.G=x,this.Object=Object,this.validation_messages={db_custom_server_url:[{type:"required",message:"validation.db-server-url-required"},{type:"pattern",message:"validation.db-server-url-pattern"}],db_custom_password:[{type:"required",message:"validation.db-pw-required"}]}}ngOnInit(){this.G.L.entry("SelectServerComponent.ngOnInit"),this.selectServerFormGroup=this.formBuilder.group({db:new u.NI("settings"==this.page?"central":"default",u.kI.required),db_from_pid:new u.NI("TODO",u.kI.required),db_custom_server_url:new u.NI("",u.kI.pattern(this.G.urlRegex)),db_custom_password:new u.NI("",u.kI.required)}),this.showing_db_custom_password=!1,this.page_object&&this.page_object.onSelectServerReady(this)}blur(){}set_db(){let l=this.selectServerFormGroup.get("db");l.valid&&""!=l.value&&l.value&&this.page_object.set_db(l.value)}set_db_from_pid(){let l=this.selectServerFormGroup.get("db_from_pid");l.valid&&this.page_object.set_db_from_pid(l.value)}set_db_custom_server_url(){let l=this.selectServerFormGroup.get("db_custom_server_url");l.valid&&this.page_object.set_db_custom_server_url(l.value)}set_db_custom_password(){let l=this.selectServerFormGroup.get("db_custom_password");l.valid&&this.page_object.set_db_custom_password(l.value)}}return g.\u0275fac=function(l){return new(l||g)(t.Y36(u.qu),t.Y36(m.U))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-select-server"]],inputs:{page:"page",page_object:"page_object"},decls:16,vars:24,consts:[[3,"formGroup"],["position","floating","color","primary",3,"innerHtml"],["formControlName","db",3,"cancelText","okText","ionChange"],["value","default",3,"innerHtml",4,"ngIf"],["value","central",3,"innerHtml"],["value","poll",3,"innerHtml"],["value","other",3,"innerHtml"],[4,"ngIf"],["value","default",3,"innerHtml"],["formControlName","db_from_pid",2,"font-size","smaller",3,"cancelText","okText","ionChange"],[4,"ngFor","ngForOf"],[3,"value","innerHtml",4,"ngIf"],[3,"value","innerHtml"],[3,"innerHtml"],["type","text","formControlName","db_custom_server_url","required","","debounce","100",2,"font-size","smaller",3,"ionChange"],[1,"validation-errors"],["formControlName","db_custom_password","required","","clearOnEdit","false","clearInput","true","debounce","100",2,"font-size","smaller",3,"type","keydown.enter","keydown.tab","ionChange"],["slot","end","fill","clear","color","primary",2,"padding-top","10px",3,"click"],["tabindex","-1",3,"name"],["class","error-message",3,"innerHtml",4,"ngIf"],[1,"error-message",3,"innerHtml"]],template:function(l,x){1&l&&(t.TgZ(0,"form",0)(1,"ion-item"),t._UZ(2,"ion-label",1),t.ALo(3,"translate"),t.TgZ(4,"ion-select",2),t.NdJ("ionChange",function(){return x.set_db()}),t.ALo(5,"translate"),t.ALo(6,"translate"),t.YNc(7,r,2,3,"ion-select-option",3),t._UZ(8,"ion-select-option",4),t.ALo(9,"translate"),t._UZ(10,"ion-select-option",5),t.ALo(11,"translate"),t._UZ(12,"ion-select-option",6),t.ALo(13,"translate"),t.qZA()(),t.YNc(14,v,8,10,"ng-container",7),t.YNc(15,y,21,16,"ng-container",7),t.qZA()),2&l&&(t.Q6J("formGroup",x.selectServerFormGroup),t.xp6(2),t.Q6J("innerHtml",t.lcZ(3,12,"settings"==x.page?"settings.db-label":"draftpoll.db-label"),t.oJD),t.xp6(2),t.Akn("settings"!=x.page?"font-size: smaller;":""),t.Q6J("cancelText",t.lcZ(5,14,"select-cancel"))("okText",t.lcZ(6,16,"OK")),t.xp6(3),t.Q6J("ngIf","settings"!=x.page),t.xp6(1),t.Q6J("innerHtml",t.lcZ(9,18,"select-server.central"),t.oJD),t.xp6(2),t.Q6J("innerHtml",t.lcZ(11,20,"settings"==x.page?"select-server.same-as-some-poll":"select-server.same-as-other-poll"),t.oJD),t.xp6(2),t.Q6J("innerHtml",t.lcZ(13,22,"select-server.other"),t.oJD),t.xp6(2),t.Q6J("ngIf","poll"==x.selectServerFormGroup.get("db").value),t.xp6(1),t.Q6J("ngIf","other"==x.selectServerFormGroup.get("db").value))},directives:[u._Y,u.JL,u.sg,i.Ie,i.Q$,i.t9,i.QI,u.JJ,u.u,h.O5,i.n0,h.sg,i.pK,i.j9,u.Q7,i.YG,i.gu],pipes:[o.X$],styles:[""]}),g})()},4496:(G,Z,a)=>{a.d(Z,{m:()=>o});var u=a(6362),t=a(3926),m=a(587),i=a(8139),h=a(260);let o=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({imports:[[u.ez,t.Pc,m.u5,m.UX,i.aw.forChild()]]}),r})()},8921:(G,Z,a)=>{a.d(Z,{m:()=>t});const t=(0,a(5099).fo)("Share",{web:()=>a.e(3656).then(a.bind(a,3656)).then(m=>new m.ShareWeb)})},6692:(G,Z,a)=>{a.d(Z,{c:()=>i});var u=a(2752),t=a(9137),m=a(3443);const i=(h,o)=>{let r,e;const n=(s,D,f)=>{if("undefined"==typeof document)return;const y=document.elementFromPoint(s,D);y&&o(y)?y!==r&&(b(),v(y,f)):b()},v=(s,D)=>{r=s,e||(e=r);const f=r;(0,u.c)(()=>f.classList.add("ion-activated")),D()},b=(s=!1)=>{if(!r)return;const D=r;(0,u.c)(()=>D.classList.remove("ion-activated")),s&&e!==r&&r.click(),r=void 0};return(0,m.createGesture)({el:h,gestureName:"buttonActiveDrag",threshold:0,onStart:s=>n(s.currentX,s.currentY,t.a),onMove:s=>n(s.currentX,s.currentY,t.b),onEnd:()=>{b(!0),(0,t.h)(),e=void 0}})}},8714:(G,Z,a)=>{a.d(Z,{a:()=>m,d:()=>i});var u=a(1670),t=a(1715);const m=function(){var h=(0,u.Z)(function*(o,r,e,n,v){if(o)return o.attachViewToDom(r,e,v,n);if("string"!=typeof e&&!(e instanceof HTMLElement))throw new Error("framework delegate is missing");const b="string"==typeof e?r.ownerDocument&&r.ownerDocument.createElement(e):e;return n&&n.forEach(s=>b.classList.add(s)),v&&Object.assign(b,v),r.appendChild(b),yield new Promise(s=>(0,t.c)(b,s)),b});return function(r,e,n,v,b){return h.apply(this,arguments)}}(),i=(h,o)=>{if(o){if(h)return h.removeViewFromDom(o.parentElement,o);o.remove()}return Promise.resolve()}},9137:(G,Z,a)=>{a.d(Z,{a:()=>m,b:()=>i,c:()=>t,d:()=>o,h:()=>h});const u={getEngine(){const r=window;return r.TapticEngine||r.Capacitor&&r.Capacitor.isPluginAvailable("Haptics")&&r.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(r){const e=this.getEngine();if(!e)return;const n=this.isCapacitor()?r.style.toUpperCase():r.style;e.impact({style:n})},notification(r){const e=this.getEngine();if(!e)return;const n=this.isCapacitor()?r.style.toUpperCase():r.style;e.notification({style:n})},selection(){this.impact({style:"light"})},selectionStart(){const r=this.getEngine();!r||(this.isCapacitor()?r.selectionStart():r.gestureSelectionStart())},selectionChanged(){const r=this.getEngine();!r||(this.isCapacitor()?r.selectionChanged():r.gestureSelectionChanged())},selectionEnd(){const r=this.getEngine();!r||(this.isCapacitor()?r.selectionEnd():r.gestureSelectionEnd())}},t=()=>{u.selection()},m=()=>{u.selectionStart()},i=()=>{u.selectionChanged()},h=()=>{u.selectionEnd()},o=r=>{u.impact(r)}},1508:(G,Z,a)=>{a.d(Z,{s:()=>u});const u=e=>{try{if(e instanceof class r{constructor(n){this.value=n}})return e.value;if(!i()||"string"!=typeof e||""===e)return e;const n=document.createDocumentFragment(),v=document.createElement("div");n.appendChild(v),v.innerHTML=e,o.forEach(f=>{const y=n.querySelectorAll(f);for(let T=y.length-1;T>=0;T--){const g=y[T];g.parentNode?g.parentNode.removeChild(g):n.removeChild(g);const J=m(g);for(let l=0;l<J.length;l++)t(J[l])}});const b=m(n);for(let f=0;f<b.length;f++)t(b[f]);const s=document.createElement("div");s.appendChild(n);const D=s.querySelector("div");return null!==D?D.innerHTML:s.innerHTML}catch(n){return console.error(n),""}},t=e=>{if(e.nodeType&&1!==e.nodeType)return;for(let v=e.attributes.length-1;v>=0;v--){const b=e.attributes.item(v),s=b.name;if(!h.includes(s.toLowerCase())){e.removeAttribute(s);continue}const D=b.value;null!=D&&D.toLowerCase().includes("javascript:")&&e.removeAttribute(s)}const n=m(e);for(let v=0;v<n.length;v++)t(n[v])},m=e=>null!=e.children?e.children:e.childNodes,i=()=>{const e=window,n=e&&e.Ionic&&e.Ionic.config;return!n||(n.get?n.get("sanitizerEnabled",!0):!0===n.sanitizerEnabled||void 0===n.sanitizerEnabled)},h=["class","id","href","src","name","slot"],o=["script","style","iframe","meta","link","object","embed"]},1350:(G,Z,a)=>{a.d(Z,{S:()=>t});const t={bubbles:{dur:1e3,circles:9,fn:(m,i,h)=>{const o=m*i/h-m+"ms",r=2*Math.PI*i/h;return{r:5,style:{top:9*Math.sin(r)+"px",left:9*Math.cos(r)+"px","animation-delay":o}}}},circles:{dur:1e3,circles:8,fn:(m,i,h)=>{const o=i/h,r=m*o-m+"ms",e=2*Math.PI*o;return{r:5,style:{top:9*Math.sin(e)+"px",left:9*Math.cos(e)+"px","animation-delay":r}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(m,i)=>({r:6,style:{left:9-9*i+"px","animation-delay":-110*i+"ms"}})},lines:{dur:1e3,lines:12,fn:(m,i,h)=>({y1:17,y2:29,style:{transform:`rotate(${30*i+(i<6?180:-180)}deg)`,"animation-delay":m*i/h-m+"ms"}})},"lines-small":{dur:1e3,lines:12,fn:(m,i,h)=>({y1:12,y2:20,style:{transform:`rotate(${30*i+(i<6?180:-180)}deg)`,"animation-delay":m*i/h-m+"ms"}})}}},4254:(G,Z,a)=>{a.d(Z,{c:()=>m,g:()=>h,h:()=>t,o:()=>r});var u=a(1670);const t=(e,n)=>null!==n.closest(e),m=(e,n)=>"string"==typeof e&&e.length>0?Object.assign({"ion-color":!0,[`ion-color-${e}`]:!0},n):n,h=e=>{const n={};return(e=>void 0!==e?(Array.isArray(e)?e:e.split(" ")).filter(v=>null!=v).map(v=>v.trim()).filter(v=>""!==v):[])(e).forEach(v=>n[v]=!0),n},o=/^[a-z][a-z0-9+\-.]*:/,r=function(){var e=(0,u.Z)(function*(n,v,b,s){if(null!=n&&"#"!==n[0]&&!o.test(n)){const D=document.querySelector("ion-router");if(D)return null!=v&&v.preventDefault(),D.push(n,b,s)}return!1});return function(v,b,s,D){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=common.25dd51f06b2b972c.js.map