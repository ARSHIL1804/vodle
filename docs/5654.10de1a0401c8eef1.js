(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5654],{5654:(zn,qt,B)=>{"use strict";B.r(qt),B.d(qt,{PollPage:()=>Qr,PollPageModule:()=>Is});var ot=B(4666),mt=B(2508),Rt=B(8139),X=B(1005),$t=B(6476),Bt=B(1670),Et=B(2340),Kt=B(2459),Mt=B(8581),un=B(9089);function Tt(){}function Ct(n){return null==n?Tt:function(){return this.querySelector(n)}}function Ut(n){return null==n?[]:Array.isArray(n)?n:Array.from(n)}function St(){return[]}function It(n){return null==n?St:function(){return this.querySelectorAll(n)}}function Lt(n){return function(){return this.matches(n)}}function hn(n){return function(i){return i.matches(n)}}var xn=Array.prototype.find;function Jt(){return this.firstElementChild}var nn=Array.prototype.filter;function Jn(){return Array.from(this.children)}function pe(n){return new Array(n.length)}function Cn(n,i){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=i}function re(n){return function(){return n}}function Vn(n,i,e,r,a,u){for(var d,c=0,x=i.length,A=u.length;c<A;++c)(d=i[c])?(d.__data__=u[c],r[c]=d):e[c]=new Cn(n,u[c]);for(;c<x;++c)(d=i[c])&&(a[c]=d)}function Gn(n,i,e,r,a,u,c){var d,x,rt,A=new Map,Z=i.length,z=u.length,tt=new Array(Z);for(d=0;d<Z;++d)(x=i[d])&&(tt[d]=rt=c.call(x,x.__data__,d,i)+"",A.has(rt)?a[d]=x:A.set(rt,x));for(d=0;d<z;++d)rt=c.call(n,u[d],d,u)+"",(x=A.get(rt))?(r[d]=x,x.__data__=u[d],A.delete(rt)):e[d]=new Cn(n,u[d]);for(d=0;d<Z;++d)(x=i[d])&&A.get(tt[d])===x&&(a[d]=x)}function oe(n){return n.__data__}function $n(n){return"object"==typeof n&&"length"in n?n:Array.from(n)}function se(n,i){return n<i?-1:n>i?1:n>=i?0:NaN}Cn.prototype={constructor:Cn,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,i){return this._parent.insertBefore(n,i)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var _="http://www.w3.org/1999/xhtml";const v={svg:"http://www.w3.org/2000/svg",xhtml:_,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function y(n){var i=n+="",e=i.indexOf(":");return e>=0&&"xmlns"!==(i=n.slice(0,e))&&(n=n.slice(e+1)),v.hasOwnProperty(i)?{space:v[i],local:n}:n}function k(n){return function(){this.removeAttribute(n)}}function N(n){return function(){this.removeAttributeNS(n.space,n.local)}}function E(n,i){return function(){this.setAttribute(n,i)}}function J(n,i){return function(){this.setAttributeNS(n.space,n.local,i)}}function L(n,i){return function(){var e=i.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}}function H(n,i){return function(){var e=i.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function W(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function S(n){return function(){this.style.removeProperty(n)}}function G(n,i,e){return function(){this.style.setProperty(n,i,e)}}function it(n,i,e){return function(){var r=i.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}}function gt(n,i){return n.style.getPropertyValue(i)||W(n).getComputedStyle(n,null).getPropertyValue(i)}function kt(n){return function(){delete this[n]}}function pt(n,i){return function(){this[n]=i}}function st(n,i){return function(){var e=i.apply(this,arguments);null==e?delete this[n]:this[n]=e}}function Gt(n){return n.trim().split(/^|\s+/)}function on(n){return n.classList||new vn(n)}function vn(n){this._node=n,this._names=Gt(n.getAttribute("class")||"")}function yn(n,i){for(var e=on(n),r=-1,a=i.length;++r<a;)e.add(i[r])}function An(n,i){for(var e=on(n),r=-1,a=i.length;++r<a;)e.remove(i[r])}function rn(n){return function(){yn(this,n)}}function jt(n){return function(){An(this,n)}}function an(n,i){return function(){(i.apply(this,arguments)?yn:An)(this,n)}}function wn(){this.textContent=""}function m(n){return function(){this.textContent=n}}function M(n){return function(){var i=n.apply(this,arguments);this.textContent=i??""}}function at(){this.innerHTML=""}function U(n){return function(){this.innerHTML=n}}function j(n){return function(){var i=n.apply(this,arguments);this.innerHTML=i??""}}function V(){this.nextSibling&&this.parentNode.appendChild(this)}function wt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Un(n){return function(){var i=this.ownerDocument,e=this.namespaceURI;return e===_&&i.documentElement.namespaceURI===_?i.createElement(n):i.createElementNS(e,n)}}function Zn(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function sn(n){var i=y(n);return(i.local?Zn:Un)(i)}function me(){return null}function Ve(){var n=this.parentNode;n&&n.removeChild(this)}function ue(){var n=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(n,this.nextSibling):n}function Ae(){var n=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(n,this.nextSibling):n}function hi(n){return n.trim().split(/^|\s+/).map(function(i){var e="",r=i.indexOf(".");return r>=0&&(e=i.slice(r+1),i=i.slice(0,r)),{type:i,name:e}})}function _i(n){return function(){var i=this.__on;if(i){for(var u,e=0,r=-1,a=i.length;e<a;++e)u=i[e],n.type&&u.type!==n.type||u.name!==n.name?i[++r]=u:this.removeEventListener(u.type,u.listener,u.options);++r?i.length=r:delete this.__on}}}function pi(n,i,e){return function(){var a,r=this.__on,u=function Ii(n){return function(i){n.call(this,i,this.__data__)}}(i);if(r)for(var c=0,d=r.length;c<d;++c)if((a=r[c]).type===n.type&&a.name===n.name)return this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=u,a.options=e),void(a.value=i);this.addEventListener(n.type,u,e),a={type:n.type,name:n.name,value:i,listener:u,options:e},r?r.push(a):this.__on=[a]}}function Hi(n,i,e){var r=W(n),a=r.CustomEvent;"function"==typeof a?a=new a(i,e):(a=r.document.createEvent("Event"),e?(a.initEvent(i,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(i,!1,!1)),n.dispatchEvent(a)}function Xe(n,i){return function(){return Hi(this,n,i)}}function $e(n,i){return function(){return Hi(this,n,i.apply(this,arguments))}}vn.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var i=this._names.indexOf(n);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var We=[null];function bn(n,i){this._groups=n,this._parents=i}function di(){return new bn([[document.documentElement]],We)}bn.prototype=di.prototype={constructor:bn,select:function Qt(n){"function"!=typeof n&&(n=Ct(n));for(var i=this._groups,e=i.length,r=new Array(e),a=0;a<e;++a)for(var x,A,u=i[a],c=u.length,d=r[a]=new Array(c),Z=0;Z<c;++Z)(x=u[Z])&&(A=n.call(x,x.__data__,Z,u))&&("__data__"in x&&(A.__data__=x.__data__),d[Z]=A);return new bn(r,this._parents)},selectAll:function Wt(n){n="function"==typeof n?function _n(n){return function(){return Ut(n.apply(this,arguments))}}(n):It(n);for(var i=this._groups,e=i.length,r=[],a=[],u=0;u<e;++u)for(var x,c=i[u],d=c.length,A=0;A<d;++A)(x=c[A])&&(r.push(n.call(x,x.__data__,A,c)),a.push(x));return new bn(r,a)},selectChild:function pn(n){return this.select(null==n?Jt:function xt(n){return function(){return xn.call(this.children,n)}}("function"==typeof n?n:hn(n)))},selectChildren:function ee(n){return this.selectAll(null==n?Jn:function Kn(n){return function(){return nn.call(this.children,n)}}("function"==typeof n?n:hn(n)))},filter:function ie(n){"function"!=typeof n&&(n=Lt(n));for(var i=this._groups,e=i.length,r=new Array(e),a=0;a<e;++a)for(var x,u=i[a],c=u.length,d=r[a]=[],A=0;A<c;++A)(x=u[A])&&n.call(x,x.__data__,A,u)&&d.push(x);return new bn(r,this._parents)},data:function Xn(n,i){if(!arguments.length)return Array.from(this,oe);var e=i?Gn:Vn,r=this._parents,a=this._groups;"function"!=typeof n&&(n=re(n));for(var u=a.length,c=new Array(u),d=new Array(u),x=new Array(u),A=0;A<u;++A){var Z=r[A],z=a[A],tt=z.length,rt=$n(n.call(Z,Z&&Z.__data__,A,r)),Xt=rt.length,en=d[A]=new Array(Xt),R=c[A]=new Array(Xt),I=x[A]=new Array(tt);e(Z,z,en,R,I,rt,i);for(var Pt,lt,ht=0,et=0;ht<Xt;++ht)if(Pt=en[ht]){for(ht>=et&&(et=ht+1);!(lt=R[et])&&++et<Xt;);Pt._next=lt||null}}return(c=new bn(c,r))._enter=d,c._exit=x,c},enter:function de(){return new bn(this._enter||this._groups.map(pe),this._parents)},exit:function Rn(){return new bn(this._exit||this._groups.map(pe),this._parents)},join:function qn(n,i,e){var r=this.enter(),a=this,u=this.exit();return"function"==typeof n?(r=n(r))&&(r=r.selection()):r=r.append(n+""),null!=i&&(a=i(a))&&(a=a.selection()),null==e?u.remove():e(u),r&&a?r.merge(a).order():a},merge:function dn(n){for(var i=n.selection?n.selection():n,e=this._groups,r=i._groups,a=e.length,c=Math.min(a,r.length),d=new Array(a),x=0;x<c;++x)for(var rt,A=e[x],Z=r[x],z=A.length,tt=d[x]=new Array(z),Xt=0;Xt<z;++Xt)(rt=A[Xt]||Z[Xt])&&(tt[Xt]=rt);for(;x<a;++x)d[x]=e[x];return new bn(d,this._parents)},selection:function Qi(){return this},order:function gn(){for(var n=this._groups,i=-1,e=n.length;++i<e;)for(var c,r=n[i],a=r.length-1,u=r[a];--a>=0;)(c=r[a])&&(u&&4^c.compareDocumentPosition(u)&&u.parentNode.insertBefore(c,u),u=c);return this},sort:function ae(n){function i(z,tt){return z&&tt?n(z.__data__,tt.__data__):!z-!tt}n||(n=se);for(var e=this._groups,r=e.length,a=new Array(r),u=0;u<r;++u){for(var A,c=e[u],d=c.length,x=a[u]=new Array(d),Z=0;Z<d;++Z)(A=c[Z])&&(x[Z]=A);x.sort(i)}return new bn(a,this._parents).order()},call:function ge(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function En(){return Array.from(this)},node:function Wn(){for(var n=this._groups,i=0,e=n.length;i<e;++i)for(var r=n[i],a=0,u=r.length;a<u;++a){var c=r[a];if(c)return c}return null},size:function f(){let n=0;for(const i of this)++n;return n},empty:function p(){return!this.node()},each:function g(n){for(var i=this._groups,e=0,r=i.length;e<r;++e)for(var d,a=i[e],u=0,c=a.length;u<c;++u)(d=a[u])&&n.call(d,d.__data__,u,a);return this},attr:function $(n,i){var e=y(n);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==i?e.local?N:k:"function"==typeof i?e.local?H:L:e.local?J:E)(e,i))},style:function O(n,i,e){return arguments.length>1?this.each((null==i?S:"function"==typeof i?it:G)(n,i,e??"")):gt(this.node(),n)},property:function Ht(n,i){return arguments.length>1?this.each((null==i?kt:"function"==typeof i?st:pt)(n,i)):this.node()[n]},classed:function Fn(n,i){var e=Gt(n+"");if(arguments.length<2){for(var r=on(this.node()),a=-1,u=e.length;++a<u;)if(!r.contains(e[a]))return!1;return!0}return this.each(("function"==typeof i?an:i?rn:jt)(e,i))},text:function F(n){return arguments.length?this.each(null==n?wn:("function"==typeof n?M:m)(n)):this.node().textContent},html:function ct(n){return arguments.length?this.each(null==n?at:("function"==typeof n?j:U)(n)):this.node().innerHTML},raise:function yt(){return this.each(V)},lower:function Vt(){return this.each(wt)},append:function Pn(n){var i="function"==typeof n?n:sn(n);return this.select(function(){return this.appendChild(i.apply(this,arguments))})},insert:function be(n,i){var e="function"==typeof n?n:sn(n),r=null==i?me:"function"==typeof i?i:Ct(i);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function le(){return this.each(Ve)},clone:function Ie(n){return this.select(n?Ae:ue)},datum:function fi(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function cr(n,i,e){var a,c,r=hi(n+""),u=r.length;if(!(arguments.length<2)){for(d=i?pi:_i,a=0;a<u;++a)this.each(d(r[a],i,e));return this}var d=this.node().__on;if(d)for(var Z,x=0,A=d.length;x<A;++x)for(a=0,Z=d[x];a<u;++a)if((c=r[a]).type===Z.type&&c.name===Z.name)return Z.value},dispatch:function zi(n,i){return this.each(("function"==typeof i?$e:Xe)(n,i))},[Symbol.iterator]:function*Ri(){for(var n=this._groups,i=0,e=n.length;i<e;++i)for(var c,r=n[i],a=0,u=r.length;a<u;++a)(c=r[a])&&(yield c)}};const Pe=di;var Si={value:()=>{}};function gi(){for(var r,n=0,i=arguments.length,e={};n<i;++n){if(!(r=arguments[n]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new He(e)}function He(n){this._=n}function Gi(n,i){return n.trim().split(/^|\s+/).map(function(e){var r="",a=e.indexOf(".");if(a>=0&&(r=e.slice(a+1),e=e.slice(0,a)),e&&!i.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}function qi(n,i){for(var a,e=0,r=n.length;e<r;++e)if((a=n[e]).name===i)return a.value}function mi(n,i,e){for(var r=0,a=n.length;r<a;++r)if(n[r].name===i){n[r]=Si,n=n.slice(0,r).concat(n.slice(r+1));break}return null!=e&&n.push({name:i,value:e}),n}He.prototype=gi.prototype={constructor:He,on:function(n,i){var a,e=this._,r=Gi(n+"",e),u=-1,c=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++u<c;)if(a=(n=r[u]).type)e[a]=mi(e[a],n.name,i);else if(null==i)for(a in e)e[a]=mi(e[a],n.name,null);return this}for(;++u<c;)if((a=(n=r[u]).type)&&(a=qi(e[a],n.name)))return a},copy:function(){var n={},i=this._;for(var e in i)n[e]=i[e].slice();return new He(n)},call:function(n,i){if((a=arguments.length-2)>0)for(var a,u,e=new Array(a),r=0;r<a;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(r=0,a=(u=this._[n]).length;r<a;++r)u[r].value.apply(i,e)},apply:function(n,i,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],a=0,u=r.length;a<u;++a)r[a].value.apply(i,e)}};const Fi=gi;var ze,ke,xe=0,Ze=0,Te=0,Re=0,ce=0,Qe=0,Me="object"==typeof performance&&performance.now?performance:Date,vi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function je(){return ce||(vi(Oi),ce=Me.now()+Qe)}function Oi(){ce=0}function Se(){this._call=this._time=this._next=null}function yi(n,i,e){var r=new Se;return r.restart(n,i,e),r}function wi(){ce=(Re=Me.now())+Qe,xe=Ze=0;try{!function Yi(){je(),++xe;for(var i,n=ze;n;)(i=ce-n._time)>=0&&n._call.call(void 0,i),n=n._next;--xe}()}finally{xe=0,function Ki(){for(var n,e,i=ze,r=1/0;i;)i._call?(r>i._time&&(r=i._time),n=i,i=i._next):(e=i._next,i._next=null,i=n?n._next=e:ze=e);ke=n,ti(r)}(),ce=0}}function Bi(){var n=Me.now(),i=n-Re;i>1e3&&(Qe-=i,Re=n)}function ti(n){xe||(Ze&&(Ze=clearTimeout(Ze)),n-ce>24?(n<1/0&&(Ze=setTimeout(wi,n-Me.now()-Qe)),Te&&(Te=clearInterval(Te))):(Te||(Re=Me.now(),Te=setInterval(Bi,1e3)),xe=1,vi(wi)))}function bi(n,i,e){var r=new Se;return r.restart(a=>{r.stop(),n(a+i)},i=null==i?0:+i,e),r}Se.prototype=yi.prototype={constructor:Se,restart:function(n,i,e){if("function"!=typeof n)throw new TypeError("callback is not a function");e=(null==e?je():+e)+(null==i?0:+i),!this._next&&ke!==this&&(ke?ke._next=this:ze=this,ke=this),this._call=n,this._time=e,ti()},stop:function(){this._call&&(this._call=null,this._time=1/0,ti())}};var Vi=Fi("start","end","cancel","interrupt"),Xi=[];function qe(n,i,e,r,a,u){var c=n.__transition;if(c){if(e in c)return}else n.__transition={};!function $i(n,i,e){var a,r=n.__transition;function c(A){var Z,z,tt,rt;if(1!==e.state)return x();for(Z in r)if((rt=r[Z]).name===e.name){if(3===rt.state)return bi(c);4===rt.state?(rt.state=6,rt.timer.stop(),rt.on.call("interrupt",n,n.__data__,rt.index,rt.group),delete r[Z]):+Z<i&&(rt.state=6,rt.timer.stop(),rt.on.call("cancel",n,n.__data__,rt.index,rt.group),delete r[Z])}if(bi(function(){3===e.state&&(e.state=4,e.timer.restart(d,e.delay,e.time),d(A))}),e.state=2,e.on.call("start",n,n.__data__,e.index,e.group),2===e.state){for(e.state=3,a=new Array(tt=e.tween.length),Z=0,z=-1;Z<tt;++Z)(rt=e.tween[Z].value.call(n,n.__data__,e.index,e.group))&&(a[++z]=rt);a.length=z+1}}function d(A){for(var Z=A<e.duration?e.ease.call(null,A/e.duration):(e.timer.restart(x),e.state=5,1),z=-1,tt=a.length;++z<tt;)a[z].call(n,Z);5===e.state&&(e.on.call("end",n,n.__data__,e.index,e.group),x())}function x(){for(var A in e.state=6,e.timer.stop(),delete r[i],r)return;delete n.__transition}r[i]=e,e.timer=yi(function u(A){e.state=1,e.timer.restart(c,e.delay,e.time),e.delay<=A&&c(A-e.delay)},0,e.time)}(n,e,{name:i,index:r,group:a,on:Vi,tween:Xi,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:0})}function ii(n,i){var e=Qn(n,i);if(e.state>0)throw new Error("too late; already scheduled");return e}function On(n,i){var e=Qn(n,i);if(e.state>3)throw new Error("too late; already running");return e}function Qn(n,i){var e=n.__transition;if(!e||!(e=e[i]))throw new Error("transition not found");return e}function jn(n,i){return n=+n,i=+i,function(e){return n*(1-e)+i*e}}var Fe,Zi=180/Math.PI,ri={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ti(n,i,e,r,a,u){var c,d,x;return(c=Math.sqrt(n*n+i*i))&&(n/=c,i/=c),(x=n*e+i*r)&&(e-=n*x,r-=i*x),(d=Math.sqrt(e*e+r*r))&&(e/=d,r/=d,x/=d),n*r<i*e&&(n=-n,i=-i,x=-x,c=-c),{translateX:a,translateY:u,rotate:Math.atan2(i,n)*Zi,skewX:Math.atan(x)*Zi,scaleX:c,scaleY:d}}function oi(n,i,e,r){function a(A){return A.length?A.pop()+" ":""}return function(A,Z){var z=[],tt=[];return A=n(A),Z=n(Z),function u(A,Z,z,tt,rt,Xt){if(A!==z||Z!==tt){var en=rt.push("translate(",null,i,null,e);Xt.push({i:en-4,x:jn(A,z)},{i:en-2,x:jn(Z,tt)})}else(z||tt)&&rt.push("translate("+z+i+tt+e)}(A.translateX,A.translateY,Z.translateX,Z.translateY,z,tt),function c(A,Z,z,tt){A!==Z?(A-Z>180?Z+=360:Z-A>180&&(A+=360),tt.push({i:z.push(a(z)+"rotate(",null,r)-2,x:jn(A,Z)})):Z&&z.push(a(z)+"rotate("+Z+r)}(A.rotate,Z.rotate,z,tt),function d(A,Z,z,tt){A!==Z?tt.push({i:z.push(a(z)+"skewX(",null,r)-2,x:jn(A,Z)}):Z&&z.push(a(z)+"skewX("+Z+r)}(A.skewX,Z.skewX,z,tt),function x(A,Z,z,tt,rt,Xt){if(A!==z||Z!==tt){var en=rt.push(a(rt)+"scale(",null,",",null,")");Xt.push({i:en-4,x:jn(A,z)},{i:en-2,x:jn(Z,tt)})}else(1!==z||1!==tt)&&rt.push(a(rt)+"scale("+z+","+tt+")")}(A.scaleX,A.scaleY,Z.scaleX,Z.scaleY,z,tt),A=Z=null,function(rt){for(var R,Xt=-1,en=tt.length;++Xt<en;)z[(R=tt[Xt]).i]=R.x(rt);return z.join("")}}}var ki=oi(function tr(n){const i=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(n+"");return i.isIdentity?ri:Ti(i.a,i.b,i.c,i.d,i.e,i.f)},"px, ","px)","deg)"),ye=oi(function Yn(n){return null!=n&&(Fe||(Fe=document.createElementNS("http://www.w3.org/2000/svg","g")),Fe.setAttribute("transform",n),n=Fe.transform.baseVal.consolidate())?Ti((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):ri},", ",")",")");function fr(n,i){var e,r;return function(){var a=On(this,n),u=a.tween;if(u!==e)for(var c=0,d=(r=e=u).length;c<d;++c)if(r[c].name===i){(r=r.slice()).splice(c,1);break}a.tween=r}}function hr(n,i,e){var r,a;if("function"!=typeof e)throw new Error;return function(){var u=On(this,n),c=u.tween;if(c!==r){a=(r=c).slice();for(var d={name:i,value:e},x=0,A=a.length;x<A;++x)if(a[x].name===i){a[x]=d;break}x===A&&a.push(d)}u.tween=a}}function Je(n,i,e){var r=n._id;return n.each(function(){var a=On(this,r);(a.value||(a.value={}))[i]=e.apply(this,arguments)}),function(a){return Qn(a,r).value[i]}}function ai(n,i,e){n.prototype=i.prototype=e,e.constructor=n}function Mi(n,i){var e=Object.create(n.prototype);for(var r in i)e[r]=i[r];return e}function Ce(){}var o=1/.7,s="\\s*([+-]?\\d+)\\s*",l="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",h="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",w=/^#([0-9a-f]{3,8})$/,T=new RegExp(`^rgb\\(${s},${s},${s}\\)$`),P=new RegExp(`^rgb\\(${h},${h},${h}\\)$`),D=new RegExp(`^rgba\\(${s},${s},${s},${l}\\)$`),Q=new RegExp(`^rgba\\(${h},${h},${h},${l}\\)$`),K=new RegExp(`^hsl\\(${l},${h},${h}\\)$`),q=new RegExp(`^hsla\\(${l},${h},${h},${l}\\)$`),vt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Zt(){return this.rgb().formatHex()}function Dn(){return this.rgb().formatRgb()}function ne(n){var i,e;return n=(n+"").trim().toLowerCase(),(i=w.exec(n))?(e=i[1].length,i=parseInt(i[1],16),6===e?_r(i):3===e?new In(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===e?Ni(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===e?Ni(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=T.exec(n))?new In(i[1],i[2],i[3],1):(i=P.exec(n))?new In(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=D.exec(n))?Ni(i[1],i[2],i[3],i[4]):(i=Q.exec(n))?Ni(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=K.exec(n))?gr(i[1],i[2]/100,i[3]/100,1):(i=q.exec(n))?gr(i[1],i[2]/100,i[3]/100,i[4]):vt.hasOwnProperty(n)?_r(vt[n]):"transparent"===n?new In(NaN,NaN,NaN,0):null}function _r(n){return new In(n>>16&255,n>>8&255,255&n,1)}function Ni(n,i,e,r){return r<=0&&(n=i=e=NaN),new In(n,i,e,r)}function Fr(n){return n instanceof Ce||(n=ne(n)),n?new In((n=n.rgb()).r,n.g,n.b,n.opacity):new In}function Ji(n,i,e,r){return 1===arguments.length?Fr(n):new In(n,i,e,r??1)}function In(n,i,e,r){this.r=+n,this.g=+i,this.b=+e,this.opacity=+r}function pr(){return`#${De(this.r)}${De(this.g)}${De(this.b)}`}function dr(){const n=Ci(this.opacity);return`${1===n?"rgb(":"rgba("}${Ue(this.r)}, ${Ue(this.g)}, ${Ue(this.b)}${1===n?")":`, ${n})`}`}function Ci(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ue(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function De(n){return((n=Ue(n))<16?"0":"")+n.toString(16)}function gr(n,i,e,r){return r<=0?n=i=e=NaN:e<=0||e>=1?n=i=NaN:i<=0&&(n=NaN),new Bn(n,i,e,r)}function mr(n){if(n instanceof Bn)return new Bn(n.h,n.s,n.l,n.opacity);if(n instanceof Ce||(n=ne(n)),!n)return new Bn;if(n instanceof Bn)return n;var i=(n=n.rgb()).r/255,e=n.g/255,r=n.b/255,a=Math.min(i,e,r),u=Math.max(i,e,r),c=NaN,d=u-a,x=(u+a)/2;return d?(c=i===u?(e-r)/d+6*(e<r):e===u?(r-i)/d+2:(i-e)/d+4,d/=x<.5?u+a:2-u-a,c*=60):d=x>0&&x<1?0:c,new Bn(c,d,x,n.opacity)}function Bn(n,i,e,r){this.h=+n,this.s=+i,this.l=+e,this.opacity=+r}function xr(n){return(n=(n||0)%360)<0?n+360:n}function Ei(n){return Math.max(0,Math.min(1,n||0))}function er(n,i,e){return 255*(n<60?i+(e-i)*n/60:n<180?e:n<240?i+(e-i)*(240-n)/60:i)}function vr(n,i,e,r,a){var u=n*n,c=u*n;return((1-3*n+3*u-c)*i+(4-6*u+3*c)*e+(1+3*n+3*u-3*c)*r+c*a)/6}ai(Ce,ne,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Zt,formatHex:Zt,formatHex8:function Dt(){return this.rgb().formatHex8()},formatHsl:function te(){return mr(this).formatHsl()},formatRgb:Dn,toString:Dn}),ai(In,Ji,Mi(Ce,{brighter(n){return n=null==n?o:Math.pow(o,n),new In(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new In(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new In(Ue(this.r),Ue(this.g),Ue(this.b),Ci(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pr,formatHex:pr,formatHex8:function Or(){return`#${De(this.r)}${De(this.g)}${De(this.b)}${De(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:dr,toString:dr})),ai(Bn,function Yr(n,i,e,r){return 1===arguments.length?mr(n):new Bn(n,i,e,r??1)},Mi(Ce,{brighter(n){return n=null==n?o:Math.pow(o,n),new Bn(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new Bn(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+360*(this.h<0),i=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*i,a=2*e-r;return new In(er(n>=240?n-240:n+120,a,r),er(n,a,r),er(n<120?n+240:n-120,a,r),this.opacity)},clamp(){return new Bn(xr(this.h),Ei(this.s),Ei(this.l),Ci(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Ci(this.opacity);return`${1===n?"hsl(":"hsla("}${xr(this.h)}, ${100*Ei(this.s)}%, ${100*Ei(this.l)}%${1===n?")":`, ${n})`}`}}));const yr=n=>()=>n;function br(n,i){var e=i-n;return e?function wr(n,i){return function(e){return n+e*i}}(n,e):yr(isNaN(n)?i:n)}const Ar=function n(i){var e=function Xr(n){return 1==(n=+n)?br:function(i,e){return e-i?function Vr(n,i,e){return n=Math.pow(n,e),i=Math.pow(i,e)-n,e=1/e,function(r){return Math.pow(n+r*i,e)}}(i,e,n):yr(isNaN(i)?e:i)}}(i);function r(a,u){var c=e((a=Ji(a)).r,(u=Ji(u)).r),d=e(a.g,u.g),x=e(a.b,u.b),A=br(a.opacity,u.opacity);return function(Z){return a.r=c(Z),a.g=d(Z),a.b=x(Z),a.opacity=A(Z),a+""}}return r.gamma=n,r}(1);function Pr(n){return function(i){var c,d,e=i.length,r=new Array(e),a=new Array(e),u=new Array(e);for(c=0;c<e;++c)d=Ji(i[c]),r[c]=d.r||0,a[c]=d.g||0,u[c]=d.b||0;return r=n(r),a=n(a),u=n(u),d.opacity=1,function(x){return d.r=r(x),d.g=a(x),d.b=u(x),d+""}}}Pr(function Br(n){var i=n.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,i-1):Math.floor(e*i),a=n[r],u=n[r+1];return vr((e-r/i)*i,r>0?n[r-1]:2*a-u,a,u,r<i-1?n[r+2]:2*u-a)}}),Pr(function Kr(n){var i=n.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*i);return vr((e-r/i)*i,n[(r+i-1)%i],n[r%i],n[(r+1)%i],n[(r+2)%i])}});var ir=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rr=new RegExp(ir.source,"g");function jr(n,i){var r,a,u,e=ir.lastIndex=rr.lastIndex=0,c=-1,d=[],x=[];for(n+="",i+="";(r=ir.exec(n))&&(a=rr.exec(i));)(u=a.index)>e&&(u=i.slice(e,u),d[c]?d[c]+=u:d[++c]=u),(r=r[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,x.push({i:c,x:jn(r,a)})),e=rr.lastIndex;return e<i.length&&(u=i.slice(e),d[c]?d[c]+=u:d[++c]=u),d.length<2?x[0]?function Wr(n){return function(i){return n(i)+""}}(x[0].x):function $r(n){return function(){return n}}(i):(i=x.length,function(A){for(var z,Z=0;Z<i;++Z)d[(z=x[Z]).i]=z.x(A);return d.join("")})}function Zr(n,i){var e;return("number"==typeof i?jn:i instanceof ne?Ar:(e=ne(i))?(i=e,Ar):jr)(n,i)}function to(n){return function(){this.removeAttribute(n)}}function no(n){return function(){this.removeAttributeNS(n.space,n.local)}}function eo(n,i,e){var r,u,a=e+"";return function(){var c=this.getAttribute(n);return c===a?null:c===r?u:u=i(r=c,e)}}function io(n,i,e){var r,u,a=e+"";return function(){var c=this.getAttributeNS(n.space,n.local);return c===a?null:c===r?u:u=i(r=c,e)}}function ro(n,i,e){var r,a,u;return function(){var c,x,d=e(this);return null==d?void this.removeAttribute(n):(c=this.getAttribute(n))===(x=d+"")?null:c===r&&x===a?u:(a=x,u=i(r=c,d))}}function oo(n,i,e){var r,a,u;return function(){var c,x,d=e(this);return null==d?void this.removeAttributeNS(n.space,n.local):(c=this.getAttributeNS(n.space,n.local))===(x=d+"")?null:c===r&&x===a?u:(a=x,u=i(r=c,d))}}function so(n,i){return function(e){this.setAttribute(n,i.call(this,e))}}function lo(n,i){return function(e){this.setAttributeNS(n.space,n.local,i.call(this,e))}}function uo(n,i){var e,r;function a(){var u=i.apply(this,arguments);return u!==r&&(e=(r=u)&&lo(n,u)),e}return a._value=i,a}function co(n,i){var e,r;function a(){var u=i.apply(this,arguments);return u!==r&&(e=(r=u)&&so(n,u)),e}return a._value=i,a}function ho(n,i){return function(){ii(this,n).delay=+i.apply(this,arguments)}}function _o(n,i){return i=+i,function(){ii(this,n).delay=i}}function go(n,i){return function(){On(this,n).duration=+i.apply(this,arguments)}}function mo(n,i){return i=+i,function(){On(this,n).duration=i}}function vo(n,i){if("function"!=typeof i)throw new Error;return function(){On(this,n).ease=i}}function To(n,i,e){var r,a,u=function Zo(n){return(n+"").trim().split(/^|\s+/).every(function(i){var e=i.indexOf(".");return e>=0&&(i=i.slice(0,e)),!i||"start"===i})}(i)?ii:On;return function(){var c=u(this,n),d=c.on;d!==r&&(a=(r=d).copy()).on(i,e),c.on=a}}var Eo=Pe.prototype.constructor;function Tr(n){return function(){this.style.removeProperty(n)}}function Ro(n,i,e){return function(r){this.style.setProperty(n,i.call(this,r),e)}}function Qo(n,i,e){var r,a;function u(){var c=i.apply(this,arguments);return c!==a&&(r=(a=c)&&Ro(n,c,e)),r}return u._value=i,u}function Oo(n){return function(i){this.textContent=n.call(this,i)}}function Yo(n){var i,e;function r(){var a=n.apply(this,arguments);return a!==e&&(i=(e=a)&&Oo(a)),i}return r._value=n,r}var Xo=0;function fe(n,i,e,r){this._groups=n,this._parents=i,this._name=e,this._id=r}function kr(){return++Xo}var he=Pe.prototype;fe.prototype=function $o(n){return Pe().transition(n)}.prototype={constructor:fe,select:function Jo(n){var i=this._name,e=this._id;"function"!=typeof n&&(n=Ct(n));for(var r=this._groups,a=r.length,u=new Array(a),c=0;c<a;++c)for(var Z,z,d=r[c],x=d.length,A=u[c]=new Array(x),tt=0;tt<x;++tt)(Z=d[tt])&&(z=n.call(Z,Z.__data__,tt,d))&&("__data__"in Z&&(z.__data__=Z.__data__),A[tt]=z,qe(A[tt],i,e,tt,A,Qn(Z,e)));return new fe(u,this._parents,i,e)},selectAll:function Co(n){var i=this._name,e=this._id;"function"!=typeof n&&(n=It(n));for(var r=this._groups,a=r.length,u=[],c=[],d=0;d<a;++d)for(var Z,x=r[d],A=x.length,z=0;z<A;++z)if(Z=x[z]){for(var rt,tt=n.call(Z,Z.__data__,z,x),Xt=Qn(Z,e),en=0,R=tt.length;en<R;++en)(rt=tt[en])&&qe(rt,i,e,en,tt,Xt);u.push(tt),c.push(Z)}return new fe(u,c,i,e)},selectChild:he.selectChild,selectChildren:he.selectChildren,filter:function Ao(n){"function"!=typeof n&&(n=Lt(n));for(var i=this._groups,e=i.length,r=new Array(e),a=0;a<e;++a)for(var x,u=i[a],c=u.length,d=r[a]=[],A=0;A<c;++A)(x=u[A])&&n.call(x,x.__data__,A,u)&&d.push(x);return new fe(r,this._parents,this._name,this._id)},merge:function Po(n){if(n._id!==this._id)throw new Error;for(var i=this._groups,e=n._groups,r=i.length,u=Math.min(r,e.length),c=new Array(r),d=0;d<u;++d)for(var tt,x=i[d],A=e[d],Z=x.length,z=c[d]=new Array(Z),rt=0;rt<Z;++rt)(tt=x[rt]||A[rt])&&(z[rt]=tt);for(;d<r;++d)c[d]=i[d];return new fe(c,this._parents,this._name,this._id)},selection:function Uo(){return new Eo(this._groups,this._parents)},transition:function Ko(){for(var n=this._name,i=this._id,e=kr(),r=this._groups,a=r.length,u=0;u<a;++u)for(var x,c=r[u],d=c.length,A=0;A<d;++A)if(x=c[A]){var Z=Qn(x,i);qe(x,n,e,A,c,{time:Z.time+Z.delay+Z.duration,delay:0,duration:Z.duration,ease:Z.ease})}return new fe(r,this._parents,n,e)},call:he.call,nodes:he.nodes,node:he.node,size:he.size,empty:he.empty,each:he.each,on:function ko(n,i){var e=this._id;return arguments.length<2?Qn(this.node(),e).on.on(n):this.each(To(e,n,i))},attr:function ao(n,i){var e=y(n),r="transform"===e?ye:Zr;return this.attrTween(n,"function"==typeof i?(e.local?oo:ro)(e,r,Je(this,"attr."+n,i)):null==i?(e.local?no:to)(e):(e.local?io:eo)(e,r,i))},attrTween:function fo(n,i){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==i)return this.tween(e,null);if("function"!=typeof i)throw new Error;var r=y(n);return this.tween(e,(r.local?uo:co)(r,i))},style:function zo(n,i,e){var r="transform"==(n+="")?ki:Zr;return null==i?this.styleTween(n,function Do(n,i){var e,r,a;return function(){var u=gt(this,n),c=(this.style.removeProperty(n),gt(this,n));return u===c?null:u===e&&c===r?a:a=i(e=u,r=c)}}(n,r)).on("end.style."+n,Tr(n)):"function"==typeof i?this.styleTween(n,function Io(n,i,e){var r,a,u;return function(){var c=gt(this,n),d=e(this),x=d+"";return null==d&&(this.style.removeProperty(n),x=d=gt(this,n)),c===x?null:c===r&&x===a?u:(a=x,u=i(r=c,d))}}(n,r,Je(this,"style."+n,i))).each(function Ho(n,i){var e,r,a,d,u="style."+i,c="end."+u;return function(){var x=On(this,n),A=x.on,Z=null==x.value[u]?d||(d=Tr(i)):void 0;(A!==e||a!==Z)&&(r=(e=A).copy()).on(c,a=Z),x.on=r}}(this._id,n)):this.styleTween(n,function Lo(n,i,e){var r,u,a=e+"";return function(){var c=gt(this,n);return c===a?null:c===r?u:u=i(r=c,e)}}(n,r,i),e).on("end.style."+n,null)},styleTween:function So(n,i,e){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==i)return this.tween(r,null);if("function"!=typeof i)throw new Error;return this.tween(r,Qo(n,i,e??""))},text:function Fo(n){return this.tween("text","function"==typeof n?function qo(n){return function(){var i=n(this);this.textContent=i??""}}(Je(this,"text",n)):function Go(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function Bo(n){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(null==n)return this.tween(i,null);if("function"!=typeof n)throw new Error;return this.tween(i,Yo(n))},remove:function No(){return this.on("end.remove",function Mo(n){return function(){var i=this.parentNode;for(var e in this.__transition)if(+e!==n)return;i&&i.removeChild(this)}}(this._id))},tween:function nr(n,i){var e=this._id;if(n+="",arguments.length<2){for(var c,r=Qn(this.node(),e).tween,a=0,u=r.length;a<u;++a)if((c=r[a]).name===n)return c.value;return null}return this.each((null==i?fr:hr)(e,n,i))},delay:function po(n){var i=this._id;return arguments.length?this.each(("function"==typeof n?ho:_o)(i,n)):Qn(this.node(),i).delay},duration:function xo(n){var i=this._id;return arguments.length?this.each(("function"==typeof n?go:mo)(i,n)):Qn(this.node(),i).duration},ease:function yo(n){var i=this._id;return arguments.length?this.each(vo(i,n)):Qn(this.node(),i).ease},easeVarying:function bo(n){if("function"!=typeof n)throw new Error;return this.each(function wo(n,i){return function(){var e=i.apply(this,arguments);if("function"!=typeof e)throw new Error;On(this,n).ease=e}}(this._id,n))},end:function Vo(){var n,i,e=this,r=e._id,a=e.size();return new Promise(function(u,c){var d={value:c},x={value:function(){0==--a&&u()}};e.each(function(){var A=On(this,r),Z=A.on;Z!==n&&((i=(n=Z).copy())._.cancel.push(d),i._.interrupt.push(d),i._.end.push(x)),A.on=i}),0===a&&u()})},[Symbol.iterator]:he[Symbol.iterator]};var jo={time:null,delay:0,duration:250,ease:function Wo(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}};function ta(n,i){for(var e;!(e=n.__transition)||!(e=e[i]);)if(!(n=n.parentNode))throw new Error(`transition ${i} not found`);return e}Pe.prototype.interrupt=function ji(n){return this.each(function(){!function Wi(n,i){var r,a,c,e=n.__transition,u=!0;if(e){for(c in i=null==i?null:i+"",e)(r=e[c]).name===i?(a=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(a?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete e[c]):u=!1;u&&delete n.__transition}}(this,n)})},Pe.prototype.transition=function na(n){var i,e;n instanceof fe?(i=n._id,n=n._name):(i=kr(),(e=jo).time=je(),n=null==n?null:n+"");for(var r=this._groups,a=r.length,u=0;u<a;++u)for(var x,c=r[u],d=c.length,A=0;A<d;++A)(x=c[A])&&qe(x,n,i,A,c,e||ta(x,i));return new fe(r,this._parents,n,i)};Math;function si(n){return{type:n}}function li(n){return"string"==typeof n?new bn([[document.querySelector(n)]],[document.documentElement]):new bn([[n]],We)}function Ur(n){return"string"==typeof n?new bn([document.querySelectorAll(n)],[document.documentElement]):new bn([Ut(n)],We)}function Be(n,i,e){this.k=n,this.x=i,this.y=e}["w","e"].map(si),["n","s"].map(si),["n","w","e","s","nw","ne","sw","se"].map(si),Be.prototype={constructor:Be,scale:function(n){return 1===n?this:new Be(this.k*n,this.x,this.y)},translate:function(n,i){return 0===n&0===i?this:new Be(this.k,this.x+this.k*n,this.y+this.k*i)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Be(1,0,0);var t=B(2135),Lr=B(6301);function ga(n,i){1&n&&(t.TgZ(0,"ion-content"),t._UZ(1,"div",7),t.TgZ(2,"ion-item",8)(3,"ion-grid",9)(4,"ion-row",9)(5,"ion-col",9)(6,"p"),t._uU(7," Each dot represents one participant. "),t.qZA(),t.TgZ(8,"p"),t._uU(9," The large discs show how much approval each option gets. The part of the disc that sticks out from behind the other discs shows the share that this option gets. We only show those options that get a share. "),t.qZA(),t.TgZ(10,"small")(11,"p"),t._uU(12," The colors show which options you yourself approve and where your share goes: "),t.TgZ(13,"span",10)(14,"b"),t._uU(15,"Red:"),t.qZA()(),t._uU(16," you won't approve this option since your wap is zero. "),t.TgZ(17,"span",11)(18,"b"),t._uU(19,"Blue:"),t.qZA()(),t._uU(20," you currently don't approve this option. "),t.TgZ(21,"span",12)(22,"b"),t._uU(23,"Green:"),t.qZA()(),t._uU(24," you approve this option. Your share goes to the "),t.TgZ(25,"span",13)(26,"b"),t._uU(27,"dark green"),t.qZA()(),t._uU(28," option. "),t.qZA()(),t.TgZ(29,"p")(30,"b"),t._uU(31,"Suggestion:"),t.qZA(),t._uU(32," You might want to talk to the supporters of the options you don't approve (red and blue). Maybe you can together find some other option that you can all approve? "),t.TgZ(33,"small"),t._uU(34,"A good compromise option might already be on the menu or you might want to add it."),t.qZA()()()()()()())}const Ir={vodlered:"#d33939",vodleblue:"#3465a4",vodlegreen:"#62a73b",vodledarkgreen:"#4c822e"};let Hr=(()=>{class n{constructor(e,r,a){this.translate=e,this.modalController=r,this.G=a,this.Array=Array,this.Math=Math,this.Object=Object,this.window=window,this.document=document,this.environment=Et.N,this.JSON=JSON,this.page="analysis",this.G.L.entry("AnalysisPage.constructor")}ngOnInit(){this.G.L.entry("AnalysisPage.ngOnInit")}ionViewWillEnter(){this.G.L.entry("AnalysisPage.ionViewWillEnter"),this.G.D.page=this}ionViewDidEnter(){this.G.L.entry("AnalysisPage.ionViewDidEnter"),this.show_venn()}onDataReady(){this.G.L.entry("AnalysisPage.onDataReady")}onDataChange(){this.G.L.entry("AnalysisPage.onDataChange")}ionViewWillLeave(){this.G.L.entry("AnalysisPage.ionViewWillLeave")}ionViewDidLeave(){this.G.L.entry("AnalysisPage.ionViewDidLeave")}close(){this.modalController.dismiss()}show_venn(){const e=this.P.p.T,r=e.shares_map,a=[],u=[];for(const[lt,bt]of e.oids_descending.entries()){if(10==lt)break;r.has(bt)&&r.get(bt)>0&&(a.push(bt),u.push(this.P.slidercolor[bt]))}this.G.L.info("colors",u,Ir[u[0]]);const c={},d=e.approvals_map,x="abcdefghij";for(const lt of this.P.p.T.all_vids_set){let bt="";for(const[ln,Ft]of a.entries()){const Ot=d.get(Ft);Ot.has(lt)&&Ot.get(lt)&&(bt+=x[ln])}bt in c?c[bt]+=1:c[bt]=1}this.G.L.info("exact_combi_counts",c);const A={};for(const[lt,bt]of Object.entries(c)){const ln=lt.length,Ft=1<<ln;for(let Ot=1;Ot<Ft;Ot++){let zt="";for(let Yt=0;Yt<ln;Yt++)0!=(Ot&1<<Yt)&&(zt+=lt[Yt]);zt in A?A[zt]+=bt:A[zt]=bt}}this.G.L.info("subset_counts",A);const Z=[],z=e.n_not_abstaining;for(const[lt,bt]of a.entries())Z.push({sets:[x[lt]],size:A[x[lt]],label:this.P.p.options[bt].name});for(const[lt,bt]of Object.entries(A))lt.length>1&&Z.push({sets:[...lt],size:bt});Z.reverse();const Xt=li("#venn").node().getBoundingClientRect().width;var en=un.VennDiagram().width(Xt).height(.9*Xt);li("#venn").datum(Z).call(en),Ur("#venn .venn-circle path").style("fill-opacity",0).style("fill",function(lt,bt){return Ir[u[a.length-1-bt]]}).style("stroke-width",1).style("stroke-opacity",0).style("stroke","white"),Ur("#venn .venn-circle text").style("fill","white").style("fill-opacity",0).style("stroke-width",0).style("font-size","14px").style("font-style","italic").style("font-weight","bold");const R=[],I=li("#venn > svg"),ht=[];for(const[lt,bt]of a.entries()){const Ot=li('g[data-venn-sets="'+x[lt]+'"]').select("path").node().getBBox(),zt=Ot.width/2,Yt=Ot.x+zt,Sn=Ot.y+zt,fn=z<=100?e.n_votes_map.get(bt):Math.round(100*e.shares_map.get(bt)),b=I.append("g"),nt=[];let C=!1;R.push({cx:Yt,cy:Sn,R:zt}),ht.push(b);for(let Y=0;Y<fn;Y++){var et,Pt;for(let dt=0;dt<100;dt++){const ut=(zt-10.5)*Math.sqrt(Math.random()),ft=2*Math.PI*Math.random();et=Yt+ut*Math.sin(ft),Pt=Sn+ut*Math.cos(ft),C=!0;for(let _t=0;_t<Y;_t++){const At=nt[_t];if((et-At.x)**2+(Pt-At.y)**2<441){C=!1;break}}if(C)for(let _t=0;_t<lt;_t++){const At=R[_t];if((et-At.cx)**2+(Pt-At.cy)**2<(At.R+10.5)**2){C=!1;break}}if(C)break}nt.push([et,Pt]),C&&b.append("circle").style("stroke","black").style("stroke-opacity",0).style("fill","black").style("fill-opacity",0).attr("r",7).attr("cx",et).attr("cy",Pt)}}for(const[lt,bt]of a.entries()){const ln=li('g[data-venn-sets="'+x[lt]+'"]'),Ft=ln.select("path"),Ot=ln.select("text"),zt=ht[lt];I.append(()=>Ot.node());const Yt=Ot.clone(!0);Ot.style("stroke-width",2).style("stroke","black").style("stroke-opacity",0),Ft.transition().duration(2e3).delay(1e3*lt).style("fill-opacity",.95-.05*lt).style("stroke-opacity",1),Ot.transition().duration(2e3).delay(1e3*lt).style("stroke-opacity",.75),Yt.transition().duration(2e3).delay(1e3*lt).style("fill-opacity",1),zt.selectAll("circle").transition().duration(2e3).delay(1e3*lt).style("fill-opacity",.3)}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Rt.sK),t.Y36(X.IN),t.Y36(Lr.U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-analysis"]],viewQuery:function(e,r){if(1&e&&t.Gf(X.W2,5),2&e){let a;t.iGM(a=t.CRH())&&(r.content=a.first)}},inputs:{P:"P"},decls:9,vars:4,consts:[[1,"ion-no-margin","ion-no-padding",2,"--inner-padding-end","0px!important"],[2,"padding-left","16px"],[2,"font-weight","bold","font-size","larger",3,"innerHtml"],["slot","end"],["fill","clear",3,"click"],["slot","icon-only","name","close-outline"],[4,"ngIf"],["id","venn"],["lines","none",1,"ion-no-margin"],[1,"ion-no-padding","ion-no-margin"],[2,"color","#d33939"],[2,"color","#3465a4"],[2,"color","#62a73b"],[2,"color","#4c822e"]],template:function(e,r){1&e&&(t.TgZ(0,"ion-header")(1,"ion-item",0)(2,"ion-toolbar",1),t._UZ(3,"ion-text",2),t.ALo(4,"translate"),t.TgZ(5,"ion-buttons",3)(6,"ion-button",4),t.NdJ("click",function(){return r.close()}),t._UZ(7,"ion-icon",5),t.qZA()()()()(),t.YNc(8,ga,35,0,"ion-content",6)),2&e&&(t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,2,"analysis.-page-title"),t.oJD),t.xp6(5),t.Q6J("ngIf",r.P.ready))},dependencies:[ot.O5,X.YG,X.Sm,X.wI,X.W2,X.jY,X.Gu,X.gu,X.Ie,X.Nd,X.yW,X.sr,Rt.X$],styles:['@charset "UTF-8";']}),n})();var ma=B(2122),xa=B(1353);const va=["expandWrapper"],ya=["*"];let wa=(()=>{class n{constructor(e){this.renderer=e}ngAfterViewInit(){this.renderer.setStyle(this.expandWrapper.nativeElement,"height",this.expandHeight+"px")}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Qsj))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-expandable"]],viewQuery:function(e,r){if(1&e&&t.Gf(va,5,t.SBq),2&e){let a;t.iGM(a=t.CRH())&&(r.expandWrapper=a.first)}},inputs:{expanded:"expanded",expandHeight:"expandHeight"},ngContentSelectors:ya,decls:3,vars:2,consts:[[1,"expand-wrapper"],["expandWrapper",""]],template:function(e,r){1&e&&(t.F$t(),t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA()),2&e&&t.ekj("collapsed",!r.expanded)},styles:["app-expandable[_ngcontent-%COMP%]   .expand-wrapper[_ngcontent-%COMP%]{transition:height 1s ease}app-expandable[_ngcontent-%COMP%]   .collapsed[_ngcontent-%COMP%]{display:none;height:0!important}"]}),n})();function ba(n,i){1&n&&(t._UZ(0,"ion-text",12),t.ALo(1,"translate")),2&n&&t.Q6J("innerHtml",t.lcZ(1,1,"poll.-page-title"),t.oJD)}function Aa(n,i){if(1&n&&(t.TgZ(0,"ion-text")(1,"b"),t._UZ(2,"i",13),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("innerHtml",e.p.title,t.oJD)}}function Pa(n,i){1&n&&(t.ynx(0),t._UZ(1,"ion-icon",14)(2,"ion-icon",15),t.BQk())}function Za(n,i){1&n&&t._UZ(0,"ion-spinner",16)}function Ta(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",17),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.checkmark_clicked())}),t._UZ(1,"ion-icon",18),t.qZA()}}function ka(n,i){1&n&&(t._UZ(0,"span",13),t.ALo(1,"translate")),2&n&&t.Q6J("innerHtml",t.lcZ(1,1,"poll.delegate-button"),t.oJD)}function Ma(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",19),t.NdJ("click",function(a){t.CHM(e);const u=t.oxw();return t.KtG(u.delegate_dialog(a))}),t.YNc(1,ka,2,3,"span",20),t.TgZ(2,"ion-button",21),t._UZ(3,"ion-icon",22),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.scroll_position<70),t.xp6(1),t.Q6J("disabled",!e.E.delegation.enabled)}}function Na(n,i){if(1&n&&(t.TgZ(0,"small"),t._UZ(1,"br"),t._uU(2),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.body," ")}}function Ja(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-card")(1,"ion-card-content",49)(2,"ion-item",50),t._uU(3," \xa0\xa0 "),t.TgZ(4,"ion-label",49),t._uU(5),t.YNc(6,Na,3,1,"small",5),t.qZA(),t.TgZ(7,"ion-button",51),t.NdJ("click",function(){const u=t.CHM(e).$implicit,c=t.oxw(2);return c.news.delete(u),t.KtG(c.G.N.dismiss(u.key))}),t._UZ(8,"ion-icon",52),t.qZA()()()()}if(2&n){const e=i.$implicit;t.xp6(5),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("ngIf",e.body)}}const Ca=function(n){return{language:n}};function Ea(n,i){if(1&n&&(t.TgZ(0,"small"),t._UZ(1,"p",13),t.ALo(2,"translate"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("innerHtml",t.xi3(2,1,"poll.different-language",t.VKq(4,Ca,e.G.S.language_names[e.p.language])),t.oJD)}}function Ua(n,i){if(1&n&&t._UZ(0,"i",13),2&n){const e=t.oxw(3);t.Q6J("innerHtml",e.p.desc,t.oJD)}}function Da(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"\xa0"),t.qZA())}function La(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"small"),t._uU(1," ("),t.TgZ(2,"span",47),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return a.G.open_url_in_new_tab(a.G.D.fix_url(a.p.url)),t.KtG(a.details_expanded=!a.details_expanded)}),t._UZ(3,"ion-text",46),t.ALo(4,"translate"),t._uU(5,"\xa0"),t._UZ(6,"ion-icon",55),t.qZA(),t._uU(7,") "),t.qZA()}2&n&&(t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,1,"read-more"),t.oJD))}function Ia(n,i){1&n&&(t.TgZ(0,"small"),t._uU(1," \xa0 ("),t._UZ(2,"ion-text",46),t.ALo(3,"translate"),t._uU(4,") "),t.qZA()),2&n&&(t.xp6(2),t.Q6J("innerHtml",t.lcZ(3,1,"hide"),t.oJD))}function Ha(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",53),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.details_expanded=!a.details_expanded)}),t.TgZ(1,"ion-grid",54)(2,"ion-row",27)(3,"ion-col",27)(4,"div"),t.YNc(5,Ua,1,1,"i",20),t.YNc(6,Da,2,0,"span",5),t.YNc(7,La,8,3,"small",5),t.YNc(8,Ia,5,3,"small",5),t.qZA()()()()()}if(2&n){const e=t.oxw(2);t.xp6(4),t.Akn(e.details_expanded?"white-space: normal; overflow: hidden; text-overflow: ellipsis; width: 100%!important;":"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%!important;"),t.xp6(1),t.Q6J("ngIf",""!=(e.p.desc||"")),t.xp6(1),t.Q6J("ngIf",""!=(e.p.desc||"")&&""!=(e.p.url||"")),t.xp6(1),t.Q6J("ngIf",""!=(e.p.url||"")),t.xp6(1),t.Q6J("ngIf",e.details_expanded)}}function za(n,i){1&n&&(t._UZ(0,"ion-label",60),t.ALo(1,"translate")),2&n&&t.Q6J("innerHtml",t.lcZ(1,1,"poll.assist-me-button"),t.oJD)}function Ra(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",56),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.assist_dialog())}),t.YNc(1,za,2,3,"ion-label",57),t._uU(2,"\xa0"),t.TgZ(3,"ion-button",58),t._UZ(4,"ion-icon",59),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.details_expanded)}}function Qa(n,i){1&n&&(t._UZ(0,"ion-badge",61),t.ALo(1,"translate")),2&n&&t.Q6J("innerHtml",t.lcZ(1,1,"badges.closing-soon"),t.oJD)}function Sa(n,i){1&n&&(t._UZ(0,"span",13),t.ALo(1,"translate")),2&n&&t.Q6J("innerHtml",t.lcZ(1,1,"poll.closes"),t.oJD)}function Ga(n,i){1&n&&(t._UZ(0,"span",13),t.ALo(1,"translate")),2&n&&t.Q6J("innerHtml",t.lcZ(1,1,"poll.closed"),t.oJD)}function qa(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-badge",62),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.analysis_dialog())}),t._UZ(1,"ion-icon",63),t._uU(2,"\xa0"),t._UZ(3,"span",13),t.qZA()}2&n&&(t.xp6(3),t.Q6J("innerHtml","suggestions",t.oJD))}function Fa(n,i){if(1&n&&(t.ynx(0),t._UZ(1,"span",60),t.ALo(2,"translate"),t._uU(3,"\xa0"),t.TgZ(4,"ion-button",64),t._UZ(5,"ion-icon",65),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("innerHtml",t.lcZ(2,2,"poll.show-live"),t.oJD),t.xp6(4),t.Q6J("name",e.show_live?"eye-off-outline":"eye-outline")}}function Oa(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",68)(1,"small")(2,"p"),t._UZ(3,"span",69),t.ALo(4,"translate"),t._uU(5,"\xa0"),t._UZ(6,"wbr")(7,"span",13),t.ALo(8,"translate"),t._UZ(9,"wbr"),t.TgZ(10,"span",70),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.glossary("wap"))}),t._UZ(11,"span",46),t.ALo(12,"translate"),t._UZ(13,"ion-icon",71),t.qZA(),t._UZ(14,"span",13),t.ALo(15,"translate"),t._uU(16," \xa0"),t._UZ(17,"wbr"),t.TgZ(18,"span",32),t._uU(19," ("),t.TgZ(20,"a",72),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.assist_dialog())}),t.ALo(21,"translate"),t.qZA(),t._uU(22,") "),t.qZA()()()()}2&n&&(t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,5,"poll.hint-first-time-1"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(8,7,"poll.hint-first-time-2-before-wap"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(12,9,"poll.hint-first-time-2-wap"),t.oJD),t.xp6(3),t.Q6J("innerHtml",t.lcZ(15,11,"poll.hint-first-time-2-after-wap"),t.oJD),t.xp6(6),t.Q6J("innerHtml",t.lcZ(21,13,"poll.assist-me-inline"),t.oJD))}function Ya(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",73)(1,"small")(2,"p"),t._UZ(3,"span",69),t.ALo(4,"translate"),t._uU(5,"\xa0"),t._UZ(6,"wbr")(7,"span",13),t.ALo(8,"translate"),t._UZ(9,"wbr"),t.TgZ(10,"span",70),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.glossary("wap"))}),t._UZ(11,"span",46),t.ALo(12,"translate"),t._UZ(13,"ion-icon",71),t.qZA(),t._UZ(14,"span",13),t.ALo(15,"translate"),t._uU(16," \xa0"),t._UZ(17,"wbr"),t.TgZ(18,"span",32),t._uU(19," ("),t.TgZ(20,"a",72),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.assist_dialog())}),t.ALo(21,"translate"),t.qZA(),t._uU(22,") "),t.qZA()()()()}2&n&&(t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,5,"poll.hint-abstaining-1"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(8,7,"poll.hint-abstaining-2-before-wap"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(12,9,"poll.hint-abstaining-2-wap"),t.oJD),t.xp6(3),t.Q6J("innerHtml",t.lcZ(15,11,"poll.hint-abstaining-2-after-wap"),t.oJD),t.xp6(6),t.Q6J("innerHtml",t.lcZ(21,13,"poll.assist-me-inline"),t.oJD))}function Ba(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",68)(1,"small")(2,"p"),t._UZ(3,"span",69),t.ALo(4,"translate"),t._UZ(5,"wbr"),t.TgZ(6,"span",70),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.glossary("wap"))}),t._UZ(7,"span",74),t.ALo(8,"translate"),t._UZ(9,"ion-icon",75),t.qZA(),t._UZ(10,"span",69),t.ALo(11,"translate"),t._uU(12,"\xa0"),t._UZ(13,"wbr")(14,"span",13),t.ALo(15,"translate"),t._uU(16," \xa0"),t._UZ(17,"wbr"),t.TgZ(18,"span",32),t._uU(19," ("),t.TgZ(20,"a",72),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.assist_dialog())}),t.ALo(21,"translate"),t.qZA(),t._uU(22,") "),t.qZA()()()()}2&n&&(t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,5,"poll.hint-only1positive-1-before-wap"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(8,7,"poll.hint-only1positive-1-wap"),t.oJD),t.xp6(3),t.Q6J("innerHtml",t.lcZ(11,9,"poll.hint-only1positive-1-after-wap"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(15,11,"poll.hint-only1positive-2"),t.oJD),t.xp6(6),t.Q6J("innerHtml",t.lcZ(21,13,"poll.assist-me-inline"),t.oJD))}function Ka(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",76)(1,"small")(2,"p"),t._UZ(3,"span",69),t.ALo(4,"translate"),t._UZ(5,"wbr"),t.TgZ(6,"span",70),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.glossary("approve"))}),t._UZ(7,"span",74),t.ALo(8,"translate"),t._UZ(9,"ion-icon",75),t.qZA(),t._UZ(10,"span",69),t.ALo(11,"translate"),t._uU(12,"\xa0"),t._UZ(13,"wbr")(14,"span",13),t.ALo(15,"translate"),t._UZ(16,"wbr"),t.TgZ(17,"span",70),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.glossary("wap"))}),t._UZ(18,"span",46),t.ALo(19,"translate"),t._UZ(20,"ion-icon",71),t.qZA(),t._UZ(21,"span",13),t.ALo(22,"translate"),t._uU(23," \xa0"),t._UZ(24,"wbr"),t.TgZ(25,"span",32),t._uU(26," ("),t.TgZ(27,"a",72),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.assist_dialog())}),t.ALo(28,"translate"),t.qZA(),t._uU(29,") "),t.qZA()()()()}2&n&&(t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,7,"poll.hint-only1approved-1-before-approving"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(8,9,"poll.hint-only1approved-1-approving"),t.oJD),t.xp6(3),t.Q6J("innerHtml",t.lcZ(11,11,"poll.hint-only1approved-1-after-approving"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(15,13,"poll.hint-only1approved-2-before-wap"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(19,15,"poll.hint-only1approved-2-wap"),t.oJD),t.xp6(3),t.Q6J("innerHtml",t.lcZ(22,17,"poll.hint-only1approved-2-after-wap"),t.oJD),t.xp6(6),t.Q6J("innerHtml",t.lcZ(28,19,"poll.assist-me-inline"),t.oJD))}function Va(n,i){1&n&&(t.TgZ(0,"ion-item",77)(1,"small")(2,"p"),t._UZ(3,"span",13),t.ALo(4,"translate"),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,1,"poll.hint-mostapproved-1"),t.oJD))}function Xa(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Oa,23,15,"ion-item",41),t.YNc(2,Ya,23,15,"ion-item",66),t.YNc(3,Ba,23,15,"ion-item",41),t.YNc(4,Ka,30,21,"ion-item",67),t.YNc(5,Va,5,3,"ion-item",40),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.p.have_acted&&!e.p.am_abstaining),t.xp6(1),t.Q6J("ngIf",e.p.am_abstaining),t.xp6(1),t.Q6J("ngIf",1==e.p.my_n_rated_positive),t.xp6(1),t.Q6J("ngIf",e.show_live&&1!=e.p.my_n_rated_positive&&1==e.p.my_n_approved),t.xp6(1),t.Q6J("ngIf",e.show_live&&e.p.my_n_approved>1&&!e.p.T.approvals_map.get(e.oidsorted[0]).get(e.p.myvid))}}const ur=function(){return{}};function $a(n,i){1&n&&(t._UZ(0,"span",13),t.ALo(1,"translate")),2&n&&t.Q6J("innerHtml",t.xi3(1,1,"poll.reason-all-abstained",t.DdM(4,ur)),t.oJD)}function Wa(n,i){1&n&&(t._UZ(0,"span",13),t.ALo(1,"translate")),2&n&&t.Q6J("innerHtml",t.xi3(1,1,"poll.reason-full-consensus-unique",t.DdM(4,ur)),t.oJD)}function ja(n,i){1&n&&(t._UZ(0,"span",13),t.ALo(1,"translate")),2&n&&t.Q6J("innerHtml",t.xi3(1,1,"poll.reason-full-consensus-highest",t.DdM(4,ur)),t.oJD)}const ts=function(n,i){return{approval:n,disapproval:i}};function ns(n,i){if(1&n&&(t._UZ(0,"span",13),t.ALo(1,"translate")),2&n){const e=t.oxw(3);t.Q6J("innerHtml",t.xi3(1,1,"poll.reason-largest-approval",t.WLB(4,ts,(e.p.T.approval_scores_map.get(e.oidsorted[0])/e.p.T.n_not_abstaining*100).toFixed(1),(100-e.p.T.approval_scores_map.get(e.oidsorted[0])/e.p.T.n_not_abstaining*100).toFixed(1))),t.oJD)}}const es=function(n){return{share:n}};function is(n,i){if(1&n&&(t._UZ(0,"span",13),t.ALo(1,"translate")),2&n){const e=t.oxw(3);t.Q6J("innerHtml",t.xi3(1,1,"poll.reason-smaller-approval",t.VKq(4,es,(100*e.p.T.shares_map.get(e.p.winner)).toFixed(1))),t.oJD)}}const rs=function(n){return{winner:n}};function os(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"ion-item",77),t._UZ(2,"p",13),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-item",73)(5,"h3"),t._UZ(6,"b",13),t.ALo(7,"translate"),t.qZA()(),t.TgZ(8,"ion-item",68)(9,"p"),t._UZ(10,"b",13),t.ALo(11,"translate"),t._uU(12,"\xa0 "),t.YNc(13,$a,2,5,"span",20),t.YNc(14,Wa,2,5,"span",20),t.YNc(15,ja,2,5,"span",20),t.YNc(16,ns,2,7,"span",20),t.YNc(17,is,2,6,"span",20),t.qZA()(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("innerHtml",t.lcZ(3,8,"poll.results"),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.xi3(7,10,"poll.winner-is",t.VKq(15,rs,e.p.options[e.p.winner].name)),t.oJD),t.xp6(4),t.Q6J("innerHtml",t.lcZ(11,13,"poll.reason"),t.oJD),t.xp6(3),t.Q6J("ngIf",0==e.p.T.n_not_abstaining),t.xp6(1),t.Q6J("ngIf",e.p.T.n_not_abstaining>0&&e.p.T.approval_scores_map.get(e.oidsorted[0])==e.p.T.n_not_abstaining&&e.p.T.approval_scores_map.get(e.oidsorted[1])<e.p.T.n_not_abstaining),t.xp6(1),t.Q6J("ngIf",e.p.T.n_not_abstaining>0&&e.p.T.approval_scores_map.get(e.oidsorted[0])==e.p.T.n_not_abstaining&&e.p.T.approval_scores_map.get(e.oidsorted[1])==e.p.T.n_not_abstaining),t.xp6(1),t.Q6J("ngIf",e.p.T.n_not_abstaining>0&&e.p.T.approval_scores_map.get(e.oidsorted[0])<e.p.T.n_not_abstaining&&e.p.winner==e.oidsorted[0]),t.xp6(1),t.Q6J("ngIf",e.p.T.n_not_abstaining>0&&e.p.T.approval_scores_map.get(e.oidsorted[0])<e.p.T.n_not_abstaining&&e.p.winner!=e.oidsorted[0])}}const as=function(n,i){return{share:n,option:i}};function ss(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"h3")(2,"b"),t._UZ(3,"span",13),t.ALo(4,"translate"),t.qZA()(),t.BQk()),2&n){const e=t.oxw().index,r=t.oxw(3);t.xp6(3),t.Q6J("innerHtml",t.xi3(4,1,"poll.of-the-budget-go-to",t.WLB(4,as,(100*r.p.T.shares_map.get(r.oidsorted[e])).toFixed(1),r.p.options[r.oidsorted[e]].name)),t.oJD)}}function ls(n,i){if(1&n&&(t.ynx(0),t.YNc(1,ss,5,7,"ng-container",5),t.BQk()),2&n){const e=i.index,r=t.oxw(3);t.xp6(1),t.Q6J("ngIf",r.p.T.shares_map.get(r.oidsorted[e])>0)}}const zr=function(){return[]};function us(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"ion-item",77),t._UZ(2,"p",13),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-item",73)(5,"ion-text"),t.YNc(6,ls,2,1,"ng-container",25),t.qZA()(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("innerHtml",t.lcZ(3,2,"poll.results"),t.oJD),t.xp6(4),t.Q6J("ngForOf",t.DdM(4,zr).constructor(e.oidsorted.length))}}function cs(n,i){1&n&&(t.ynx(0),t.TgZ(1,"ion-item",68),t._UZ(2,"p",13),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&n&&(t.xp6(2),t.Q6J("innerHtml",t.lcZ(3,1,"poll.wait-for-results"),t.oJD))}function fs(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",78),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.final_expanded=!a.final_expanded)}),t._UZ(1,"ion-icon",79),t._uU(2,"\xa0\xa0"),t.TgZ(3,"ion-label"),t._UZ(4,"span",13),t.ALo(5,"translate"),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("name",e.final_expanded?"caret-down-outline":"caret-forward-outline"),t.xp6(3),t.Q6J("innerHtml",t.lcZ(5,2,"poll.final-ratings"),t.oJD)}}const hs=function(n){return{n_others:n}};function _s(n,i){if(1&n&&(t._UZ(0,"span",13),t.ALo(1,"translate")),2&n){const e=t.oxw(3);t.Q6J("innerHtml",t.xi3(1,1,1==e.n_indirect_clients?"poll.also-for-other":"poll.also-for-others",t.VKq(4,hs,e.n_indirect_clients))+" ",t.oJD)}}function ps(n,i){if(1&n&&(t._UZ(0,"span",13),t.ALo(1,"translate")),2&n){const e=t.oxw(3);t.Q6J("innerHtml",t.lcZ(1,1,0==e.n_indirect_clients?"poll.declined-all":"poll.declined-some"),t.oJD)}}function ds(n,i){if(1&n&&(t.TgZ(0,"ion-chip",85),t._UZ(1,"ion-icon",86),t.TgZ(2,"small"),t._uU(3),t.qZA()()),2&n){const e=i.$implicit;t.Q6J("routerLink",e.url),t.xp6(3),t.Oqu(e.from)}}function gs(n,i){if(1&n&&(t.TgZ(0,"ion-row")(1,"ion-col",83)(2,"small"),t._UZ(3,"span",13),t.ALo(4,"translate"),t.YNc(5,ds,4,2,"ion-chip",84),t.qZA()()()),2&n){const e=t.oxw(3);t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,2,"poll.have-accepted"),t.oJD),t.xp6(2),t.Q6J("ngForOf",e.accepted_requests)}}function ms(n,i){if(1&n&&(t.TgZ(0,"ion-chip",85),t._UZ(1,"ion-icon",86),t.TgZ(2,"small"),t._uU(3),t.qZA()()),2&n){const e=i.$implicit;t.Q6J("routerLink",e.url),t.xp6(3),t.Oqu(e.from)}}function xs(n,i){if(1&n&&(t.TgZ(0,"ion-row")(1,"ion-col",83)(2,"small"),t._UZ(3,"span",13),t.ALo(4,"translate"),t.YNc(5,ms,4,2,"ion-chip",84),t.qZA()()()),2&n){const e=t.oxw(3);t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,2,"poll.have-declined"),t.oJD),t.xp6(2),t.Q6J("ngForOf",e.declined_requests)}}function vs(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",77)(1,"ion-grid",27)(2,"ion-row",80),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.incoming_delegation_expanded=!a.incoming_delegation_expanded)}),t.TgZ(3,"ion-col",81)(4,"small"),t._UZ(5,"ion-icon",82),t.YNc(6,_s,2,6,"span",20),t.YNc(7,ps,2,3,"span",20),t._uU(8," \xa0 "),t.qZA()()(),t.YNc(9,gs,6,4,"ion-row",5),t.YNc(10,xs,6,4,"ion-row",5),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("name",e.incoming_delegation_expanded?"chevron-down-outline":"chevron-forward-outline"),t.xp6(1),t.Q6J("ngIf",e.accepted_requests.length>0),t.xp6(1),t.Q6J("ngIf",e.declined_requests.length>0),t.xp6(2),t.Q6J("ngIf",e.incoming_delegation_expanded&&e.accepted_requests.length>0),t.xp6(1),t.Q6J("ngIf",e.incoming_delegation_expanded&&e.declined_requests.length>0)}}function ys(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",68)(1,"ion-grid",27)(2,"ion-row",87)(3,"ion-col",81)(4,"small")(5,"p")(6,"span",88),t._uU(7),t.qZA(),t._uU(8,"\xa0 "),t._UZ(9,"span",13),t.ALo(10,"translate"),t.qZA()()(),t.TgZ(11,"ion-col",89)(12,"ion-button",90),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.revoke_delegation_dialog())}),t._UZ(13,"ion-icon",91),t.qZA()()()()()}if(2&n){const e=t.oxw(2);t.xp6(7),t.Oqu(e.delegate),t.xp6(2),t.Q6J("innerHtml",t.lcZ(10,3,"poll.delegate-not-responded"),t.oJD),t.xp6(3),t.Q6J("disabled",!e.p.allow_voting)}}function ws(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",68)(1,"ion-grid",27)(2,"ion-row",87)(3,"ion-col",81)(4,"small")(5,"p")(6,"span",88),t._uU(7),t.qZA(),t._uU(8,"\xa0 "),t._UZ(9,"span",13),t.ALo(10,"translate"),t.qZA()()(),t.TgZ(11,"ion-col",89)(12,"ion-button",92),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.revoke_delegation_dialog())}),t._UZ(13,"ion-icon",91),t.qZA(),t._uU(14,"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),t.qZA(),t.TgZ(15,"ion-col",93)(16,"small")(17,"p"),t._UZ(18,"span",13),t.ALo(19,"translate"),t._uU(20,"\xa0 "),t._UZ(21,"ion-icon",94),t.qZA()()()()()()}if(2&n){const e=t.oxw(2);t.xp6(7),t.Oqu(e.delegate),t.xp6(2),t.Q6J("innerHtml",t.lcZ(10,3,"poll.delegate-controls-"+(e.n_delegated==e.oidsorted.length?"all":2*e.n_delegated>e.oidsorted.length?"most":e.n_delegated>0?"some":"none")),t.oJD),t.xp6(9),t.Q6J("innerHtml",t.lcZ(19,5,"poll.choose-whose-ratings"),t.oJD)}}function bs(n,i){1&n&&(t._UZ(0,"span",95),t.ALo(1,"translate")),2&n&&t.Q6J("innerHtml",t.lcZ(1,1,"share"),t.oJD)}function As(n,i){1&n&&(t.ynx(0),t._UZ(1,"ion-icon",96),t._uU(2,"\xa0"),t._UZ(3,"span",46),t.ALo(4,"translate"),t.BQk()),2&n&&(t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,1,"approval"),t.oJD))}const Ps=function(n){return{delegate:n}};function Zs(n,i){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"ion-col",132),t._uU(1,"\xa0\xa0\xa0 "),t.TgZ(2,"ion-toggle",133),t.NdJ("ionChange",function(){t.CHM(e);const a=t.oxw().index,u=t.oxw(2);return t.KtG(u.on_rate_yourself_toggle_change(u.oidsorted[a]))})("ngModelChange",function(a){t.CHM(e);const u=t.oxw().index,c=t.oxw(2);return t.KtG(c.rate_yourself_toggle[c.oidsorted[u]]=a)}),t.qZA(),t.TgZ(3,"div",134),t._UZ(4,"small",13),t.ALo(5,"translate"),t.ALo(6,"translate"),t.qZA()()}if(2&n){const e=t.oxw().index,r=t.oxw(2);t.xp6(2),t.Q6J("id","rate_yourself_toggle_"+r.oidsorted[e])("disabled",!r.p.allow_voting)("ngModel",r.rate_yourself_toggle[r.oidsorted[e]]),t.xp6(2),t.Q6J("innerHtml",r.rate_yourself_toggle[r.oidsorted[e]]?t.lcZ(5,4,"poll.my-own"):t.xi3(6,6,"poll.delegate-s",t.VKq(9,Ps,r.delegate)),t.oJD)}}const Ts=function(n){return{average:n}};function ks(n,i){if(1&n&&(t.TgZ(0,"span",135),t._uU(1,", "),t._UZ(2,"span",127),t.ALo(3,"translate"),t.qZA()),2&n){const e=t.oxw().index,r=t.oxw(2);t.xp6(2),t.Q6J("innerHtml",t.xi3(3,1,"poll.average-rating",t.VKq(4,Ts,(r.p.T.total_effective_ratings_map.get(r.oidsorted[e])/r.Math.max(1,r.p.T.n_not_abstaining)).toFixed(1))),t.oJD)}}const Rr=function(n){return{percentage:n}};function Ms(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",97)(1,"ion-grid",27)(2,"ion-row",27)(3,"ion-col",98),t._UZ(4,"div",99),t.O4$(),t.TgZ(5,"svg",100),t._UZ(6,"circle",101)(7,"path",102)(8,"line",103),t.qZA()(),t.kcU(),t.TgZ(9,"ion-col")(10,"ion-grid",27)(11,"ion-row",104),t.NdJ("click",function(){const u=t.CHM(e).index,c=t.oxw(2);return t.KtG(c.expand(c.oidsorted[u]))}),t.TgZ(12,"ion-col",27),t._UZ(13,"ion-input",105),t.TgZ(14,"ion-label",106),t._UZ(15,"ion-icon",107),t.TgZ(16,"b")(17,"i"),t._uU(18,"\xa0"),t._UZ(19,"span",13),t._uU(20,"\xa0"),t.qZA()()()()(),t.TgZ(21,"ion-row",27)(22,"ion-col",108),t.NdJ("click",function(a){const c=t.CHM(e).index,d=t.oxw(2);return t.KtG(d.onRatingColClick(d.oidsorted[c],a))})("pointerdown",function(a){const c=t.CHM(e).index,d=t.oxw(2);return t.KtG(d.onRatingColPointerdown(d.oidsorted[c],a))})("touchstart",function(a){const c=t.CHM(e).index,d=t.oxw(2);return t.KtG(d.onRatingColTouchstart(d.oidsorted[c],a))})("touchup",function(a){const c=t.CHM(e).index,d=t.oxw(2);return t.KtG(d.onRatingColTouchup(d.oidsorted[c],a))})("pointerup",function(a){const c=t.CHM(e).index,d=t.oxw(2);return t.KtG(d.onRatingColPointerup(d.oidsorted[c],a))}),t.TgZ(23,"ion-range",109),t.NdJ("ionFocus",function(){const u=t.CHM(e).index,c=t.oxw(2);return t.KtG(c.onRatingSliderFocus(c.oidsorted[u]))})("ionChange",function(){const u=t.CHM(e).index,c=t.oxw(2);return t.KtG(c.onRatingSliderChange(c.oidsorted[u]))})("ionBlur",function(){const u=t.CHM(e).index,c=t.oxw(2);return t.KtG(c.onRatingSliderBlur(c.oidsorted[u]))}),t.TgZ(24,"ion-label",110)(25,"div",111),t.O4$(),t.TgZ(26,"svg",112),t._UZ(27,"rect",113)(28,"line",114)(29,"line",115),t.qZA()(),t.kcU(),t.TgZ(30,"div",116),t.O4$(),t.TgZ(31,"svg",117),t._UZ(32,"text",118),t.qZA()(),t.kcU(),t.TgZ(33,"div",119),t.O4$(),t.TgZ(34,"svg",120),t._UZ(35,"line",121)(36,"circle",122),t.qZA()()()()(),t.YNc(37,Zs,7,11,"ion-col",123),t.qZA()()()(),t.kcU(),t.TgZ(38,"ion-row",27)(39,"ion-col",27)(40,"ion-grid",27)(41,"app-expandable",124)(42,"ion-row",125)(43,"ion-col",27)(44,"b")(45,"span",126),t._UZ(46,"span",127),t.ALo(47,"translate"),t.TgZ(48,"small"),t._UZ(49,"wbr")(50,"span",128),t.ALo(51,"translate"),t._uU(52,", "),t.qZA()(),t.TgZ(53,"small"),t._UZ(54,"wbr"),t.qZA(),t.TgZ(55,"span",129),t._UZ(56,"span",13),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"small"),t._UZ(59,"span",130),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"small"),t.YNc(62,ks,4,6,"span",131),t._uU(63,"\xa0 "),t.TgZ(64,"span",129),t._uU(65," ("),t.TgZ(66,"a",72),t.NdJ("click",function(){const u=t.CHM(e).index,c=t.oxw(2);return t.KtG(c.explain_approval_dialog(c.oidsorted[u]))}),t.ALo(67,"translate"),t.qZA(),t._uU(68,") "),t.qZA()()(),t.TgZ(69,"span"),t._UZ(70,"br"),t.qZA(),t.TgZ(71,"span")(72,"i"),t._UZ(73,"span",13),t._uU(74,"\xa0\xa0"),t.qZA()(),t.TgZ(75,"span")(76,"small"),t._uU(77," ("),t.TgZ(78,"span",47),t.NdJ("click",function(){const u=t.CHM(e).index,c=t.oxw(2);return t.KtG(c.G.open_url_in_new_tab(c.G.D.fix_url(c.p.options[c.oidsorted[u]].url)))}),t._UZ(79,"ion-text",46),t.ALo(80,"translate"),t._uU(81,"\xa0"),t._UZ(82,"ion-icon",55),t.qZA(),t._uU(83,") "),t.qZA()()()()()()()()()()}if(2&n){const e=i.index,r=t.oxw(2);t.xp6(5),t.uIk("display",r.show_live||!r.p.allow_voting?"inline":"none"),t.xp6(2),t.Q6J("id","pie_"+r.oidsorted[e]),t.xp6(1),t.uIk("display",r.option_expanded[r.oidsorted[e]]?"inline":"none"),t.xp6(7),t.Q6J("name",r.option_expanded[r.oidsorted[e]]?"chevron-down-outline":"chevron-forward-outline"),t.xp6(4),t.Q6J("innerHtml",r.p.options[r.oidsorted[e]].name,t.oJD),t.xp6(3),t.Q6J("id","_slider_"+r.oidsorted[e]+"_"+r.sortingcounter),t.xp6(1),t.Akn(r.rate_yourself_toggle[r.oidsorted[e]]||"agreed"!=r.delegation_status?"pointer-events:; --bar-height: 7px; --knob-size: 35px":"pointer-events: none; --bar-height: 5px; --knob-size: 17px"),t.Q6J("disabled",!r.p.allow_voting)("id","slider_"+r.oidsorted[e]+"_"+r.sortingcounter)("color",r.show_live?r.slidercolor[r.oidsorted[e]]:"vodleblue")("value",r.p.get_my_proxy_rating(r.oidsorted[e])),t.xp6(4),t.Q6J("id","bar_"+r.oidsorted[e]),t.uIk("display",r.show_live||!r.p.allow_voting?"inline":"none"),t.xp6(1),t.uIk("display",r.show_live||!r.p.allow_voting?"inline":"none"),t.xp6(3),t.uIk("display",!r.show_live&&r.p.allow_voting||!r.option_expanded[r.oidsorted[e]]?"none":"inline"),t.xp6(1),t.Q6J("innerHtml",(r.p.T.approval_scores_map.get(r.oidsorted[e])/r.Math.max(1,r.p.T.n_not_abstaining)*100).toFixed(1)+"%\xa0\xa0",t.oJD),t.xp6(1),t.Udp("display","agreed"==r.delegation_status&&r.rate_yourself_toggle[r.oidsorted[e]]?"inline":"none"),t.xp6(2),t.Q6J("id","del_needle_"+r.oidsorted[e]),t.xp6(1),t.Q6J("id","del_knob_"+r.oidsorted[e]),t.xp6(1),t.Q6J("ngIf","agreed"==r.delegation_status),t.xp6(4),t.Q6J("id","expander_"+r.oidsorted[e]+"_"+r.sortingcounter)("expanded",r.option_expanded[r.oidsorted[e]]),t.xp6(3),t.Udp("display",r.show_live||!r.p.allow_voting?"inline":"none"),t.xp6(2),t.Q6J("innerHtml",t.xi3(47,44,"winner"==r.p.type?r.p.allow_voting?"poll.chance-to-win":"poll.final-chance-to-win":r.p.allow_voting?"poll.of-the-budget":"poll.final-budget",t.VKq(58,Rr,(100*r.p.T.shares_map.get(r.oidsorted[e])).toFixed(1))),t.oJD),t.xp6(4),t.Udp("display",r.votedfor==r.oidsorted[e]?"inline":"none"),t.Q6J("innerHtml",t.lcZ(51,47,"poll.including-your-share"),t.oJD),t.xp6(6),t.Q6J("innerHtml",t.xi3(57,49,"poll.approved-by",t.VKq(60,Rr,(r.p.T.approval_scores_map.get(r.oidsorted[e])/r.Math.max(1,r.p.T.n_not_abstaining)*100).toFixed(1))),t.oJD),t.xp6(3),t.Udp("display",r.approved[r.oidsorted[e]]?"inline":"none"),t.Q6J("innerHtml",t.lcZ(60,52,"poll.including-you"),t.oJD),t.xp6(3),t.Q6J("ngIf",e>0&&r.p.T.approval_scores_map.get(r.oidsorted[e-1])==r.p.T.approval_scores_map.get(r.oidsorted[e])||e<r.oidsorted.length-1&&r.p.T.approval_scores_map.get(r.oidsorted[e+1])==r.p.T.approval_scores_map.get(r.oidsorted[e])),t.xp6(4),t.Q6J("innerHtml",t.lcZ(67,54,"poll.explain"),t.oJD),t.xp6(3),t.Udp("display",!r.show_live&&r.p.allow_voting||!r.p.options[r.oidsorted[e]].desc&&!r.p.options[r.oidsorted[e]].url?"none":"inline"),t.xp6(2),t.Udp("display",""!=r.p.options[r.oidsorted[e]].desc?"inline":"none"),t.xp6(2),t.Q6J("innerHtml",r.p.options[r.oidsorted[e]].desc,t.oJD),t.xp6(2),t.Udp("display",""!=r.p.options[r.oidsorted[e]].url?"inline":"none"),t.xp6(4),t.Q6J("innerHtml",t.lcZ(80,56,"read-more"),t.oJD)}}function Ns(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",136)(2,"ion-fab-button",137),t.NdJ("click",function(a){t.CHM(e);const u=t.oxw(2);return t.KtG(u.add_option(a))}),t._UZ(3,"ion-icon",138),t.qZA(),t.TgZ(4,"ion-button",139),t.NdJ("click",function(a){t.CHM(e);const u=t.oxw(2);return t.KtG(u.add_option(a))}),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"ion-item",140),t._UZ(7,"small",13),t.ALo(8,"translate"),t.qZA(),t.BQk()}2&n&&(t.xp6(4),t.Q6J("innerHtml",t.lcZ(5,2,"poll.add-option"),t.oJD),t.xp6(3),t.Q6J("innerHtml",t.lcZ(8,4,"poll.add-option-info"),t.oJD))}function Js(n,i){if(1&n){const e=t.EpF();t.ynx(0),t._UZ(1,"ion-item"),t.TgZ(2,"ion-item",141)(3,"ion-col")(4,"small")(5,"p",142),t._uU(6),t.qZA()()(),t.TgZ(7,"ion-buttons",6)(8,"ion-toggle",143),t.NdJ("ngModelChange",function(a){t.CHM(e);const u=t.oxw(2);return t.KtG(u.p.allow_voting=a)}),t.qZA()()(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(6),t.gL8(" Debugging info: state=",e.p.state,", vid=",e.p.myvid,", oids=",e.p.oids,", oidsorted=",e.oidsorted,"/",e.p.T.oids_descending,", scores_map=",e.G.map2str(e.p.T.scores_map),". Simulate state (off:closed, on:running): "),t.xp6(2),t.Q6J("ngModel",e.p.allow_voting)}}function Cs(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-content",23),t.NdJ("pointerup",function(a){t.CHM(e);const u=t.oxw();return t.KtG(u.onBodyPointerup(a))})("ionScroll",function(a){t.CHM(e);const u=t.oxw();return t.KtG(u.onScroll(a))}),t.TgZ(1,"ion-list",24),t.YNc(2,Ja,9,2,"ion-card",25),t.TgZ(3,"ion-item",26)(4,"ion-grid",27)(5,"ion-row",27)(6,"ion-col",27),t.YNc(7,Ea,3,6,"small",5),t.TgZ(8,"h3")(9,"b"),t._UZ(10,"i",13),t.qZA()()()()()(),t.YNc(11,Ha,9,6,"ion-item",28),t.TgZ(12,"ion-item",29)(13,"ion-grid",27)(14,"ion-row",27)(15,"ion-col",30),t.YNc(16,Ra,5,1,"ion-button",31),t.TgZ(17,"small")(18,"span",32),t.YNc(19,Qa,2,3,"ion-badge",33),t.YNc(20,Sa,2,3,"span",20),t.YNc(21,Ga,2,3,"span",20),t._uU(22,"\xa0"),t._UZ(23,"b",13),t.qZA(),t._UZ(24,"br"),t.TgZ(25,"span",32),t._UZ(26,"ion-icon",34),t._uU(27,"\xa0"),t._UZ(28,"span",13),t.ALo(29,"translate"),t.qZA()(),t._UZ(30,"br"),t.TgZ(31,"small",32)(32,"span",32),t._UZ(33,"ion-icon",35),t._uU(34,"\xa0"),t.TgZ(35,"b"),t._uU(36),t.qZA(),t._uU(37,"\xa0"),t.TgZ(38,"span",36),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.glossary("non-abstaining"))}),t.ALo(39,"translate"),t.qZA(),t._uU(40,"\xa0\xa0\xa0 "),t._UZ(41,"br"),t.qZA()(),t.TgZ(42,"small",32)(43,"span",32),t._UZ(44,"ion-icon",34),t.TgZ(45,"b"),t._uU(46),t.qZA(),t._uU(47,"%\xa0"),t.TgZ(48,"span",36),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.glossary("level-of-agreement"))}),t.ALo(49,"translate"),t.qZA(),t._uU(50,"\xa0("),t.TgZ(51,"span",36),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.analysis_dialog())}),t.ALo(52,"translate"),t.qZA(),t._uU(53,") "),t.qZA(),t._uU(54,"\xa0 "),t.YNc(55,qa,4,1,"ion-badge",37),t.TgZ(56,"ion-button",38),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.toggle_show_live())}),t.YNc(57,Fa,6,4,"ng-container",5),t.qZA()()()()()(),t.YNc(58,Xa,6,5,"ng-container",5),t.YNc(59,os,18,17,"ng-container",5),t.YNc(60,us,7,5,"ng-container",5),t.YNc(61,cs,4,3,"ng-container",5),t.YNc(62,fs,6,4,"ion-item",39),t.TgZ(63,"div"),t.YNc(64,vs,11,5,"ion-item",40),t.YNc(65,ys,14,5,"ion-item",41),t.YNc(66,ws,22,7,"ion-item",41),t.TgZ(67,"ion-item",42)(68,"small",43),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.show_live||!a.p.allow_voting?a.glossary("share"):null)}),t.YNc(69,bs,2,3,"span",44),t.qZA(),t.TgZ(70,"small",45),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.glossary("wap"))}),t._UZ(71,"span",46),t.ALo(72,"translate"),t.qZA(),t.TgZ(73,"small",47),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.show_live||!a.p.allow_voting?a.glossary("approve"):null)}),t.YNc(74,As,5,3,"ng-container",5),t.qZA()(),t.YNc(75,Ms,84,62,"ion-item",48),t.YNc(76,Ns,9,6,"ng-container",5),t.qZA(),t.YNc(77,Js,9,7,"ng-container",5),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("scrollEvents",!0),t.xp6(2),t.Q6J("ngForOf",e.news),t.xp6(5),t.Q6J("ngIf",!!e.p.language&&e.p.language!=e.G.S.language),t.xp6(3),t.Q6J("innerHtml",e.p.title,t.oJD),t.xp6(1),t.Q6J("ngIf",""!=(e.p.desc||"")||""!=(e.p.url||"")),t.xp6(5),t.Q6J("ngIf",e.p.allow_voting),t.xp6(3),t.Q6J("ngIf",e.p.allow_voting&&e.p.is_closing_soon),t.xp6(1),t.Q6J("ngIf",e.p.allow_voting&&!e.p.is_closing_soon),t.xp6(1),t.Q6J("ngIf",!e.p.allow_voting),t.xp6(2),t.Q6J("innerHtml",e.G.D.format_date(e.p.due),t.oJD),t.xp6(3),t.Q6J("name","share"==e.p.type?"cut-outline":"trophy-outline"),t.xp6(2),t.Q6J("innerHtml",t.lcZ(29,39,"share"==e.p.type?"poll.type-share":"poll.type-winner"),t.oJD),t.xp6(8),t.Oqu(e.p.T.n_not_abstaining),t.xp6(2),t.Q6J("innerHtml",t.lcZ(39,41,"non-abstaining-voters"),t.oJD),t.xp6(6),t.Q6J("name",1==e.p.agreement_level?"checkmark-done-outline":"analytics-outline"),t.xp6(2),t.hij("\xa0",(100*e.p.agreement_level).toFixed(1),""),t.xp6(2),t.Q6J("innerHtml",t.lcZ(49,43,"level-of-agreement"),t.oJD),t.xp6(3),t.Q6J("innerHtml",t.lcZ(52,45,"poll.analysis-details"),t.oJD),t.xp6(4),t.Q6J("ngIf",!1),t.xp6(1),t.Q6J("disabled",!e.p.allow_voting),t.xp6(1),t.Q6J("ngIf",e.p.allow_voting),t.xp6(1),t.Q6J("ngIf",e.p.allow_voting),t.xp6(1),t.Q6J("ngIf",e.p.has_results&&"winner"==e.p.type),t.xp6(1),t.Q6J("ngIf",e.p.has_results&&"share"==e.p.type),t.xp6(1),t.Q6J("ngIf",!e.p.allow_voting&&!e.p.has_results),t.xp6(1),t.Q6J("ngIf",!e.p.allow_voting),t.xp6(1),t.Udp("display",e.p.allow_voting||e.final_expanded?"block":"none"),t.xp6(1),t.Q6J("ngIf",e.accepted_requests.length>0||e.declined_requests.length>0),t.xp6(1),t.Q6J("ngIf","pending"==e.delegation_status),t.xp6(1),t.Q6J("ngIf","agreed"==e.delegation_status),t.xp6(3),t.Q6J("ngIf",e.show_live||!e.p.allow_voting),t.xp6(2),t.Q6J("innerHtml",t.lcZ(72,47,"poll.your-wap"),t.oJD),t.xp6(2),t.Akn("padding-top: 8px!important; padding-right: "+("agreed"==e.delegation_status?62:10)+"px; color: #769596;"),t.xp6(1),t.Q6J("ngIf",e.show_live||!e.p.allow_voting),t.xp6(1),t.Q6J("ngForOf",t.DdM(49,zr).constructor(e.oidsorted.length)),t.xp6(1),t.Q6J("ngIf",e.p.allow_voting),t.xp6(1),t.Q6J("ngIf",!1)}}function Es(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-footer",144)(1,"ion-item",77)(2,"ion-text")(3,"ion-button",145),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.dismiss_glossary())}),t._UZ(4,"ion-icon",146),t.qZA(),t._UZ(5,"small",13),t.ALo(6,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("innerHtml",t.lcZ(6,1,"glossary."+e.glossary_key),t.oJD)}}let Qr=(()=>{class n{constructor(e,r,a,u,c,d,x,A,Z,z){this.changeDetector=e,this.router=r,this.route=a,this.routerOutlet=u,this.loadingController=c,this.alertCtrl=d,this.popover=x,this.modalController=A,this.translate=Z,this.G=z,this.Array=Array,this.Math=Math,this.Object=Object,this.window=window,this.E=Et.N,this.page="poll",this.delegation_status="none",this.n_indirect_clients=1,this.accepted_requests=[],this.declined_requests=[],this.oidsorted=[],this.sortingcounter=0,this.approved={},this.votedfor=null,this.show_live=!1,this.final_expanded=!1,this.details_expanded=!0,this.incoming_delegation_expanded=!1,this.option_expanded={},this.pieradius=20,this.two_pi=2*Math.PI,this.slidercolor={},this.refresh_paused=!1,this.needs_refresh=!1,this.scroll_position=0,this.rate_yourself_toggle={},this.n_delegated=0,this.news=new Set,this.ready=!1,this.listeners=new Map,this.final_rand=0,this.dragged_oid=void 0,this.currentModal=null,this.show_glossary=!1,this.G.L.entry("PollsPage.constructor"),this.route.params.subscribe(tt=>{this.pid=tt.pid})}ngOnInit(){this.G.L.entry("PollsPage.ngOnInit")}ionViewWillEnter(){this.G.L.entry("PollPage.ionViewWillEnter"),this.G.D.page=this;const e=a=>{this.changeDetector.detectChanges()};window.addEventListener("offline",e),window.addEventListener("online",e);const r=JSON.parse(this.G.D.getp(this.pid,"poll_page")||"{}");this.show_live=1==r.show_live,this.details_expanded=0!=r.details_expanded,this.incoming_delegation_expanded=1==r.incoming_delegation_expanded,this.option_expanded=r.option_expanded||{},this.G.L.exit("PollPage.ionViewWillEnter",r)}ionViewDidEnter(){this.G.L.entry("PollPage.ionViewDidEnter"),this.G.D.ready&&this.onDataReady(),this.G.L.debug("PollPage.ready:",this.ready)}onDataReady(){if(this.G.L.entry("PollPage.onDataReady"),!(this.pid in this.G.P.polls))return this.G.L.warn("PollPage unknown pid ignored, redirecting to mypolls page",this.pid,this.G.P.polls),void this.router.navigate(["/mypolls"]);if(this.p=this.G.P.polls[this.pid],"draft"==this.p.state?(this.G.L.error("PollPage not showing draft poll, redirecting to mypolls page",this.pid),this.router.navigate(["/mypolls"])):this.G.L.info("PollPage showing poll",this.pid),this.p.allow_voting){this.G.L.info("PollPage checking if default waps are needed",this.pid);for(let e of this.p.oids)this.p.own_ratings_map.get(e).has(this.p.myvid)||(this.G.L.info("PollPage setting default wap",this.pid,e,this.G.S.default_wap),this.p.set_my_own_rating(e,this.G.S.default_wap,!0))}this.p.tally_all(),this.oidsorted=[...this.p.T.oids_descending],this.ready=!0,this.update_order(!0),window.setTimeout(()=>{this.update_order.bind(this)(!0),this.show_stats.bind(this)()},200),this.update_delegation_info(),this.on_delegate_toggle_change(),this.p.have_seen=!0,this.p.has_results&&(this.p.have_seen_results=!0),this.G.L.exit("PollPage.onDataReady")}onDataChange(){this.G.L.entry("PollPage.onDataChange"),this.p.tally_all(),this.update_order(),this.update_delegation_info(),this.news=this.G.N.filter({pid:this.pid}),this.changeDetector.detectChanges(),this.G.L.exit("PollPage.onDataChange")}ionViewWillLeave(){for(let r of this.oidsorted)(!this.delegate||this.rate_yourself_toggle[r])&&this.p.set_my_own_rating(r,Math.round(this.get_slider_value(r)),!0);for(const r of this.news)r.auto_dismiss&&this.G.N.dismiss(r.key);const e={show_live:this.show_live,details_expanded:this.details_expanded,incoming_delegation_expanded:this.incoming_delegation_expanded,option_expanded:this.option_expanded};this.G.D.setp(this.pid,"poll_page",JSON.stringify(e)),this.G.L.exit("PollPage.ionViewWillLeave",e)}ionViewDidLeave(){this.G.L.entry("PollPage.ionViewDidLeave"),this.G.D.save_state(),this.G.L.exit("PollPage.ionViewDidLeave")}update_delegation_info(){this.n_indirect_clients=this.p.get_n_indirect_clients(this.p.myvid);const e=this.G.D.incoming_dids_caches[this.pid];if(this.accepted_requests=[],this.declined_requests=[],e)for(const[a,[u,c,d]]of e)"agreed"==d?this.accepted_requests.push({from:u,url:c}):d.startsWith("declined")&&this.declined_requests.push({from:u,url:c});const r=this.G.Del.get_my_outgoing_dids_cache(this.pid).get("*");if(this.G.L.trace("PollPage.update_delegation_info did",r),r){this.delegate=this.G.Del.get_delegate_nickname(this.pid,r);const a=this.G.Del.get_agreement(this.pid,r);this.G.L.trace("PollPage.update_delegation_info agreement",a),this.delegation_status=a.status}this.update_delegation_toggles()}update_delegation_toggles(){for(let e of this.oidsorted){let r=this.G.Del.get_my_outgoing_dids_cache(this.pid).get(e);if(r||(r=this.G.Del.get_my_outgoing_dids_cache(this.pid).get("*")),r){const a=this.G.Del.get_agreement(this.pid,r);this.G.L.trace("PollPage found did, agreement",e,r,a,[...a.accepted_oids],[...a.active_oids]),this.rate_yourself_toggle[e]=!a.active_oids.has(e)}else this.G.L.trace("PollPage found no did for",e),this.rate_yourself_toggle[e]=!0}}onScroll(e){var r=this;return(0,Bt.Z)(function*(){r.scroll_position=e.detail.scrollTop})()}on_rate_yourself_toggle_change(e){this.G.Del.update_my_delegation(this.pid,e,!this.rate_yourself_toggle[e]),this.on_delegate_toggle_change()}on_delegate_toggle_change(){let e=0;for(let[r,a]of Object.entries(this.rate_yourself_toggle))a||e++;this.n_delegated=e}show_stats(){if(!this.ready)return;this.G.L.entry("PollPage.show_stats");const e=this.p,r=e.T,a=e.myvid,u=r.approval_scores_map,c=r.shares_map,d=r.approvals_map;this.votedfor=r.votes_map.get(this.p.myvid);for(const x of e.oids){const A=u.get(x)/r.n_not_abstaining||0,Z=c.get(x),z=document.getElementById("bar_"+x),tt=document.getElementById("pie_"+x),rt=this.pieradius,Xt=rt*Math.sin(this.two_pi*Z),en=rt*(1-Math.cos(this.two_pi*Z)),R=Z>.5?1:0;if(this.approved[x]=d.get(x).get(a),z?(z.width.baseVal.valueAsString=(100*A).toString()+"%",z.x.baseVal.valueAsString=(100*(1-A)).toString()+"%"):this.G.L.warn("PollPage.show_stats couldn't change slider bar",x),tt?tt.setAttribute("d",Z<1?"M 21,25 l 0,-"+rt+" a "+rt+" "+rt+" 0 "+R+" 1 "+Xt+" "+en+" Z":"M 21,25 l 0,-20 a 20 20 0 1 1 0 "+2*rt+" a 20 20 0 1 1 0 "+-2*rt+" Z"):this.G.L.warn("PollPage.show_stats couldn't change pie piece",x),this.set_slider_color(x,e.get_my_proxy_rating(x)),this.rate_yourself_toggle[x]){const I=document.getElementById("del_needle_"+x),ht=document.getElementById("del_knob_"+x),et=this.G.Del.get_potential_effective_delegate(this.pid,x);if(et){const Pt=(this.p.proxy_ratings_map.get(x)||new Map).get(et)||0;this.G.L.trace("PollPage.show_stats rating",Pt),I&&(I.x2.baseVal.valueAsString=Pt.toString()+"%"),ht&&(ht.cx.baseVal.valueAsString=Pt.toString()+"%")}}}}update_order(e=!1){var r=this;return(0,Bt.Z)(function*(){if(r.oidsorted.length!=r.p.oids.length)r.needs_refresh=!0;else for(let a in r.oidsorted)if(r.oidsorted[a]!=r.p.T.oids_descending[a]){r.needs_refresh=!0;break}if(e||r.show_live&&r.needs_refresh&&!r.refresh_paused&&!r.dragged_oid){if(!e){const a=yield r.loadingController.create({message:r.translate.instant("poll.sorting"),spinner:"crescent",duration:100});yield a.present(),yield a.onDidDismiss()}r.oidsorted=[...r.p.T.oids_descending],r.sortingcounter++,r.needs_refresh=!1,setTimeout(()=>{r.show_stats.bind(r)();for(let a in r.oidsorted){const u=r.oidsorted[a],c=document.getElementById("_slider_"+r.oidsorted[a]+"_"+r.sortingcounter),d=z=>{r.onRatingColPointerdown.bind(r)(u,z)},x=z=>{r.onRatingColPointerup.bind(r)(u,z)},A=z=>{r.onRatingColTouchstart.bind(r)(u,z)},Z=z=>{r.onRatingColTouchup.bind(r)(u,z)};if(c){if(r.listeners.has(c)){r.G.L.trace("PollPage.update_order removing old event listeners");const z=r.listeners.get(c);c.removeEventListener("pointerdown",z[0],!0),c.removeEventListener("pointerup",z[1],!0),c.removeEventListener("touchstart",z[2],!0),c.removeEventListener("touchup",z[3],!0)}c.addEventListener("pointerdown",d,!0),c.addEventListener("pointerup",x,!0),c.addEventListener("touchstart",A,!0),c.addEventListener("touchup",Z,!0),r.listeners.set(c,[d,x,A,Z])}}r.G.L.trace("PollPage.update_order registered event listeners",r.sortingcounter)},100)}})()}set_slider_color(e,r){this.slidercolor[e]=0==r?"vodlered":this.votedfor==e?"vodledarkgreen":r+100*(this.p.T.approval_scores_map.get(e)/this.p.T.n_not_abstaining||0)<=100?"vodleblue":"vodlegreen"}toggle_show_live(){this.show_live=!this.show_live,this.show_live&&this.update_order()}expand(e){this.option_expanded[e]=!this.option_expanded[e]}get_slider(e){return this.G.L.trace("PollPage.get_slider ",this.sortingcounter),document.getElementById("slider_"+e+"_"+this.sortingcounter)}set_slider_values(){for(let e of this.p.oids)this.get_slider(e).value=this.p.proxy_ratings_map.get(e).get(this.p.myvid).toString()}get_slider_value(e){const r=this.get_slider(e);return r?Number(r.value):0}apply_sliders_rating(e){(!this.delegate||this.rate_yourself_toggle[e])&&this.p.set_my_own_rating(e,Math.round(this.get_slider_value(e)),!1),this.show_stats()}onRatingSliderFocus(e){return this.G.L.entry("PollPage.onRatingSliderFocus"),!0}onRatingSliderChange(e){var r=this.get_slider(e),a=Number(r.value);return this.set_slider_color(e,a),this.apply_sliders_rating(e),!0}onRatingSliderBlur(e){return this.G.L.entry("PollPage.onRatingSliderBlur"),this.rating_change_ended(e),!0}rating_change_ended(e){this.G.L.entry("PollPage.rating_change_ended"),this.p.have_acted=!0,(!this.delegate||this.rate_yourself_toggle[e])&&this.p.set_my_own_rating(e,Math.round(this.get_slider_value(e)),!0),this.update_order(),this.G.D.save_state()}onRatingColPointerdown(e,r){if(this.p.end_if_past_due(),!this.p.allow_voting)return!1;this.dragged_oid=e;const a=this.get_knob_pos(e),u=r?r instanceof PointerEvent?r.clientX:r.touches[0].clientX:0;return this.G.L.entry("onRatingColPointerdown",this.sortingcounter,e,this.p.options[e].name,u,a),!(u<a.left||u>a.right)||(this.swallow_event(r),!1)}onRatingColTouchstart(e,r){if(this.p.end_if_past_due(),!this.p.allow_voting)return!1;this.dragged_oid=e;const a=this.get_knob_pos(e),u=r?r instanceof PointerEvent?r.clientX:r.touches[0].clientX:0;return this.G.L.entry("onRatingColTouchstart",e,u,a),!(u<a.left||u>a.right)||(this.swallow_event(r),!1)}onRatingColPointerup(e,r){return this.p.end_if_past_due(),!!this.p.allow_voting&&(this.G.L.entry("onRatingColPointerup",e,this.dragged_oid),e!=this.dragged_oid?(this.swallow_event(r),this.dragged_oid=null,this.update_order(),!1):(this.rating_change_ended(e),this.dragged_oid=null,!0))}onRatingColTouchup(e,r){return this.p.end_if_past_due(),!!this.p.allow_voting&&(this.G.L.entry("onRatingColTouchup",e,this.dragged_oid),e!=this.dragged_oid?(this.swallow_event(r),this.dragged_oid=null,this.update_order(),!1):(this.rating_change_ended(e),this.dragged_oid=null,!0))}onRatingColClick(e,r){if(this.p.end_if_past_due(),!this.p.allow_voting)return!1;const a=this.get_knob_pos(e),u=r.clientX;return this.G.L.entry("onRatingColClick",e,this.p.options[e].name,u,a),!(u<a.left||u>a.right)||(this.swallow_event(r),!1)}onBodyPointerup(e){return this.p.end_if_past_due(),!!this.p.allow_voting&&(this.dragged_oid&&(this.G.L.entry("onBodyPointerup"),this.onRatingColPointerup(this.dragged_oid,e)),!0)}onBodyTouchup(e){return this.p.end_if_past_due(),!!this.p.allow_voting&&(this.dragged_oid&&(this.G.L.entry("onBodyTouchup"),this.onRatingColTouchup(this.dragged_oid,e)),!0)}get_knob_pos(e){const r=this.get_slider(e),a=this.get_screen_coords(r),u=this.get_slider_value(e),c=a.left+(a.right-a.left)*u/100;return this.G.L.trace("pointer slider value",u),{left:c-20,right:c+20}}get_screen_coords(e){return e?e.getBoundingClientRect():new DOMRect}swallow_event(e){this.G.L.trace("swallowing event",e),e&&(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault())}checkmark_clicked(){var e=this;return(0,Bt.Z)(function*(){yield(yield e.alertCtrl.create({message:e.translate.instant("poll.checkmark-clicked"),buttons:[{text:e.translate.instant("OK"),role:"Ok",handler:()=>{}}]})).present()})()}delegate_dialog(e){this.p.end_if_past_due(),this.p.allow_voting&&this.popover.create({event:e,component:Kt.DelegationDialogPage,translucent:!0,showBackdrop:!0,componentProps:{parent:this}}).then(r=>{r.present()})}assist_dialog(){var e=this;return(0,Bt.Z)(function*(){if(e.p.end_if_past_due(),e.p.allow_voting){const r=yield e.modalController.create({component:Mt.AssistPage,componentProps:{P:e},backdropDismiss:!1});r.present(),e.currentModal=r}})()}analysis_dialog(){var e=this;return(0,Bt.Z)(function*(){e.p.end_if_past_due();const r=yield e.modalController.create({component:Hr,cssClass:"analysis",componentProps:{P:e},backdropDismiss:!0});r.present(),e.currentModal=r})()}explain_approval_dialog(e){this.modalController.create({component:xa.ExplainApprovalPage,cssClass:"explain-approval",showBackdrop:!0,componentProps:{parent:this,oid:e},swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl}).then(r=>{r.present()})}revoke_delegation_dialog(){var e=this;return(0,Bt.Z)(function*(){e.p.end_if_past_due(),e.p.allow_voting&&(yield(yield e.alertCtrl.create({message:e.translate.instant("poll.revoke_delegation",{nickname:e.delegate}),buttons:[{text:e.translate.instant("cancel"),role:"Cancel",handler:()=>{console.log("Confirm Cancel.")}},{text:e.translate.instant("OK"),role:"Ok",handler:()=>{e.G.Del.revoke_delegation(e.pid,e.G.Del.get_my_outgoing_dids_cache(e.pid).get("*"),"*"),e.delegate=null,e.delegation_status="none",e.update_delegation_info(),e.G.D.save_state()}}]})).present())})()}add_option(e){this.p.end_if_past_due(),this.p.allow_voting&&this.popover.create({event:e,side:"top",component:ma.AddoptionDialogPage,translucent:!0,showBackdrop:!0,cssClass:"add-option-class",componentProps:{parent:this}}).then(r=>{r.present()})}glossary(e){this.glossary_key=e,this.show_glossary=!0}dismiss_glossary(){this.show_glossary=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36($t.F0),t.Y36($t.gz),t.Y36(X.jP),t.Y36(X.HT),t.Y36(X.Br),t.Y36(X.Dh),t.Y36(X.IN),t.Y36(Rt.sK),t.Y36(Lr.U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-poll"]],viewQuery:function(e,r){if(1&e&&t.Gf(X.W2,5),2&e){let a;t.iGM(a=t.CRH())&&(r.content=a.first)}},decls:13,vars:8,consts:[[3,"pointerup","touchup"],[2,"padding-right","11px","padding-left","16px"],["slot","start",2,"margin-right","0px","margin-left","0px","padding-left","0px","padding-right","0px"],[2,"padding-left","0px!important","padding-right","0px!important","position","relative","left","-9px"],["style","font-weight: bold; font-size: larger; padding-left: 0px;",3,"innerHtml",4,"ngIf"],[4,"ngIf"],["slot","end"],["name","crescent","color","grey",4,"ngIf"],["class","ion-no-margin ion-no-padding","fill","clear",3,"click",4,"ngIf"],["shape","round","size","large","color","primary","class","ion-no-padding ion-no-margin",3,"click",4,"ngIf"],[3,"scrollEvents","pointerup","ionScroll",4,"ngIf"],["style","box-shadow: 0px -3px 4px #eeeeee;",4,"ngIf"],[2,"font-weight","bold","font-size","larger","padding-left","0px",3,"innerHtml"],[3,"innerHtml"],["name","cloud-offline-outline","color","grey",2,"position","relative","bottom","-1px"],["name","alert-outline","color","grey"],["name","crescent","color","grey"],["fill","clear",1,"ion-no-margin","ion-no-padding",3,"click"],["size","large","name","checkmark","color","grey","slot","icon-only"],["shape","round","size","large","color","primary",1,"ion-no-padding","ion-no-margin",3,"click"],[3,"innerHtml",4,"ngIf"],["shape","round","fill","solid","color","primary",1,"ion-no-margin","ion-no-padding",2,"position","relative","right","-4px",3,"disabled"],["src","./assets/icon/delegate-simple.svg",1,"ion-no-margin","ion-no-padding"],[3,"scrollEvents","pointerup","ionScroll"],["lines","full",1,"ion-no-margin","ion-no-padding"],[4,"ngFor","ngForOf"],["color","primary","lines","none",1,"ion-no-margin"],[1,"ion-no-padding","ion-no-margin"],["color","primary","class","ion-padding-left ion-padding-right","style","cursor: pointer; --min-height: 0!important;",3,"click",4,"ngIf"],["color","primary",1,"ion-no-margin","ion-padding-left","ion-padding-right"],[1,"ion-no-padding","ion-no-margin",2,"padding-bottom","8px","padding-top","2px"],["size","small","fill","clear","class","ion-float-right ion-no-padding ion-no-margin","style","position: relative; top: 5px; right: 10px; margin-left:20px; margin-bottom:5px!important;",3,"click",4,"ngIf"],[2,"white-space","nowrap"],["class","ion-no-margin","style","position: relative; bottom: -5.5px; font-size: 11.5px;","color","danger",3,"innerHtml",4,"ngIf"],["color","light",2,"position","relative","top","2px",3,"name"],["color","light","name","people-outline",2,"position","relative","top","2px"],[1,"externallink",3,"innerHtml","click"],["class","ion-no-margin","style","position: relative; bottom:-6px; font-size: 11.5px; padding-top:2px","color","success",3,"click",4,"ngIf"],["size","small","fill","clear",1,"ion-no-padding","ion-no-margin",2,"position","absolute","right","8.5px","bottom","8px",3,"disabled","click"],["color","light","style","cursor: pointer;",3,"click",4,"ngIf"],["color","light",4,"ngIf"],["color","warning",4,"ngIf"],["lines","none",1,"ion-no-padding","ion-no-margin",2,"--min-height","0px!important","font-weight","bold"],[2,"padding-top","8px!important","padding-left","6px","width","68px!important","color","#769596","text-align","center",3,"click"],["style","width: 100%!important","class","externallink",3,"innerHtml",4,"ngIf"],[2,"padding-left","6px!important","padding-top","8px!important","flex-grow","1","color","#769596",3,"click"],[1,"externallink",3,"innerHtml"],[3,"click"],["style","align-items:flex-start",4,"ngFor","ngForOf"],[1,"ion-no-margin","ion-no-padding"],["lines","none","color","warning",1,"ion-no-margin","ion-no-padding","item-text-wrap"],["slot","end","fill","clear","size","small",1,"ion-no-margin","ion-no-padding",3,"click"],["slot","icon-only","name","close-outline",2,"color","gray!important"],["color","primary",1,"ion-padding-left","ion-padding-right",2,"cursor","pointer","--min-height","0!important",3,"click"],[1,"ion-no-padding","ion-padding-bottom","ion-no-margin",2,"width","100%"],["name","open-outline",2,"position","relative","top","2px"],["size","small","fill","clear",1,"ion-float-right","ion-no-padding","ion-no-margin",2,"position","relative","top","5px","right","10px","margin-left","20px","margin-bottom","5px!important",3,"click"],["style","color:#88e950; white-space: normal; text-align: right; font-size: 11.5px;",3,"innerHtml",4,"ngIf"],["shape","round","color","success",1,"ion-no-padding","ion-no-margin"],["name","color-wand-outline","slot","icon-only",2,"margin","5px"],[2,"color","#88e950","white-space","normal","text-align","right","font-size","11.5px",3,"innerHtml"],["color","danger",1,"ion-no-margin",2,"position","relative","bottom","-5.5px","font-size","11.5px",3,"innerHtml"],["color","success",1,"ion-no-margin",2,"position","relative","bottom","-6px","font-size","11.5px","padding-top","2px",3,"click"],["name","bulb-outline",1,"ion-no-padding","ion-no-margin",2,"position","relative","top","1.5px"],["size","small","shape","round","color","success",1,"ion-no-border","ion-no-padding"],["slot","icon-only",2,"padding-left","4px","padding-right","5px",3,"name"],["color","danger",4,"ngIf"],["color","secondary",4,"ngIf"],["color","warning"],[2,"font-size","medium",3,"innerHtml"],[2,"cursor","pointer","white-space","nowrap",3,"click"],["name","help-circle-outline",2,"font-size","16px","position","relative","top","4px"],[3,"innerHtml","click"],["color","danger"],[1,"externallink",2,"font-size","medium",3,"innerHtml"],["name","help-circle-outline",2,"font-size","16px","position","relative","top","3px"],["color","secondary"],["color","light"],["color","light",2,"cursor","pointer",3,"click"],["size","small","color","primary",3,"name"],[1,"ion-no-padding","ion-no-margin",2,"padding-top","5px","padding-bottom","6px","cursor","pointer",3,"click"],[1,"ion-no-margin","ion-padding-right"],["size","smaller",1,"ion-no-margin",2,"color","black","position","relative","left","-2px","top","2px",3,"name"],[1,"ion-text-right"],["outline","true",3,"routerLink",4,"ngFor","ngForOf"],["outline","true",3,"routerLink"],["name","mail-open-outline","size","small",2,"color","grey"],[1,"ion-no-padding","ion-no-margin","ion-align-items-center"],[2,"font-size","medium"],["size","auto",1,"ion-no-margin"],["fill","clear",3,"disabled","click"],["name","trash-outline",2,"color","black"],["fill","clear",3,"click"],["size","auto",1,"ion-no-padding","ion-no-margin","ion-padding-left","ion-text-right",2,"padding-bottom","3px"],["name","arrow-down-outline",2,"position","relative","top","3px"],[1,"externallink",2,"width","100%!important",3,"innerHtml"],["name","caret-down",2,"position","relative","top","2px"],[2,"align-items","flex-start"],["size","auto",1,"ion-no-padding","ion-no-margin"],[2,"width","60px!important"],["xmlns","http://www.w3.org/2000/svg","width","60px","height","60px",2,"position","absolute","bottom","0px"],["cx","21","cy","25","r","20","fill","#bce4e5","stroke","none"],["d","M 21,25 l 0,-20 a 20 20 0 0 1 0 0 Z","fill","#9abcbd",3,"id"],["x1","21","y1","48","x2","21","y2","60","stroke","#769596","stroke-width","1","stroke-dasharray","1 1"],[1,"ion-no-padding","ion-no-margin",2,"padding-top","8px","cursor","pointer","position","relative","left","-6px","z-index","20",3,"click"],[2,"display","none"],[1,"ion-no-padding","ion-no-margin",2,"max-width","100%!important"],["size","small",1,"ion-no-margin",2,"color","black","position","relative","top","3px",3,"name"],[1,"ion-no-padding","ion-no-margin",3,"id","click","pointerdown","touchstart","touchup","pointerup"],["mode","md","pin","true","min","0","max","100","step","1","snaps","true","ticks","false",1,"ion-no-padding","ion-no-margin",3,"disabled","id","color","value","ionFocus","ionChange","ionBlur"],["slot","end",1,"ion-no-padding","ion-no-margin",2,"margin-right","12px"],[2,"position","absolute","bottom","0px","right","11px","z-index","-10","width","100%","padding-left","11px"],["xmlns","http://www.w3.org/2000/svg","width","100%","height","35px"],["x","100%","width","0%","y","8","height","18","fill","#bce4e5","stroke","none",3,"id"],["x1","100%","y1","0","x2","100%","y2","34","fill","none","stroke","#bce4e5","stroke-width","5"],["x1","0%","x2","100%","y1","17","y2","17","stroke","#b4dbdb","stroke-width","2","stroke-dasharray","2 2"],[2,"position","absolute","bottom","0px","right","11px","z-index","10","width","100%","padding-left","11px","pointer-events","none"],["xmlns","http://www.w3.org/2000/svg","width","100%","height","45px"],["x","100%","y","15","text-anchor","end","fill","#9abcbd",2,"font-weight","bold","font-size","12px",3,"innerHtml"],[2,"position","absolute","top","-2px","right","11px","z-index","-5","width","100%","padding-left","11px"],["xmlns","http://www.w3.org/2000/svg","width","100%","height","15px"],["x1","0","y1","8","x2","50%","y2","8","fill","none","stroke","#9abcbd","stroke-width","2","stroke-dasharray","3 2",3,"id"],["cx","50%","cy","8","r","5","fill","#9abcbd","stroke","none",3,"id"],["class","ion-no-margin ion-no-padding","size","auto",4,"ngIf"],[3,"id","expanded"],[1,"ion-no-padding","ion-padding-bottom","ion-no-margin"],[2,"color","#769596"],[2,"white-space","nowrap",3,"innerHtml"],[2,"color","#4c822e",3,"innerHtml"],[2,"color","#9abcbd","white-space","nowrap"],[2,"color","#62a73b",3,"innerHtml"],["style","color:#9abcbd",4,"ngIf"],["size","auto",1,"ion-no-margin","ion-no-padding"],[1,"ion-no-margin","ion-no-padding","ion-padding-bottom","ion-padding-top",2,"position","relative","top","-8px",3,"id","disabled","ngModel","ionChange","ngModelChange"],[2,"position","absolute","z-index","10","top","22px","right","1px","text-align","right"],[2,"color","#9abcbd"],["lines","none",1,"ion-no-padding",2,"padding-left","10px","padding-top","10px"],["size","small","fill","clear","color","primary",3,"click"],["name","add"],["fill","clear",1,"ion-no-padding","ion-no-margin",3,"innerHtml","click"],["lines","none",2,"padding-bottom","10px!important"],["lines","none",1,"ion-text-right"],[2,"color","grey"],["color","light",3,"ngModel","ngModelChange"],[2,"box-shadow","0px -3px 4px #eeeeee"],["fill","clear",1,"ion-float-right","ion-margin-right","ion-margin-left","ion-no-padding",2,"position","relative","right","-6px","top","3px",3,"click"],["slot","icon-only","name","close","color","primary",1,"ion-no-margin","ion-no-padding"]],template:function(e,r){1&e&&(t.TgZ(0,"ion-header",0),t.NdJ("pointerup",function(u){return r.onBodyPointerup(u)})("touchup",function(u){return r.onBodyTouchup(u)}),t.TgZ(1,"ion-toolbar",1)(2,"ion-buttons",2),t._UZ(3,"ion-menu-button",3),t.qZA(),t.YNc(4,ba,2,3,"ion-text",4),t.YNc(5,Aa,3,1,"ion-text",5),t.TgZ(6,"ion-buttons",6),t.YNc(7,Pa,3,0,"ng-container",5),t.YNc(8,Za,1,0,"ion-spinner",7),t.YNc(9,Ta,2,0,"ion-button",8),t.YNc(10,Ma,4,2,"ion-button",9),t.qZA()()(),t.YNc(11,Cs,78,50,"ion-content",10),t.YNc(12,Es,7,3,"ion-footer",11)),2&e&&(t.xp6(4),t.Q6J("ngIf",r.scroll_position<70),t.xp6(1),t.Q6J("ngIf",r.scroll_position>=70),t.xp6(2),t.Q6J("ngIf",!r.window.navigator.onLine),t.xp6(1),t.Q6J("ngIf",!!r.p&&r.p.syncing&&r.window.navigator.onLine),t.xp6(1),t.Q6J("ngIf",!!r.p&&r.p.have_acted&&!r.p.syncing&&r.window.navigator.onLine),t.xp6(1),t.Q6J("ngIf",!!r.p&&"agreed"!=r.delegation_status&&r.p.allow_voting),t.xp6(1),t.Q6J("ngIf",r.ready&&!!r.p),t.xp6(1),t.Q6J("ngIf",r.show_glossary))},dependencies:[ot.sg,ot.O5,mt.JJ,mt.On,X.yp,X.YG,X.Sm,X.PM,X.FN,X.hM,X.wI,X.W2,X.W4,X.fr,X.jY,X.Gu,X.gu,X.pK,X.Ie,X.Q$,X.q_,X.fG,X.I_,X.Nd,X.PQ,X.yW,X.ho,X.sr,X.w,X.QI,X.j9,X.YI,$t.rH,wa,Rt.X$],styles:['@charset "UTF-8";']}),n})();const Us=[{path:"",component:Qr}];let Ds=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[$t.Bz.forChild(Us),$t.Bz]}),n})();var Ls=B(4496);let Is=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[ot.ez,mt.u5,X.Pc,Ds,Ls.m,Rt.aw.forChild()]}),n})()},9089:function(zn,qt,B){!function(ot,mt,Rt){"use strict";var X=1e-10;function $t(f,p){var N,g=function Et(f){for(var p=[],g=0;g<f.length;++g)for(var _=g+1;_<f.length;++_)for(var v=Tt(f[g],f[_]),y=0;y<v.length;++y){var k=v[y];k.parentIndex=[g,_],p.push(k)}return p}(f),_=g.filter(function(Gt){return function Bt(f,p){for(var g=0;g<p.length;++g)if(Mt(f,p[g])>p[g].radius+X)return!1;return!0}(Gt,f)}),v=0,y=0,k=[];if(_.length>1){var E=Ct(_);for(N=0;N<_.length;++N){var J=_[N];J.angle=Math.atan2(J.x-E.x,J.y-E.y)}_.sort(function(Gt,on){return on.angle-Gt.angle});var L=_[_.length-1];for(N=0;N<_.length;++N){var H=_[N];y+=(L.x+H.x)*(H.y-L.y);for(var $={x:(H.x+L.x)/2,y:(H.y+L.y)/2},W=null,S=0;S<H.parentIndex.length;++S)if(L.parentIndex.indexOf(H.parentIndex[S])>-1){var G=f[H.parentIndex[S]],it=Math.atan2(H.x-G.x,H.y-G.y),O=Math.atan2(L.x-G.x,L.y-G.y),gt=O-it;gt<0&&(gt+=2*Math.PI);var kt=O-gt/2,pt=Mt($,{x:G.x+G.radius*Math.sin(kt),y:G.y+G.radius*Math.cos(kt)});pt>2*G.radius&&(pt=2*G.radius),(null===W||W.width>pt)&&(W={circle:G,width:pt,p1:H,p2:L})}null!==W&&(k.push(W),v+=Kt(W.circle.radius,W.width),L=H)}}else{var st=f[0];for(N=1;N<f.length;++N)f[N].radius<st.radius&&(st=f[N]);var Ht=!1;for(N=0;N<f.length;++N)if(Mt(f[N],st)>Math.abs(st.radius-f[N].radius)){Ht=!0;break}Ht?v=y=0:(v=st.radius*st.radius*Math.PI,k.push({circle:st,p1:{x:st.x,y:st.y+st.radius},p2:{x:st.x-X,y:st.y+st.radius},width:2*st.radius}))}return y/=2,p&&(p.area=v+y,p.arcArea=v,p.polygonArea=y,p.arcs=k,p.innerPoints=_,p.intersectionPoints=g),v+y}function Kt(f,p){return f*f*Math.acos(1-p/f)-(f-p)*Math.sqrt(p*(2*f-p))}function Mt(f,p){return Math.sqrt((f.x-p.x)*(f.x-p.x)+(f.y-p.y)*(f.y-p.y))}function un(f,p,g){if(g>=f+p)return 0;if(g<=Math.abs(f-p))return Math.PI*Math.min(f,p)*Math.min(f,p);var v=p-(g*g-f*f+p*p)/(2*g);return Kt(f,f-(g*g-p*p+f*f)/(2*g))+Kt(p,v)}function Tt(f,p){var g=Mt(f,p),_=f.radius,v=p.radius;if(g>=_+v||g<=Math.abs(_-v))return[];var y=(_*_-v*v+g*g)/(2*g),k=Math.sqrt(_*_-y*y),N=f.x+y*(p.x-f.x)/g,E=f.y+y*(p.y-f.y)/g,J=k/g*-(p.y-f.y),L=k/g*-(p.x-f.x);return[{x:N+J,y:E-L},{x:N-J,y:E+L}]}function Ct(f){for(var p={x:0,y:0},g=0;g<f.length;++g)p.x+=f[g].x,p.y+=f[g].y;return p.x/=f.length,p.y/=f.length,p}function Ut(f){for(var p=new Array(f),g=0;g<f;++g)p[g]=0;return p}function St(f,p){return Ut(f).map(function(){return Ut(p)})}function It(f,p){for(var g=0,_=0;_<f.length;++_)g+=f[_]*p[_];return g}function _n(f){return Math.sqrt(It(f,f))}function Wt(f,p,g){for(var _=0;_<p.length;++_)f[_]=p[_]*g}function Lt(f,p,g,_,v){for(var y=0;y<f.length;++y)f[y]=p*g[y]+_*v[y]}function hn(f,p,g){var $,_=(g=g||{}).maxIterations||200*p.length,v=g.nonZeroDelta||1.05,y=g.zeroDelta||.001,k=g.minErrorDelta||1e-6,N=g.minErrorDelta||1e-5,E=void 0!==g.rho?g.rho:1,J=void 0!==g.chi?g.chi:2,L=void 0!==g.psi?g.psi:-.5,H=void 0!==g.sigma?g.sigma:.5,W=p.length,S=new Array(W+1);S[0]=p,S[0].fx=f(p),S[0].id=0;for(var G=0;G<W;++G){var it=p.slice();it[G]=it[G]?it[G]*v:y,S[G+1]=it,S[G+1].fx=f(it),S[G+1].id=G+1}function O(rn){for(var jt=0;jt<rn.length;jt++)S[W][jt]=rn[jt];S[W].fx=rn.fx}for(var gt=function(rn,jt){return rn.fx-jt.fx},kt=p.slice(),pt=p.slice(),st=p.slice(),Ht=p.slice(),Gt=0;Gt<_;++Gt){if(S.sort(gt),g.history){var on=S.map(function(rn){var jt=rn.slice();return jt.fx=rn.fx,jt.id=rn.id,jt});on.sort(function(rn,jt){return rn.id-jt.id}),g.history.push({x:S[0].slice(),fx:S[0].fx,simplex:on})}for($=0,G=0;G<W;++G)$=Math.max($,Math.abs(S[0][G]-S[1][G]));if(Math.abs(S[0].fx-S[W].fx)<k&&$<N)break;for(G=0;G<W;++G){kt[G]=0;for(var vn=0;vn<W;++vn)kt[G]+=S[vn][G];kt[G]/=W}var yn=S[W];if(Lt(pt,1+E,kt,-E,yn),pt.fx=f(pt),pt.fx<S[0].fx)Lt(Ht,1+J,kt,-J,yn),Ht.fx=f(Ht),O(Ht.fx<pt.fx?Ht:pt);else if(pt.fx>=S[W-1].fx){var An=!1;if(pt.fx>yn.fx?(Lt(st,1+L,kt,-L,yn),st.fx=f(st),st.fx<yn.fx?O(st):An=!0):(Lt(st,1-L*E,kt,L*E,yn),st.fx=f(st),st.fx<pt.fx?O(st):An=!0),An){if(H>=1)break;for(G=1;G<S.length;++G)Lt(S[G],1-H,S[0],H,S[G]),S[G].fx=f(S[G])}}else O(pt)}return S.sort(gt),{fx:S[0].fx,x:S[0]}}function xn(f,p,g,_,v,y,k){var N=g.fx,E=It(g.fxprime,p),J=N,L=N,H=E,$=0;function W(G,it,O){for(var gt=0;gt<16;++gt)if(Lt(_.x,1,g.x,v=(G+it)/2,p),J=_.fx=f(_.x,_.fxprime),H=It(_.fxprime,p),J>N+y*v*E||J>=O)it=v;else{if(Math.abs(H)<=-k*E)return v;H*(it-G)>=0&&(it=G),G=v,O=J}return 0}v=v||1,y=y||1e-6,k=k||.1;for(var S=0;S<10;++S){if(Lt(_.x,1,g.x,v,p),J=_.fx=f(_.x,_.fxprime),H=It(_.fxprime,p),J>N+y*v*E||S&&J>=L)return W($,v,L);if(Math.abs(H)<=-k*E)return v;if(H>=0)return W(v,$,J);L=J,$=v,v*=2}return v}function xt(f,p,g){var k,N,J,_={x:p.slice(),fx:0,fxprime:p.slice()},v={x:p.slice(),fx:0,fxprime:p.slice()},y=p.slice(),E=1;J=(g=g||{}).maxIterations||20*p.length,_.fx=f(_.x,_.fxprime),Wt(k=_.fxprime.slice(),_.fxprime,-1);for(var L=0;L<J;++L){if(E=xn(f,k,_,v,E),g.history&&g.history.push({x:_.x.slice(),fx:_.fx,fxprime:_.fxprime.slice(),alpha:E}),E){Lt(y,1,v.fxprime,-1,_.fxprime);var H=It(_.fxprime,_.fxprime);Lt(k,Math.max(0,It(y,v.fxprime)/H),k,-1,v.fxprime),N=_,_=v,v=N}else Wt(k,_.fxprime,-1);if(_n(_.fxprime)<=1e-5)break}return g.history&&g.history.push({x:_.x.slice(),fx:_.fx,fxprime:_.fxprime.slice(),alpha:E}),_}function Jt(f,p){(p=p||{}).maxIterations=p.maxIterations||500;var N,_=p.lossFunction||Cn,v=(p.initialLayout||ie)(f=function Jn(f){f=f.slice();var _,v,y,k,p=[],g={};for(_=0;_<f.length;++_){var N=f[_];1==N.sets.length?p.push(N.sets[0]):2==N.sets.length&&(g[[y=N.sets[0],k=N.sets[1]]]=!0,g[[k,y]]=!0)}for(p.sort(function(E,J){return E>J}),_=0;_<p.length;++_)for(y=p[_],v=_+1;v<p.length;++v)[y,k=p[v]]in g||f.push({sets:[y,k],size:0});return f}(f),p),y=[],k=[];for(N in v)v.hasOwnProperty(N)&&(y.push(v[N].x),y.push(v[N].y),k.push(N));for(var J=hn(function(H){for(var $={},W=0;W<k.length;++W){var S=k[W];$[S]={x:H[2*W],y:H[2*W+1],radius:v[S].radius}}return _($,f)},y,p).x,L=0;L<k.length;++L)v[N=k[L]].x=J[2*L],v[N].y=J[2*L+1];return v}function nn(f,p,g){return Math.min(f,p)*Math.min(f,p)*Math.PI<=g+1e-10?Math.abs(f-p):function Qt(f,p,g,_){var v=(_=_||{}).maxIterations||100,y=_.tolerance||1e-10,k=f(p),N=f(g),E=g-p;if(k*N>0)throw"Initial bisect points must have opposite signs";if(0===k)return p;if(0===N)return g;for(var J=0;J<v;++J){var L=p+(E/=2),H=f(L);if(H*k>=0&&(p=L),Math.abs(E)<y||0===H)return L}return p+E}(function(_){return un(f,p,_)-g},0,f+p)}function ie(f,p){var g=de(f,p),_=p.lossFunction||Cn;if(f.length>=8){var v=function pe(f,p){var y,g=(p=p||{}).restarts||10,_=[],v={};for(y=0;y<f.length;++y){var k=f[y];1==k.sets.length&&(v[k.sets[0]]=_.length,_.push(k))}var N=function Kn(f,p,g){var _=St(p.length,p.length),v=St(p.length,p.length);return f.filter(function(y){return 2==y.sets.length}).map(function(y){var k=g[y.sets[0]],N=g[y.sets[1]],L=nn(Math.sqrt(p[k].size/Math.PI),Math.sqrt(p[N].size/Math.PI),y.size);_[k][N]=_[N][k]=L;var H=0;y.size+1e-10>=Math.min(p[k].size,p[N].size)?H=1:y.size<=1e-10&&(H=-1),v[k][N]=v[N][k]=H}),{distances:_,constraints:v}}(f,_,v),E=N.distances,J=N.constraints,L=_n(E.map(_n))/E.length;E=E.map(function(gt){return gt.map(function(kt){return kt/L})});var $,W,H=function(gt,kt){return function ee(f,p,g,_){var y,v=0;for(y=0;y<p.length;++y)p[y]=0;for(y=0;y<g.length;++y)for(var k=f[2*y],N=f[2*y+1],E=y+1;E<g.length;++E){var J=f[2*E],L=f[2*E+1],H=g[y][E],$=_[y][E],W=(J-k)*(J-k)+(L-N)*(L-N),S=Math.sqrt(W),G=W-H*H;$>0&&S<=H||$<0&&S>=H||(v+=2*G*G,p[2*y]+=4*G*(k-J),p[2*y+1]+=4*G*(N-L),p[2*E]+=4*G*(J-k),p[2*E+1]+=4*G*(L-N))}return v}(gt,kt,E,J)};for(y=0;y<g;++y)W=xt(H,Ut(2*E.length).map(Math.random),p),(!$||W.fx<$.fx)&&($=W);var G=$.x,it={};for(y=0;y<_.length;++y){var O=_[y];it[O.sets[0]]={x:G[2*y]*L,y:G[2*y+1]*L,radius:Math.sqrt(O.size/Math.PI)}}if(p.history)for(y=0;y<p.history.length;++y)Wt(p.history[y].x,L);return it}(f,p);_(v,f)+1e-8<_(g,f)&&(g=v)}return g}function de(f,p){for(var y,g=p&&p.lossFunction?p.lossFunction:Cn,_={},v={},k=0;k<f.length;++k){var N=f[k];1==N.sets.length&&(_[y=N.sets[0]]={x:1e10,y:1e10,rowid:_.length,size:N.size,radius:Math.sqrt(N.size/Math.PI)},v[y]=[])}for(f=f.filter(function(wn){return 2==wn.sets.length}),k=0;k<f.length;++k){var E=f[k],J=E.hasOwnProperty("weight")?E.weight:1,L=E.sets[0],H=E.sets[1];E.size+1e-10>=Math.min(_[L].size,_[H].size)&&(J=0),v[L].push({set:H,size:E.size,weight:J}),v[H].push({set:L,size:E.size,weight:J})}var $=[];for(y in v)if(v.hasOwnProperty(y)){var W=0;for(k=0;k<v[y].length;++k)W+=v[y][k].size*v[y][k].weight;$.push({set:y,size:W})}function S(wn,m){return m.size-wn.size}$.sort(S);var G={};function it(wn){return wn.set in G}function O(wn,m){_[m].x=wn.x,_[m].y=wn.y,G[m]=!0}for(O({x:0,y:0},$[0].set),k=1;k<$.length;++k){var gt=$[k].set,kt=v[gt].filter(it);if(y=_[gt],kt.sort(S),0===kt.length)throw"ERROR: missing pairwise overlap information";for(var pt=[],st=0;st<kt.length;++st){var Ht=_[kt[st].set],Gt=nn(y.radius,Ht.radius,kt[st].size);pt.push({x:Ht.x+Gt,y:Ht.y}),pt.push({x:Ht.x-Gt,y:Ht.y}),pt.push({y:Ht.y+Gt,x:Ht.x}),pt.push({y:Ht.y-Gt,x:Ht.x});for(var on=st+1;on<kt.length;++on)for(var vn=_[kt[on].set],yn=nn(y.radius,vn.radius,kt[on].size),An=Tt({x:Ht.x,y:Ht.y,radius:Gt},{x:vn.x,y:vn.y,radius:yn}),rn=0;rn<An.length;++rn)pt.push(An[rn])}var jt=1e50,an=pt[0];for(st=0;st<pt.length;++st){_[gt].x=pt[st].x,_[gt].y=pt[st].y;var Fn=g(_,f);Fn<jt&&(jt=Fn,an=pt[st])}O(an,gt)}return _}function Cn(f,p){var g=0;for(var v=0;v<p.length;++v){var k,y=p[v];if(1!=y.sets.length){if(2==y.sets.length){var N=f[y.sets[0]],E=f[y.sets[1]];k=un(N.radius,E.radius,Mt(N,E))}else k=$t(y.sets.map(function(H){return f[H]}));g+=(y.hasOwnProperty("weight")?y.weight:1)*(k-y.size)*(k-y.size)}}return g}function re(f,p,g){var _;if(f.sort(null===g?function(G,it){return it.radius-G.radius}:g),f.length>0){var v=f[0].x,y=f[0].y;for(_=0;_<f.length;++_)f[_].x-=v,f[_].y-=y}if(2==f.length&&Mt(f[0],f[1])<Math.abs(f[1].radius-f[0].radius)&&(f[1].x=f[0].x+f[0].radius-f[1].radius-1e-10,f[1].y=f[0].y),f.length>1){var L,H,N=Math.atan2(f[1].x,f[1].y)-p,E=Math.cos(N),J=Math.sin(N);for(_=0;_<f.length;++_)f[_].x=E*(L=f[_].x)-J*(H=f[_].y),f[_].y=J*L+E*H}if(f.length>2){for(var $=Math.atan2(f[2].x,f[2].y)-p;$<0;)$+=2*Math.PI;for(;$>2*Math.PI;)$-=2*Math.PI;if($>Math.PI){var W=f[1].y/(1e-10+f[1].x);for(_=0;_<f.length;++_){var S=(f[_].x+W*f[_].y)/(1+W*W);f[_].x=2*S-f[_].x,f[_].y=2*S*W-f[_].y}}}}function Vn(f){function p(J){return J.parent!==J&&(J.parent=p(J.parent)),J.parent}f.map(function(J){J.parent=J});for(var _=0;_<f.length;++_)for(var v=_+1;v<f.length;++v){var y=f[_].radius+f[v].radius;Mt(f[_],f[v])+1e-10<y&&(L=f[_],H=void 0,$=void 0,H=p(f[v]),$=p(L),H.parent=$)}var L,H,$,N,k={};for(_=0;_<f.length;++_)(N=p(f[_]).parent.setid)in k||(k[N]=[]),k[N].push(f[_]);f.map(function(J){delete J.parent});var E=[];for(N in k)k.hasOwnProperty(N)&&E.push(k[N]);return E}function Gn(f){var p=function(g){return{max:Math.max.apply(null,f.map(function(y){return y[g]+y.radius})),min:Math.min.apply(null,f.map(function(y){return y[g]-y.radius}))}};return{xRange:p("x"),yRange:p("y")}}function oe(f,p,g){null===p&&(p=Math.PI/2);var v,y,_=[];for(y in f)if(f.hasOwnProperty(y)){var k=f[y];_.push({x:k.x,y:k.y,radius:k.radius,setid:y})}var N=Vn(_);for(v=0;v<N.length;++v){re(N[v],p,g);var E=Gn(N[v]);N[v].size=(E.xRange.max-E.xRange.min)*(E.yRange.max-E.yRange.min),N[v].bounds=E}N.sort(function(S,G){return G.size-S.size});var J=(_=N[0]).bounds,L=(J.xRange.max-J.xRange.min)/50;function H(S,G,it){if(S){var gt,kt,pt,O=S.bounds;G?gt=J.xRange.max-O.xRange.min+L:(gt=J.xRange.max-O.xRange.max,(pt=(O.xRange.max-O.xRange.min)/2-(J.xRange.max-J.xRange.min)/2)<0&&(gt+=pt)),it?kt=J.yRange.max-O.yRange.min+L:(kt=J.yRange.max-O.yRange.max,(pt=(O.yRange.max-O.yRange.min)/2-(J.yRange.max-J.yRange.min)/2)<0&&(kt+=pt));for(var st=0;st<S.length;++st)S[st].x+=gt,S[st].y+=kt,_.push(S[st])}}for(var $=1;$<N.length;)H(N[$],!0,!1),H(N[$+1],!1,!0),H(N[$+2],!0,!0),$+=3,J=Gn(_);var W={};for(v=0;v<_.length;++v)W[_[v].setid]=_[v];return W}function Xn(f,p,g,_){var v=[],y=[];for(var k in f)f.hasOwnProperty(k)&&(y.push(k),v.push(f[k]));p-=2*_,g-=2*_;var N=Gn(v),E=N.xRange,J=N.yRange;if(E.max==E.min||J.max==J.min)return console.log("not scaling solution: zero size detected"),f;for(var $=Math.min(g/(J.max-J.min),p/(E.max-E.min)),W=(p-(E.max-E.min)*$)/2,S=(g-(J.max-J.min)*$)/2,G={},it=0;it<v.length;++it){var O=v[it];G[y[it]]={radius:$*O.radius,x:_+W+(O.x-E.min)*$,y:_+S+(O.y-J.min)*$}}return G}function Rn(f,p){return function(){for(var H,g=mt.select(this),_=g.datum(),v=f[_.sets[0]].radius||50,y=p(_)||"",k=y.split(/\s+/).reverse(),E=(y.length+k.length)/3,J=k.pop(),L=[J],$=0,S=g.text(null).append("tspan").text(J);J=k.pop();)L.push(J),H=L.join(" "),S.text(H),H.length>E&&S.node().getComputedTextLength()>v&&(L.pop(),S.text(L.join(" ")),L=[J],S=g.append("tspan").text(J),$++);var G=.35-1.1*$/2,it=g.attr("x"),O=g.attr("y");g.selectAll("tspan").attr("x",it).attr("y",O).attr("dy",function(gt,kt){return G+1.1*kt+"em"})}}function qn(f,p,g){var v,y,_=p[0].radius-Mt(p[0],f);for(v=1;v<p.length;++v)(y=p[v].radius-Mt(p[v],f))<=_&&(_=y);for(v=0;v<g.length;++v)(y=Mt(g[v],f)-g[v].radius)<=_&&(_=y);return _}function dn(f,p){var _,g=[];for(_=0;_<f.length;++_){var v=f[_];g.push({x:v.x,y:v.y}),g.push({x:v.x+v.radius/2,y:v.y}),g.push({x:v.x-v.radius/2,y:v.y}),g.push({x:v.x,y:v.y+v.radius/2}),g.push({x:v.x,y:v.y-v.radius/2})}var y=g[0],k=qn(g[0],f,p);for(_=1;_<g.length;++_){var N=qn(g[_],f,p);N>=k&&(y=g[_],k=N)}var E=hn(function($){return-1*qn({x:$[0],y:$[1]},f,p)},[y.x,y.y],{maxIterations:500,minErrorDelta:1e-10}).x,J={x:E[0],y:E[1]},L=!0;for(_=0;_<f.length;++_)if(Mt(J,f[_])>f[_].radius){L=!1;break}for(_=0;_<p.length;++_)if(Mt(J,p[_])<p[_].radius){L=!1;break}if(!L)if(1==f.length)J={x:f[0].x,y:f[0].y};else{var H={};$t(f,H),J=0===H.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==H.arcs.length?{x:H.arcs[0].circle.x,y:H.arcs[0].circle.y}:p.length?dn(f,[]):Ct(H.arcs.map(function($){return $.p1}))}return J}function gn(f){var p={},g=[];for(var _ in f)g.push(_),p[_]=[];for(var v=0;v<g.length;v++)for(var y=f[g[v]],k=v+1;k<g.length;++k){var N=f[g[k]],E=Mt(y,N);E+N.radius<=y.radius+1e-10?p[g[k]].push(g[v]):E+y.radius<=N.radius+1e-10&&p[g[v]].push(g[k])}return p}function ae(f,p){for(var g={},_=gn(f),v=0;v<p.length;++v){for(var y=p[v].sets,k={},N={},E=0;E<y.length;++E){k[y[E]]=!0;for(var J=_[y[E]],L=0;L<J.length;++L)N[J[L]]=!0}var H=[],$=[];for(var W in f)W in k?H.push(f[W]):W in N||$.push(f[W]);var S=dn(H,$);g[y]=S,S.disjoint&&p[v].size>0&&console.log("WARNING: area "+y+" not represented on screen")}return g}function ge(f,p,g){var _=[];return _.push("\nM",f,p),_.push("\nm",-g,0),_.push("\na",g,g,0,1,0,2*g,0),_.push("\na",g,g,0,1,0,2*-g,0),_.join(" ")}function En(f){var p=f.split(" ");return{x:parseFloat(p[1]),y:parseFloat(p[2]),radius:-parseFloat(p[4])}}function Wn(f){var p={};$t(f,p);var g=p.arcs;if(0===g.length)return"M 0 0";if(1==g.length){var _=g[0].circle;return ge(_.x,_.y,_.radius)}for(var v=["\nM",g[0].p2.x,g[0].p2.y],y=0;y<g.length;++y){var k=g[y],N=k.circle.radius;v.push("\nA",N,N,0,k.width>N?1:0,1,k.p1.x,k.p1.y)}return v.join(" ")}ot.intersectionArea=$t,ot.circleCircleIntersection=Tt,ot.circleOverlap=un,ot.circleArea=Kt,ot.distance=Mt,ot.venn=Jt,ot.greedyLayout=de,ot.scaleSolution=Xn,ot.normalizeSolution=oe,ot.bestInitialLayout=ie,ot.lossFunction=Cn,ot.disjointCluster=Vn,ot.distanceFromIntersectArea=nn,ot.VennDiagram=function $n(){var f=600,p=350,g=15,_=1e3,v=Math.PI/2,y=!0,k=!0,N=!0,E=null,J=null,L={},H=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],$=0,W=function(O){if(O in L)return L[O];var gt=L[O]=H[$];return($+=1)>=H.length&&($=0),gt},S=Jt,G=Cn;function it(O){var gt=O.datum(),kt={};gt.forEach(function(U){0==U.size&&1==U.sets.length&&(kt[U.sets[0]]=1)}),gt=gt.filter(function(U){return!U.sets.some(function(j){return j in kt})});var pt={},st={};if(gt.length>0){var Ht=S(gt,{lossFunction:G});y&&(Ht=oe(Ht,v,J)),pt=Xn(Ht,f,p,g),st=ae(pt,gt)}var Gt={};function on(U){return U.sets in Gt?Gt[U.sets]:1==U.sets.length?""+U.sets[0]:void 0}gt.forEach(function(U){U.label&&(Gt[U.sets]=U.label)}),O.selectAll("svg").data([pt]).enter().append("svg");var vn=O.select("svg").attr("width",f).attr("height",p),yn={},An=!1;vn.selectAll(".venn-area path").each(function(U){var j=mt.select(this).attr("d");1==U.sets.length&&j&&(An=!0,yn[U.sets[0]]=En(j))});var rn=function(U){return function(j){return Wn(U.sets.map(function(V){var yt=yn[V],wt=pt[V];return yt||(yt={x:f/2,y:p/2,radius:1}),wt||(wt={x:f/2,y:p/2,radius:1}),{x:yt.x*(1-j)+wt.x*j,y:yt.y*(1-j)+wt.y*j,radius:yt.radius*(1-j)+wt.radius*j}}))}},jt=vn.selectAll(".venn-area").data(gt,function(U){return U.sets}),an=jt.enter().append("g").attr("class",function(U){return"venn-area venn-"+(1==U.sets.length?"circle":"intersection")}).attr("data-venn-sets",function(U){return U.sets.join("_")}),Fn=an.append("path"),wn=an.append("text").attr("class","label").text(function(U){return on(U)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",f/2).attr("y",p/2);N&&(Fn.style("fill-opacity","0").filter(function(U){return 1==U.sets.length}).style("fill",function(U){return W(U.sets)}).style("fill-opacity",".25"),wn.style("fill",function(U){return 1==U.sets.length?W(U.sets):"#444"}));var m=O;An?(m=O.transition("venn").duration(_)).selectAll("path").attrTween("d",rn):m.selectAll("path").attr("d",function(U){return Wn(U.sets.map(function(j){return pt[j]}))});var M=m.selectAll("text").filter(function(U){return U.sets in st}).text(function(U){return on(U)}).attr("x",function(U){return Math.floor(st[U.sets].x)}).attr("y",function(U){return Math.floor(st[U.sets].y)});k&&(An?"on"in M?M.on("end",Rn(pt,on)):M.each("end",Rn(pt,on)):M.each(Rn(pt,on)));var F=jt.exit().transition("venn").duration(_).remove();F.selectAll("path").attrTween("d",rn);var at=F.selectAll("text").attr("x",f/2).attr("y",p/2);return null!==E&&(wn.style("font-size","0px"),M.style("font-size",E),at.style("font-size","0px")),{circles:pt,textCentres:st,nodes:jt,enter:an,update:m,exit:F}}return it.wrap=function(O){return arguments.length?(k=O,it):k},it.width=function(O){return arguments.length?(f=O,it):f},it.height=function(O){return arguments.length?(p=O,it):p},it.padding=function(O){return arguments.length?(g=O,it):g},it.colours=function(O){return arguments.length?(W=O,it):W},it.fontSize=function(O){return arguments.length?(E=O,it):E},it.duration=function(O){return arguments.length?(_=O,it):_},it.layoutFunction=function(O){return arguments.length?(S=O,it):S},it.normalize=function(O){return arguments.length?(y=O,it):y},it.styled=function(O){return arguments.length?(N=O,it):N},it.orientation=function(O){return arguments.length?(v=O,it):v},it.orientationOrder=function(O){return arguments.length?(J=O,it):J},it.lossFunction=function(O){return arguments.length?(G=O,it):G},it},ot.wrapText=Rn,ot.computeTextCentres=ae,ot.computeTextCentre=dn,ot.sortAreas=function se(f,p){for(var g=gn(f.selectAll("svg").datum()),_={},v=0;v<p.sets.length;++v){var y=p.sets[v];for(var k in g)for(var N=g[k],E=0;E<N.length;++E)if(N[E]==y){_[k]=!0;break}}function J(L){for(var H=0;H<L.length;++H)if(!(L[H]in _))return!1;return!0}f.selectAll("g").sort(function(L,H){return L.sets.length!=H.sets.length?L.sets.length-H.sets.length:L==p?J(H.sets)?-1:1:H==p?J(L.sets)?1:-1:H.size-L.size})},ot.circlePath=ge,ot.circleFromPath=En,ot.intersectionAreaPath=Wn,Object.defineProperty(ot,"__esModule",{value:!0})}(qt,B(2417),B(4332))},3281:(zn,qt,B)=>{"use strict";B.d(qt,{Z:()=>$t});var ot=B(4245),mt=B(7178);function Rt(Bt){return function(){var Et=this.ownerDocument,Kt=this.namespaceURI;return Kt===mt.P&&Et.documentElement.namespaceURI===mt.P?Et.createElement(Bt):Et.createElementNS(Kt,Bt)}}function X(Bt){return function(){return this.ownerDocument.createElementNS(Bt.space,Bt.local)}}function $t(Bt){var Et=(0,ot.Z)(Bt);return(Et.local?X:Rt)(Et)}},2417:(zn,qt,B)=>{"use strict";B.r(qt),B.d(qt,{clientPoint:()=>Tt,create:()=>X,creator:()=>ot.Z,customEvent:()=>Mt._H,event:()=>Mt.B,local:()=>Bt,matcher:()=>Kt.Z,mouse:()=>Ct,namespace:()=>Qt.Z,namespaces:()=>Ut.Z,select:()=>Rt,selectAll:()=>St,selection:()=>mt.ZP,selector:()=>It.Z,selectorAll:()=>_n.Z,style:()=>Wt.S,touch:()=>Lt,touches:()=>hn,window:()=>xn.Z});var ot=B(3281),mt=B(6771);function Rt(xt){return"string"==typeof xt?new mt.Y1([[document.querySelector(xt)]],[document.documentElement]):new mt.Y1([[xt]],mt.Jz)}function X(xt){return Rt((0,ot.Z)(xt).call(document.documentElement))}var $t=0;function Bt(){return new Et}function Et(){this._="@"+(++$t).toString(36)}Et.prototype=Bt.prototype={constructor:Et,get:function(xt){for(var Jt=this._;!(Jt in xt);)if(!(xt=xt.parentNode))return;return xt[Jt]},set:function(xt,Jt){return xt[this._]=Jt},remove:function(xt){return this._ in xt&&delete xt[this._]},toString:function(){return this._}};var Kt=B(6762),Mt=B(4015);function un(){for(var Jt,xt=Mt.B;Jt=xt.sourceEvent;)xt=Jt;return xt}function Tt(xt,Jt){var pn=xt.ownerSVGElement||xt;if(pn.createSVGPoint){var nn=pn.createSVGPoint();return nn.x=Jt.clientX,nn.y=Jt.clientY,[(nn=nn.matrixTransform(xt.getScreenCTM().inverse())).x,nn.y]}var Jn=xt.getBoundingClientRect();return[Jt.clientX-Jn.left-xt.clientLeft,Jt.clientY-Jn.top-xt.clientTop]}function Ct(xt){var Jt=un();return Jt.changedTouches&&(Jt=Jt.changedTouches[0]),Tt(xt,Jt)}var Qt=B(4245),Ut=B(7178);function St(xt){return"string"==typeof xt?new mt.Y1([document.querySelectorAll(xt)],[document.documentElement]):new mt.Y1([xt??[]],mt.Jz)}var It=B(9425),_n=B(794),Wt=B(6);function Lt(xt,Jt,pn){arguments.length<3&&(pn=Jt,Jt=un().changedTouches);for(var Kn,nn=0,Jn=Jt?Jt.length:0;nn<Jn;++nn)if((Kn=Jt[nn]).identifier===pn)return Tt(xt,Kn);return null}function hn(xt,Jt){null==Jt&&(Jt=un().touches);for(var pn=0,nn=Jt?Jt.length:0,Jn=new Array(nn);pn<nn;++pn)Jn[pn]=Tt(xt,Jt[pn]);return Jn}var xn=B(5176)},6762:(zn,qt,B)=>{"use strict";function ot(mt){return function(){return this.matches(mt)}}B.d(qt,{Z:()=>ot})},4245:(zn,qt,B)=>{"use strict";B.d(qt,{Z:()=>mt});var ot=B(7178);function mt(Rt){var X=Rt+="",$t=X.indexOf(":");return $t>=0&&"xmlns"!==(X=Rt.slice(0,$t))&&(Rt=Rt.slice($t+1)),ot.Z.hasOwnProperty(X)?{space:ot.Z[X],local:Rt}:Rt}},7178:(zn,qt,B)=>{"use strict";B.d(qt,{P:()=>ot,Z:()=>mt});var ot="http://www.w3.org/1999/xhtml";const mt={svg:"http://www.w3.org/2000/svg",xhtml:ot,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},6771:(zn,qt,B)=>{"use strict";B.d(qt,{Y1:()=>an,ZP:()=>wn,Jz:()=>jt});var ot=B(9425),Rt=B(794),$t=B(6762);function Et(m){return new Array(m.length)}function Mt(m,M){this.ownerDocument=m.ownerDocument,this.namespaceURI=m.namespaceURI,this._next=null,this._parent=m,this.__data__=M}function Ct(m,M,F,at,U,j){for(var V,ct=0,yt=M.length,wt=j.length;ct<wt;++ct)(V=M[ct])?(V.__data__=j[ct],at[ct]=V):F[ct]=new Mt(m,j[ct]);for(;ct<yt;++ct)(V=M[ct])&&(U[ct]=V)}function Qt(m,M,F,at,U,j,ct){var V,yt,sn,wt={},Vt=M.length,Un=j.length,Zn=new Array(Vt);for(V=0;V<Vt;++V)(yt=M[V])&&(Zn[V]=sn="$"+ct.call(yt,yt.__data__,V,M),sn in wt?U[V]=yt:wt[sn]=yt);for(V=0;V<Un;++V)(yt=wt[sn="$"+ct.call(m,j[V],V,j)])?(at[V]=yt,yt.__data__=j[V],wt[sn]=null):F[V]=new Mt(m,j[V]);for(V=0;V<Vt;++V)(yt=M[V])&&wt[Zn[V]]===yt&&(U[V]=yt)}function hn(m,M){return m<M?-1:m>M?1:m>=M?0:NaN}Mt.prototype={constructor:Mt,appendChild:function(m){return this._parent.insertBefore(m,this._next)},insertBefore:function(m,M){return this._parent.insertBefore(m,M)},querySelector:function(m){return this._parent.querySelector(m)},querySelectorAll:function(m){return this._parent.querySelectorAll(m)}};var Kn=B(4245);function ee(m){return function(){this.removeAttribute(m)}}function ie(m){return function(){this.removeAttributeNS(m.space,m.local)}}function pe(m,M){return function(){this.setAttribute(m,M)}}function de(m,M){return function(){this.setAttributeNS(m.space,m.local,M)}}function Cn(m,M){return function(){var F=M.apply(this,arguments);null==F?this.removeAttribute(m):this.setAttribute(m,F)}}function re(m,M){return function(){var F=M.apply(this,arguments);null==F?this.removeAttributeNS(m.space,m.local):this.setAttributeNS(m.space,m.local,F)}}var Gn=B(6);function oe(m){return function(){delete this[m]}}function Xn(m,M){return function(){this[m]=M}}function $n(m,M){return function(){var F=M.apply(this,arguments);null==F?delete this[m]:this[m]=F}}function qn(m){return m.trim().split(/^|\s+/)}function dn(m){return m.classList||new gn(m)}function gn(m){this._node=m,this._names=qn(m.getAttribute("class")||"")}function ae(m,M){for(var F=dn(m),at=-1,U=M.length;++at<U;)F.add(M[at])}function se(m,M){for(var F=dn(m),at=-1,U=M.length;++at<U;)F.remove(M[at])}function ge(m){return function(){ae(this,m)}}function En(m){return function(){se(this,m)}}function Wn(m,M){return function(){(M.apply(this,arguments)?ae:se)(this,m)}}function p(){this.textContent=""}function g(m){return function(){this.textContent=m}}function _(m){return function(){var M=m.apply(this,arguments);this.textContent=M??""}}function y(){this.innerHTML=""}function k(m){return function(){this.innerHTML=m}}function N(m){return function(){var M=m.apply(this,arguments);this.innerHTML=M??""}}function J(){this.nextSibling&&this.parentNode.appendChild(this)}function H(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}gn.prototype={add:function(m){this._names.indexOf(m)<0&&(this._names.push(m),this._node.setAttribute("class",this._names.join(" ")))},remove:function(m){var M=this._names.indexOf(m);M>=0&&(this._names.splice(M,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(m){return this._names.indexOf(m)>=0}};var W=B(3281);function G(){return null}function O(){var m=this.parentNode;m&&m.removeChild(this)}function kt(){var m=this.cloneNode(!1),M=this.parentNode;return M?M.insertBefore(m,this.nextSibling):m}function pt(){var m=this.cloneNode(!0),M=this.parentNode;return M?M.insertBefore(m,this.nextSibling):m}var Gt=B(4015),on=B(5176);function vn(m,M,F){var at=(0,on.Z)(m),U=at.CustomEvent;"function"==typeof U?U=new U(M,F):(U=at.document.createEvent("Event"),F?(U.initEvent(M,F.bubbles,F.cancelable),U.detail=F.detail):U.initEvent(M,!1,!1)),m.dispatchEvent(U)}function yn(m,M){return function(){return vn(this,m,M)}}function An(m,M){return function(){return vn(this,m,M.apply(this,arguments))}}var jt=[null];function an(m,M){this._groups=m,this._parents=M}function Fn(){return new an([[document.documentElement]],jt)}an.prototype=Fn.prototype={constructor:an,select:function mt(m){"function"!=typeof m&&(m=(0,ot.Z)(m));for(var M=this._groups,F=M.length,at=new Array(F),U=0;U<F;++U)for(var yt,wt,j=M[U],ct=j.length,V=at[U]=new Array(ct),Vt=0;Vt<ct;++Vt)(yt=j[Vt])&&(wt=m.call(yt,yt.__data__,Vt,j))&&("__data__"in yt&&(wt.__data__=yt.__data__),V[Vt]=wt);return new an(at,this._parents)},selectAll:function X(m){"function"!=typeof m&&(m=(0,Rt.Z)(m));for(var M=this._groups,F=M.length,at=[],U=[],j=0;j<F;++j)for(var yt,ct=M[j],V=ct.length,wt=0;wt<V;++wt)(yt=ct[wt])&&(at.push(m.call(yt,yt.__data__,wt,ct)),U.push(yt));return new an(at,U)},filter:function Bt(m){"function"!=typeof m&&(m=(0,$t.Z)(m));for(var M=this._groups,F=M.length,at=new Array(F),U=0;U<F;++U)for(var yt,j=M[U],ct=j.length,V=at[U]=[],wt=0;wt<ct;++wt)(yt=j[wt])&&m.call(yt,yt.__data__,wt,j)&&V.push(yt);return new an(at,this._parents)},data:function Ut(m,M){if(!m)return sn=new Array(this.size()),wt=-1,this.each(function(fi){sn[++wt]=fi}),sn;var F=M?Qt:Ct,at=this._parents,U=this._groups;"function"!=typeof m&&(m=function un(m){return function(){return m}}(m));for(var j=U.length,ct=new Array(j),V=new Array(j),yt=new Array(j),wt=0;wt<j;++wt){var Vt=at[wt],Un=U[wt],Zn=Un.length,sn=m.call(Vt,Vt&&Vt.__data__,wt,at),Pn=sn.length,me=V[wt]=new Array(Pn),be=ct[wt]=new Array(Pn);F(Vt,Un,me,be,yt[wt]=new Array(Zn),sn,M);for(var Ae,Ie,le=0,ue=0;le<Pn;++le)if(Ae=me[le]){for(le>=ue&&(ue=le+1);!(Ie=be[ue])&&++ue<Pn;);Ae._next=Ie||null}}return(ct=new an(ct,at))._enter=V,ct._exit=yt,ct},enter:function Kt(){return new an(this._enter||this._groups.map(Et),this._parents)},exit:function St(){return new an(this._exit||this._groups.map(Et),this._parents)},join:function It(m,M,F){var at=this.enter(),U=this,j=this.exit();return at="function"==typeof m?m(at):at.append(m+""),null!=M&&(U=M(U)),null==F?j.remove():F(j),at&&U?at.merge(U).order():U},merge:function _n(m){for(var M=this._groups,F=m._groups,at=M.length,j=Math.min(at,F.length),ct=new Array(at),V=0;V<j;++V)for(var Zn,yt=M[V],wt=F[V],Vt=yt.length,Un=ct[V]=new Array(Vt),sn=0;sn<Vt;++sn)(Zn=yt[sn]||wt[sn])&&(Un[sn]=Zn);for(;V<at;++V)ct[V]=M[V];return new an(ct,this._parents)},order:function Wt(){for(var m=this._groups,M=-1,F=m.length;++M<F;)for(var ct,at=m[M],U=at.length-1,j=at[U];--U>=0;)(ct=at[U])&&(j&&4^ct.compareDocumentPosition(j)&&j.parentNode.insertBefore(ct,j),j=ct);return this},sort:function Lt(m){function M(Un,Zn){return Un&&Zn?m(Un.__data__,Zn.__data__):!Un-!Zn}m||(m=hn);for(var F=this._groups,at=F.length,U=new Array(at),j=0;j<at;++j){for(var wt,ct=F[j],V=ct.length,yt=U[j]=new Array(V),Vt=0;Vt<V;++Vt)(wt=ct[Vt])&&(yt[Vt]=wt);yt.sort(M)}return new an(U,this._parents).order()},call:function xn(){var m=arguments[0];return arguments[0]=this,m.apply(null,arguments),this},nodes:function xt(){var m=new Array(this.size()),M=-1;return this.each(function(){m[++M]=this}),m},node:function Jt(){for(var m=this._groups,M=0,F=m.length;M<F;++M)for(var at=m[M],U=0,j=at.length;U<j;++U){var ct=at[U];if(ct)return ct}return null},size:function pn(){var m=0;return this.each(function(){++m}),m},empty:function nn(){return!this.node()},each:function Jn(m){for(var M=this._groups,F=0,at=M.length;F<at;++F)for(var V,U=M[F],j=0,ct=U.length;j<ct;++j)(V=U[j])&&m.call(V,V.__data__,j,U);return this},attr:function Vn(m,M){var F=(0,Kn.Z)(m);if(arguments.length<2){var at=this.node();return F.local?at.getAttributeNS(F.space,F.local):at.getAttribute(F)}return this.each((null==M?F.local?ie:ee:"function"==typeof M?F.local?re:Cn:F.local?de:pe)(F,M))},style:Gn.Z,property:function Rn(m,M){return arguments.length>1?this.each((null==M?oe:"function"==typeof M?$n:Xn)(m,M)):this.node()[m]},classed:function f(m,M){var F=qn(m+"");if(arguments.length<2){for(var at=dn(this.node()),U=-1,j=F.length;++U<j;)if(!at.contains(F[U]))return!1;return!0}return this.each(("function"==typeof M?Wn:M?ge:En)(F,M))},text:function v(m){return arguments.length?this.each(null==m?p:("function"==typeof m?_:g)(m)):this.node().textContent},html:function E(m){return arguments.length?this.each(null==m?y:("function"==typeof m?N:k)(m)):this.node().innerHTML},raise:function L(){return this.each(J)},lower:function $(){return this.each(H)},append:function S(m){var M="function"==typeof m?m:(0,W.Z)(m);return this.select(function(){return this.appendChild(M.apply(this,arguments))})},insert:function it(m,M){var F="function"==typeof m?m:(0,W.Z)(m),at=null==M?G:"function"==typeof M?M:(0,ot.Z)(M);return this.select(function(){return this.insertBefore(F.apply(this,arguments),at.apply(this,arguments)||null)})},remove:function gt(){return this.each(O)},clone:function st(m){return this.select(m?pt:kt)},datum:function Ht(m){return arguments.length?this.property("__data__",m):this.node().__data__},on:Gt.ZP,dispatch:function rn(m,M){return this.each(("function"==typeof M?An:yn)(m,M))}};const wn=Fn},4015:(zn,qt,B)=>{"use strict";B.d(qt,{B:()=>mt,ZP:()=>Mt,_H:()=>un});var ot={},mt=null;function X(Tt,Ct,Qt){return Tt=$t(Tt,Ct,Qt),function(Ut){var St=Ut.relatedTarget;(!St||St!==this&&!(8&St.compareDocumentPosition(this)))&&Tt.call(this,Ut)}}function $t(Tt,Ct,Qt){return function(Ut){var St=mt;mt=Ut;try{Tt.call(this,this.__data__,Ct,Qt)}finally{mt=St}}}function Bt(Tt){return Tt.trim().split(/^|\s+/).map(function(Ct){var Qt="",Ut=Ct.indexOf(".");return Ut>=0&&(Qt=Ct.slice(Ut+1),Ct=Ct.slice(0,Ut)),{type:Ct,name:Qt}})}function Et(Tt){return function(){var Ct=this.__on;if(Ct){for(var It,Qt=0,Ut=-1,St=Ct.length;Qt<St;++Qt)It=Ct[Qt],Tt.type&&It.type!==Tt.type||It.name!==Tt.name?Ct[++Ut]=It:this.removeEventListener(It.type,It.listener,It.capture);++Ut?Ct.length=Ut:delete this.__on}}}function Kt(Tt,Ct,Qt){var Ut=ot.hasOwnProperty(Tt.type)?X:$t;return function(St,It,_n){var Lt,Wt=this.__on,hn=Ut(Ct,It,_n);if(Wt)for(var xn=0,xt=Wt.length;xn<xt;++xn)if((Lt=Wt[xn]).type===Tt.type&&Lt.name===Tt.name)return this.removeEventListener(Lt.type,Lt.listener,Lt.capture),this.addEventListener(Lt.type,Lt.listener=hn,Lt.capture=Qt),void(Lt.value=Ct);this.addEventListener(Tt.type,hn,Qt),Lt={type:Tt.type,name:Tt.name,value:Ct,listener:hn,capture:Qt},Wt?Wt.push(Lt):this.__on=[Lt]}}function Mt(Tt,Ct,Qt){var St,_n,Ut=Bt(Tt+""),It=Ut.length;if(!(arguments.length<2)){for(Wt=Ct?Kt:Et,null==Qt&&(Qt=!1),St=0;St<It;++St)this.each(Wt(Ut[St],Ct,Qt));return this}var Wt=this.node().__on;if(Wt)for(var xn,Lt=0,hn=Wt.length;Lt<hn;++Lt)for(St=0,xn=Wt[Lt];St<It;++St)if((_n=Ut[St]).type===xn.type&&_n.name===xn.name)return xn.value}function un(Tt,Ct,Qt,Ut){var St=mt;Tt.sourceEvent=mt,mt=Tt;try{return Ct.apply(Qt,Ut)}finally{mt=St}}typeof document<"u"&&("onmouseenter"in document.documentElement||(ot={mouseenter:"mouseover",mouseleave:"mouseout"}))},6:(zn,qt,B)=>{"use strict";B.d(qt,{S:()=>Bt,Z:()=>$t});var ot=B(5176);function mt(Et){return function(){this.style.removeProperty(Et)}}function Rt(Et,Kt,Mt){return function(){this.style.setProperty(Et,Kt,Mt)}}function X(Et,Kt,Mt){return function(){var un=Kt.apply(this,arguments);null==un?this.style.removeProperty(Et):this.style.setProperty(Et,un,Mt)}}function $t(Et,Kt,Mt){return arguments.length>1?this.each((null==Kt?mt:"function"==typeof Kt?X:Rt)(Et,Kt,Mt??"")):Bt(this.node(),Et)}function Bt(Et,Kt){return Et.style.getPropertyValue(Kt)||(0,ot.Z)(Et).getComputedStyle(Et,null).getPropertyValue(Kt)}},9425:(zn,qt,B)=>{"use strict";function ot(){}function mt(Rt){return null==Rt?ot:function(){return this.querySelector(Rt)}}B.d(qt,{Z:()=>mt})},794:(zn,qt,B)=>{"use strict";function ot(){return[]}function mt(Rt){return null==Rt?ot:function(){return this.querySelectorAll(Rt)}}B.d(qt,{Z:()=>mt})},5176:(zn,qt,B)=>{"use strict";function ot(mt){return mt.ownerDocument&&mt.ownerDocument.defaultView||mt.document&&mt||mt.defaultView}B.d(qt,{Z:()=>ot})},4332:(zn,qt,B)=>{"use strict";B.r(qt),B.d(qt,{active:()=>Ee,interrupt:()=>se,transition:()=>oi});var ot=B(6771),mt={value:function(){}};function Rt(){for(var h,o=0,s=arguments.length,l={};o<s;++o){if(!(h=arguments[o]+"")||h in l||/[\s.]/.test(h))throw new Error("illegal type: "+h);l[h]=[]}return new X(l)}function X(o){this._=o}function $t(o,s){return o.trim().split(/^|\s+/).map(function(l){var h="",w=l.indexOf(".");if(w>=0&&(h=l.slice(w+1),l=l.slice(0,w)),l&&!s.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:h}})}function Bt(o,s){for(var w,l=0,h=o.length;l<h;++l)if((w=o[l]).name===s)return w.value}function Et(o,s,l){for(var h=0,w=o.length;h<w;++h)if(o[h].name===s){o[h]=mt,o=o.slice(0,h).concat(o.slice(h+1));break}return null!=l&&o.push({name:s,value:l}),o}X.prototype=Rt.prototype={constructor:X,on:function(o,s){var w,l=this._,h=$t(o+"",l),T=-1,P=h.length;if(!(arguments.length<2)){if(null!=s&&"function"!=typeof s)throw new Error("invalid callback: "+s);for(;++T<P;)if(w=(o=h[T]).type)l[w]=Et(l[w],o.name,s);else if(null==s)for(w in l)l[w]=Et(l[w],o.name,null);return this}for(;++T<P;)if((w=(o=h[T]).type)&&(w=Bt(l[w],o.name)))return w},copy:function(){var o={},s=this._;for(var l in s)o[l]=s[l].slice();return new X(o)},call:function(o,s){if((w=arguments.length-2)>0)for(var w,T,l=new Array(w),h=0;h<w;++h)l[h]=arguments[h+2];if(!this._.hasOwnProperty(o))throw new Error("unknown type: "+o);for(h=0,w=(T=this._[o]).length;h<w;++h)T[h].value.apply(s,l)},apply:function(o,s,l){if(!this._.hasOwnProperty(o))throw new Error("unknown type: "+o);for(var h=this._[o],w=0,T=h.length;w<T;++w)h[w].value.apply(s,l)}};const Kt=Rt;var Qt,Ut,Mt=0,un=0,Tt=0,St=0,It=0,_n=0,Wt="object"==typeof performance&&performance.now?performance:Date,Lt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(o){setTimeout(o,17)};function hn(){return It||(Lt(xn),It=Wt.now()+_n)}function xn(){It=0}function xt(){this._call=this._time=this._next=null}function Jt(o,s,l){var h=new xt;return h.restart(o,s,l),h}function nn(){It=(St=Wt.now())+_n,Mt=un=0;try{!function pn(){hn(),++Mt;for(var s,o=Qt;o;)(s=It-o._time)>=0&&o._call.call(null,s),o=o._next;--Mt}()}finally{Mt=0,function Kn(){for(var o,l,s=Qt,h=1/0;s;)s._call?(h>s._time&&(h=s._time),o=s,s=s._next):(l=s._next,s._next=null,s=o?o._next=l:Qt=l);Ut=o,ee(h)}(),It=0}}function Jn(){var o=Wt.now(),s=o-St;s>1e3&&(_n-=s,St=o)}function ee(o){Mt||(un&&(un=clearTimeout(un)),o-It>24?(o<1/0&&(un=setTimeout(nn,o-Wt.now()-_n)),Tt&&(Tt=clearInterval(Tt))):(Tt||(St=Wt.now(),Tt=setInterval(Jn,1e3)),Mt=1,Lt(nn)))}function ie(o,s,l){var h=new xt;return h.restart(function(w){h.stop(),o(w+s)},s=null==s?0:+s,l),h}xt.prototype=Jt.prototype={constructor:xt,restart:function(o,s,l){if("function"!=typeof o)throw new TypeError("callback is not a function");l=(null==l?hn():+l)+(null==s?0:+s),!this._next&&Ut!==this&&(Ut?Ut._next=this:Qt=this,Ut=this),this._call=o,this._time=l,ee()},stop:function(){this._call&&(this._call=null,this._time=1/0,ee())}};var pe=Kt("start","end","cancel","interrupt"),de=[];function Rn(o,s,l,h,w,T){var P=o.__transition;if(P){if(l in P)return}else o.__transition={};!function ae(o,s,l){var w,h=o.__transition;function P(K){var q,vt,Zt,Dt;if(1!==l.state)return Q();for(q in h)if((Dt=h[q]).name===l.name){if(3===Dt.state)return ie(P);4===Dt.state?(Dt.state=6,Dt.timer.stop(),Dt.on.call("interrupt",o,o.__data__,Dt.index,Dt.group),delete h[q]):+q<s&&(Dt.state=6,Dt.timer.stop(),Dt.on.call("cancel",o,o.__data__,Dt.index,Dt.group),delete h[q])}if(ie(function(){3===l.state&&(l.state=4,l.timer.restart(D,l.delay,l.time),D(K))}),l.state=2,l.on.call("start",o,o.__data__,l.index,l.group),2===l.state){for(l.state=3,w=new Array(Zt=l.tween.length),q=0,vt=-1;q<Zt;++q)(Dt=l.tween[q].value.call(o,o.__data__,l.index,l.group))&&(w[++vt]=Dt);w.length=vt+1}}function D(K){for(var q=K<l.duration?l.ease.call(null,K/l.duration):(l.timer.restart(Q),l.state=5,1),vt=-1,Zt=w.length;++vt<Zt;)w[vt].call(o,q);5===l.state&&(l.on.call("end",o,o.__data__,l.index,l.group),Q())}function Q(){for(var K in l.state=6,l.timer.stop(),delete h[s],h)return;delete o.__transition}h[s]=l,l.timer=Jt(function T(K){l.state=1,l.timer.restart(P,l.delay,l.time),l.delay<=K&&P(K-l.delay)},0,l.time)}(o,l,{name:s,index:h,group:w,on:pe,tween:de,time:T.time,delay:T.delay,duration:T.duration,ease:T.ease,timer:null,state:0})}function qn(o,s){var l=gn(o,s);if(l.state>0)throw new Error("too late; already scheduled");return l}function dn(o,s){var l=gn(o,s);if(l.state>3)throw new Error("too late; already running");return l}function gn(o,s){var l=o.__transition;if(!l||!(l=l[s]))throw new Error("transition not found");return l}function se(o,s){var h,w,P,l=o.__transition,T=!0;if(l){for(P in s=null==s?null:s+"",l)(h=l[P]).name===s?(w=h.state>2&&h.state<5,h.state=6,h.timer.stop(),h.on.call(w?"interrupt":"cancel",o,o.__data__,h.index,h.group),delete l[P]):T=!1;T&&delete o.__transition}}function En(o,s){return o=+o,s=+s,function(l){return o*(1-l)+s*l}}var g,_,v,y,Wn=180/Math.PI,f={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function p(o,s,l,h,w,T){var P,D,Q;return(P=Math.sqrt(o*o+s*s))&&(o/=P,s/=P),(Q=o*l+s*h)&&(l-=o*Q,h-=s*Q),(D=Math.sqrt(l*l+h*h))&&(l/=D,h/=D,Q/=D),o*h<s*l&&(o=-o,s=-s,Q=-Q,P=-P),{translateX:w,translateY:T,rotate:Math.atan2(s,o)*Wn,skewX:Math.atan(Q)*Wn,scaleX:P,scaleY:D}}function E(o,s,l,h){function w(K){return K.length?K.pop()+" ":""}return function(K,q){var vt=[],Zt=[];return K=o(K),q=o(q),function T(K,q,vt,Zt,Dt,te){if(K!==vt||q!==Zt){var Dn=Dt.push("translate(",null,s,null,l);te.push({i:Dn-4,x:En(K,vt)},{i:Dn-2,x:En(q,Zt)})}else(vt||Zt)&&Dt.push("translate("+vt+s+Zt+l)}(K.translateX,K.translateY,q.translateX,q.translateY,vt,Zt),function P(K,q,vt,Zt){K!==q?(K-q>180?q+=360:q-K>180&&(K+=360),Zt.push({i:vt.push(w(vt)+"rotate(",null,h)-2,x:En(K,q)})):q&&vt.push(w(vt)+"rotate("+q+h)}(K.rotate,q.rotate,vt,Zt),function D(K,q,vt,Zt){K!==q?Zt.push({i:vt.push(w(vt)+"skewX(",null,h)-2,x:En(K,q)}):q&&vt.push(w(vt)+"skewX("+q+h)}(K.skewX,q.skewX,vt,Zt),function Q(K,q,vt,Zt,Dt,te){if(K!==vt||q!==Zt){var Dn=Dt.push(w(Dt)+"scale(",null,",",null,")");te.push({i:Dn-4,x:En(K,vt)},{i:Dn-2,x:En(q,Zt)})}else(1!==vt||1!==Zt)&&Dt.push(w(Dt)+"scale("+vt+","+Zt+")")}(K.scaleX,K.scaleY,q.scaleX,q.scaleY,vt,Zt),K=q=null,function(Dt){for(var ne,te=-1,Dn=Zt.length;++te<Dn;)vt[(ne=Zt[te]).i]=ne.x(Dt);return vt.join("")}}}var J=E(function k(o){return"none"===o?f:(g||(g=document.createElement("DIV"),_=document.documentElement,v=document.defaultView),g.style.transform=o,o=v.getComputedStyle(_.appendChild(g),null).getPropertyValue("transform"),_.removeChild(g),p(+(o=o.slice(7,-1).split(","))[0],+o[1],+o[2],+o[3],+o[4],+o[5]))},"px, ","px)","deg)"),L=E(function N(o){return null!=o&&(y||(y=document.createElementNS("http://www.w3.org/2000/svg","g")),y.setAttribute("transform",o),o=y.transform.baseVal.consolidate())?p((o=o.matrix).a,o.b,o.c,o.d,o.e,o.f):f},", ",")",")"),H=B(4245);function $(o,s){var l,h;return function(){var w=dn(this,o),T=w.tween;if(T!==l)for(var P=0,D=(h=l=T).length;P<D;++P)if(h[P].name===s){(h=h.slice()).splice(P,1);break}w.tween=h}}function W(o,s,l){var h,w;if("function"!=typeof l)throw new Error;return function(){var T=dn(this,o),P=T.tween;if(P!==h){w=(h=P).slice();for(var D={name:s,value:l},Q=0,K=w.length;Q<K;++Q)if(w[Q].name===s){w[Q]=D;break}Q===K&&w.push(D)}T.tween=w}}function G(o,s,l){var h=o._id;return o.each(function(){var w=dn(this,h);(w.value||(w.value={}))[s]=l.apply(this,arguments)}),function(w){return gn(w,h).value[s]}}function it(o,s,l){o.prototype=s.prototype=l,l.constructor=o}function O(o,s){var l=Object.create(o.prototype);for(var h in s)l[h]=s[h];return l}function gt(){}var pt=1/.7,st="\\s*([+-]?\\d+)\\s*",Ht="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",on=/^#([0-9a-f]{3,8})$/,vn=new RegExp("^rgb\\("+[st,st,st]+"\\)$"),yn=new RegExp("^rgb\\("+[Gt,Gt,Gt]+"\\)$"),An=new RegExp("^rgba\\("+[st,st,st,Ht]+"\\)$"),rn=new RegExp("^rgba\\("+[Gt,Gt,Gt,Ht]+"\\)$"),jt=new RegExp("^hsl\\("+[Ht,Gt,Gt]+"\\)$"),an=new RegExp("^hsla\\("+[Ht,Gt,Gt,Ht]+"\\)$"),Fn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function wn(){return this.rgb().formatHex()}function M(){return this.rgb().formatRgb()}function F(o){var s,l;return o=(o+"").trim().toLowerCase(),(s=on.exec(o))?(l=s[1].length,s=parseInt(s[1],16),6===l?at(s):3===l?new V(s>>8&15|s>>4&240,s>>4&15|240&s,(15&s)<<4|15&s,1):8===l?U(s>>24&255,s>>16&255,s>>8&255,(255&s)/255):4===l?U(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|240&s,((15&s)<<4|15&s)/255):null):(s=vn.exec(o))?new V(s[1],s[2],s[3],1):(s=yn.exec(o))?new V(255*s[1]/100,255*s[2]/100,255*s[3]/100,1):(s=An.exec(o))?U(s[1],s[2],s[3],s[4]):(s=rn.exec(o))?U(255*s[1]/100,255*s[2]/100,255*s[3]/100,s[4]):(s=jt.exec(o))?Un(s[1],s[2]/100,s[3]/100,1):(s=an.exec(o))?Un(s[1],s[2]/100,s[3]/100,s[4]):Fn.hasOwnProperty(o)?at(Fn[o]):"transparent"===o?new V(NaN,NaN,NaN,0):null}function at(o){return new V(o>>16&255,o>>8&255,255&o,1)}function U(o,s,l,h){return h<=0&&(o=s=l=NaN),new V(o,s,l,h)}function j(o){return o instanceof gt||(o=F(o)),o?new V((o=o.rgb()).r,o.g,o.b,o.opacity):new V}function ct(o,s,l,h){return 1===arguments.length?j(o):new V(o,s,l,h??1)}function V(o,s,l,h){this.r=+o,this.g=+s,this.b=+l,this.opacity=+h}function yt(){return"#"+Vt(this.r)+Vt(this.g)+Vt(this.b)}function wt(){var o=this.opacity;return(1===(o=isNaN(o)?1:Math.max(0,Math.min(1,o)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===o?")":", "+o+")")}function Vt(o){return((o=Math.max(0,Math.min(255,Math.round(o)||0)))<16?"0":"")+o.toString(16)}function Un(o,s,l,h){return h<=0?o=s=l=NaN:l<=0||l>=1?o=s=NaN:s<=0&&(o=NaN),new Pn(o,s,l,h)}function Zn(o){if(o instanceof Pn)return new Pn(o.h,o.s,o.l,o.opacity);if(o instanceof gt||(o=F(o)),!o)return new Pn;if(o instanceof Pn)return o;var s=(o=o.rgb()).r/255,l=o.g/255,h=o.b/255,w=Math.min(s,l,h),T=Math.max(s,l,h),P=NaN,D=T-w,Q=(T+w)/2;return D?(P=s===T?(l-h)/D+6*(l<h):l===T?(h-s)/D+2:(s-l)/D+4,D/=Q<.5?T+w:2-T-w,P*=60):D=Q>0&&Q<1?0:P,new Pn(P,D,Q,o.opacity)}function Pn(o,s,l,h){this.h=+o,this.s=+s,this.l=+l,this.opacity=+h}function me(o,s,l){return 255*(o<60?s+(l-s)*o/60:o<180?l:o<240?s+(l-s)*(240-o)/60:s)}function be(o,s,l,h,w){var T=o*o,P=T*o;return((1-3*o+3*T-P)*s+(4-6*T+3*P)*l+(1+3*o+3*T-3*P)*h+P*w)/6}function ue(o){return function(){return o}}function hi(o,s){var l=s-o;return l?function Ae(o,s){return function(l){return o+l*s}}(o,l):ue(isNaN(o)?s:o)}it(gt,F,{copy:function(o){return Object.assign(new this.constructor,this,o)},displayable:function(){return this.rgb().displayable()},hex:wn,formatHex:wn,formatHsl:function m(){return Zn(this).formatHsl()},formatRgb:M,toString:M}),it(V,ct,O(gt,{brighter:function(o){return o=null==o?pt:Math.pow(pt,o),new V(this.r*o,this.g*o,this.b*o,this.opacity)},darker:function(o){return o=null==o?.7:Math.pow(.7,o),new V(this.r*o,this.g*o,this.b*o,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yt,formatHex:yt,formatRgb:wt,toString:wt})),it(Pn,function sn(o,s,l,h){return 1===arguments.length?Zn(o):new Pn(o,s,l,h??1)},O(gt,{brighter:function(o){return o=null==o?pt:Math.pow(pt,o),new Pn(this.h,this.s,this.l*o,this.opacity)},darker:function(o){return o=null==o?.7:Math.pow(.7,o),new Pn(this.h,this.s,this.l*o,this.opacity)},rgb:function(){var o=this.h%360+360*(this.h<0),s=isNaN(o)||isNaN(this.s)?0:this.s,l=this.l,h=l+(l<.5?l:1-l)*s,w=2*l-h;return new V(me(o>=240?o-240:o+120,w,h),me(o,w,h),me(o<120?o+240:o-120,w,h),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var o=this.opacity;return(1===(o=isNaN(o)?1:Math.max(0,Math.min(1,o)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===o?")":", "+o+")")}}));const _i=function o(s){var l=function Ii(o){return 1==(o=+o)?hi:function(s,l){return l-s?function Ie(o,s,l){return o=Math.pow(o,l),s=Math.pow(s,l)-o,l=1/l,function(h){return Math.pow(o+h*s,l)}}(s,l,o):ue(isNaN(s)?l:s)}}(s);function h(w,T){var P=l((w=ct(w)).r,(T=ct(T)).r),D=l(w.g,T.g),Q=l(w.b,T.b),K=hi(w.opacity,T.opacity);return function(q){return w.r=P(q),w.g=D(q),w.b=Q(q),w.opacity=K(q),w+""}}return h.gamma=o,h}(1);function pi(o){return function(s){var P,D,l=s.length,h=new Array(l),w=new Array(l),T=new Array(l);for(P=0;P<l;++P)D=ct(s[P]),h[P]=D.r||0,w[P]=D.g||0,T[P]=D.b||0;return h=o(h),w=o(w),T=o(T),D.opacity=1,function(Q){return D.r=h(Q),D.g=w(Q),D.b=T(Q),D+""}}}pi(function Ve(o){var s=o.length-1;return function(l){var h=l<=0?l=0:l>=1?(l=1,s-1):Math.floor(l*s),w=o[h],T=o[h+1];return be((l-h/s)*s,h>0?o[h-1]:2*w-T,w,T,h<s-1?o[h+2]:2*T-w)}}),pi(function le(o){var s=o.length;return function(l){var h=Math.floor(((l%=1)<0?++l:l)*s);return be((l-h/s)*s,o[(h+s-1)%s],o[h%s],o[(h+1)%s],o[(h+2)%s])}});var Xe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$e=new RegExp(Xe.source,"g");function We(o,s){var h,w,T,l=Xe.lastIndex=$e.lastIndex=0,P=-1,D=[],Q=[];for(o+="",s+="";(h=Xe.exec(o))&&(w=$e.exec(s));)(T=w.index)>l&&(T=s.slice(l,T),D[P]?D[P]+=T:D[++P]=T),(h=h[0])===(w=w[0])?D[P]?D[P]+=w:D[++P]=w:(D[++P]=null,Q.push({i:P,x:En(h,w)})),l=$e.lastIndex;return l<s.length&&(T=s.slice(l),D[P]?D[P]+=T:D[++P]=T),D.length<2?Q[0]?function Ri(o){return function(s){return o(s)+""}}(Q[0].x):function zi(o){return function(){return o}}(s):(s=Q.length,function(K){for(var vt,q=0;q<s;++q)D[(vt=Q[q]).i]=vt.x(K);return D.join("")})}function bn(o,s){var l;return("number"==typeof s?En:s instanceof F?_i:(l=F(s))?(s=l,_i):We)(o,s)}function di(o){return function(){this.removeAttribute(o)}}function Qi(o){return function(){this.removeAttributeNS(o.space,o.local)}}function Pe(o,s,l){var h,T,w=l+"";return function(){var P=this.getAttribute(o);return P===w?null:P===h?T:T=s(h=P,l)}}function Si(o,s,l){var h,T,w=l+"";return function(){var P=this.getAttributeNS(o.space,o.local);return P===w?null:P===h?T:T=s(h=P,l)}}function gi(o,s,l){var h,w,T;return function(){var P,Q,D=l(this);return null==D?void this.removeAttribute(o):(P=this.getAttribute(o))===(Q=D+"")?null:P===h&&Q===w?T:(w=Q,T=s(h=P,D))}}function He(o,s,l){var h,w,T;return function(){var P,Q,D=l(this);return null==D?void this.removeAttributeNS(o.space,o.local):(P=this.getAttributeNS(o.space,o.local))===(Q=D+"")?null:P===h&&Q===w?T:(w=Q,T=s(h=P,D))}}function qi(o,s){return function(l){this.setAttribute(o,s.call(this,l))}}function mi(o,s){return function(l){this.setAttributeNS(o.space,o.local,s.call(this,l))}}function Fi(o,s){var l,h;function w(){var T=s.apply(this,arguments);return T!==h&&(l=(h=T)&&mi(o,T)),l}return w._value=s,w}function xe(o,s){var l,h;function w(){var T=s.apply(this,arguments);return T!==h&&(l=(h=T)&&qi(o,T)),l}return w._value=s,w}function Te(o,s){return function(){qn(this,o).delay=+s.apply(this,arguments)}}function xi(o,s){return s=+s,function(){qn(this,o).delay=s}}function ke(o,s){return function(){dn(this,o).duration=+s.apply(this,arguments)}}function Re(o,s){return s=+s,function(){dn(this,o).duration=s}}function Qe(o,s){if("function"!=typeof s)throw new Error;return function(){dn(this,o).ease=s}}var vi=B(6762);function yi(o,s,l){var h,w,T=function Se(o){return(o+"").trim().split(/^|\s+/).every(function(s){var l=s.indexOf(".");return l>=0&&(s=s.slice(0,l)),!s||"start"===s})}(s)?qn:dn;return function(){var P=T(this,o),D=P.on;D!==h&&(w=(h=D).copy()).on(s,l),P.on=w}}var Ki=B(9425),bi=B(794),Xi=ot.ZP.prototype.constructor,ve=B(6);function Ne(o){return function(){this.style.removeProperty(o)}}function ii(o,s,l){return function(h){this.style.setProperty(o,s.call(this,h),l)}}function On(o,s,l){var h,w;function T(){var P=s.apply(this,arguments);return P!==w&&(h=(w=P)&&ii(o,P,l)),h}return T._value=s,T}function jn(o){return function(s){this.textContent=o.call(this,s)}}function Zi(o){var s,l;function h(){var w=o.apply(this,arguments);return w!==l&&(s=(l=w)&&jn(w)),s}return h._value=o,h}var tr=0;function Yn(o,s,l,h){this._groups=o,this._parents=s,this._name=l,this._id=h}function oi(o){return(0,ot.ZP)().transition(o)}function ki(){return++tr}var ye=ot.ZP.prototype;Yn.prototype=oi.prototype={constructor:Yn,select:function ti(o){var s=this._name,l=this._id;"function"!=typeof o&&(o=(0,Ki.Z)(o));for(var h=this._groups,w=h.length,T=new Array(w),P=0;P<w;++P)for(var q,vt,D=h[P],Q=D.length,K=T[P]=new Array(Q),Zt=0;Zt<Q;++Zt)(q=D[Zt])&&(vt=o.call(q,q.__data__,Zt,D))&&("__data__"in q&&(vt.__data__=q.__data__),K[Zt]=vt,Rn(K[Zt],s,l,Zt,K,gn(q,l)));return new Yn(T,this._parents,s,l)},selectAll:function Vi(o){var s=this._name,l=this._id;"function"!=typeof o&&(o=(0,bi.Z)(o));for(var h=this._groups,w=h.length,T=[],P=[],D=0;D<w;++D)for(var q,Q=h[D],K=Q.length,vt=0;vt<K;++vt)if(q=Q[vt]){for(var Dt,Zt=o.call(q,q.__data__,vt,Q),te=gn(q,l),Dn=0,ne=Zt.length;Dn<ne;++Dn)(Dt=Zt[Dn])&&Rn(Dt,s,l,Dn,Zt,te);T.push(Zt),P.push(q)}return new Yn(T,P,s,l)},filter:function je(o){"function"!=typeof o&&(o=(0,vi.Z)(o));for(var s=this._groups,l=s.length,h=new Array(l),w=0;w<l;++w)for(var Q,T=s[w],P=T.length,D=h[w]=[],K=0;K<P;++K)(Q=T[K])&&o.call(Q,Q.__data__,K,T)&&D.push(Q);return new Yn(h,this._parents,this._name,this._id)},merge:function Oi(o){if(o._id!==this._id)throw new Error;for(var s=this._groups,l=o._groups,h=s.length,T=Math.min(h,l.length),P=new Array(h),D=0;D<T;++D)for(var Zt,Q=s[D],K=l[D],q=Q.length,vt=P[D]=new Array(q),Dt=0;Dt<q;++Dt)(Zt=Q[Dt]||K[Dt])&&(vt[Dt]=Zt);for(;D<h;++D)P[D]=s[D];return new Yn(P,this._parents,this._name,this._id)},selection:function Ai(){return new Xi(this._groups,this._parents)},transition:function Ti(){for(var o=this._name,s=this._id,l=ki(),h=this._groups,w=h.length,T=0;T<w;++T)for(var Q,P=h[T],D=P.length,K=0;K<D;++K)if(Q=P[K]){var q=gn(Q,s);Rn(Q,o,l,K,P,{time:q.time+q.delay+q.duration,delay:0,duration:q.duration,ease:q.ease})}return new Yn(h,this._parents,o,l)},call:ye.call,nodes:ye.nodes,node:ye.node,size:ye.size,empty:ye.empty,each:ye.each,on:function Yi(o,s){var l=this._id;return arguments.length<2?gn(this.node(),l).on.on(o):this.each(yi(l,o,s))},attr:function Gi(o,s){var l=(0,H.Z)(o),h="transform"===l?L:bn;return this.attrTween(o,"function"==typeof s?(l.local?He:gi)(l,h,G(this,"attr."+o,s)):null==s?(l.local?Qi:di)(l):(l.local?Si:Pe)(l,h,s))},attrTween:function Ze(o,s){var l="attr."+o;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(null==s)return this.tween(l,null);if("function"!=typeof s)throw new Error;var h=(0,H.Z)(o);return this.tween(l,(h.local?Fi:xe)(h,s))},style:function qe(o,s,l){var h="transform"==(o+="")?J:bn;return null==s?this.styleTween(o,function ni(o,s){var l,h,w;return function(){var T=(0,ve.S)(this,o),P=(this.style.removeProperty(o),(0,ve.S)(this,o));return T===P?null:T===l&&P===h?w:w=s(l=T,h=P)}}(o,h)).on("end.style."+o,Ne(o)):"function"==typeof s?this.styleTween(o,function ei(o,s,l){var h,w,T;return function(){var P=(0,ve.S)(this,o),D=l(this),Q=D+"";return null==D&&(this.style.removeProperty(o),Q=D=(0,ve.S)(this,o)),P===Q?null:P===h&&Q===w?T:(w=Q,T=s(h=P,D))}}(o,h,G(this,"style."+o,s))).each(function Ge(o,s){var l,h,w,D,T="style."+s,P="end."+T;return function(){var Q=dn(this,o),K=Q.on,q=null==Q.value[T]?D||(D=Ne(s)):void 0;(K!==l||w!==q)&&(h=(l=K).copy()).on(P,w=q),Q.on=h}}(this._id,o)):this.styleTween(o,function Pi(o,s,l){var h,T,w=l+"";return function(){var P=(0,ve.S)(this,o);return P===w?null:P===h?T:T=s(h=P,l)}}(o,h,s),l).on("end.style."+o,null)},styleTween:function Qn(o,s,l){var h="style."+(o+="");if(arguments.length<2)return(h=this.tween(h))&&h._value;if(null==s)return this.tween(h,null);if("function"!=typeof s)throw new Error;return this.tween(h,On(o,s,l??""))},text:function ji(o){return this.tween("text","function"==typeof o?function Wi(o){return function(){var s=o(this);this.textContent=s??""}}(G(this,"text",o)):function $i(o){return function(){this.textContent=o}}(null==o?"":o+""))},textTween:function ri(o){var s="text";if(arguments.length<1)return(s=this.tween(s))&&s._value;if(null==o)return this.tween(s,null);if("function"!=typeof o)throw new Error;return this.tween(s,Zi(o))},remove:function Bi(){return this.on("end.remove",function wi(o){return function(){var s=this.parentNode;for(var l in this.__transition)if(+l!==o)return;s&&s.removeChild(this)}}(this._id))},tween:function S(o,s){var l=this._id;if(o+="",arguments.length<2){for(var P,h=gn(this.node(),l).tween,w=0,T=h.length;w<T;++w)if((P=h[w]).name===o)return P.value;return null}return this.each((null==s?$:W)(l,o,s))},delay:function ze(o){var s=this._id;return arguments.length?this.each(("function"==typeof o?Te:xi)(s,o)):gn(this.node(),s).delay},duration:function ce(o){var s=this._id;return arguments.length?this.each(("function"==typeof o?ke:Re)(s,o)):gn(this.node(),s).duration},ease:function Me(o){var s=this._id;return arguments.length?this.each(Qe(s,o)):gn(this.node(),s).ease},end:function Fe(){var o,s,l=this,h=l._id,w=l.size();return new Promise(function(T,P){var D={value:P},Q={value:function(){0==--w&&T()}};l.each(function(){var K=dn(this,h),q=K.on;q!==o&&((s=(o=q).copy())._.cancel.push(D),s._.interrupt.push(D),s._.end.push(Q)),K.on=s})})}};var Je={time:null,delay:0,duration:250,ease:function nr(o){return((o*=2)<=1?o*o*o:(o-=2)*o*o+2)/2}};function ai(o,s){for(var l;!(l=o.__transition)||!(l=l[s]);)if(!(o=o.parentNode))return Je.time=hn(),Je;return l}ot.ZP.prototype.interrupt=function ge(o){return this.each(function(){se(this,o)})},ot.ZP.prototype.transition=function Mi(o){var s,l;o instanceof Yn?(s=o._id,o=o._name):(s=ki(),(l=Je).time=hn(),o=null==o?null:o+"");for(var h=this._groups,w=h.length,T=0;T<w;++T)for(var Q,P=h[T],D=P.length,K=0;K<D;++K)(Q=P[K])&&Rn(Q,o,s,K,P,l||ai(Q,s));return new Yn(h,this._parents,o,s)};var Ce=[null];function Ee(o,s){var h,w,l=o.__transition;if(l)for(w in s=null==s?null:s+"",l)if((h=l[w]).state>1&&h.name===s)return new Yn([[o]],Ce,s,+w);return null}}}]);
//# sourceMappingURL=5654.10de1a0401c8eef1.js.map