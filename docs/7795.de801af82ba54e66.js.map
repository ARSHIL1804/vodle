{"version":3,"mappings":"gOAwBA,MAAMA,EAAiB,CACrB,CACEC,KAAM,GACNC,UCMJ,MAAM,QAEJC,YACUC,EACDC,EACAC,EACAC,GAHCC,gBACDA,iBACAA,iBACAA,SAGTC,WACED,KAAKD,EAAEG,EAAEC,MAAM,0BAGjBC,mBACEJ,KAAKD,EAAEG,EAAEC,MAAM,kCACfH,KAAKD,EAAEM,EAAEC,aAGXC,kBACEP,KAAKD,EAAEG,EAAEC,MAAM,iCAEXH,KAAKD,EAAEM,EAAEG,OACXR,KAAKS,iBAITC,cAEEV,KAAKD,EAAEG,EAAEC,MAAM,6BAGjBQ,kBACEX,KAAKD,EAAEG,EAAEC,MAAM,iCAGXM,2EACiBT,KAAKH,UAAUe,OAAO,CACzCC,OAAQb,KAAKF,UAAUgB,QAAQ,6BAC/BC,QAASf,KAAKF,UAAUgB,QAAQ,4BAChCE,QAAS,CACP,CACEC,KAAMjB,KAAKF,UAAUgB,QAAQ,UAC7BI,KAAM,SACNC,QAAS,KACPnB,KAAKD,EAAEG,EAAEkB,MAAM,uCAEfpB,KAAKJ,SAASyB,SAGlB,CACEJ,KAAMjB,KAAKF,UAAUgB,QAAQ,6BAC7BI,KAAM,KACNI,SAAU,4BACVH,QAAS,KACPnB,KAAKD,EAAEG,EAAEkB,MAAM,uCAEfpB,KAAKD,EAAEM,EAAEkB,aAAaC,KAAK,KAGzBC,aAA4B,CAAEC,cAAe,CAAC,CAAEC,GAAI,KAClDC,MAAO5B,KAAKF,UAAUgB,QAAQ,4BAC9Be,KAAM7B,KAAKF,UAAUgB,QAAQ,+BAE/BgB,OAAOlC,SAASmC,OAAO,yBACtBC,MAAMC,IACPR,aAA4B,CAAEC,cAAe,CAAC,CAAEC,GAAI,KAChDC,MAAO5B,KAAKF,UAAUgB,QAAQ,qBAC9Be,KAAM,SAGV7B,KAAKJ,SAASyB,eAMXa,0DA5EJC,GAAaC,yEAAbD,EAAaE,oMCT1BD,sBAAY,kBAAZA,CAAY,mBAGNA,2BACFA,QACAA,4CACAA,2BACEA,qBACFA,YAIJA,8BAPeA,wJDIFD,GAAb,KDEO,IAAMG,EAAb,MAAM,sDAAOA,4DAHF,CAACC,cAAsB/C,IACtB+C,QAECD,GAAb,GGKaE,EAAb,MAAM,sDAAOA,4DATF,CACPC,KACAC,KACAC,KACAL,EACAM,oBAISJ,GAAb","names":["routes","path","component","constructor","location","alertCtrl","translate","G","this","ngOnInit","L","entry","ionViewWillEnter","D","save_state","ionViewDidEnter","ready","confirm_dialog","onDataReady","ionViewDidLeave","create","header","instant","message","buttons","text","role","handler","trace","back","cssClass","delete_all","then","LocalNotifications","notifications","id","title","body","window","assign","catch","error","present","DeleteAllPage","i0","selectors","DeleteAllPageRoutingModule","RouterModule","DeleteAllPageModule","CommonModule","FormsModule","IonicModule","TranslateModule"],"sources":["./src/app/delete-all/delete-all-routing.module.ts","./src/app/delete-all/delete-all.page.ts","./src/app/delete-all/delete-all.page.html","./src/app/delete-all/delete-all.module.ts"],"sourcesContent":["/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK) authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DeleteAllPage } from './delete-all.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DeleteAllPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DeleteAllPageRoutingModule {}\n","/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK) authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { Component, OnInit } from '@angular/core';\nimport { Location } from '@angular/common'\nimport { TranslateService } from '@ngx-translate/core';\nimport { AlertController } from '@ionic/angular';\n\nimport { LocalNotifications } from '@capacitor/local-notifications';\n\nimport { GlobalService } from \"../global.service\";\n\n@Component({\n  selector: 'app-delete-all',\n  templateUrl: './delete-all.page.html',\n  styleUrls: ['./delete-all.page.scss'],\n})\nexport class DeleteAllPage implements OnInit {\n\n  constructor(\n    private location: Location,\n    public alertCtrl: AlertController,\n    public translate: TranslateService,\n    public G: GlobalService) { \n  }\n\n  ngOnInit() {\n    this.G.L.entry(\"DeleteAllPage.ngOnInit\");\n  }\n  \n  ionViewWillEnter() {\n    this.G.L.entry(\"DeleteAllPage.ionViewWillEnter\");\n    this.G.D.save_state();\n  }\n\n  ionViewDidEnter() {\n    this.G.L.entry(\"DeleteAllPage.ionViewDidEnter\");\n    // TODO: query whether really want to delete all:\n    if (this.G.D.ready) {\n      this.confirm_dialog();\n    }\n  }\n\n  onDataReady() {\n    // called when DataService initialization was slower than view initialization\n    this.G.L.entry(\"DeleteAllPage.onDataReady\");\n  }\n\n  ionViewDidLeave() {\n    this.G.L.entry(\"DeleteAllPage.ionViewDidLeave\");\n  }\n\n  async confirm_dialog() {\n    const dialog = await this.alertCtrl.create({ \n      header: this.translate.instant('delete-all.confirm-header'), \n      message: this.translate.instant('delete-all.confirm-intro'), \n      buttons: [\n        { \n          text: this.translate.instant('cancel'), \n          role: 'cancel',\n          handler: () => { \n            this.G.L.trace('DeleteAllPage.confirm_dialog cancel');\n            // TODO: navigate back\n            this.location.back();\n          } \n        },\n        { \n          text: this.translate.instant('delete-all.confirm-button'),\n          role: 'ok', \n          cssClass: 'delete-all-confirm-button',\n          handler: () => {\n            this.G.L.trace('DeleteAllPage.confirm_dialog delete');\n            // clear all local storage:\n            this.G.D.delete_all().then(() => {\n              // now reload page, which will reinit the app and redirect us to the login page\n              // (at least in browsers – what about native apps?):\n              LocalNotifications.schedule({ notifications: [{ id: null,\n                title: this.translate.instant(\"delete-all.success-title\"),\n                body: this.translate.instant(\"delete-all.success-body\"),\n              }]});\n              window.location.assign(\"http://www.vodle.it\");\n            }).catch(error => {\n              LocalNotifications.schedule({ notifications: [{ id: null,\n                  title: this.translate.instant(\"delete-all.failed\"),\n                  body: null\n              }]});\n              // go back to previous page:\n              this.location.back();\n            })\n          } \n        } \n      ] \n    }); \n    await dialog.present(); \n  }\n\n}\n","<!--\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK) authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n-->\n\n<!--\nTODO:\n- offer to show email and password\n-->\n\n<ion-header>\n  <ion-toolbar style=\"padding-right:11px;\">\n    <ion-buttons slot=\"start\">\n      <ion-menu-button></ion-menu-button>\n    </ion-buttons>\n    <ion-title [innerHtml]=\"'delete-all.-page-title'|translate\"></ion-title>\n    <ion-thumbnail slot=\"end\">\n      <ion-img src=\"./assets/topright_icon.png\"></ion-img>\n    </ion-thumbnail>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n</ion-content>\n","/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK) authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DeleteAllPageRoutingModule } from './delete-all-routing.module';\n\nimport { DeleteAllPage } from './delete-all.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DeleteAllPageRoutingModule,\n    TranslateModule.forChild()\n  ],\n  declarations: [DeleteAllPage]\n})\nexport class DeleteAllPageModule {}\n"],"sourceRoot":"webpack:///","file":"7795.de801af82ba54e66.js"}